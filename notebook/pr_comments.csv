id,number,pr_author,date,author,body
963318046,15146,fajb,2021-11-08 16:16:59,SkySkimmer,"https://gitlab.inria.fr/fbesson/itauto/-/blob/master/Makefile looks a bit complex, I guess to handle the extraction step"
963374598,15146,fajb,2021-11-08 17:09:18,fajb,"@SkySkimmer  You are right. I could not think of a better way than 2 coq_makefile invocations.\nAlso, I am patching the extracted code. As this is just for debugging purposes, this stage could be skipped and simplify a bit the Makefile. I'll look into it.\nPS: It see that the compilation fails because of Stdlib. Does the plugin need to compile with OCaml <  4.07? Can a ocaml version be specified?"
963461394,15146,fajb,2021-11-08 18:41:26,SkySkimmer,you can use ci-template-flambda to get a newer ocaml
963479027,15146,fajb,2021-11-08 19:01:57,coqbot-app,"Hey, I have detected that there were CI failures at commit 0c8ed48 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 30683ee succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-flocq (because base job at 30683ee failed)"
963972100,15146,fajb,2021-11-09 09:33:27,coqbot-app,"Hey, I have detected that there were CI failures at commit 0c8ed48 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 30683ee succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-flocq (because base job at 30683ee failed)"
963983256,15146,fajb,2021-11-09 09:48:10,coqbot-app,"Hey, I have detected that there were CI failures at commit 0c8ed48 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 30683ee succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-flocq (because base job at 30683ee failed)"
964008588,15146,fajb,2021-11-09 10:19:21,Zimmi48,FWIW @palmskog has some experience with projects using extraction and his solution lately has been to rely on Dune.
964012143,15146,fajb,2021-11-09 10:23:19,coqbot-app,"Hey, I have detected that there were CI failures at commit 0c8ed48 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 30683ee succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-flocq (because base job at 30683ee failed)"
964013536,15146,fajb,2021-11-09 10:25:08,palmskog,"Right, I have used Dune successfully to build the Stalmarck library+plugin, where the plugin uses code extracted from the library. The relevant Dune file is here.\n@fajb would you consider adding a Dune build to your project? If so, I can take an initial look at it later today. I think the Makefile build could still be left in place."
964144060,15146,fajb,2021-11-09 13:18:59,fajb,"@palmskog I have no knowledge of dune. If this simplifies things, that's good for me."
964316860,15146,fajb,2021-11-09 16:27:45,coqbot-app,"Hey, I have detected that there were CI failures at commit 392c114 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 21e1997 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-flocq (because base job at 21e1997 failed)"
964998669,15146,fajb,2021-11-10 10:32:40,JasonGross,"Regarding the Makefile, I think if you stick src/prover.ml: | theories/Prover.vo in CoqMakefile.local, along with any other compilation / patching targets not covered by coq_makefile, that might be enough to let you combine the two coq_makefile invocations into one.  I believe this will have the effect of demanding that theories/Prover.vo be up to date before considering any target that depends on src/prover.ml, which I think should be the behavior you want.  I'm not completely sure, though."
965537356,15146,fajb,2021-11-10 16:49:44,fajb,@Alizter I'am happy now. It compiles... dune can wait. Thanks
965668902,15146,fajb,2021-11-10 19:27:08,Alizter,Excellent will merge tomorrow
892357254,14741,JasonGross,2021-08-04 04:40:06,JasonGross,@coqbot ci minimize ci-fiat_crypto
892357260,14741,JasonGross,2021-08-04 04:40:07,coqbot-app,"I was unable to minimize any of the CI targets that you requested.\nHowever, you may want to try again once the pipeline for the head commit (2827467) finishes.\nlibrary:ci-fiat_crypto could not be minimized (Job library:ci-fiat_crypto is still in progress.)"
892421540,14741,JasonGross,2021-08-04 07:10:36,coqbot-app,"Hey, I have detected that there were CI failures at commit 2827467 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a41c99a succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-fiat_crypto."
892543297,14741,JasonGross,2021-08-04 10:21:26,JasonGross,@coqbot ci minimize  ci-fiat_crypto
892543358,14741,JasonGross,2021-08-04 10:21:32,coqbot-app,I am now running minimization at commit 2827467 on requested target ci-fiat_crypto. I'll come back to you with the results once it's done.
892762522,14741,JasonGross,2021-08-04 15:38:28,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Curves/Weierstrass/Projective.v (from ci-fiat_crypto) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 36KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pa"
892809568,14741,JasonGross,2021-08-04 16:43:38,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Curves/Weierstrass/Projective.v (from ci-fiat_crypto) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 34KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+variable-collision,+omega-is-deprecated,+deprecat"
917781207,14741,JasonGross,2021-09-13 02:13:27,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
941850938,14741,JasonGross,2021-10-13 02:16:38,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
966765958,14741,JasonGross,2021-11-12 02:18:46,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
893835709,14748,JasonGross,2021-08-05 22:01:30,coqbot-app,"Hey, I have detected that there were CI failures at commit 77e3367 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 3fd62a8 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-color, ci-hott, ci-mathcomp, ci-mtac2, ci-relation_algebra, ci-rewriter, ci-unimath."
898896078,14748,JasonGross,2021-08-14 13:41:48,JasonGross,@coqbot ci minimize ci-hott
898896082,14748,JasonGross,2021-08-14 13:41:49,coqbot-app,I am now running minimization at commit 77e3367 on requested target ci-hott. I'll come back to you with the results once it's done.
898896464,14748,JasonGross,2021-08-14 13:45:05,coqbot-app,Error: Could not minimize file  (from ci-hott) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.8MiB file on GitHub Actions Artifacts under build.log)\nng: _build_ci/hott/theories/Spaces/No.vok  \n  inflating: _build_ci/hott/theories/Spaces/No.vos  \n  inflating: _build_ci/hott/theories/Spaces/No/.Addition.aux  \n  inflating: _build_ci/hott/theories/Spaces/No/.Core.aux  \n  inflating: _build_ci/hott/theories/Spaces/No/.Negation.aux  \n  inflating: _build_ci/hott/theories/Spaces/
898909603,14748,JasonGross,2021-08-14 15:41:17,coqbot-app,"Hey, I have detected that there were CI failures at commit 011dce7 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a0460b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-category_theory, ci-color, ci-hott, ci-mathcomp, ci-mtac2, ci-relation_algebra, ci-rewriter, ci-unimath."
898911606,14748,JasonGross,2021-08-14 15:58:34,JasonGross,@coqbot ci minimize ci-hott
898911609,14748,JasonGross,2021-08-14 15:58:35,coqbot-app,I am now running minimization at commit 011dce7 on requested target ci-hott. I'll come back to you with the results once it's done.
898937269,14748,JasonGross,2021-08-14 17:54:08,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Homotopy/ClassifyingSpace.v (from ci-hott) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hott/theories"" ""HoTT"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_bui"
940573383,14748,JasonGross,2021-10-12 01:13:39,JasonGross,@coqbot ci minimize ci-hott
940573424,14748,JasonGross,2021-10-12 01:13:45,coqbot-app,I am now running minimization at commit 011dce7 on requested target ci-hott. I'll come back to you with the results once it's done.
940583728,14748,JasonGross,2021-10-12 01:43:38,JasonGross,@coqbot ci minimize ci-hott
940583748,14748,JasonGross,2021-10-12 01:43:40,coqbot-app,I am now running minimization at commit 011dce7 on requested target ci-hott. I'll come back to you with the results once it's done.
940726506,14748,JasonGross,2021-10-12 07:07:13,Zimmi48,@coqbot ci minimize ci-hott
940726535,14748,JasonGross,2021-10-12 07:07:15,coqbot-app,I am now running minimization at commit 011dce7 on requested target ci-hott. I'll come back to you with the results once it's done.
940728649,14748,JasonGross,2021-10-12 07:10:39,coqbot-app,Error: Could not minimize file  (from ci-hott) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.8MiB file on GitHub Actions Artifacts under build.log)\n\n  inflating: _build_ci/hott/theories/Spaces/No.vok  \n  inflating: _build_ci/hott/theories/Spaces/No.vos  \n  inflating: _build_ci/hott/theories/Spaces/No/.Addition.aux  \n  inflating: _build_ci/hott/theories/Spaces/No/.Core.aux  \n  inflating: _build_ci/hott/theories/Spaces/No/.Negation.aux  \n  inflating: _build_ci/hott/theori
940731696,14748,JasonGross,2021-10-12 07:15:12,Zimmi48,The builds are probably too old for the artifacts to be still there.
940818790,14748,JasonGross,2021-10-12 09:10:02,coqbot-app,"Hey, I have detected that there were CI failures at commit 011dce7 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a0460b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-category_theory, ci-color, ci-hott, ci-mathcomp, ci-mtac2, ci-relation_algebra, ci-rewriter, ci-unimath."
940830596,14748,JasonGross,2021-10-12 09:24:16,Zimmi48,@coqbot ci minimize ci-hott
940830621,14748,JasonGross,2021-10-12 09:24:18,coqbot-app,I am now running minimization at commit 011dce7 on requested target ci-hott. I'll come back to you with the results once it's done.
940833834,14748,JasonGross,2021-10-12 09:28:20,coqbot-app,Error: Could not minimize file  (from ci-hott) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.8MiB file on GitHub Actions Artifacts under build.log)\n\n  inflating: _build_ci/hott/theories/Spaces/No.vok  \n  inflating: _build_ci/hott/theories/Spaces/No.vos  \n  inflating: _build_ci/hott/theories/Spaces/No/.Addition.aux  \n  inflating: _build_ci/hott/theories/Spaces/No/.Core.aux  \n  inflating: _build_ci/hott/theories/Spaces/No/.Negation.aux  \n  inflating: _build_ci/hott/theori
940849865,14748,JasonGross,2021-10-12 09:49:54,Zimmi48,"The error comes from the fact that the base sha is too old. We might have a problem here given that this reveals an inconsistency between the base commit as obtained from the GitHub API by coqbot (1a0460b) and the actual base commit with which the PR head was merged and built (0354fc3). I don't know if this problem can also occur outside the close / reopen case, but this is conceivable. Maybe we should store the base commit in the GitHub Checks tab, along with other information that we rely on."
952410719,14748,JasonGross,2021-10-26 23:35:40,coqbot-app,"Hey, I have detected that there were CI failures at commit ef16241 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 12cb782 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-category_theory, ci-color, ci-hott, ci-mathcomp, ci-mtac2, ci-relation_algebra, ci-rewriter, ci-unimath."
952430813,14748,JasonGross,2021-10-27 00:20:31,JasonGross,@coqbot ci minimize
952430904,14748,JasonGross,2021-10-27 00:20:43,coqbot-app,"I have initiated minimization at commit ef16241 for the suggested targets ci-category_theory, ci-color, ci-hott, ci-mathcomp, ci-mtac2, ci-relation_algebra, ci-rewriter, ci-unimath as requested."
952432421,14748,JasonGross,2021-10-27 00:24:57,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/relation_algebra/atoms.v (from ci-relation_algebra) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(*******************************************************************)\n(*  This is part of RelationAlgebra, it is distributed und"
952433049,14748,JasonGross,2021-10-27 00:26:29,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False : Pr"
952433100,14748,JasonGross,2021-10-27 00:26:36,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mtac2/theories/intf/MTele.v (from ci-mtac2) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-bt"" ""-w"" ""-unrecognized-unicode"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/gith"
952447065,14748,JasonGross,2021-10-27 00:57:57,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/color/Coccinelle/term_orderings/modular_dp.v (from ci-color) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/build"
952447484,14748,JasonGross,2021-10-27 00:58:56,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/unimath/UniMath/MoreFoundations/PartA.v (from ci-unimath) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-type-in-type"" ""-w"" ""-notation-overridden"" ""-"
952460015,14748,JasonGross,2021-10-27 01:30:24,JasonGross,"@coqbot ci minimize ci-category_theory,, ci-relation_algebra,"
952460037,14748,JasonGross,2021-10-27 01:30:27,coqbot-app,"I am now running minimization at commit ef16241 on requested targets ci-category_theory, ci-relation_algebra. I'll come back to you with the results once it's done."
952461559,14748,JasonGross,2021-10-27 01:34:53,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/relation_algebra/atoms.v (from ci-relation_algebra) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(*******************************************************************)\n(*  This is part of RelationAlgebra, it is distributed und"
952462002,14748,JasonGross,2021-10-27 01:36:10,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False : Pr"
952464425,14748,JasonGross,2021-10-27 01:43:06,JasonGross,"@coqbot ci minimize ci-category_theory,, ci-relation_algebra,"
952464438,14748,JasonGross,2021-10-27 01:43:09,coqbot-app,"I am now running minimization at commit ef16241 on requested targets ci-category_theory, ci-relation_algebra. I'll come back to you with the results once it's done."
952466355,14748,JasonGross,2021-10-27 01:47:50,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/relation_algebra/atoms.v (from ci-relation_algebra) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(*******************************************************************)\n(*  This is part of RelationAlgebra, it is distributed und"
952466573,14748,JasonGross,2021-10-27 01:48:22,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False : Pr"
952468937,14748,JasonGross,2021-10-27 01:54:43,JasonGross,"@coqbot ci minimize ci-category_theory,, ci-relation_algebra,"
952468950,14748,JasonGross,2021-10-27 01:54:45,coqbot-app,"I am now running minimization at commit ef16241 on requested targets ci-category_theory, ci-relation_algebra. I'll come back to you with the results once it's done."
952478226,14748,JasonGross,2021-10-27 02:17:15,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/relation_algebra/atoms.v (from ci-relation_algebra) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-notation-overridden"" ""-w"" ""-redundant"
952520236,14748,JasonGross,2021-10-27 04:08:46,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Homotopy/ClassifyingSpace.v (from ci-hott) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" "
952554665,14748,JasonGross,2021-10-27 05:37:35,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 92KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog"
952554748,14748,JasonGross,2021-10-27 05:37:49,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/rewriter/src/Rewriter/Rewriter/Reify.v (from ci-rewriter) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 43KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: ("
952606930,14748,JasonGross,2021-10-27 07:11:51,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-"
953409425,14748,JasonGross,2021-10-28 00:39:06,JasonGross,@coqbot ci minimize ci-category_theory ci-rewriter ci-mathcomp
953409451,14748,JasonGross,2021-10-28 00:39:10,coqbot-app,"I am now running minimization at commit ef16241 on requested targets ci-category_theory, ci-rewriter, ci-mathcomp. I'll come back to you with the results once it's done."
953525315,14748,JasonGross,2021-10-28 05:56:00,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-"
953525418,14748,JasonGross,2021-10-28 05:56:13,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/rewriter/src/Rewriter/Rewriter/Reify.v (from ci-rewriter) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 51KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: ("
953525425,14748,JasonGross,2021-10-28 05:56:14,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 128KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-pro"
953721294,14748,JasonGross,2021-10-28 10:35:46,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/rewriter/src/Rewriter/Rewriter/Reify.v (from ci-rewriter) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 44KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in"
963335751,15143,ppedrot,2021-11-08 16:30:10,coqbot-app,"Hey, I have detected that there were CI failures at commit b64a171 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8fa85c0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-flocq (because base job at 8fa85c0 failed)"
870669670,14579,JasonGross,2021-06-29 14:51:35,JasonGross,Now taking a look at #13107
870699611,14579,JasonGross,2021-06-29 15:28:53,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
870944974,14579,JasonGross,2021-06-29 21:55:39,JasonGross,@coqbot ci minimize ci-cross_crypto
870945006,14579,JasonGross,2021-06-29 21:55:43,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-cross_crypto. I'll come back to you with the results once it's done.
870946946,14579,JasonGross,2021-06-29 21:59:05,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/cross_crypto/src/Minimalistic.v (from ci-cross_crypto) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 122KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.Logic.Eqdep_d"
872585839,14579,JasonGross,2021-07-01 22:21:19,JasonGross,@coqbot ci minimize ci-coq_performance_tests
872585867,14579,JasonGross,2021-07-01 22:21:23,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
872587671,14579,JasonGross,2021-07-01 22:26:10,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq."
872626211,14579,JasonGross,2021-07-02 00:17:42,JasonGross,@coqbot CI minimize  ci-bedrock2 ci-tlc
872626236,14579,JasonGross,2021-07-02 00:17:48,coqbot-app,"I am now running minimization at commit c6473ba on requested targets ci-bedrock2, ci-tlc. I'll come back to you with the results once it's done."
872631277,14579,JasonGross,2021-07-02 00:32:23,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil/Map/Properties.v (from ci-bedrock2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil"" ""coqutil"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-fail"
872644171,14579,JasonGross,2021-07-02 01:14:30,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/tlc/src/LibFix.v (from ci-tlc) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-implicit-core-hint-db,-omega-is-deprecated"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/tlc/src"" ""TLC"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq"
872680422,14579,JasonGross,2021-07-02 03:11:50,JasonGross,@coqbot CI minimize  ci-bedrock2
872680471,14579,JasonGross,2021-07-02 03:11:58,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-bedrock2. I'll come back to you with the results once it's done.
872685222,14579,JasonGross,2021-07-02 03:26:28,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil/Map/Properties.v (from ci-bedrock2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil"" ""coqutil"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-fail"
873028950,14579,JasonGross,2021-07-02 14:10:44,JasonGross,"@coqbot resume ci minimize ci-bedrock2\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil"" ""coqutil"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-top"" ""Properties"" ""-async-proofs-tac-j"" ""1"" ""-native-compiler"" ""no"") -*- *)\n(* File reduced by coq-bug-finder from original input, then f"
873029036,14579,JasonGross,2021-07-02 14:10:53,coqbot-app,I am now resuming minimization at commit c6473ba on requested target ci-bedrock2. I'll come back to you with the results once it's done.
873035142,14579,JasonGross,2021-07-02 14:19:49,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil/Map/Properties.v (from ci-bedrock2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil"" ""coqutil"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-fail"
873192940,14579,JasonGross,2021-07-02 18:45:41,JasonGross,@coqbot ci minimize ci-coq_performance_tests
873192997,14579,JasonGross,2021-07-02 18:45:46,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
873197984,14579,JasonGross,2021-07-02 18:51:46,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq."
873239577,14579,JasonGross,2021-07-02 20:23:43,JasonGross,@coqbot ci minimizer ci-coq_performance_tests
873239606,14579,JasonGross,2021-07-02 20:23:46,coqbot-app,"I am now running minimization at commit c6473ba on requested targets r, ci-coq_performance_tests. I'll come back to you with the results once it's done."
873242054,14579,JasonGross,2021-07-02 20:29:48,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq."
873275870,14579,JasonGross,2021-07-02 21:59:30,JasonGross,@coqbot ci minimize ci-coq_performance_tests
873275890,14579,JasonGross,2021-07-02 21:59:34,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
873277853,14579,JasonGross,2021-07-02 22:05:33,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq."
873282728,14579,JasonGross,2021-07-02 22:18:52,JasonGross,@coqbot ci minimize ci-coq_performance_tests
873282743,14579,JasonGross,2021-07-02 22:18:55,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
873284517,14579,JasonGross,2021-07-02 22:24:57,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq."
873285903,14579,JasonGross,2021-07-02 22:29:53,JasonGross,@coqbot ci minimize ci-coq_performance_tests
873285919,14579,JasonGross,2021-07-02 22:29:56,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
873287031,14579,JasonGross,2021-07-02 22:33:59,JasonGross,@coqbot ci minimize ci-coq_performance_tests
873287044,14579,JasonGross,2021-07-02 22:34:03,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
873287291,14579,JasonGross,2021-07-02 22:35:03,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq."
873288522,14579,JasonGross,2021-07-02 22:39:29,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq."
873308321,14579,JasonGross,2021-07-02 23:56:20,JasonGross,@coqbot ci minimize ci-coq_performance_tests
873308339,14579,JasonGross,2021-07-02 23:56:23,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
873309306,14579,JasonGross,2021-07-03 00:01:19,coqbot-app,"Error: Could not minimize file /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 3.2MiB file on GitHub Actions Artifacts under build.log)\n#[export] depending on your choice. For example:\n""#[export] Hint Rewrite foo : bar.""\n[deprecated-hint-rewrite-without-locality,deprecated]\nFile ""/github/workspace/builds/coq/coq-failing/_bui"
873310057,14579,JasonGross,2021-07-03 00:03:55,JasonGross,@coqbot ci minimize ci-coq_performance_tests
873310075,14579,JasonGross,2021-07-03 00:03:58,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
873311026,14579,JasonGross,2021-07-03 00:07:32,JasonGross,@coqbot ci minimize ci-coq_performance_tests
873311043,14579,JasonGross,2021-07-03 00:07:35,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
873311699,14579,JasonGross,2021-07-03 00:10:23,coqbot-app,"Error: Could not minimize file /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 3.2MiB file on GitHub Actions Artifacts under build.log)\n#[export] depending on your choice. For example:\n""#[export] Hint Rewrite foo : bar.""\n[deprecated-hint-rewrite-without-locality,deprecated]\nFile ""/github/workspace/builds/coq/coq-failing/_bui"
873312252,14579,JasonGross,2021-07-03 00:13:29,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq."
873317716,14579,JasonGross,2021-07-03 00:48:13,JasonGross,@coqbot ci minimize ci-coq_performance_tests
873317729,14579,JasonGross,2021-07-03 00:48:16,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
873318704,14579,JasonGross,2021-07-03 00:54:34,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq."
873319515,14579,JasonGross,2021-07-03 00:59:58,JasonGross,I am now running minimization at commit c6473ba on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
873319536,14579,JasonGross,2021-07-03 01:00:06,JasonGross,@coqbot ci minimize ci-coq_performance_tests
967206490,15178,ppedrot,2021-11-12 15:32:13,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
967287944,15178,ppedrot,2021-11-12 17:26:51,coqbot-app,"Hey, I have detected that there were CI failures at commit 168e9a3 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a57401 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_crypto_legacy."
967288385,15178,ppedrot,2021-11-12 17:27:31,SkySkimmer,@coqbot ci minimize
967288404,15178,ppedrot,2021-11-12 17:27:33,coqbot-app,I have initiated minimization at commit 168e9a3 for the suggested target ci-fiat_crypto_legacy as requested.
967293065,15178,ppedrot,2021-11-12 17:34:58,ppedrot,"Judging from the error message, the fcl failure looks like a bug on their side. It was likely working by mistake before, because there was probably a variable shadowing with something that was not an identifier that is now clashing because the closure is preserved through antiquotations..."
967295935,15178,ppedrot,2021-11-12 17:39:15,ppedrot,"Here is a minimal example showcasing the problematic behaviour described above:\nGoal True -> True.\nProof.\nmatch goal with\n| [ |- ?T ] =>\n  refine (ltac:(refine (fun T => T)))\nend. (* Fails with this PR, works on master *)\nQed."
967302940,15178,ppedrot,2021-11-12 17:50:57,ppedrot,"I think that the problem is here:  https://github.com/mit-plv/fiat-crypto/blob/f21620034db2addaf47f85aded49b8c0f183ac26/src/Compilers/InterpRewriting.v#L120\nThe variable e is bound to a term by the lazymatch, but it clashes with the bound Gallina variable from the refine. Before the closure was dropped so there was no clash, but now it does not work anymore. cc @JasonGross"
967327824,15178,ppedrot,2021-11-12 18:29:40,JasonGross,"We try not to depend on generated names, so it should be safe to rename either of the es to e'."
915425639,14864,jfehrle,2021-09-08 17:21:00,coqbot-app,"Hey, I have detected that there were CI failures at commit 6a5d38e without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit c6ab549 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following targets (which I do not suggest minimizing):\n\nci-fiat_crypto (because base job at c6ab549 failed)\nci-fiat_crypto_legacy (b"
944055556,14864,jfehrle,2021-10-15 07:11:49,jfehrle,The images:
952210286,15071,SkySkimmer,2021-10-26 18:41:18,ppedrot,"Good, this removes one tricky global env call from #15069. Hopefully CI will be fine..."
952696074,15071,SkySkimmer,2021-10-27 09:00:55,ppedrot,Seems like it's breaking a lot of stuff...
952749919,15071,SkySkimmer,2021-10-27 09:59:23,SkySkimmer,Let's try something a bit more conservative.
952828206,15071,SkySkimmer,2021-10-27 11:34:01,SkySkimmer,Still plenty of failures.\nMaybe instead we should rename when we would shadow any visible name?
952904202,15071,SkySkimmer,2021-10-27 13:02:01,coqbot-app,"Hey, I have detected that there were CI failures at commit 2ecebbd without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 7fc6855 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-argosy, ci-color, ci-metacoq, ci-sf, ci-vst.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the fol"
954212941,15071,SkySkimmer,2021-10-28 20:58:36,JasonGross,"Quoting myself from the other PR:\nCan we write a script to automate the process of fixing/robustifying developments?  E.g., have a setting that makes every top-level destruct and induction statement without an as clause whose naming behavior changes as a result of this PR emit a warning of the form ""Name change upcoming, replace with destruct XXX as YYY to keep the old names"", and then I can code up a python script that does the replacements based on the warning logs\nOriginally posted by @JasonG"
954224606,15071,SkySkimmer,2021-10-28 21:17:24,coqbot-app,"Hey, I have detected that there were CI failures at commit 26e943a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit be79bd4 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-argosy, ci-color, ci-metacoq, ci-sf, ci-vst."
954227175,15071,SkySkimmer,2021-10-28 21:22:02,SkySkimmer,"It's not just destruct/induction, it's also intros &co\nMaking suggestions for how to modify the ltac script would be very hard, the change is too low level compared to where as is treated."
954228888,15071,SkySkimmer,2021-10-28 21:24:54,JasonGross,"Making suggestions for how to modify the ltac script would be very hard, the change is too low level compared to where as is treated.\n\nWhat about a setting for having every top-level tactic (anything not in an Ltac ... := ...) which generates names rather than being given names emit such a message?  It'd be overly noisy, but would allow easily preparing an overlay that makes developments robust against future changes to naming, perhaps."
954232492,15071,SkySkimmer,2021-10-28 21:26:51,SkySkimmer,We don't care about most of the names we generate though.
954314371,15071,SkySkimmer,2021-10-29 00:18:10,Alizter,How hard would it be to emit a warning when using an autogenerated name? That way we could slowly discourage ever relying on it if need be.
954541590,15071,SkySkimmer,2021-10-29 08:13:53,ppedrot,"How hard would it be to emit a warning when using an autogenerated name?\n\nThis has been discussed a gazillion of times, and the answer is: impossible. Because you can script with Ltac there is no universal notion of autogenerated name, e.g. stuff like let H := fresh in intros H is correct. This is why the name mangling option is the reasonable solution to this mess."
954574482,15071,SkySkimmer,2021-10-29 09:01:47,herbelin,"What about an ""upgrading"" mode where next_ident_away_in_goal maintains a map of the changes it made? Then, anytime an old name foo0 is found, a warning is issued telling that foo0 at the given location should be changed into foo. A script can then apply the renaming automatically."
964323443,15071,SkySkimmer,2021-11-09 16:34:41,SkySkimmer,"Overlays aren't too bad, the sf one was pretty annoying because of that Definition x though https://github.com/DeepSpec/sf/blob/84060de4a7583c54fd54b263ae867beee2d475ea/plf-current/Stlc.v#L196"
964338488,15071,SkySkimmer,2021-11-09 16:50:51,ppedrot,"@SkySkimmer I don't think we should rush this one for 8.15, ideally we should replace next_ident_away_in_goal by more robust functions in some cases rather than replacing it globally. I had a look at it and some uses in tactics are definitely weird. If so it'd be better to break things only once rather than several times."
964469045,15071,SkySkimmer,2021-11-09 19:31:54,coqbot-app,"Hey, I have detected that there were CI failures at commit 79d686d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 6b260db succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-metacoq, ci-sf."
965042029,15071,SkySkimmer,2021-11-10 11:30:10,SkySkimmer,"@SkySkimmer I don't think we should rush this one for 8.15, ideally we should replace next_ident_away_in_goal by more robust functions in some cases rather than replacing it globally. I had a look at it and some uses in tactics are definitely weird. If so it'd be better to break things only once rather than several times.\n\nI didn't notice any weird changes while doing overlays"
965043951,15071,SkySkimmer,2021-11-10 11:32:48,ppedrot,"Weird as in ""why the hell do we care about the name being different from an imported one in the context"". This makes sense for detyping where this is going to be shown to the user, but some callers are likely to be insensitive to this particular choice. The reason why I want to get rid of this is that relying on the nametab is broken if we ever manage to get rid of the imperative implementation of side-effects."
965063034,15071,SkySkimmer,2021-11-10 12:00:01,SkySkimmer,"The point of this PR is that it's not imported names anymore.\nWe still avoid local names because doing otherwise would break too much, and also it seems to lead to annoying quantifications (I guess you're more likely to refer to local names than random imported ones).\nNot sure what this has to do with sde effects."
965067167,15071,SkySkimmer,2021-11-10 12:05:18,ppedrot,Side-effects modify the nametab.
966228163,15071,SkySkimmer,2021-11-11 11:31:01,SkySkimmer,"Also, not so sure this is a great idea--it adds more work for users but I don't see how it benefits them.\n\nThe generated names are better and easier to predict IMO"
962988641,15139,SkySkimmer,2021-11-08 10:00:31,SkySkimmer,cc @coq/ssreflect-maintainers
963025334,15139,SkySkimmer,2021-11-08 10:44:43,gares,I'm afraid you need a changelog entry since it is a user visible (and very appreciated) change
963031239,15139,SkySkimmer,2021-11-08 10:53:25,SkySkimmer,"BTW in the issue there was mention of having in:mod (I guess 1 module, not a list), not sure how wanted that is."
963031376,15139,SkySkimmer,2021-11-08 10:53:36,SkySkimmer,"@coq/nix-maintainers why is nix unhappy? https://gitlab.com/coq/coq/-/jobs/1758470712\nEDIT I guess it was temporary, https://gitlab.com/coq/coq/-/jobs/1758660422 is happy"
963069043,15139,SkySkimmer,2021-11-08 11:41:50,gares,Can you write in:X in:Y? That would be good enough IMO.
963069946,15139,SkySkimmer,2021-11-08 11:43:08,gares,"I misread your comment, you implemented the list thing. I think it is OK (even if 99% of the times it is going to be a singleton)."
963077653,15139,SkySkimmer,2021-11-08 11:54:48,SkySkimmer,Currently it's in M with no :
964211654,15139,SkySkimmer,2021-11-09 14:38:19,coqbot-app,"Hey, I have detected that there were CI failures at commit 73a1d53 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 21e1997 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-flocq (because base job at 21e1997 failed)"
959987639,15112,SkySkimmer,2021-11-03 20:35:18,ejgallego,Why were they disabled to begin with?\n\nLikely due to the old way of merging [for vos and typeclasses] it missed the proper integration; ideal-features is very old so who knows.
960016416,15112,SkySkimmer,2021-11-03 20:46:01,SkySkimmer,"vos is relatively new, probably just forgot to add it to the ""subsystem"" list\ntypeclasses is older and not wired up in the other targets so who knows\nideal-features was more a adhoc record of feature wishes, not testing (the ones which were kept got implemented at some point)"
960531030,15112,SkySkimmer,2021-11-04 08:00:29,herbelin,"I believe that we are aware of the complexity issue in evar_subst.v and I suspect that there an official issue open about it (??). For the Apply.v file, there is a probably an issue somewhere, otherwise, it is probably worth to open one. For Case9.v it would be solved with small inversion presumably (and there is an issue already). It seems that there is something to grasp from universes.v also but I would not have time myself, so it is your choice. The file implicit_binders was apparently a dis"
962992634,15112,SkySkimmer,2021-11-08 10:04:59,SkySkimmer,@ejgallego merge?
962993190,15112,SkySkimmer,2021-11-08 10:05:36,SkySkimmer,oh the test:base+async failure looks real
963029170,15112,SkySkimmer,2021-11-08 10:50:12,SkySkimmer,"disabled async proofs in the vos test, see #15140"
963160470,15112,SkySkimmer,2021-11-08 13:40:33,coqbot-app,"Hey, I have detected that there were CI failures at commit b333fb6 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8fa85c0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-flocq (because base job at 8fa85c0 failed)"
966350606,15112,SkySkimmer,2021-11-11 14:33:19,ejgallego,"@ejgallego merge?\n\nlet me process @herbelin comments, but yes, we merge.\nAlso wouldn't mind if @mattam82 would take a look to typeclasses before we remove it."
906351604,14614,gpetiot,2021-08-26 12:09:54,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
913639086,14614,gpetiot,2021-09-06 13:10:22,ejgallego,"Thanks @gpetiot ! I think the diff looks pretty fishy, doesn't it?\nWhy we have now a lot of expressions (foo bar ) instead of (foo bar) , that asymmetry doesn't look right IMO."
962751800,14614,gpetiot,2021-11-08 02:13:26,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
963019801,14614,gpetiot,2021-11-08 10:36:54,gpetiot,"Thanks @gpetiot ! I think the diff looks pretty fishy, doesn't it?\nWhy we have now a lot of expressions (foo bar ) instead of (foo bar) , that asymmetry doesn't look right IMO.\n\nSorry for the late reply, the space before the closing parenthesis indicates that the matching opening paren was not opened on the same line. It's a feature of the ocamlformat profile (this feature was already present in the formatted codebase), if you switch to another profile like conventional you won't have these spac"
963153807,14614,gpetiot,2021-11-08 13:31:54,coqbot-app,"Hey, I have detected that there were CI failures at commit 44fccc6 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8fa85c0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-flocq (because base job at 8fa85c0 failed)"
846157211,14359,herbelin,2021-05-21 18:35:53,coqbot-app,"Hey, I have detected that there were CI failures at commit ca61518 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 12ca292 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-vst."
846558173,14359,herbelin,2021-05-23 12:49:16,herbelin,"It looks like I was redoing #798 and re-introducing the propositional extensionality issue.\nI made a new proposal which instantiates the predicate only with the constructed part of its indices.\nIt fills non-constructor terms with a dummy (generally ill-typed) Prop which is a bit ugly. A possible alternative would be to add an argument x : forall A, A to the signature and, to compute the type T of the return and to use x T. Is it worth the detour."
949716943,14359,herbelin,2021-10-22 15:06:56,SkySkimmer,Removing the milestone as there has been no change since 8.14.
904994815,14805,herbelin,2021-08-24 21:38:51,coqbot-app,"Hey, I have detected that there were CI failures at commit a2c1557 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1c35001 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_parsers."
905386284,14805,herbelin,2021-08-25 10:42:24,herbelin,"Surprisingly, there is only one real failure, though a legitimate one. It boils down to:\nRequire Import RelationClasses Morphisms.\nCoercion is_true : bool >-> Sortclass.\nSection S.\n  Context {T} (beq : T -> T -> bool).\n  Context (beq_Reflexive : Reflexive beq).\n  Lemma test x : beq x x.\n  rewrite (@reflexivity T ?[R] ?[r] x : beq x x).\n\nwhere solve_simple_eqn resolves ?R := fun _ x1 : T => beq x1 x1 = true while type classes inference would resolve ?r := beq_Reflexive, leading to the (more expec"
949728033,14805,herbelin,2021-10-22 15:20:03,SkySkimmer,"So, this is a case where type class inference should take priority over choosing solutions, or, more reasonably, type classes inference and choosing solutions should be part of the same backtracking loop.\n\nMaybe we should have a master issue for ""things that could be done if unification backtracked with tactics""  and close this PR."
949801657,14805,herbelin,2021-10-22 16:50:03,herbelin,"So, this is a case where type class inference should take priority over choosing solutions, or, more reasonably, type classes inference and choosing solutions should be part of the same backtracking loop.\n\nMaybe we should have a master issue for ""things that could be done if unification backtracked with tactics"" and close this PR.\n\nInterleaving type classes and the other unification heuristics is indeed the next step. Then, I believe this PR will be able to go."
963326479,15142,ppedrot,2021-11-08 16:25:42,coqbot-app,"Hey, I have detected that there were CI failures at commit 235f781 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8fa85c0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-flocq (because base job at 8fa85c0 failed)"
965007219,15142,ppedrot,2021-11-10 10:44:15,ppedrot,"Upstream overlays merged and locally removed, this should be good to go."
966244525,15142,ppedrot,2021-11-11 11:58:58,SkySkimmer,@coqbot merge now
963504825,15147,SkySkimmer,2021-11-08 19:34:53,coqbot-app,"Hey, I have detected that there were CI failures at commit d8c90fb without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 30683ee succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-flocq (because base job at 30683ee failed)"
964221375,15147,SkySkimmer,2021-11-09 14:49:10,coqbot-app,"Hey, I have detected that there were CI failures at commit 859765e without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 21e1997 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-flocq (because base job at 21e1997 failed)"
964303383,15147,SkySkimmer,2021-11-09 16:14:21,ppedrot,@coqbot merge now
963350113,15144,ppedrot,2021-11-08 16:41:39,coqbot-app,"Hey, I have detected that there were CI failures at commit 3a5dbe0 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 05151f6 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-flocq (because base job at 05151f6 failed)"
963351383,15144,ppedrot,2021-11-08 16:43:10,SkySkimmer,@coqbot merge now
962903770,15126,ppedrot,2021-11-08 08:07:54,Matafou,The whole code of funind should some day be replaced by a thin syntactic layer above Equations I suppose.
963067674,15126,ppedrot,2021-11-08 11:39:58,SkySkimmer,waiting for rebase
963145919,15126,ppedrot,2021-11-08 13:22:42,ppedrot,@SkySkimmer done
963326865,15126,ppedrot,2021-11-08 16:26:06,coqbot-app,"Hey, I have detected that there were CI failures at commit 5ae9763 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8fa85c0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-flocq (because base job at 8fa85c0 failed)"
963351720,15126,ppedrot,2021-11-08 16:43:32,SkySkimmer,@coqbot merge now
956447433,15101,pi8027,2021-11-01 17:49:01,coqbot-app,"Hey, I have detected that there were CI failures at commit a85bc53 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 13b2d89 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-flocq."
957081086,15101,pi8027,2021-11-02 04:00:21,pi8027,I have a patch to fix Flocq although it may break Flocq w.r.t. other versions of Coq. @silene Could you take care of it?
957157731,15101,pi8027,2021-11-02 07:16:55,coqbot-app,"Hey, I have detected that there were CI failures at commit 6ecdd0b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 13b2d89 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-flocq."
957220978,15101,pi8027,2021-11-02 08:36:18,coqbot-app,"Hey, I have detected that there were CI failures at commit 6ecdd0b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 13b2d89 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-flocq."
961638548,15101,pi8027,2021-11-05 05:31:56,silene,"Could you take care of it?\n\nSure, I will consider it. But you still have to write a Flocq overlay as part of this Coq pull request, even if you do no submit it as a Flocq pull request. Otherwise, we cannot know the amount of breakage among the other jobs: CompCert, VST, etc."
961653457,15101,pi8027,2021-11-05 06:19:25,pi8027,"Could you take care of it?\n\nSure, I will consider it. But you still have to write a Flocq overlay as part of this Coq pull request, even if you do no submit it as a Flocq pull request. Otherwise, we cannot know the amount of breakage among the other jobs: CompCert, VST, etc.\n\nThat's right. Done."
962451532,15101,pi8027,2021-11-06 13:24:58,Alizter,Will merge later today
962530515,15101,pi8027,2021-11-07 00:39:11,Alizter,@coqbot merge now
962530519,15101,pi8027,2021-11-07 00:39:14,coqbot-app,@Alizter: Please take care of the following overlays:\n\n15101-pi8027-zify-instances.sh
962530576,15101,pi8027,2021-11-07 00:40:11,Alizter,@pi8027 Can you submit a PR to flocq?
962559767,15101,pi8027,2021-11-07 06:34:24,silene,No need. It is already part of Flocq: https://gitlab.inria.fr/flocq/flocq/-/commit/b8652003b5068749c8850ffd38c356f0a60d192d
962600436,15101,pi8027,2021-11-07 12:17:59,pi8027,Thank you both!
963000992,15101,pi8027,2021-11-08 10:13:58,olaure01,ci-flocq looks broken on master is it related with this overlay?
963017314,15101,pi8027,2021-11-08 10:33:29,pi8027,"ci-flocq looks broken on master is it related with this overlay?\n\nI don't get why my overlay doesn't work in master, but IIUC my patch had to be applied to the flocq-3 branch. @silene"
948599456,15057,SkySkimmer,2021-10-21 13:08:35,ejgallego,"Not a fan of this for the reasons we outlined in the discussion previously; also, IMHO this shouldn't get in unless someone volunteers to maintain it [I don't]"
948601199,15057,SkySkimmer,2021-10-21 13:10:24,Zimmi48,"The removal was approved because we didn't know people where using this. Many users have expressed dissatisfaction about the removal, so this is just reverting a mistake. IMHO it's not reasonable to block this."
948716976,15057,SkySkimmer,2021-10-21 15:13:38,gares,CC @chdoc
948720739,15057,SkySkimmer,2021-10-21 15:18:04,ejgallego,"The removal was approved because we didn't know people where using this. Many users have expressed dissatisfaction about the removal, so this is just reverting a mistake. IMHO it's not reasonable to block this.\n\nDo you volunteer to maintain this?"
948722628,15057,SkySkimmer,2021-10-21 15:20:15,ejgallego,"I will comment more when I can review the PR, but note that large amount of internals that are now exported; this could significantly interfere with ongoing work to unify parts of coqdep with the rest of Coq.\nMoreover (at the risk of repeating the discussions), there are several similar tools available, so here it seems to me we are going back to a situation like omega vs lia, not to say that the output of coqdep is standard make rules, and there exist a lot of tools that generate graphics from "
948725953,15057,SkySkimmer,2021-10-21 15:24:11,gares,"The removal was approved because we didn't know people where using this. Many users have expressed dissatisfaction about the removal, so this is just reverting a mistake. IMHO it's not reasonable to block this.\n\nDo you volunteer to maintain this?\n\nSince when we remove code which is unmaintained?\nNote that you removed it claiming it was unused, which was not the case."
948728568,15057,SkySkimmer,2021-10-21 15:27:29,SkySkimmer,"This PR is just to put the functionality back, I'm not going to mix in any refactorings."
948730513,15057,SkySkimmer,2021-10-21 15:29:59,ejgallego,"Since we removed omega from example?\nIt was not only unmaintained, but also undocumented it seems."
948731359,15057,SkySkimmer,2021-10-21 15:31:11,ejgallego,"This PR is just to put the functionality back, I'm not going to mix in any refactorings.\n\nIn my view this is very easy, either someones volunteers to maintain it, otherwise it doesn't make sense to put dead code back."
948753529,15057,SkySkimmer,2021-10-21 15:58:43,gares,"Again, it was not dead code."
948761772,15057,SkySkimmer,2021-10-21 16:07:23,Zimmi48,"omega was only removed after huge efforts to provide a viable alternative to the users. In this case, the code was removed under false claimed. This is a completely different situation."
948784217,15057,SkySkimmer,2021-10-21 16:33:17,ejgallego,omega was only removed after huge efforts to provide a viable alternative to the users.\n\nWhy solutions like the one used in flocq https://coq.discourse.group/t/tool-for-drawing-coq-project-dependency-graph/653/16 or math-comp don't work? In fact they are nicer.\nThe code was not tested in the CI == dead .
948784626,15057,SkySkimmer,2021-10-21 16:33:50,SkySkimmer,"What does maintain mean? This is pretty static code, no need to mess with it."
948786845,15057,SkySkimmer,2021-10-21 16:36:32,ejgallego,"What does maintain mean? This is pretty static code, no need to mess with it.\n\nMaintains means than I have a lot more work to do due to the extra exported functions when I get to refactor coqdep , moreover the exported API makes no sense.\nThe code was removed because was abandonware, was not tested in the full CI, and most users such as math-comp and flocq use another solution, not to say there are universal packages to produce dep graphs from Make rules so I don't see why we have too keep this "
948787683,15057,SkySkimmer,2021-10-21 16:37:38,gares,"The code was not tested in the CI == dead .\n\nPlease, we are wasting more energy in this discussion than in maintaining that code for years.\nLet it go, it will make some users happy at a very little cost."
948788844,15057,SkySkimmer,2021-10-21 16:39:07,ejgallego,"Please, we are wasting more energy in this discussion than in maintaining that code for years.\nLet it go, it will make some users happy at a very little cost.\n\nThe cost for me is significant, as I'm working in coqdep.\nMorever, what I am trying to do here makes a lot of sense, instead of having 4 different half-baked ways of generating that information, let's converge to a single, official solution."
948947595,15057,SkySkimmer,2021-10-21 19:43:34,coqbot-app,"Hey, I have detected that there were CI failures at commit 3f827cb without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 6e74476 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-fcsl_pcm (because base job at 6e74476 failed)"
950382007,15057,SkySkimmer,2021-10-24 19:35:07,ejgallego,"Seems there is a small misunderstanding about what happened with this option.\nWhen we started to refactor coqdep, the first step was to try to define a clear interface between internals of coqdep [such as representation of deps] and externals.\nThe way -dumpgraph was implemented, relied heavily on the internals [with some weird stuff as the previous commit by Gaëtan exposing them showed]\nThus, there was 2 solutions to be done: to reify the implementation so it doesn't depend on internals, or just"
948910381,15059,chdoc,2021-10-21 18:54:27,coqbot-app,"Hey, I have detected that there were CI failures at commit d530b93 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 6e74476 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-fcsl_pcm (because base job at 6e74476 failed)"
949429309,15059,chdoc,2021-10-22 09:04:50,gares,"I think you should provide a changelog entry, see dev/tools/ for a script generating a draft."
949620541,15059,chdoc,2021-10-22 13:13:48,chdoc,"I think you should provide a changelog entry, see dev/tools/ for a script generating a draft.\n\nDone."
960545043,15059,chdoc,2021-11-04 08:24:08,chdoc,"Sorry for the slow response, somehow this went under the radar."
960983486,15059,chdoc,2021-11-04 13:55:29,gares,@coqbot merge now
953028519,15079,proux01,2021-10-27 15:12:13,SkySkimmer,Please write a more explicit commit message and PR title.
953040618,15079,proux01,2021-10-27 15:24:40,ppedrot,"I am writing a hardened API that should be sound, I'll submit it as an alternative PR."
953190413,15079,proux01,2021-10-27 18:16:45,coqbot-app,"Hey, I have detected that there were CI failures at commit a0858c2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4012eb2 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-coq_tools (because base job at 4012eb2 failed)"
953573988,15079,proux01,2021-10-28 07:26:29,proux01,"So, closing this one."
908100216,14727,herbelin,2021-08-30 07:22:23,herbelin,"I added two further ""cleaning"" commits. We could do more cleaning, like completely bypassing the type Cooking.result for instance, or imposing more unity in naming.\n@ppedrot: would you like to assign?"
920769181,14727,herbelin,2021-09-16 10:10:32,SkySkimmer,"The ""adding"" commits should be merged with the commits introducing the use of the new API imo"
920929726,14727,herbelin,2021-09-16 14:01:02,herbelin,@SkySkimmer Thanks a lot for the comments. Next weeks are dense for me but I'll try to reply within a couple of days.
949230612,14727,herbelin,2021-10-22 02:19:34,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
950341277,14727,herbelin,2021-10-24 15:07:37,herbelin,The PR looks ok for me at this stage. Are there more comments?\nIt will need smashing some commits though.
951162914,14727,herbelin,2021-10-25 17:52:40,ppedrot,A bench is in order: https://gitlab.com/coq/coq/-/jobs/1709414060.
952061525,14727,herbelin,2021-10-26 15:35:17,ppedrot,┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬──────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │    mem faults    │\n│                             │                         │                                       │                                     
952206079,14727,herbelin,2021-10-26 18:35:38,herbelin,Not good.\n\nMaybe structures which are built even in cases they are not needed? I may try to introduce some lazyness.\nDo you have an idea of when it is particularly more costly?
952208532,14727,herbelin,2021-10-26 18:38:59,ppedrot,Do you have an idea of when it is particularly more costly?\n\nNot clear to me. The per-line diffs do show some slowdowns that seem to be above noise threshold but I don't find anything in common.
952567870,14727,herbelin,2021-10-27 06:05:20,herbelin,"Could you see if the slowdown is when there are large contexts of section variables? Or with sections with many definitions? Or when the terms to discharge are big? Or when the global environment is large (as in odd-order I guess)?\nDo you see a way to extract a file which I could use to make sone tests?\nWould there be an easy way to conpare the profile w/ and w/o the PR, to see which functions are used more?\nOtherwise, I don't think the PR does different things than before overall. Some O(1) cal"
955784114,14727,herbelin,2021-10-31 20:10:31,coqbot-app,"Hey, I have detected that there were CI failures at commit 40cfad6 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 42b418b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fcsl_pcm."
956161958,14727,herbelin,2021-11-01 11:40:05,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
957011975,14727,herbelin,2021-11-02 01:09:02,coqbot-app,"Hey, I have detected that there were CI failures at commit 9b18fa8 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 13b2d89 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fcsl_pcm."
957075863,14727,herbelin,2021-11-02 03:47:06,JasonGross,@coqbot ci minimize
957075875,14727,herbelin,2021-11-02 03:47:08,coqbot-app,I have initiated minimization at commit 9b18fa8 for the suggested target ci-fcsl_pcm as requested.
957082119,14727,herbelin,2021-11-02 04:02:44,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fcsl_pcm/core/ordtype.v (from ci-fcsl_pcm) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-notation-overridden"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-deprecated-nati"
965029364,14727,herbelin,2021-11-10 11:13:39,ppedrot,@herbelin Any progress on this? I think it'd be nice to have once the vo size problem is fixed.
966500184,15171,ppedrot,2021-11-11 17:50:18,ppedrot,Bench: https://gitlab.com/coq/coq/-/jobs/1774345084
966723462,15171,ppedrot,2021-11-12 00:32:54,coqbot-app,"Hey, I have detected that there were CI failures at commit 42361c6 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8cd67a3 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-fiat_crypto, ci-hott, ci-iris, ci-perennial, ci-vst."
967004382,15171,ppedrot,2021-11-12 10:47:48,SkySkimmer,Looks like it's not running TC correctly.
967020323,15171,ppedrot,2021-11-12 11:12:59,ppedrot,@coqbot ci minimize
967020417,15171,ppedrot,2021-11-12 11:13:07,coqbot-app,"I have initiated minimization at commit 42361c6 for the suggested targets ci-bedrock2, ci-fiat_crypto, ci-hott, ci-iris, ci-perennial, ci-vst as requested."
967024402,15171,ppedrot,2021-11-12 11:19:34,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil/Macros/symmetry.v (from ci-bedrock2) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/works"
967025888,15171,ppedrot,2021-11-12 11:22:06,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/rupicola/bedrock2/deps/coqutil/src/coqutil/Macros/symmetry.v (from ci-fiat_crypto) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-opt"
967034807,15171,ppedrot,2021-11-12 11:36:46,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/stdpp/theories/option.v (from ci-iris) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-hint-rewrite-without-locality"" ""-w"" ""-deprecated-native-compiler-option"" ""-"
967035675,15171,ppedrot,2021-11-12 11:38:27,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/external/stdpp/theories/option.v (from ci-perennial) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-ssr-search-moved"" ""-w"" ""-deprecated-hint-without-locality"" ""-w"" ""-d"
967037988,15171,ppedrot,2021-11-12 11:42:59,SkySkimmer,Is there a reason this is empty instead of ist.lfun?\n\n  \n    \n      coq/plugins/ltac/tacinterp.ml\n    \n    \n         Line 1082\n      in\n      1a57401\n    \n    \n    \n    \n\n        \n          \n           ltac_genargs = Id.Map.empty; \n        \n    \n  \n\n\nIt used to be until a7917a3 but there is no mention of the change in the commit message.
967045854,15171,ppedrot,2021-11-12 11:57:05,ppedrot,"Good question, I don't remember. But I wouldn't be surprised I had to do this due to random Ltac behaviours around variable binding.\nThe very fact we're classifying the arguments of the closure without enough information is already very suspicious. But unfortunately to do this properly we would need to hook the Ltac runtime into the pretyper. This is now possible thanks to the use of open-recursion, but it has yet to be done."
967047088,15171,ppedrot,2021-11-12 11:59:20,ppedrot,"Replying to myself because I should turn my tongue seven times before answering: this was obviously wrong. The closure is the one computed when the uconstr is constructed, as if it were a function closure. Using the one at the time of the evaluation totally defeats the concept of a closure. As evidenced by the current code, we only need it to carry metadata flags like poly."
967066314,15171,ppedrot,2021-11-12 12:13:59,SkySkimmer,"Using ist.lfun is what interp_casted_constr was doing (through interp_gen)\nand if we replace exact by refine (refine uses type_uconstr) in the minimized bedrock example we get the same nonsense ""pf not bound"" error."
967067131,15171,ppedrot,2021-11-12 12:15:28,ppedrot,"OK, but the fix is not to pass the ist at the time of evaluation. It should be properly storing that data when building the closure."
967120685,15171,ppedrot,2021-11-12 13:31:35,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Algebra/Rings/Z.v (from ci-hott) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/w"
967220352,15171,ppedrot,2021-11-12 15:51:46,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
967247729,15171,ppedrot,2021-11-12 16:30:05,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/progs/verif_reverse.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_"
967250099,15171,ppedrot,2021-11-12 16:33:26,coqbot-app,"Minimized File  (from ci-vst) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/worksp"
967299877,15171,ppedrot,2021-11-12 17:45:44,coqbot-app,"Hey, I have detected that there were CI failures at commit ae8f851 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a57401 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-fiat_crypto_legacy, ci-hott."
953195630,15080,Zimmi48,2021-10-27 18:23:59,coqbot-app,"Hey, I have detected that there were CI failures at commit 3dfbfd9 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4012eb2 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-coq_tools (because base job at 4012eb2 failed)"
953718843,15080,Zimmi48,2021-10-28 10:31:51,MSoegtropIMC,"@Zimmi48 : thanks, looks good to me."
963249554,15080,Zimmi48,2021-11-08 15:06:10,SkySkimmer,@coqbot merge now
936561590,14996,herbelin,2021-10-06 15:59:51,Alizter,Will merge when CI is happy
936760076,14996,herbelin,2021-10-06 17:36:23,coqbot-app,"Hey, I have detected that there were CI failures at commit ff8a6f5 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 2b687c1 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-category_theory, ci-color, ci-compcert, ci-corn, ci-cross_crypto, ci-fiat_crypto, ci-metacoq, ci-sf, ci-vst."
936775011,14996,herbelin,2021-10-06 17:44:35,coqbot-app,"Hey, I have detected that there were CI failures at commit ff8a6f5 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 2b687c1 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-category_theory, ci-color, ci-compcert, ci-corn, ci-cross_crypto, ci-fiat_crypto, ci-metacoq, ci-sf, ci-vst."
937173410,14996,herbelin,2021-10-06 21:28:54,Alizter,@coqbot merge now
891935220,14740,Alizter,2021-08-03 15:19:05,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
891990940,14740,Alizter,2021-08-03 16:31:47,coqbot-app,"Hey, I have detected that there were CI failures at commit 8a52083 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a41c99a succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-fiat_crypto_legacy, ci-fiat_parsers, ci-hott, ci-rewriter.\nIf you tag me saying @coqbot ci minimize all, I will additionally mi"
891995911,14740,Alizter,2021-08-03 16:39:13,Zimmi48,"This wasn't expected that this would break anything, was it?\n@coqbot ci minimize"
891995991,14740,Alizter,2021-08-03 16:39:20,coqbot-app,"I have initiated minimization at commit 8a52083 for the suggested targets ci-fiat_crypto_legacy, ci-fiat_parsers, ci-hott, ci-rewriter as requested."
892000046,14740,Alizter,2021-08-03 16:45:39,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/ContextFreeGrammar/Reflective.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/co"
892001139,14740,Alizter,2021-08-03 16:47:17,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/rewriter/src/Rewriter/Util/FMapPositive/Equality.v (from ci-rewriter) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+deprecated-hint-constr,+fragile-hint-constr,+variable-collision,+unexpected-impli"
892003801,14740,Alizter,2021-08-03 16:51:16,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Algebra/Universal/TermAlgebra.v (from ci-hott) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hott/theories"" ""HoTT"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/"
892018471,14740,Alizter,2021-08-03 17:13:31,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/src/Util/FMapPositive/Equality.v (from ci-fiat_crypto_legacy) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-notation-overridden"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/src"" ""Crypto"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_bui"
892054252,14740,Alizter,2021-08-03 18:08:07,Alizter,"@Zimmi48 I'm currently having some parsing issues, I'll need to investigate further."
892556954,14740,Alizter,2021-08-04 10:45:43,Alizter,"The issues weren't to do with parsing actually, but the name generation of induction schemes. Unfortunately, the generation is a bit more complicated than I had initially gathered, so I am currently writing tests for the name generation before this patch so I can document every name, then I will try to replicate it here."
892732488,14740,Alizter,2021-08-04 15:01:18,Alizter,"Alright, this now passes the test I wrote in #14742. Let's see if anything breaks."
892834700,14740,Alizter,2021-08-04 17:21:14,Alizter,Looks like equations has broke which isn't surprising. I will submit an overlay soon.\nThe linter isn't happy because I haven't updated the grammar yet.
907859256,14740,Alizter,2021-08-29 19:49:38,Alizter,"I got stuck writing the overlay for equations on this one. Hopefully, I can make some progress soon. cc @mattam82 who might be able to help me here."
913986956,14740,Alizter,2021-09-07 04:47:22,jfehrle,@Alizter > I got stuck writing the overlay for equations on this one.\nPerhaps you could describe the issues you're running into.  The build doesn't even run ci-equations at the moment.  (Not that I have a lot of expertise to offer on equations.  I might be able to help with overlay basics if that's what you're stuck on--though others know that much better than I do.)
914096915,14740,Alizter,2021-09-07 08:22:50,Alizter,@jfehrle I had a meeting with @mattam82 so I now have a better idea of what needs to be done. I don't currently have too much time to do it however. I will close this for the time being so that I can work on it again in the future.
914255454,14740,Alizter,2021-09-07 12:18:26,Zimmi48,"@Alizter If you do have enough time to write what needs to be done, this would be useful if someone wants to pick it up, or for yourself if you come back to this after some time."
962679106,14740,Alizter,2021-11-07 20:54:56,ejgallego,"Looks pretty good ! Lint error seems due to intermediate commit not compiling, git rebase -x 'dune build @check' tends to help fixing this pretty fast. Equations overlay should be easy, I'm unsure about the problem with the refman failure."
966351110,14740,Alizter,2021-11-11 14:33:58,ejgallego,"This looks almost ready to me, so let's try to get it for 8.15"
966767161,14740,Alizter,2021-11-12 02:22:04,Alizter,@ejgallego I can spend some time on it after the weekend.
860059550,14492,herbelin,2021-06-12 14:16:14,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
860062504,14492,herbelin,2021-06-12 14:40:47,JasonGross,"This is cool!  Probably there should be a flag for the default mode, to be set in the relevant Compat file"
860062958,14492,herbelin,2021-06-12 14:44:40,herbelin,"The Cannot mask the absolute name ""HoTT.Categories.Category.Build_Category""! failure in HoTT follows this pattern:\nModule B.\n#[namespace=both]\nInductive A := C.\nEnd B.\nModule A.\nInclude B. (* defines A.C and C in A *)\nEnd A.\nInclude A.\n(* wants to include the constructor A.C from module A which overrides full name A.C:\nA.C  mean both:\n- the flat constructor name C of A in module A\n- the proper constructor name A.C in the namespace for the type A, at toplevel\n*)\n\nI guess this is expected and the "
860063642,14492,herbelin,2021-06-12 14:50:27,coqbot-app,"Hey, I have detected that there were CI failures at commit 98b835d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit cfb1787 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-fiat_crypto_legacy, ci-hott."
860113296,14492,herbelin,2021-06-12 21:32:23,JasonGross,"I guess this is expected and the both mode should be deactivated here.\n\nIn fact I suspect this was my attempt to kludge the both mode, and in fact once a version of Coq with this PR is released we should switch to just using the both mode."
860113360,14492,herbelin,2021-06-12 21:33:13,JasonGross,@coqbot CI minimize
860113369,14492,herbelin,2021-06-12 21:33:20,coqbot-app,"I have initiated minimization at commit 98b835d for the suggested targets ci-fiat_crypto_legacy, ci-hott as requested."
860114162,14492,herbelin,2021-06-12 21:38:57,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Categories.v (from ci-hott) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(** * Category Theory *)\n(** To get all of the category theory library in scope with the proper qualified names, you should [Require Import Categories.] or [Require Import HoTT.Categories.] *)\n\n(** First we give modules to all of the kinds of category theory constructions (corresponding to directo"
860115858,14492,herbelin,2021-06-12 21:45:12,SkySkimmer,"I initially didn't realize that both mode makes both following About succeed\nModule M.\nInductive Ind := C.\nEnd M.\nAbout M.C.\nAbout M.Ind.C.\n(it's not in the added test btw)\nIs that intended behaviour?\nIt may be more compatible with include to have just M.Ind.C succeed, but when M is imported also import the Ind namespace. Somehow this would mean both == Export"
860131828,14492,herbelin,2021-06-13 00:41:38,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/src/Experiments/SimplyTypedArithmetic.v (from ci-fiat_crypto_legacy) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-notation-overridden"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/src"" ""Crypto"" ""-R"" ""/github/workspace/builds/coq/coq-faili"
860138587,14492,herbelin,2021-06-13 02:00:21,JasonGross,@herbelin seems like the fcl issue is about the interaction with Set Asymmetric Patterns?
860138694,14492,herbelin,2021-06-13 02:01:48,JasonGross,"Ah, no, it seems to be about a change in the way names are resolved given the extra new names"
860138801,14492,herbelin,2021-06-13 02:02:48,JasonGross,I think a backwards compatible overlay will just qualify the constructors more
860189717,14492,herbelin,2021-06-13 10:42:32,ppedrot,@herbelin May I suggest that we should wait for the namespace feature to land before trying to make this work?
860193222,14492,herbelin,2021-06-13 11:10:50,herbelin,"@ppedrot: I would say that this PR is complementary to the namespace feature. When namespaces are made available, we shall need a way to tell the namespace policy we want to use for inductive types. This is what this PR is exploring.\nAlso, we need to start somewhere and if this PR can help to make namespaces become more concrete both in terms of design and in terms of implementation details, that would be nice. How do you concretely suggest to proceed otherwise?"
860194331,14492,herbelin,2021-06-13 11:20:02,herbelin,"@SkySkimmer:\n\nIt may be more compatible with include to have just M.Ind.C succeed, but when M is imported also import the Ind namespace. Somehow this would mean both == Export\n\nI think you're right. Note however that no wrapping module is introduced in the PR. As it is, it is only a play with the nametab, and, for instance neither Import foo nor Export foo are available. This is actually related to @ppedrot's question: if ever namespaces are implemented with a specific structure rather than reus"
860596034,14492,herbelin,2021-06-14 11:02:10,Zimmi48,This is cool! But what about auto-generated inductive principles? Shouldn't they also belong to the new namespace?
866927626,14492,herbelin,2021-06-23 15:16:26,herbelin,"But what about auto-generated inductive principles?\n\nThis is disputable of course, but this is what I have in mind, yes."
906351590,14492,herbelin,2021-08-26 12:09:53,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
907809960,14492,herbelin,2021-08-29 15:19:28,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
907817671,14492,herbelin,2021-08-29 16:04:47,coqbot-app,"Hey, I have detected that there were CI failures at commit 9ed154c without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit f706680 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-fiat_crypto_legacy, ci-hott."
938284366,14492,herbelin,2021-10-08 02:16:34,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
938468326,14492,herbelin,2021-10-08 08:54:05,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
938500462,14492,herbelin,2021-10-08 09:40:35,coqbot-app,"Hey, I have detected that there were CI failures at commit 1e0a853 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit cf40849 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-fiat_crypto_legacy, ci-hott."
891004776,14736,olaure01,2021-08-02 12:59:57,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
891005717,14736,olaure01,2021-08-02 13:01:13,maximedenes,"Thanks for the contribution! I feel like some of these changes my need to be re-assessed. For example, proj2 (Nat.succ_lt_mono _ _) does not exactly seem like an improvement over lt_S_n to me."
891045231,14736,olaure01,2021-08-02 13:52:12,olaure01,"I feel like some of these changes my need to be re-assessed. For example, proj2 (Nat.succ_lt_mono _ _) does not exactly seem like an improvement over lt_S_n to me.\n\nI see 3 points here:\n\nnaming: is lt_S_n a better name than succ_lt_mono/Nat.succ_lt_mono? or at least should we look for something uniform?\nequivalences: many statements in Nat are given as equivalences. Often apply -> _ or apply <- _ allows to use the underlying implications but sometimes we have to rely on projections. Should we de"
891048872,14736,olaure01,2021-08-02 13:57:05,maximedenes,My point was simply that it's probably better to stabilize and document answers to these questions before propagating the changes.
891051244,14736,olaure01,2021-08-02 14:00:19,olaure01,My point was simply that it's probably better to stabilize and document answers to these questions before propagating the changes.\n\nThis is the reason why I made this a Draft PR. Main goals are: testing CI and waiting for comments (after the first round of #11356).
891307296,14736,olaure01,2021-08-02 20:20:57,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
891813478,14736,olaure01,2021-08-03 12:38:53,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
892031708,14736,olaure01,2021-08-03 17:33:59,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
892489936,14736,olaure01,2021-08-04 09:00:11,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
892521624,14736,olaure01,2021-08-04 09:48:48,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
892958865,14736,olaure01,2021-08-04 20:39:44,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
893314510,14736,olaure01,2021-08-05 09:36:49,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
894195392,14736,olaure01,2021-08-06 11:26:07,coqbot-app,"Hey, I have detected that there were CI failures at commit 8c38ead without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 3fd62a8 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-aac_tactics."
894196996,14736,olaure01,2021-08-06 11:29:45,olaure01,"Almost everything now works on CI.\nI am stuck with the 3 remaining failures:\n\ncross_crypto seems to run out of memory\nconcerning aac_tactics and elpi, could it be that deprecation warnings lead to compilation errors?\n\nThe use of statements from obsolete files should now generate deprecation warnings. As stated by @maximedenes, this requires to address the question of which, where and under what names should such statements from deprecated files be integrated in stdlib (mostly when they are not a"
914377545,14736,olaure01,2021-09-07 14:58:28,Zimmi48,"concerning aac_tactics and elpi, could it be that deprecation warnings lead to compilation errors?\n\nAbsolutely"
938284378,14736,olaure01,2021-10-08 02:16:35,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
961092140,14736,olaure01,2021-11-04 14:47:24,Zimmi48,"@olaure01 Rebasing this was pretty trivial, so I did it for the sake of the bot not closing this important work. Feel free to request help from the maintainers of the projects that trigger deprecation warnings (aac-tactics: @palmskog, coq-elpi: @gares) to get them fixed."
961162314,14736,olaure01,2021-11-04 15:35:55,palmskog,"@olaure01 we have set up aac-tactics deliberately to trigger errors on warnings. Can you give the high-level breakdown of what I can do to fix the project, either here or by submitting a pull request?"
961190866,14736,olaure01,2021-11-04 16:08:05,coqbot-app,"Hey, I have detected that there were CI failures at commit 2eb1bd1 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 95e359b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-aac_tactics, ci-cross_crypto.\nHowever, you may want to wait until the pipeline for the base commit (95e359b) finishes."
961232265,14736,olaure01,2021-11-04 16:54:22,Alizter,"@palmskog Anything using Arith should now use the corresponding lemma in Nat. For example, in this case Arith.Plus.plus_assoc needs to be Nat.add_assoc. I'm not sure what the best way is to go about doing this.\nI can help write an overlay."
961276016,14736,olaure01,2021-11-04 17:44:07,Alizter,I prepared an overlay for aac-tactics coq-community/aac-tactics#99
961296751,14736,olaure01,2021-11-04 18:12:27,Alizter,@coqbot ci minimize ci-cross_crypto
961296791,14736,olaure01,2021-11-04 18:12:29,coqbot-app,I am now running minimization at commit 2eb1bd1 on requested target ci-cross_crypto. I'll come back to you with the results once it's done.
961297188,14736,olaure01,2021-11-04 18:13:01,Alizter,I've started the minimization since it looks like there is a missing instance somewhere. Let's see what we get.
961300322,14736,olaure01,2021-11-04 18:17:28,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/cross_crypto/fcf/src/FCF/RndInList.v (from ci-cross_crypto) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* Copyright 2012-2015 by Adam Petcher.				*\n * Use of this source code is governed by the license described	*\n * in the"
961302161,14736,olaure01,2021-11-04 18:19:58,Alizter,@JasonGross @Zimmi48 Why isn't the minimizer going far enough?
961311270,14736,olaure01,2021-11-04 18:32:38,coqbot-app,"Hey, I have detected that there were CI failures at commit 2eb1bd1 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 95e359b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-aac_tactics, ci-cross_crypto."
961863896,14736,olaure01,2021-11-05 12:39:53,coqbot-app,"Hey, I have detected that there were CI failures at commit 2eb1bd1 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 95e359b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-cross_crypto."
962655312,14736,olaure01,2021-11-07 18:03:27,JasonGross,I think the issue is that there's a Require that occurs after the buggy line.  Let me try to fix this.
962655739,14736,olaure01,2021-11-07 18:06:07,JasonGross,"In the meantime, let's try this\n@coqbot resume ci minimize ci-cross_crypto\n\n Minimized example \n(* Copyright 2012-2015 by Adam Petcher.				*\n * Use of this source code is governed by the license described	*\n * in the LICENSE file at the root of the source tree.		*)\n\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False : Prop := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic."
962655753,14736,olaure01,2021-11-07 18:06:13,coqbot-app,I am now resuming minimization at commit f7366f0 on requested target ci-cross_crypto. I'll come back to you with the results once it's done.
962671246,14736,olaure01,2021-11-07 19:59:10,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/cross_crypto/fcf/src/FCF/RndInList.v (from ci-cross_crypto) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds"
962672911,14736,olaure01,2021-11-07 20:10:29,coqbot-app,"Hey, I have detected that there were CI failures at commit f7366f0 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 460e57e succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-cross_crypto.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not su"
926560813,14929,herbelin,2021-09-24 11:44:17,coqbot-app,"Hey, I have detected that there were CI failures at commit 1f0bf54 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 12f4efd succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-hott."
949733304,14929,herbelin,2021-10-22 15:26:22,SkySkimmer,@coqbot ci minimize
949733365,14929,herbelin,2021-10-22 15:26:26,coqbot-app,I have initiated minimization at commit 1f0bf54 for the suggested target ci-hott as requested.
949735960,14929,herbelin,2021-10-22 15:29:38,coqbot-app,Error: Could not minimize file  (from ci-hott) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.7MiB file on GitHub Actions Artifacts under build.log)\nci/hott/theories/Spaces/Int/Core.v.timing  \n  inflating: _build_ci/hott/theories/Spaces/Int/Core.vo  \n  inflating: _build_ci/hott/theories/Spaces/Int/Core.vok  \n  inflating: _build_ci/hott/theories/Spaces/Int/Core.vos  \n  inflating: _build_ci/hott/theories/Spaces/Int/Equiv.glob  \n  inflating: _build_ci/hott/theories/Spaces/I
949850381,14929,herbelin,2021-10-22 18:00:03,herbelin,"For the record, waiting for #14746 (ex-#13269) to first attach to the OccurCheck error in solve_simple_eqn a more precise meaning."
949868454,14929,herbelin,2021-10-22 18:26:14,SkySkimmer,@coqbot ci minimize ci-hott
949868579,14929,herbelin,2021-10-22 18:26:25,coqbot-app,I am now running minimization at commit 3f28f2b on requested target ci-hott. I'll come back to you with the results once it's done.
949879749,14929,herbelin,2021-10-22 18:43:29,coqbot-app,"Hey, I have detected that there were CI failures at commit 3f28f2b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 11173ba succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-hott."
949919241,14929,herbelin,2021-10-22 19:50:48,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Spaces/Torus/TorusEquivCircles.v (from ci-hott) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" "
949962970,14929,herbelin,2021-10-22 21:13:43,SkySkimmer,"Further reduced\nNotation compose := (fun g f x => g (f x)).\n\nNotation ""g 'o' f"" := (compose g%function f%function)\n  (at level 40, left associativity) : function_scope.\n\nInductive paths {A : Type} (a : A) : A -> Type :=.\n\nNotation ""x = y"" := (paths x y) : type_scope.\n\nDefinition ap {A B:Type} (f:A -> B) {x y:A} (p:x = y) : f x = f y.\nAdmitted.\n\nDefinition ap_compose {A B C : Type} (f : A -> B) (g : B -> C) {x y : A} (p : x = y) :\n  ap (g o f) p = ap g (ap f p).\nAdmitted.\n\nDefinition DPathSquare "
961856611,15121,gares,2021-11-05 12:27:08,gares,From my shell:\ngares@ollypat:~/COQ/ssr-cut$ make -C test-suite/ ssr\nmake: Entering directory '/home/gares/COQ/ssr-cut/test-suite'\n...\nTEST      ssr/have_transp.v \nFAILED    ssr/have_transp.v.log\n...\nmake: Leaving directory '/home/gares/COQ/ssr-cut/test-suite'\ngares@ollypat:~/COQ/ssr-cut$ echo $?\n0\ngares@ollypat:~/COQ/ssr-cut$ git gui\ngares@ollypat:~/COQ/ssr-cut$ git push\nAnd I got error in test suite in CI...
961857889,15121,gares,2021-11-05 12:29:21,SkySkimmer,"That's how the test suite works, you need to make report to get an exit code"
961914680,15121,gares,2021-11-05 13:56:19,coqbot-app,"Hey, I have detected that there were CI failures at commit a204ec2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 0e663cc succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-mathcomp."
961920406,15121,gares,2021-11-05 14:02:08,coqbot-app,"Hey, I have detected that there were CI failures at commit a204ec2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 0e663cc succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-mathcomp."
962026127,15121,gares,2021-11-05 16:12:53,gares,"@coqbot ci minimize\n[locally, make ci-mathcomp works, so I'm a bit perplexed]"
962026195,15121,gares,2021-11-05 16:12:58,coqbot-app,"I have initiated minimization at commit a204ec2 for the suggested target ci-mathcomp as requested.\nHowever, you may want to try again once the pipeline for the head commit (a204ec2) finishes."
962026486,15121,gares,2021-11-05 16:13:21,coqbot-app,"I have initiated minimization at commit a204ec2 for the suggested target ci-mathcomp as requested.\nHowever, you may want to try again once the pipeline for the head commit (a204ec2) finishes."
962027414,15121,gares,2021-11-05 16:14:28,gares,bench: https://gitlab.com/coq/coq/-/jobs/1752766274
962233260,15121,gares,2021-11-05 21:30:21,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/algebra/matrix.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-ambiguous-paths"" ""-w"" ""+non-primitive-record"" ""-"
962233348,15121,gares,2021-11-05 21:30:31,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/algebra/matrix.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 75KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-ambiguous-paths"""
962257682,15121,gares,2021-11-05 22:27:45,coqbot-app,"Hey, I have detected that there were CI failures at commit a204ec2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 0e663cc succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-mathcomp."
962373449,15121,gares,2021-11-06 02:23:42,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/algebra/matrix.v (from ci-mathcomp) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"
962379491,15121,gares,2021-11-06 02:47:25,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/algebra/matrix.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-ambiguous-paths"" ""-w"" ""+non-primitive-record"" ""-"
962381091,15121,gares,2021-11-06 03:02:29,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/algebra/matrix.v (from ci-mathcomp) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"
963266021,15121,gares,2021-11-08 15:22:26,coqbot-app,"Hey, I have detected that there were CI failures at commit 7ab1b71 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8fa85c0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fourcolor.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not sugge"
803114110,13969,mattam82,2021-03-19 20:42:35,mattam82,"BTW, the fix involves only changes in .v files, no customizing of typeclasses eauto is needed here. But it demonstrates quite powerful proof-search control capabilities of the tactic monad."
810873248,13969,mattam82,2021-03-31 08:16:12,mattam82,"Bench is not good, I will have to dig into it:\n────────────────────────────┬──────────────────────────┬────────────────────────────────────────┬────────────────────────────────────────┬──────────────────────────┬─────────────────┐\n│                            │      user time [s]       │               CPU cycles               │            CPU instructions            │  max resident mem [KB]   │   mem faults    │\n│                            │                          │                           "
810880159,13969,mattam82,2021-03-31 08:26:36,ppedrot,"If I had to guess, I'd say that computing head evars can be extremely expensive on huge terms."
810884490,13969,mattam82,2021-03-31 08:32:58,mattam82,"If I had to guess, I would rather think we explore more dead-end paths during resolution of setoid_rewrite goals. The only mode introduced by the PR is + - for RewriteRelation, so it should only do more occurrence checks of evars in (small) types."
821056296,13969,mattam82,2021-04-16 09:43:43,mattam82,"@ppedrot I need your help here, how do I get line timings for math-classes and fiat-parsers ?"
821125446,13969,mattam82,2021-04-16 12:00:51,ppedrot,"You need to download the artifacts, and call the script coqbench-display from the coq-bench repo on the resulting directory."
822379722,13969,mattam82,2021-04-19 11:00:36,mattam82,"You need to download the artifacts, and call the script coqbench-display from the coq-bench repo on the resulting directory.\n\nI'm afraid I don't see which artifacts to download. Sadly the bench did not finish in 24 hours so maybe they are not produced?"
822432731,13969,mattam82,2021-04-19 12:36:51,ppedrot,It's possible that the artifacts are dropped if the bench is aborted. You should restart it on the subset of devs you're interested in only.
822487496,13969,mattam82,2021-04-19 13:57:13,mattam82,I suppose I should use coq_opam_packages = coq-math-classes when starting the job manually. Do we have a doc for this @SkySkimmer @Zimmi48 ?
822507657,13969,mattam82,2021-04-19 14:24:06,Zimmi48,I don't manage the bench infrastructure (@ppedrot and @SkySkimmer do). The only documentation that I'm aware of is https://github.com/coq/coq/wiki/Benchmarking.
822530757,13969,mattam82,2021-04-19 14:52:48,SkySkimmer,I think that should work.
822533726,13969,mattam82,2021-04-19 14:56:19,mattam82,"Cool, one more question: shouldn't we have enough machines now to run benches in parallel?"
824260110,13969,mattam82,2021-04-21 18:14:20,mattam82,"@ppedrot I have the bench dump, which scripts should I use now?\nNevermind, you already answered that 5 days ago :)"
824345695,13969,mattam82,2021-04-21 20:44:24,mattam82,"For math-classes my analysis was right, setoid rewriting was taking more dead-ends, because the library writters did not use Params to cut down on proof-search as advised by the doc."
826050689,13969,mattam82,2021-04-24 07:35:38,mattam82,Fiat-parsers bench job: https://gitlab.com/coq/coq/-/jobs/1205997166
831975755,13969,mattam82,2021-05-04 14:14:32,mattam82,I think I tamed fiat-parsers now.
831977930,13969,mattam82,2021-05-04 14:17:38,mattam82,Bench link: https://gitlab.com/coq/coq/-/jobs/1235010440
843141236,13969,mattam82,2021-05-18 12:47:38,gmalecha,@mattam82 What is the likelihood that this will make it into 8.14?
845396543,13969,mattam82,2021-05-20 18:59:00,JasonGross,@coqbot ci minimize
845396595,13969,mattam82,2021-05-20 18:59:01,coqbot-app,I was unable to minimize any of the CI targets that you requested.\nThe requested target  could not be found
845403542,13969,mattam82,2021-05-20 19:09:17,JasonGross,@coqbot ci minimize library:ci-mathcomp plugin:ci-elpi
845403563,13969,mattam82,2021-05-20 19:09:18,coqbot-app,"I was unable to minimize any of the CI targets that you requested.\nThe requested targets library:ci-mathcomp, plugin:ci-elpi could not be found"
845412440,13969,mattam82,2021-05-20 19:23:39,JasonGross,@coqbot ci minimize library:ci-mathcomp plugin:ci-elpi
845412451,13969,mattam82,2021-05-20 19:23:41,coqbot-app,"I was unable to minimize any of the CI targets that you requested.\nThe requested targets library:ci-mathcomp, plugin:ci-elpi could not be found"
845422561,13969,mattam82,2021-05-20 19:40:18,JasonGross,@coqbot ci minimize library:ci-mathcomp plugin:ci-elpi
845422586,13969,mattam82,2021-05-20 19:40:20,coqbot-app,"I was unable to minimize any of the CI targets that you requested.\nGitLab CI job library:ci-mathcomp (pull request) could not be minimized (Couldn't find base build job url for build:edge+flambda in:\nIf you need to restart the entire pipeline, you may do so directly in the GitHub interface using the ""Re-run"" button.\nThis GitLab pipeline contains the following stages and jobs:\n\n\nstage-1\n\n\nbench\n\n\nbuild:base\n\n\nbuild:base+32bit\n\n\nbuild:base+async\n\n\nbuild:edge+flambda\n\n\nbuild:edge+flambda:dune:dev\n\n"
845423980,13969,mattam82,2021-05-20 19:42:37,SkySkimmer,"You're kinda spamming this PR, please open another for testing so that github doesn't start hiding all the useful comments."
845424569,13969,mattam82,2021-05-20 19:43:37,JasonGross,Sorry about that
846294479,13969,mattam82,2021-05-21 22:34:05,JasonGross,"CI minimization now works, at least to some extent!\n@coqbot ci minimize ci-mathcomp\n(Spoiler at #14328 (comment) (The minimized file is already there))"
846294501,13969,mattam82,2021-05-21 22:34:08,coqbot-app,I am now running minimization at commit af028cf on requested target ci-mathcomp. I'll come back to you with the results once it's done.
846295374,13969,mattam82,2021-05-21 22:37:15,coqbot-app,Error: Could not minimize file  (from ci-mathcomp) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.7MiB file on GitHub Actions Artifacts under build.log)\nQxaQ%3D%3D&Expires=1621637233 [following]\n--2021-05-21 22:37:13--  https://storage.googleapis.com/gitlab-gprd-artifacts/e9/08/e90857e7bd14c877063362e92560ccc07e3c490623d322542e6f83f13867d6d1/2021_05_20/1281044620/1374823283/library_ci-mathcomp.zip?response-content-disposition=attachment%3B%20filename%3D%22library_ci-math
847012025,13969,mattam82,2021-05-24 12:34:03,JasonGross,This should hopefully work now.  @coqbot ci minimize ci-mathcomp
847012060,13969,mattam82,2021-05-24 12:34:06,coqbot-app,I am now running minimization at commit af028cf on requested target ci-mathcomp. I'll come back to you with the results once it's done.
847034130,13969,mattam82,2021-05-24 13:13:51,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/ssreflect/seq.v (from ci-mathcomp) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp"" ""mathcomp"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-I"" ""/github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcom"
848055643,13969,mattam82,2021-05-25 17:07:16,mattam82,@JasonGross thanks a whole bunch! I'll have a look this week.
848653721,13969,mattam82,2021-05-26 10:23:20,mattam82,"@gares You might help tell me why the rewrite used to succeed here:\nx: T1\ns: seq T1\nIHs: {in s &, injective f} -> uniq (T:=T2) (map f s) = uniq (T:=T1) s\ninjf: {in x :: s &, injective f}\ny: T1\nsy: y \in s\n------------------------------------\n(true -> y \in x :: s -> x = y) -> x \in s\nrewrite mem_behead used to work. I don't understand exactly how rewriting works here with lemmas of the shape {subset foo <= bar}"
848657583,13969,mattam82,2021-05-26 10:30:05,mattam82,"I don't need to know exactly, because the bug is probably that ssr's rewrite does not realize that setoid rewriting should not be tried here, but I'm still curious :)"
848664630,13969,mattam82,2021-05-26 10:42:39,mattam82,"@JasonGross that was really helpful, I could fix the bug in no time. math-comp and other contribs using mixed math-comp/setoid rewriting should work now."
848719493,13969,mattam82,2021-05-26 12:15:38,mattam82,@coqbot ci minimize ci-fourcolor
848719499,13969,mattam82,2021-05-26 12:15:39,coqbot-app,"Error while attempting to find job minimization information:\nCould not find pipeline check for head commit d3cb230 and no summary was passed.  (Found checks: GitLab CI job plugin:ci-equations (pull request), GitLab CI job plugin:ci-perennial (pull request), GitLab CI job library:ci-iris (pull request), GitLab CI job plugin:ci-quickchick (pull request), GitLab CI job library:ci-fourcolor (pull request))"
848723496,13969,mattam82,2021-05-26 12:22:03,JasonGross,Unfortunately the way things are currently set up you need to wait for the whole pipeline to finish to minimize any of the jobs.  I'm considering changing this (or at least changing this for explicit requests).
848732946,13969,mattam82,2021-05-26 12:36:23,mattam82,"@robbertkrebbers @RalfJung the iris error is a bit more subtle. The categorization of the ! mode is done using:\nlet head_evar sigma c =\n    let rec hrec c = match EConstr.kind sigma c with\n      | Evar (evk,_)   -> evk\n      | Case (_,_,_,_,_,c,_) -> hrec c\n      | App (c,_)      -> hrec c\n      | Cast (c,_,_)   -> hrec c\n      | Proj (p, c)    -> hrec c\n      | _              -> raise Evarutil.NoHeadEvar\n    in\n    hrec c\nThat is, ofe_car ?X is considered to have an evar at its head, as ofe_car"
848736253,13969,mattam82,2021-05-26 12:41:30,mattam82,"Notably, this is not uniform with the dist projection, which, as a constant, can be applied to ?X and considered to have no evar at its head, so the - ! mode works to get the constraint unstuck."
848797556,13969,mattam82,2021-05-26 14:04:20,coqbot-app,"Hey, I have detected that there were CI failures at commit d3cb230 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a2cecb3 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-equations, ci-fourcolor, ci-iris, ci-perennial, ci-quickchick."
848802405,13969,mattam82,2021-05-26 14:10:14,JasonGross,@coqbot ci minimize
848802598,13969,mattam82,2021-05-26 14:10:29,coqbot-app,"I have initiated minimization at commit d3cb230 for the suggested targets ci-equations, ci-fourcolor, ci-iris, ci-perennial, ci-quickchick as requested."
848804913,13969,mattam82,2021-05-26 14:13:20,mattam82,"I think ! should only disallow ?X t1 ... tn, up to casts. But that change might have quite some impact, I'll make a PR to test."
848805418,13969,mattam82,2021-05-26 14:13:55,coqbot-app,Error: Could not minimize file  (from ci-iris) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 3.5MiB file on GitHub Actions Artifacts under build.log)\nve\nINSTALL theories/.coq-native/Nstdpp_list.cmi /builds/coq/coq/_install_ci/lib/coq//user-contrib/stdpp//.coq-native\nINSTALL theories/.coq-native/Nstdpp_list_numbers.cmi /builds/coq/coq/_install_ci/lib/coq//user-contrib/stdpp//.coq-native\nINSTALL theories/.coq-native/Nstdpp_functions.cmi /builds/coq/coq/_install_ci/lib/coq//
848805751,13969,mattam82,2021-05-26 14:14:19,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/equations/examples/AlmostFull.v (from ci-equations) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 58KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.extraction.Extrac"
848806668,13969,mattam82,2021-05-26 14:15:27,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fourcolor/theories/realcategorical.v (from ci-fourcolor) (full log on GitHub Actions)\nMinimized Coq File\n(* (c) Copyright 2006-2018 Microsoft Corporation and Inria.                  *)\n(* Distributed under the terms of CeCILL-B.                                  *)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation "
699605828,13071,maximedenes,2020-09-27 08:44:57,RalfJung,"I entirely lost context, so I am not sure what should be tested here. There are a couple of testcases in #6583 but I assume you tried those?\nI guess we could change the refine mentioned here back into an apply and see what happens? Not sure if that makes any sense... @robbertkrebbers might know better."
699609650,13071,maximedenes,2020-09-27 09:19:13,RalfJung,"Even with this branch, if I change the refine back to an apply I get build failures in Iris:\nFile ""/home/r/Dokumente/Unisachen/iris/coq.2/tests/proofmode_iris.v"", line 238, characters 17-35:\nError:\nUnable to satisfy the following constraints:\nIn environment:\nΣ : gFunctors\ninvG0 : invG Σ\ncinvG0 : cinvG Σ\nna_invG0 : na_invG Σ\nA : cmraT\ninG0 : inG Σ A\nγ : gname\nx, x' : A\nH : x' ≼ x\n\n?Hin : ""inG ?Σ ?A""\n\nHowever, I do not know if this is the right way to test that change."
700029734,13071,maximedenes,2020-09-28 14:06:07,robbertkrebbers,"This is very interesting. Thanks for working on this @maximedenes.\nSo, just to get clear what you've done: This MR defines a new tactic resolve_tc that can be used to implement step (3) in #6583 (comment) ?"
700033179,13071,maximedenes,2020-09-28 14:11:41,robbertkrebbers,"@RalfJung In #6583 (comment) I pointed out that Iris actually relies on a weird behavior of the legacy apply tactic. This made it impossible to switch to refine variants for some parts of the proof mode code. (And thus, that would make it impossible to port the proof mode to a hypothetical new version of Coq that uses the new unification algorithm by default).\nThe MR seems to provide a way that makes it possible to implement the proof mode solely using refine, so without relying on the legacy ap"
700043051,13071,maximedenes,2020-09-28 14:27:42,RalfJung,"Oh I see, I misunderstood. This does not change the behavior of existing tactics but adds a new tactic that would be useful for us.\nI'll have to leave testing to Robbert then. :)"
700072531,13071,maximedenes,2020-09-28 15:15:35,maximedenes,"So, just to get clear what you've done: This MR defines a new tactic resolve_tc that can be used to implement step (3) in #6583 (comment) ?\n\nYes, at least that's what I tried to do ;)\n\nOh I see, I misunderstood. This does not change the behavior of existing tactics but adds a new tactic that would be useful for us.\n\nSorry, I should have put more context. The problem is that Iris is depending on the bug that you'd like us to fix ;) Hopefully, the tactic defined in this PR should be enough, so tha"
700073745,13071,maximedenes,2020-09-28 15:17:34,maximedenes,"@robbertkrebbers if your testing shows that this tactic suits your needs, I'll document it and polish the patch. Feel free to suggest a better name for the tactic as well, or any other improvements."
704836525,13071,maximedenes,2020-10-07 10:11:03,robbertkrebbers,"@maximedenes I have been experimenting with this, and while the tactic seems helpful, I cannot quite use it for the code in the current state. I have code like:\napply lemma;\n  [create term t with evars\n  |do other stuff];\n(* now, after ""do other stuff"" is done, I want to solve all remaining\n   evars in t that have not been solved by ""do other stuff"" *)\n\nThe problem is that the scope of t is restricted, and I cannot refer to it after the apply.\nI'm trying to rewrite the code to avoid this, but it"
704840296,13071,maximedenes,2020-10-07 10:18:21,ppedrot,"It's fairly easy to add a continuation to this tactic though, so that it allows to implement your scope-building pattern."
704843949,13071,maximedenes,2020-10-07 10:25:15,maximedenes,"It's fairly easy to add a continuation to this tactic though, so that it allows to implement your scope-building pattern.\n\n@ppedrot if you have a minute, would you mind adding it to the PR? It is an experiment anyway. Thanks!"
704846571,13071,maximedenes,2020-10-07 10:30:49,robbertkrebbers,"PS: Another fun problem in the code in #13071 (comment):\nIt is often the case that ""do other stuff"" solves all goals, and then resolve_tc is not called. I managed to hack around that by adding a dummy premise True to lemma."
704846779,13071,maximedenes,2020-10-07 10:31:14,robbertkrebbers,"It's fairly easy to add a continuation to this tactic though, so that it allows to implement your scope-building pattern.\n\n@ppedrot if you have a minute, would you mind adding it to the PR? It is an experiment anyway. Thanks!\n\nThat would be great indeed, would be curious to see how that looks like and if it helps."
707003194,13071,maximedenes,2020-10-12 09:31:42,maximedenes,"The problem is that the scope of t is restricted, and I cannot refer to it after the apply.\n\n@robbertkrebbers do you mind elaborating? In #6583, you wrote that the idiom used in Iris was:\nTactic Notation ""foo"" uconstr(c) :=\n  let c := open_constr(c) in                                (* step 1 *)               \n  perform tactics;                                          (* step 2 *)\n  call TC search on all remaining evars created in step 1   (* step 3 *)\nWhich seems easy to transform into:\nTactic"
707279534,13071,maximedenes,2020-10-12 18:29:47,robbertkrebbers,"The actual code turned out to be a bit more complicated, unfortunately...\nMaybe I should try to explain what we try to achieve, instead of how it's currently implemented. I actually think it's not really Iris specific, so we might be able to come up with a general-purpose solution.\nBasically, many of the Iris tactics (for example, iApply) take lemmas in the Iris logic, which are of the form:\nlem : ∀ x1 .. xn, (P ⊢ Q)\nHere, ⊢ : iProp → iProp → Prop is the entailment relation of Iris. An important"
708467523,13071,maximedenes,2020-10-14 15:10:05,SkySkimmer,"Maybe something like this\nLtac apply_all_arguments lem tac :=\n  let P := open_constr:(_ : Prop) in\n  tryif\n    let rhs := open_constr:(_ : (_ : Prop) -> _) in\n    unify lem rhs\n  then (* Prop argument, use assert *)\n    let HP := fresh in \n    assert P as HP;\n    [|let lem := open_constr:(lem HP) in\n      clear HP; (* are we really allowed to clear HP here? *)\n      apply_all_arguments lem tac]\n  else (* other argument or base case *)\n    tryif\n      let rhs := open_constr:(_:(forall x:_, _)) in"
725342549,13071,maximedenes,2020-11-11 10:30:56,robbertkrebbers,This problem recently stroke us again in Iris. (See https://mattermost.mpi-sws.org/iris/pl/1ufy9cmimi8hfeiczyhx4txsmy). It would be good to have a phone call with the parties involved to discuss this MR and how we can move forward?\n@RalfJung @maximedenes @SkySkimmer : Would Wed 25 Nov after 15:00 work?
725402332,13071,maximedenes,2020-11-11 12:43:19,RalfJung,"See https://gitlab.mpi-sws.org/iris/iris/-/merge_requests/582 for the fix required for now -- without this, several Iris reverse dependencies fail due to TC resolution happening too early.\n\nWould Wed 25 Nov after 15:00 work?\n\n👍"
729640674,13071,maximedenes,2020-11-18 12:16:36,SkySkimmer,@RalfJung @maximedenes @SkySkimmer : Would Wed 25 Nov after 15:00 work?\n\nOK for me
729640942,13071,maximedenes,2020-11-18 12:17:09,SkySkimmer,ping @maximedenes
733623389,13071,maximedenes,2020-11-25 10:37:55,maximedenes,"Sorry, I missed the ping. If the slot is still ok for you, I'll be available."
733775402,13071,maximedenes,2020-11-25 15:27:33,SkySkimmer,Turns out we can remove the enter but it's insufficient as we need to focus to parse the argument as a constr.\nSo we still need the continuation style version.
733794785,13071,maximedenes,2020-11-25 15:58:11,JasonGross,"What if you have resolve_tc take a var instead?  I'm not sure exactly how to pull a constr out of an Ltac variable, but conceptually this fixes the focusing issue."
733796060,13071,maximedenes,2020-11-25 16:00:11,SkySkimmer,I'm not sure exactly how to pull a constr out of an Ltac variable\n\nI don't know either\nMaybe @ppedrot knows
733895270,13071,maximedenes,2020-11-25 19:01:24,ppedrot,"You need to fetch it from the ist argument of the tactic which is implicitly available inside a TACTIC EXTEND, and cast it as a constr using Taccoerce."
734847560,13071,maximedenes,2020-11-27 13:57:29,SkySkimmer,I tried again (see last commit) but it still focuses somewhere.
735003059,13071,maximedenes,2020-11-27 22:29:25,JasonGross,I'm confused.  Does preident focus?  Is there a way to figure out which part results in focussing?
796835498,13071,maximedenes,2021-03-11 15:50:46,SkySkimmer,@ppedrot so how do we make a non-focusing tactic?
797060255,13071,maximedenes,2021-03-11 21:26:35,ppedrot,Your primitive tactic should already be non-focussing. I will have a deeper look again when I have a bit of time.
891036050,13071,maximedenes,2021-08-02 13:39:28,maximedenes,"@SkySkimmer @ppedrot do you think you could have a new look, to identify where focusing occurs?"
891716141,13071,maximedenes,2021-08-03 10:07:28,SkySkimmer,This preident stuff did not work even a little so I reverted to the previous commit.
891725396,13071,maximedenes,2021-08-03 10:20:34,SkySkimmer,"Here is a version which doesn't focus, by adding resolve_tc to the core tactics (tactic_expr)."
891834235,13071,maximedenes,2021-08-03 13:10:58,coqbot-app,"Hey, I have detected that there were CI failures at commit 16ce8ea without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 7c3f597 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-coq_tools, ci-perennial."
891840413,13071,maximedenes,2021-08-03 13:19:15,coqbot-app,"Hey, I have detected that there were CI failures at commit 16ce8ea without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 7c3f597 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-coq_tools, ci-perennial."
891848835,13071,maximedenes,2021-08-03 13:30:42,coqbot-app,"Hey, I have detected that there were CI failures at commit 16ce8ea without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 7c3f597 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-coq_tools, ci-perennial."
952587263,15075,liyishuai,2021-10-27 06:37:52,coqbot-app,"Hey, I have detected that there were CI failures at commit 9fe649f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit e9c1223 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
952589348,15075,liyishuai,2021-10-27 06:42:00,coqbot-app,"Hey, I have detected that there were CI failures at commit 9fe649f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit e9c1223 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
952591668,15075,liyishuai,2021-10-27 06:46:34,coqbot-app,"Hey, I have detected that there were CI failures at commit 9fe649f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit e9c1223 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
952596997,15075,liyishuai,2021-10-27 06:55:58,coqbot-app,"Hey, I have detected that there were CI failures at commit 9fe649f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit e9c1223 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
952604582,15075,liyishuai,2021-10-27 07:08:20,liyishuai,Releasing locks for the next 10 hours. Feel free to (force-)push.
952646746,15075,liyishuai,2021-10-27 08:08:02,coqbot-app,"Hey, I have detected that there were CI failures at commit efec0c2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit e9c1223 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
952756123,15075,liyishuai,2021-10-27 10:06:09,coqbot-app,"Hey, I have detected that there were CI failures at commit efec0c2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit e9c1223 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
953272638,15075,liyishuai,2021-10-27 20:11:48,liyishuai,@coqbot ci minimize
953272708,15075,liyishuai,2021-10-27 20:11:52,coqbot-app,I have initiated minimization at commit efec0c2 for the suggested target ci-coq_tools as requested.
953279011,15075,liyishuai,2021-10-27 20:20:22,coqbot-app,Error: Could not minimize file  (from ci-coq_tools) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 3.5MiB file on GitHub Actions Artifacts under build.log)\nduces the following output when Coq'\''ed:�MINIMIZER_DEBUG: /builds/coq/coq/_install_ci/bin/coqc�MINIMIZER_DEBUG: coqpath: COQPATH=�MINIMIZER_DEBUG: pwd: PWD=/builds/coq/coq/_build_ci/coq_tools/examples/example_48�MINIMIZER_DEBUG: exec: /builds/coq/coq/_install_ci/bin/coqc.orig -w -deprecated-native-compiler-option -noi
961070015,15075,liyishuai,2021-11-04 14:36:37,Zimmi48,cc @JasonGross: you can probably help debug the coq-tools error here.
961108684,15075,liyishuai,2021-11-04 14:55:18,JasonGross,"The minimizer cannot minimize coq-tools because coq-tools is too sensitive to the output of coqc (known issue).  From what I can tell, you just got unlucky; there was a half-hour period or so when coq-tools was broken upstream, and I think you just managed to catch that period.  I've restarted the job"
961120628,15075,liyishuai,2021-11-04 15:01:03,Zimmi48,"We should exclude coq-tools from the list of jobs the minimizer proposes to minimize then, either by hardcoding the exclusion in the code of the bot, or by changing the prefix of the job name to something different."
961160293,15075,liyishuai,2021-11-04 15:33:47,JasonGross,"CI passes now.\n@Zimmi48 , I've created coq/bot#176"
961699845,15075,liyishuai,2021-11-05 08:11:31,Alizter,"Excellent, will merge soon."
962450867,15075,liyishuai,2021-11-06 13:19:52,Alizter,@coqbot merge now
606519851,11966,olaure01,2020-03-31 09:52:04,anton-trunov,"Hi @olaure01, I'm wondering about your use case for this new feature. Could you please expand a bit on that?"
606551679,11966,olaure01,2020-03-31 10:54:03,olaure01,"This comes from the development of the yalla library (a library for the formalization of linear logic results in Coq).\nI'll give other justifications but let me explain the path I followed in yalla.\nI want to define proofs as proofs... that is not through a provability predicate:\nproof : list formula -> Type\nrather than\nproof : list formula -> Prop\ni.e. I want proofs as first-class objects, not provability.\nVarious reasons for that, for example:\n\nit allows to define the length of a proof as a fu"
618040155,11966,olaure01,2020-04-22 21:05:19,herbelin,"@olaure01 : I'd be rather in agreement with your arguments. Both the proof-irrelevant and the proof-relevant versions of In are useful (as well as a version to bool).\nSomehow, I would however lean to add the Type version already in List rather than creating a new file. The reason is that I'm worrying that the files otherwise diverge (for instance, Logic_Type is not very lively). The drawback is that this makes List maybe more complex to enter for a newcomer. Do you think that this would be manag"
618054292,11966,olaure01,2020-04-22 21:37:48,olaure01,"@herbelin\n\nSomehow, I would however lean to add the Type version already in List rather than creating a new file. The reason is that I'm worrying that the files otherwise diverge (for instance, Logic_Type is not very lively). The drawback is that this makes List maybe more complex to enter for a newcomer. Do you think that this would be manageable/realistic to dispatch all of ListType in List?\n\nI was following the pattern from Classes: RelationClasses/CRelationClasses, Morphisms/CMorphisms, etc."
618061619,11966,olaure01,2020-04-22 21:56:31,herbelin,"I was following the pattern from Classes: RelationClasses/CRelationClasses, Morphisms/CMorphisms, etc. but I can do a direct integration in List here.\nMaybe the approach with two files is more natural in some situations like Permutation_Type where the main inductive is duplicated and moved into Type.\n\nAh, right. Do you know why the C variants in Classes are not enough? Is it to keep some control on the generation of universe variables? Is it to have some control on extraction?\n\nOK. By curiosity,"
618068158,11966,olaure01,2020-04-22 22:14:05,olaure01,"@herbelin\n\nDo you know why the C variants in Classes are not enough? Is it to keep some control on the generation of universe variables? Is it to have some control on extraction?\n\nDo you mean: why not removing RelationClasses since we have CRelationClasses?\nIf so: I don't know.\nWhat I know is:\n\nnot all files have their C variant, thus I had to create some more: CEqualities or COrders\nrelation and crelation do not behave the same wrt (setoid) rewriting: #7675, #11011, and this is quite a nightmar"
621180972,11966,olaure01,2020-04-29 12:46:30,olaure01,"I am stuck with the two CI failures:\n\nThe metacoq one is due to some extraction ""not handled yet"". Is there a standard solution? I do not see it as a reason to modify statements. Does it suggests splitting the file so that metacoq extracts only part of it? or maybe this would not solve the problem, I don't know.\nThe rewriter one seems to be about some universe problem I simply do not understand.\n\nHelp welcome..."
885794759,11966,olaure01,2021-07-23 17:38:14,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
885797133,11966,olaure01,2021-07-23 17:42:22,Zimmi48,"Sorry I missed that you were asking for help here. We should request involvement of maintainers of the affected projects to decide what to do. If you rebase the PR, we might also be able to use the auto-minimization feature of the bot to better understand the rewriter failure."
886217169,11966,olaure01,2021-07-25 15:23:02,coqbot-app,"Hey, I have detected that there were CI failures at commit 31cf6f6 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 5a7be70 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-metacoq, ci-rewriter, ci-vst."
886229972,11966,olaure01,2021-07-25 16:58:40,olaure01,@coqbot ci minimize
886229983,11966,olaure01,2021-07-25 16:58:47,coqbot-app,"I have initiated minimization at commit 31cf6f6 for the suggested targets ci-metacoq, ci-rewriter, ci-vst as requested."
886230665,11966,olaure01,2021-07-25 17:04:47,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/metacoq/template-coq/theories/Extraction.v (from ci-metacoq) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* Distributed under the terms of the MIT license. *)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic"
886240171,11966,olaure01,2021-07-25 18:26:22,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/rewriter/src/Rewriter/Rewriter/Examples/PerfTesting/SieveOfEratosthenes.v (from ci-rewriter) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+deprecated-hint-constr,+fragile-hint-constr,+variable-coll"
886265093,11966,olaure01,2021-07-25 22:15:29,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/floyd/closed_lemmas.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 86KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/v"
886345796,11966,olaure01,2021-07-26 03:32:24,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/floyd/closed_lemmas.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 81KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/v"
886395867,11966,olaure01,2021-07-26 05:49:12,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/floyd/closed_lemmas.v (from ci-vst) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 80KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/sepcomp"" ""VST.sepcomp"" ""-Q"" ""/github/workspace/builds"
941094161,11966,olaure01,2021-10-12 14:59:42,coqbot-app,"Hey, I have detected that there were CI failures at commit 782eabc without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ad978df succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-metacoq, ci-rewriter, ci-vst."
962665803,11966,olaure01,2021-11-07 19:18:54,coqbot-app,"Hey, I have detected that there were CI failures at commit 9c4aecb without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 460e57e succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-metacoq, ci-rewriter.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I "
963076241,11966,olaure01,2021-11-08 11:52:28,coqbot-app,"Hey, I have detected that there were CI failures at commit 2b4494f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8fa85c0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-rewriter.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not sugges"
963670522,11966,olaure01,2021-11-08 23:30:08,coqbot-app,"Hey, I have detected that there were CI failures at commit 1c62ca8 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 21e1997 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-metacoq, ci-rewriter.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I "
964081175,11966,olaure01,2021-11-09 11:53:53,coqbot-app,"Hey, I have detected that there were CI failures at commit 421fb36 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 21e1997 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-rewriter.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not sugges"
964171246,11966,olaure01,2021-11-09 13:53:09,olaure01,"The ci-rewriter failure corresponds to the following minimized problem:\nDefinition atTrue : (Type -> Type) -> Type := fun f => f True.\n\nCheck (0, atTrue).\n\nDefinition prod_atTrue : atTrue (prod True) := (I, I).\n\nFail Check (0, atTrue).\n(*\nThe command has indeed failed with message:\nThe term ""atTrue"" has type ""(Type -> Type) -> Type"" while it is expected to have type \n""?B"" (unable to find a well-typed instantiation for ""?B"": cannot ensure that\n""Type@{max(atTrue.u0+1,atTrue.u1+1,Top.15+1)}"" is a s"
953173345,15081,ppedrot,2021-10-27 17:55:29,silene,"For the changelog, you can directly modify the 8.14 changelog, as this seems worth backporting. By the way, think about updating dev/doc/critical-bugs along the way."
953249377,15081,ppedrot,2021-10-27 19:37:38,coqbot-app,"Hey, I have detected that there were CI failures at commit cc13122 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4012eb2 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-coq_tools (because base job at 4012eb2 failed)"
953279330,15081,ppedrot,2021-10-27 20:20:52,coqbot-app,"Hey, I have detected that there were CI failures at commit cc13122 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4012eb2 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-coq_tools (because base job at 4012eb2 failed)"
953304222,15081,ppedrot,2021-10-27 20:56:11,ppedrot,@silene nits addressed and documentation completed. I have added a patch that removes the calls to Parray.to_array on opaque types from both the VM and native for additional ceinture et bretelles. With a bit of luck this should even be more efficient (we are trading an array allocation for one indirection per element of the array).
953527615,15081,ppedrot,2021-10-28 06:01:30,silene,"I have added a patch that removes the calls to Parray.to_array on opaque types from both the VM and native for additional ceinture et bretelles.\n\nIf we really wanted to, I guess we could add Parray.map_to_array, which is what the code is actually doing and would allow to use unsafe_get to recover a bit of performance.\nBut speaking of native_compute, I wonder if the bug does not still exist under another form. Indeed, I expect the strongly reduced form of f x := set (make 2 one) 1 x to be compile"
953531530,15081,ppedrot,2021-10-28 06:09:58,silene,"No, my mistake, scrap that. As I said, the memory corruption already happened at that point. So, changing unsafe_of_array into of_array will only make things worse. It is the whole compilation scheme for array literals in native_compute that needs to be revisited. Using ""[|...|]"" is plain wrong."
953551365,15081,ppedrot,2021-10-28 06:49:37,silene,"Parray could provide a function of_tuple: Obj.t -> 'a t, which would look a lot like the defensive part of of_array, except that it would use Obj.size and Obj.field instead of Array.length and Array.unsafe_get. (Now that I look at the code, I notice it does not use unsafe_get. It should.) Then, the compiled literal would be of_tuple (Obj.magic 1.0, x) instead of of_array [| Obj.magic 1.0; x |], which would prevent the memory corruption.\nHmm... I don't think the surface language of OCaml allows f"
953564328,15081,ppedrot,2021-10-28 07:12:03,ppedrot,I guess we could use Some x to achieve the same effect when the literal has size 1.\n\nUgh. This is really ugly. When do we switch to malfunction already?
953598240,15081,ppedrot,2021-10-28 08:03:22,ppedrot,"@silene I've pushed a patch that tweaks the compilation scheme of native arrays. For 1-tuples, instead of an option, I've used a ref, at least the compiler cannot pretend it's immutable in this case. Let's see what this gives in the CI."
953800271,15081,ppedrot,2021-10-28 12:32:29,ppedrot,Comments addressed.
957661308,15081,ppedrot,2021-11-02 14:10:58,ppedrot,@silene critical entry tweaked.
958315261,15081,ppedrot,2021-11-02 22:43:13,ppedrot,@silene you should probably assign.
958722223,15081,ppedrot,2021-11-03 07:58:42,silene,@coqbot merge now
952160572,15069,ppedrot,2021-10-26 17:35:08,ejgallego,"Great, I'm sorry you had to repeat some of the work we had unfinished.\nNote tho that it could be a good idea to remove calls in library just after that, then we can push Global first to engine, and later to pretyping [or even further]."
952165273,15069,ppedrot,2021-10-26 17:41:10,ppedrot,"@ejgallego I think this kind of changes are better performed piecewise, otherwise we never make progress. Do not hesitate to push small PRs with such cleanups, regardless of their size. The current one is not very big, but was performed so that I will not lose time trying to fix issues encountered making abstract purely functional."
952207244,15069,ppedrot,2021-10-26 18:37:11,ejgallego,"@ppedrot sure, I meant that suggestion as an additional PR, not as part of this one."
952207688,15069,ppedrot,2021-10-26 18:37:49,ejgallego,"Last time I looked [as it was discussed on the call], it was feasible to push Global quite a bit, up to interp almost."
952792308,15069,ppedrot,2021-10-27 10:50:18,coqbot-app,"Hey, I have detected that there were CI failures at commit b0b958d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 7fc6855 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-coq_tools (because base job at 7fc6855 failed)\nHowever, you may want to wai"
952794552,15069,ppedrot,2021-10-27 10:52:47,ppedrot,"The CI breakage of coq-tools is unrelated, it happen on other PRs as well. Probably some upstream issue."
952834734,15069,ppedrot,2021-10-27 11:40:16,coqbot-app,"Hey, I have detected that there were CI failures at commit b0b958d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 7fc6855 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-coq_tools (because base job at 7fc6855 failed)"
952839276,15069,ppedrot,2021-10-27 11:46:06,Alizter,So now all methods in engine/ do not change the global environment as a side effect? Can we somehow stop Global.env () from ever being called in engine/?
952841542,15069,ppedrot,2021-10-27 11:48:45,ppedrot,"reading the global env from the monad is bad\n\n@gares I can't agree more, but even if you mention that your comments are non-blocking, the point of this PR is to make some progress otherwise we'll be stuck forever with pre-8.5 borken code. I will propagate the changes upwards in later PRs, for the time being this is a net progress."
952842774,15069,ppedrot,2021-10-27 11:50:17,SkySkimmer,"So now all methods in engine/ do not change the global environment as a side effect? Can we somehow stop Global.env () from ever being called in engine/?\n\nGlobal.env is a reader, not a setter."
952842845,15069,ppedrot,2021-10-27 11:50:23,ppedrot,"@gares for changes regarding funind, see my previous comment."
952844937,15069,ppedrot,2021-10-27 11:52:59,gares,"@gares for changes regarding funind, see my previous comment.\n\nI'm fine with keeping things as they are, but for some reasons the feature ""filter files I own"" does not work here, so I started reading these files and wrote the comment. Unless I'm now a codeowner of everything..."
952870419,15069,ppedrot,2021-10-27 12:22:42,coqbot-app,"Hey, I have detected that there were CI failures at commit b0b958d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 7fc6855 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-coq_tools (because base job at 7fc6855 failed)"
953739519,15069,ppedrot,2021-10-28 11:03:58,SkySkimmer,@coqbot merge now
953739560,15069,ppedrot,2021-10-28 11:04:02,coqbot-app,@SkySkimmer: Please take care of the following overlays:\n\n15069-ppedrot-engine-without-global.sh
924736587,14916,SkySkimmer,2021-09-22 09:12:05,ppedrot,Will merge when CI finishes.
924897609,14916,SkySkimmer,2021-09-22 12:47:56,coqbot-app,"Hey, I have detected that there were CI failures at commit d77b7cc without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 564fbc0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-elpi (because base job at 564fbc0 failed)"
924904974,14916,SkySkimmer,2021-09-22 12:58:11,ppedrot,elpi looks like it's not happy...
924918921,14916,SkySkimmer,2021-09-22 13:14:13,SkySkimmer,Same in master https://gitlab.com/coq/coq/-/jobs/1612557142n waiting for LPCIC/coq-elpi#289
924940945,14916,SkySkimmer,2021-09-22 13:39:50,ppedrot,"OK. Rewriter failure is unrelated, and there is virtually no chance this PR affects it anyway. Let's merge."
924941907,14916,SkySkimmer,2021-09-22 13:40:58,ppedrot,@coqbot merge now
962523456,15137,SkySkimmer,2021-11-06 23:27:30,ppedrot,"I have literally no idea how the build system is working (and I think I don't want to know), but the CI seems quite unhappy."
962524807,15137,SkySkimmer,2021-11-06 23:43:26,Alizter,Why was it in user-contrib to begin with?
962525105,15137,SkySkimmer,2021-11-06 23:47:18,ppedrot,"@Alizter a horrible implementation detail that forced plugins in plugins/ to be loaded with -R while plugins in user-contribs/ where loaded with -Q. But there are many files in the Ltac2 plugin whose base name conflicts with other files in the stdlib, so adding it with -R was not a viable option, since the loadpath mechanism would find the completely wrong file."
963148757,15137,SkySkimmer,2021-11-08 13:25:59,SkySkimmer,"There were several related hacks in the legacy build, I think I removed all of them. Even the test suite looks happy in CI."
963183265,15137,SkySkimmer,2021-11-08 14:04:13,Zimmi48,"a horrible implementation detail that forced plugins in plugins/ to be loaded with -R while plugins in user-contribs/ where loaded with -Q. But there are many files in the Ltac2 plugin whose base name conflicts with other files in the stdlib, so adding it with -R was not a viable option, since the loadpath mechanism would find the completely wrong file.\n\nNote that this choice was made at a time when theory files for plugins were kept together with ML code in the plugins/ directory. Now this has "
963264778,15137,SkySkimmer,2021-11-08 15:21:12,coqbot-app,"Hey, I have detected that there were CI failures at commit 31e1202 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8fa85c0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-flocq (because base job at 8fa85c0 failed)"
964851643,15137,SkySkimmer,2021-11-10 07:23:33,gares,"This PR goes toward a better layout, but stops at an intermediate, worse, setup (ltac2 half here half there). I don't get if there is any chance in moving the theory files where they belong, afaict the name conflicts and recursiveness of the load path are still there."
964874949,15137,SkySkimmer,2021-11-10 08:05:16,SkySkimmer,Have you seen the hacks removed from the build system? How is this worse?
964934021,15137,SkySkimmer,2021-11-10 09:22:15,gares,"I agree with that, but the fact that Ltac2 is half here half there is not sarisfactory to me. I'm fine with this PR, I just want to know the whole plan."
964939988,15137,SkySkimmer,2021-11-10 09:28:02,gares,"Said otherwise, maybe there is another way to skin the cat, which is stop loading the stdlib with -R and just move ltac2 in there full stop. After all we added From for a reason."
964951925,15137,SkySkimmer,2021-11-10 09:43:46,SkySkimmer,All plugins have ml files in plugins/ and v files elsewhere
964953274,15137,SkySkimmer,2021-11-10 09:45:23,SkySkimmer,Having the ltac2 v files in user-contrib hasn't been a problem so far so why bother moving them.\nHaving the ml files in user-contrib causes issues in the _build_vo layout.
965021356,15137,SkySkimmer,2021-11-10 11:03:51,gares,"Well, it's not a big problem, but it surely makes things harder to find (also using user-contrib was a hack in the first place)."
965028261,15137,SkySkimmer,2021-11-10 11:12:20,ejgallego,"@gares there is not real plan, what would you like to see, something such as theories/stdlib and theories/Ltac2 , indeed we called that user contrib as to distinguish the -R vs -Q plan.\n[And in fact theories is special, as it is the only library compiled with -R by dune, this is a side-effect of the (boot) flag]\nI think the plan should be to have the stdlib under the Coq prefix, there is an issue for it; when I looked at achieving the plan was pretty hard to do, but if we could put all the loadp"
965028706,15137,SkySkimmer,2021-11-10 11:12:52,ejgallego,"@gares there is not real plan, what would you like to see, something such as theories/stdlib and theories/Ltac2 , indeed we called that user contrib as to distinguish the -R vs -Q plan.\n[And in fact theories is special, as it is the only library compiled with -R by dune, this is a side-effect of the (boot) flag]\nI think the plan should be to have the stdlib under the Coq prefix, there is an issue for it; when I looked at achieving the plan was pretty hard to do, but if we could put all the loadp"
966247048,15137,SkySkimmer,2021-11-11 12:03:17,ppedrot,Does the fact that the Coq folder is called Ltac2 and the plugin one ltac2 matter? For uniformity shouldn't they share the same name?
966346249,15137,SkySkimmer,2021-11-11 14:27:44,ejgallego,"Does the fact that the Coq folder is called Ltac2 and the plugin one ltac2 matter? For uniformity shouldn't they share the same name?\n\nFor the ml part is not relevant at all, we follow the convention tho as the ocamlfind library is coq.plugins.ltac2\nFor the Coq part it also doesn't matter, the installation directory does, so it is convenient in some setups where you want to do -Q user-contrib . on the build folder."
966348855,15137,SkySkimmer,2021-11-11 14:30:57,ejgallego,Async failure not related; gappa missing overlay.
966349394,15137,SkySkimmer,2021-11-11 14:31:38,ejgallego,@coqbot: merge now
697202391,13072,maximedenes,2020-09-23 08:01:33,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
855856421,13072,maximedenes,2021-06-07 11:45:21,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
855991770,13072,maximedenes,2021-06-07 14:39:06,coqbot-app,"Hey, I have detected that there were CI failures at commit 855d914 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 61b8f54 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-coquelicot, ci-fiat_crypto_legacy, ci-fiat_parsers, ci-hott, ci-metacoq, ci-quickchick, ci-rewriter, ci-verdi_raft."
857781636,13072,maximedenes,2021-06-09 15:07:53,JasonGross,Maybe the minimizer can give small examples that are helpful here?\n@coqbot ci minimize
857781670,13072,maximedenes,2021-06-09 15:07:54,coqbot-app,"I was unable to minimize any of the CI targets that you requested.\nThe following requests were not fulfilled:\n\nci-iris was not minimized because no error message was found\nci-perennial was not minimized because no error message was found\nci-perennial was not minimized because no error message was found\nAdditionally, the requested targets "", ""performed_via_github_app"":null}, ""repository"":{""id"":1377159, ""node_id"":""MDEwOlJlcG9zaXRvcnkxMzc3MTU5"", ""name"":""coq"", ""full_name"":""coq/coq"", ""private"":false,"
857793891,13072,maximedenes,2021-06-09 15:18:33,JasonGross,"Let's try again with an explicit list\n@coqbot ci minimize ci-coquelicot, ci-fiat_crypto_legacy, ci-fiat_parsers, ci-hott, ci-metacoq, ci-quickchick, ci-rewriter, ci-verdi_raft"
857794177,13072,maximedenes,2021-06-09 15:18:55,coqbot-app,"I am now running minimization at commit 855d914 on requested targets ci-coquelicot, ci-fiat_crypto_legacy, ci-fiat_parsers, ci-hott, ci-metacoq, ci-quickchick, ci-rewriter, a, a, to, write. I'll come back to you with the results once it's done.\nci-iris was not minimized because no error message was found\nAdditionally, the requested targets ci-verdi_raft"", ""performed_via_github_app"":null}, ""repository"":{""id"":1377159, ""node_id"":""MDEwOlJlcG9zaXRvcnkxMzc3MTU5"", ""name"":""coq"", ""full_name"":""coq/coq"", """
857796568,13072,maximedenes,2021-06-09 15:21:58,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/MinimalParseOfParse.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 55KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq"
857799678,13072,maximedenes,2021-06-09 15:24:47,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coquelicot/theories/Hierarchy.v (from ci-coquelicot) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/coquelicot/theories"" ""Coquelicot"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-cont"
857800044,13072,maximedenes,2021-06-09 15:25:15,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/src/Algebra/Monoid.v (from ci-fiat_crypto_legacy) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-notation-overridden"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/src"" ""Crypto"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_c"
857804076,13072,maximedenes,2021-06-09 15:30:20,coqbot-app,"Error: Could not minimize file  (from ci-metacoq) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 3.4MiB file on GitHub Actions Artifacts under build.log)\nances outside of sections without\nspecifying an explicit locality is therefore deprecated. It is recommended to\nuse ""export"" whenever possible.\n[deprecated-instance-without-locality,deprecated]\nFile ""/github/workspace/builds/coq/coq-passing/_build_ci/metacoq/template-coq/theories/Reflect.v"", line 377, characters 0-8:\nWarn"
857808514,13072,maximedenes,2021-06-09 15:36:13,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Basics/Equivalences.v (from ci-hott) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hott/theories"" ""HoTT"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/"
857810834,13072,maximedenes,2021-06-09 15:39:23,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/rewriter/src/Rewriter/Language/Language.v (from ci-rewriter) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+deprecated-hint-constr,+fragile-hint-constr,+variable-collision,+unexpected-implicit-decla"
857814421,13072,maximedenes,2021-06-09 15:42:14,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/ext_lib/theories/Data/Graph/GraphAdjList.v (from ci-quickchick) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/ext_lib/theories"" ""ExtLib"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/"
857824194,13072,maximedenes,2021-06-09 15:52:56,JasonGross,"ci-fiat_crypto_legacy, ci-coquelicot, ci-hott, ci-quickchick, and ci-rewriter gave useful minimized files (perhaps add them to the test-suite?)\nThe bug with parsing requests is fixed by coq/bot#146 (already deployed).  ci-metacoq is known-broken with respect to minimization (#14453).  I fixed the issue with ci-fiat_parsers in coq-community/run-coq-bug-minimizer@1cd0c28\nLet's try again with the fixed targets:\n@coqbot ci minimize ci-verdi_raft, ci-fiat_parsers"
857824296,13072,maximedenes,2021-06-09 15:53:03,coqbot-app,"I am now running minimization at commit 855d914 on requested targets ci-verdi_raft, ci-fiat_parsers. I'll come back to you with the results once it's done."
857826783,13072,maximedenes,2021-06-09 15:56:08,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/MinimalParseOfParse.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 55KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq"
857828059,13072,maximedenes,2021-06-09 15:57:55,coqbot-app,Error: Could not minimize file /github/workspace/builds/coq/coq-failing/_build_ci/verdi/systems/Log.v (from ci-verdi_raft) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 3.5MiB file on GitHub Actions Artifacts under build.log)\ns.cmxs /github/workspace/builds/coq/coq-failing/_install_ci/lib/coq//user-contrib/Cheerios//.coq-native\nINSTALL core/.coq-native/NCheerios_Tactics.cmxs /github/workspace/builds/coq/coq-failing/_install_ci/lib/coq//user-contrib/Cheerios//.coq-native\nI
857882016,13072,maximedenes,2021-06-09 17:16:55,JasonGross,"I've now actually fixed the issue with ci-fiat_parsers in coq-community/run-coq-bug-minimizer@38d5b1a and added a bit more debugging info for verdi-raft, let's try again (sorry for extra spam, but hopefully this will be useful)\n@coqbot ci minimize ci-verdi_raft, ci-fiat_parsers"
857882089,13072,maximedenes,2021-06-09 17:17:01,coqbot-app,"I am now running minimization at commit 855d914 on requested targets ci-verdi_raft, ci-fiat_parsers. I'll come back to you with the results once it's done."
857885217,13072,maximedenes,2021-06-09 17:21:12,coqbot-app,Error: Could not minimize file /github/workspace/builds/coq/coq-failing/_build_ci/verdi/systems/Log.v (from ci-verdi_raft) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 3.5MiB file on GitHub Actions Artifacts under build.log)\nrs.cmxs /github/workspace/builds/coq/coq-failing/_install_ci/lib/coq//user-contrib/Cheerios//.coq-native\nINSTALL core/.coq-native/NCheerios_Tactics.cmxs /github/workspace/builds/coq/coq-failing/_install_ci/lib/coq//user-contrib/Cheerios//.coq-native\n
857945436,13072,maximedenes,2021-06-09 18:22:20,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/MinimalParseOfParse.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/coq-failing/"
858047779,13072,maximedenes,2021-06-09 19:51:40,JasonGross,"ci-fiat_parsers now has a usefully generated minimized file, and JasonGross/coq-tools#66 should fix the issue with verdi-raft, so let's try one more time\n@coqbot ci-minimize ci-verdi_raft"
858047825,13072,maximedenes,2021-06-09 19:51:44,coqbot-app,I am now running minimization at commit 855d914 on requested target ci-verdi_raft. I'll come back to you with the results once it's done.
858058917,13072,maximedenes,2021-06-09 20:06:15,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/verdi/systems/Log.v (from ci-verdi_raft) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/verdi/core"" ""Verdi"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/verdi/lib"" ""Verdi"" ""-Q"" ""/github/workspa"
898875908,14785,SkySkimmer,2021-08-14 10:21:49,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
898875909,14785,SkySkimmer,2021-08-14 10:21:50,SkySkimmer,"Equations fails on something like\nRequire Import Program.Tactics.\n\nProgram Definition foo (x:{m|m > 0}) := let (k,_) := x in k.\nThe term x gets de-programmed to the first projection which has type nat and so cannot be let-destructed. In master program mode is not used when checking that the let value is in an inductive type.\nNot sure if we want to keep this change.\nWith changed behaviour: https://gitlab.com/coq/coq/-/pipelines/353227397\nWith master behaviour: https://gitlab.com/coq/coq/-/pipelin"
898882264,14785,SkySkimmer,2021-08-14 11:29:29,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
898882284,14785,SkySkimmer,2021-08-14 11:29:42,coqbot-app,"Hey, I have detected that there were CI failures at commit 7be4da0 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a0460b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-fiat_crypto_legacy, ci-mathcomp."
898883181,14785,SkySkimmer,2021-08-14 11:39:06,SkySkimmer,@coqbot ci minimize
898883189,14785,SkySkimmer,2021-08-14 11:39:09,coqbot-app,"I have initiated minimization at commit 7be4da0 for the suggested targets ci-fiat_crypto, ci-fiat_crypto_legacy, ci-mathcomp as requested.\nHowever, you may want to try again once the pipeline for the head commit (7be4da0) finishes."
898887178,14785,SkySkimmer,2021-08-14 12:18:22,coqbot-app,"Hey, I have detected that there were CI failures at commit 7be4da0 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a0460b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-fiat_crypto, ci-fiat_crypto_legacy, ci-mathcomp."
898887505,14785,SkySkimmer,2021-08-14 12:21:46,coqbot-app,"Hey, I have detected that there were CI failures at commit 7be4da0 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a0460b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-fiat_crypto, ci-fiat_crypto_legacy, ci-mathcomp."
898887613,14785,SkySkimmer,2021-08-14 12:22:49,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/src/Curves/Montgomery/XZ.v (from ci-fiat_crypto_legacy) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-notation-overridden"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/src"" ""Crypto"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/"
898890915,14785,SkySkimmer,2021-08-14 12:54:44,SkySkimmer,"The fiat-crypto error (both legacy and master) seems to be about\nDefinition Let_In {A P} (x : A) (f : forall a : A, P a) : P x := let y := x in f y.\n\nSection MontgomeryCurve.\n\n  Context {Z F:Type}.\n\n  Check fun (xy:F * F) =>\n        Let_In true (fun b =>\n        let (x, y) := xy in\n        (x,y)).\n(* Error: In environment\nZ : Type\nF : Type\nxy : F * F\nb : bool\nx : F\ny : F\nUnable to unify ""(F * F)%type"" with ""?T@{x0:=(x, y)} b"" (cannot unify ""F"" and ""b"").\n*)\nIn master this passes, in this PR it fa"
898892339,14785,SkySkimmer,2021-08-14 13:06:11,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Curves/Montgomery/XZ.v (from ci-fiat_crypto) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+variable-collision,+omega-is-deprecated,+deprecated-instantiate-syntax,+non-recursive"" ""-w"
898894521,14785,SkySkimmer,2021-08-14 13:25:50,JasonGross,"This is quite a strange unification error, is there any chance to solve this problem?\n\nI suspect part of the issue is that this doesn't quite fall within the pattern fragment because Coq doesn't know that it can invert constructors to find variables.  (I guess technically you'd need primitive projections on for this to truly fall within the pattern fragment.)"
898899633,14785,SkySkimmer,2021-08-14 14:13:12,SkySkimmer,"It's a bit more complicated than that, for instance\n  Check\n    let T0 := fun (xy : F * F) (b:Z) => _ : Type in\n    fun x y b =>\n    let T := T0 (x, y) b in\n    fun z : T => z : F * F.\n\n   Check\n    let T0 := fun xy : F * F => _ : Z -> Type in\n    fun x y b =>\n    let T := T0 (x, y) b in\n    fun z : T => z : F * F.\nThe first Check succeeds, the second fails. Why does it matter whether b is part of the instance vs if it's an argument?"
898901530,14785,SkySkimmer,2021-08-14 14:30:09,JasonGross,"If I had to guess, I'd guess that in the first Check, the first-order heuristic gives the correct instantiation of the evar to F * F, while in the second Check, the first-order heuristic tries to instantiate the evar to prod F"
898911314,14785,SkySkimmer,2021-08-14 15:55:47,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/ssreflect/finset.v (from ci-mathcomp) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-ambiguous-paths"" ""-w"" ""+non-primitive-record"" ""-w"" ""+undeclared-scope"" ""-w"" ""-deprecated-hint-without-"
898915054,14785,SkySkimmer,2021-08-14 16:26:57,SkySkimmer,"In mathcomp it seems the\nLocal Notation inlined_sub_rect :=\n  (fun K K_S u => let (x, Px) as u  return K u := u in K_S x Px).\nused through definition sig_subType produces a somehow different result.\nThe same error can be gotten in master and older (tested 8.11.2) by modifying the notation to\nLocal Notation inlined_sub_rect :=\n  (fun K K_S u => let '(exist x Px) as u := u return K u in K_S x Px).\n(it's used at type sig throughout the minimized file)\nThe error\nError: The LHS of __top_assumption_\n "
901273759,14785,SkySkimmer,2021-08-18 16:55:45,herbelin,"I suspect part of the issue is that this doesn't quite fall within the pattern fragment because Coq doesn't know that it can invert constructors to find variables. (I guess technically you'd need primitive projections on for this to truly fall within the pattern fragment.)\n\nExtending the pattern fragment to tuples is something which I have in mind! I think what is needed is only the ability to define projection so I don't think it strictly requires primitive projections.\nTechnically, in the Let_"
913673722,14785,SkySkimmer,2021-09-06 14:02:49,SkySkimmer,ping @coq/ssreflect-maintainers about the LHS of __top_assumption_ error
918140505,14785,SkySkimmer,2021-09-13 12:26:15,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
918223027,14785,SkySkimmer,2021-09-13 14:01:57,coqbot-app,"Hey, I have detected that there were CI failures at commit 15f4637 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit dfc8877 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-color, ci-equations, ci-fiat_crypto_legacy, ci-mathcomp, ci-vst."
919037979,14785,SkySkimmer,2021-09-14 10:51:16,SkySkimmer,"Using return _ when no return is specified is more compatible in a few cases, but worse in general (https://gitlab.com/coq/coq/-/pipelines/369662181)"
919072551,14785,SkySkimmer,2021-09-14 11:45:05,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
919114683,14785,SkySkimmer,2021-09-14 12:45:04,coqbot-app,"Hey, I have detected that there were CI failures at commit 58fe4cf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit eeb4bc6 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-fiat_crypto, ci-fiat_crypto_legacy, ci-mathcomp."
903134155,14798,herbelin,2021-08-21 15:35:46,herbelin,@coqbot ci minimize
903134174,14798,herbelin,2021-08-21 15:35:53,coqbot-app,"I have initiated minimization at commit 7d853f7 for the suggested targets ci-argosy, ci-elpi, ci-fiat_parsers, ci-hott, ci-verdi_raft, ci-vst as requested.\nHowever, you may want to try again once the pipeline for the head commit (7d853f7) finishes."
903134706,14798,herbelin,2021-08-21 15:40:04,coqbot-app,Error: Could not minimize file  (from ci-elpi) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 2.9MiB file on GitHub Actions Artifacts under build.log)\nr-contrib/elpi/apps//derive/.coq-native\nINSTALL theories/derive/.coq-native/Nelpi_apps_derive_param2.cmx /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps//derive/.coq-native\nINSTALL theories/derive/.coq-native/Nelpi_apps_derive_induction.cmx /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps//derive/.coq-
903138296,14798,herbelin,2021-08-21 16:06:50,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Colimits/Sequential.v (from ci-hott) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hott/theories"" ""HoTT"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/"
903138972,14798,herbelin,2021-08-21 16:11:56,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/ADTRefinement/SetoidMorphisms.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/coq-failin"
903141787,14798,herbelin,2021-08-21 16:34:40,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/verdi_raft/raft-proofs/RaftRefinementProof.v (from ci-verdi_raft) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 44KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/verdi_raft/raft"" ""VerdiRaft"" ""-Q"" ""/github/workspace/builds/"
903141919,14798,herbelin,2021-08-21 16:35:44,herbelin,"@JasonGross : for information, the minimized hott file works when copy-pasted but not when loaded (the lines from before seq_pair_shift up to before Eta fail - a notation scope resolution problem apparently - but the final awaited error The term ""G z"" has type ""?B@{x:=z.1} z.2"" while it is expected to have type ""?Z z"" is not affected by the previous failing lines which can then be skipped)."
903146660,14798,herbelin,2021-08-21 17:11:52,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/argosy/src/Examples/Logging/HoareProof.v (from ci-argosy) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/argosy/src"" ""RecoveryRefinement"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/argosy/vendor/classes/src"" ""Classes"" ""-R"" ""/github"
903149739,14798,herbelin,2021-08-21 17:33:48,coqbot-app,"Hey, I have detected that there were CI failures at commit 7d853f7 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 59d4839 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-argosy, ci-elpi, ci-fiat_parsers, ci-hott, ci-verdi_raft, ci-vst."
903175024,14798,herbelin,2021-08-21 20:52:52,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/veric/juicy_extspec.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/sepcomp"" ""VST.sepcomp"" ""-Q"" """
903202482,14798,herbelin,2021-08-22 02:09:55,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/veric/juicy_extspec.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/sepcomp"" ""VST.sepcomp"" ""-Q"" """
903226444,14798,herbelin,2021-08-22 07:27:03,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/veric/juicy_extspec.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/sepcomp"" ""VST.sepcomp"" ""-Q"" """
903263353,14798,herbelin,2021-08-22 12:43:53,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/veric/juicy_extspec.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/sepcomp"" ""VST.sepcomp"" ""-Q"" """
903281893,14798,herbelin,2021-08-22 15:00:42,Alizter,@herbelin You have to pass the usual arguments for HoTT: -noinit -indices-matter
903306862,14798,herbelin,2021-08-22 18:01:02,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/veric/juicy_extspec.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/sepcomp"" ""VST.sepcomp"" ""-Q"" """
903346078,14798,herbelin,2021-08-22 23:18:02,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/veric/juicy_extspec.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 65KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/v"
903436162,14798,herbelin,2021-08-23 04:35:14,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/veric/juicy_extspec.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 42KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/v"
903615475,14798,herbelin,2021-08-23 09:52:12,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/veric/juicy_extspec.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/sepcomp"" ""VST.sepcomp"" ""-Q"" """
903682395,14798,herbelin,2021-08-23 11:30:18,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/veric/juicy_extspec.v (from ci-vst) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/sepcomp"" ""VST.sepcomp"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/v"
904059286,14798,herbelin,2021-08-23 19:28:04,JasonGross,"@herbelin Following up on what @Alizter said, I suspect the difference is that emacs/PG reads the coq-prog-arg arguments from the top of the file, while running the file from the command line does not use these arguments."
933091539,14798,herbelin,2021-10-04 02:17:21,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
946307144,14798,herbelin,2021-10-19 02:10:24,JasonGross,"@herbelin What's the status of this?  I'd quite like to see this happen.\nBtw, if you rebase, the minimizer should now be able to minimize ci-elpi once I merge coq-community/run-coq-bug-minimizer#10"
946502449,14798,herbelin,2021-10-19 08:54:44,herbelin,"The general status of my open unification-related PRs is that the priority is to make the part solving heuristics more robust to taking one or another code path in the main ""evar_conv_x"" unification (this includes interleaving typeclass resolution and use of heuristics, as well as backtracking on incompatible heuristics). Technically, I'm blocked until mid-November for any kind of implementation that requires to find several hours in a row. So, I plan to start again working on these PRs mid-Nove"
946659547,14798,herbelin,2021-10-19 12:12:14,coqbot-app,"Hey, I have detected that there were CI failures at commit 7a735a4 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a14a8e2 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-argosy, ci-elpi, ci-fiat_parsers, ci-hott, ci-verdi_raft, ci-vst."
946772111,14798,herbelin,2021-10-19 14:18:19,JasonGross,@coqbot ci-minimize ci-elpi
946772145,14798,herbelin,2021-10-19 14:18:22,coqbot-app,I am now running minimization at commit 7a735a4 on requested target ci-elpi. I'll come back to you with the results once it's done.
946773814,14798,herbelin,2021-10-19 14:20:05,JasonGross,@coqbot ci minimize ci-elpi
946773857,14798,herbelin,2021-10-19 14:20:08,coqbot-app,I am now running minimization at commit 7a735a4 on requested target ci-elpi. I'll come back to you with the results once it's done.
946776681,14798,herbelin,2021-10-19 14:22:54,coqbot-app,Error: Could not minimize file  (from ci-elpi) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 2.9MiB file on GitHub Actions Artifacts under build.log)\n/github/workspace/builds/coq/coq-failing/_install_ci/lib:\n++ export PATH=/github/workspace/builds/coq/coq-failing/_install_ci/bin:/root/.opamcache/4.05.0/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n++ PATH=/github/workspace/builds/coq/coq-failing/_install_ci/bin:/root/.opamcache/4.05.0/bin:/usr/local/sbi
946779278,14798,herbelin,2021-10-19 14:25:27,coqbot-app,Error: Could not minimize file  (from ci-elpi) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 2.9MiB file on GitHub Actions Artifacts under build.log)\n/github/workspace/builds/coq/coq-failing/_install_ci/lib:\n++ export PATH=/github/workspace/builds/coq/coq-failing/_install_ci/bin:/root/.opamcache/4.05.0/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n++ PATH=/github/workspace/builds/coq/coq-failing/_install_ci/bin:/root/.opamcache/4.05.0/bin:/usr/local/sbi
946917871,14798,herbelin,2021-10-19 16:57:00,JasonGross,"Fixed a file name parsing issue in coq-community/run-coq-bug-minimizer@c23170a, trying again @coqbot ci minimize ci-elpi"
946917923,14798,herbelin,2021-10-19 16:57:04,coqbot-app,I am now running minimization at commit 7a735a4 on requested target ci-elpi. I'll come back to you with the results once it's done.
946922251,14798,herbelin,2021-10-19 17:02:15,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/elpi/tests/test_quotation.v (from ci-elpi) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+elpi.deprecated"" ""-bt"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/wor"
946962306,14798,herbelin,2021-10-19 17:53:29,JasonGross,"The inversion of constructors creates a new kind of issues which I had no time to really investigate yet. E.g., in HoTT, a problem which was of the form ""G z == ?Z z"" now takes the form ""G z == ?B@{x:=z.1} z.2"", and it is unclear whether a way to solve it into G := fun '(z1,z2) => ?B@{x:=z1} z2 should be added or if it is a bad idea in the first place to have turned the original problem into an expanded one.\n\nIs G an evar here, or a closed term, or a term with evars?\nAlso, in this case, is z pre"
894235973,14746,herbelin,2021-08-06 12:47:52,coqbot-app,"Hey, I have detected that there were CI failures at commit 48be2a8 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 3fd62a8 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-hott, ci-math_classes, ci-menhir, ci-unimath, ci-vst."
894288506,14746,herbelin,2021-08-06 14:10:41,herbelin,@coqbot ci minimize
894288611,14746,herbelin,2021-08-06 14:10:50,coqbot-app,"I have initiated minimization at commit 932fceb for the suggested targets ci-bedrock2, ci-hott, ci-math_classes, ci-menhir, ci-unimath, ci-vst as requested.\nHowever, you may want to try again once the pipeline for the head commit (932fceb) finishes."
894302011,14746,herbelin,2021-08-06 14:30:59,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/menhirlib/coq-menhirlib/src/Interpreter.v (from ci-menhir) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/menhirlib/coq-menhirlib/src"" ""MenhirLib"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/"
894317692,14746,herbelin,2021-08-06 14:55:47,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/math_classes/theory/adjunctions.v (from ci-math_classes) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/math_classes"" ""MathClasses"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-c"
894323119,14746,herbelin,2021-08-06 15:04:18,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Spaces/Circle.v (from ci-hott) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hott/theories"" ""HoTT"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hott/c"
894324415,14746,herbelin,2021-08-06 15:06:12,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/riscv-coq/src/riscv/Platform/MaterializeRiscvProgram.v (from ci-bedrock2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/riscv-coq/src/riscv"" ""riscv"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/bui"
894443532,14746,herbelin,2021-08-06 18:31:19,coqbot-app,"Hey, I have detected that there were CI failures at commit 2cf1c92 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 3fd62a8 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-hott, ci-math_classes, ci-unimath."
894474247,14746,herbelin,2021-08-06 19:29:26,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/unimath/UniMath/SyntheticHomotopyTheory/Circle.v (from ci-unimath) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 53KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-type-in-type"" ""-w"" ""-notation-overridden"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace"
894475827,14746,herbelin,2021-08-06 19:32:28,coqbot-app,"Minimized File  (from ci-unimath) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 53KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-type-in-type"" ""-w"" ""-notation-overridden"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/unimath/UniMath"" ""UniMath"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/"
901277104,14746,herbelin,2021-08-18 17:00:40,herbelin,@coqbot ci minimize
901277139,14746,herbelin,2021-08-18 17:00:41,coqbot-app,"I have initiated minimization at commit 0149d1f for the suggested target ci-hott as requested.\nHowever, you may want to try again once the pipeline for the head commit (0149d1f) finishes."
901281069,14746,herbelin,2021-08-18 17:06:24,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Spaces/Spheres.v (from ci-hott) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; mode: visual-line -*- *)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire HoTT.Basics.Nota"
933091540,14746,herbelin,2021-10-04 02:17:21,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
958600521,14746,herbelin,2021-11-03 02:13:06,coqbot-app,"This PR was not rebased after 30 days despite the warning, it is now closed."
960378106,14746,herbelin,2021-11-04 02:15:15,coqbot-app,"This PR was not rebased after 30 days despite the warning, it is now closed."
960639000,14746,herbelin,2021-11-04 10:42:59,coqbot-app,"Hey, I have detected that there were CI failures at commit ab28761 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ba27ca7 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-hott."
960959485,14746,herbelin,2021-11-04 13:43:52,JasonGross,Let's see if HoTT minimization works now that the Type file has been renamed.  @coqbot CI minimize
960959667,14746,herbelin,2021-11-04 13:43:57,coqbot-app,I have initiated minimization at commit ab28761 for the suggested target ci-hott as requested.
960971850,14746,herbelin,2021-11-04 13:49:54,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Spaces/Spheres.v (from ci-hott) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; mode: visual-line -*- *)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInduc"
961170122,14746,herbelin,2021-11-04 15:44:34,JasonGross,"This time we hit #15120, which I worked around with JasonGross/coq-tools@116f50f, let's try once more.  @coqbot ci minimize ci-hott"
961170151,14746,herbelin,2021-11-04 15:44:36,coqbot-app,I am now running minimization at commit ab28761 on requested target ci-hott. I'll come back to you with the results once it's done.
961175514,14746,herbelin,2021-11-04 15:50:38,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Spaces/Spheres.v (from ci-hott) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; mode: visual-line -*- *)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInduc"
961276197,14746,herbelin,2021-11-04 17:44:23,mattam82,"Are these examples really correct?\nC[] = S (pred [])\nC[] = {fst := fst []; snd := 0}\nC[] = λx.{fst := fst ([] x); snd := 0}\n\nI don't see how x = S (pred x) could be definitional if one later instantiates the evar with a neutral term.\nFor the second and third, I don't see why it's sound."
961473917,14746,herbelin,2021-11-04 22:14:49,JasonGross,"Oops, let's try once more, now that I've merged JasonGross/coq-tools@af9fbb2 @coqbot ci minimize ci-hott"
961473940,14746,herbelin,2021-11-04 22:14:51,coqbot-app,I am now running minimization at commit ab28761 on requested target ci-hott. I'll come back to you with the results once it's done.
961477317,14746,herbelin,2021-11-04 22:21:02,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Spaces/Spheres.v (from ci-hott) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; mode: visual-line -*- *)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInduc"
961485277,14746,herbelin,2021-11-04 22:37:08,herbelin,"Are these examples really correct?\nC[] = S (pred [])\nC[] = {fst := fst []; snd := 0}\nC[] = λx.{fst := fst ([] x); snd := 0}\n\nI don't see how x = S (pred x) could be definitional if one later instantiates the evar with a neutral term. For the second and third, I don't see why it's sound.\n\nMy reasoning is the following: for a constraint ?x = S (pred ?x) to be satisfied, there is no alternative than having ?x starting with a S and be some S ?y. But then, the equation reduces to S ?y = S (pred (S ?y"
961555824,14746,herbelin,2021-11-05 01:23:32,JasonGross,"Let me try once more, and sorry for the noise coqbot ci minimize ci-hott"
961555834,14746,herbelin,2021-11-05 01:23:34,coqbot-app,I am now running minimization at commit ab28761 on requested target ci-hott. I'll come back to you with the results once it's done.
961572787,14746,herbelin,2021-11-05 02:11:14,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Spaces/Spheres.v (from ci-hott) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/wo"
961573902,14746,herbelin,2021-11-05 02:13:55,JasonGross,Success!  ci-hott was minimized this time
961574845,14746,herbelin,2021-11-05 02:16:12,JasonGross,Should all of these examples be added to the test-suite?
927118864,14937,ppedrot,2021-09-25 13:07:50,coqbot-app,"Hey, I have detected that there were CI failures at commit d74486a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 266eef2 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-equations, ci-fiat_parsers, ci-rewriter."
927695520,14937,ppedrot,2021-09-27 09:35:21,ppedrot,"The CI failures seem to be indirectly caused by anomalies in printing constants, because they're not in the nametab. I wonder whether we shouldn't have a more robust way to display names to the user when they're not globally declared."
962097397,15128,herbelin,2021-11-05 17:52:04,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
962145538,15128,herbelin,2021-11-05 19:06:19,coqbot-app,"Hey, I have detected that there were CI failures at commit 61ae10a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 0e663cc succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-fiat_crypto, ci-fiat_crypto_legacy, ci-fiat_parsers, ci-flocq, ci-hott, ci-metacoq."
962297740,15128,herbelin,2021-11-06 00:58:25,JasonGross,@coqbot CI minimize
962297759,15128,herbelin,2021-11-06 00:58:32,coqbot-app,"I have initiated minimization at commit 61ae10a for the suggested targets ci-bedrock2, ci-fiat_crypto, ci-fiat_crypto_legacy, ci-fiat_parsers, ci-flocq, ci-hott, ci-metacoq as requested."
962298529,15128,herbelin,2021-11-06 01:02:56,coqbot-app,Error: Could not minimize file  (from ci-metacoq) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 3.2MiB file on GitHub Actions Artifacts under build.log)\nederive.cmx /builds/coq/coq/_install_ci/lib/coq//user-contrib/Equations/\nINSTALL src/sigma_types.cmx /builds/coq/coq/_install_ci/lib/coq//user-contrib/Equations/\nINSTALL src/subterm.cmx /builds/coq/coq/_install_ci/lib/coq//user-contrib/Equations/\nINSTALL src/eqdec.cmx /builds/coq/coq/_install_ci/lib/coq//user-contrib/Equa
962299051,15128,herbelin,2021-11-06 01:05:52,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Util/Tuple.v (from ci-fiat_crypto) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 45KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive F"
962300125,15128,herbelin,2021-11-06 01:12:26,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/flocq/src/Calc/Bracket.v (from ci-flocq) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-compat"" ""8.13"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/co"
962300148,15128,herbelin,2021-11-06 01:12:36,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/src/Util/Tuple.v (from ci-fiat_crypto_legacy) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-notation-overridden"" ""-w"" ""-deprecated-native-compiler-optio"
962303589,15128,herbelin,2021-11-06 01:15:06,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/ContextFreeGrammar/Equality.v (from ci-fiat_parsers) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-depre"
962389115,15128,herbelin,2021-11-06 03:52:11,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Sets/Hartogs.v (from ci-hott) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 36KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-com"
962402042,15128,herbelin,2021-11-06 06:15:33,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 38KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
962438009,15128,herbelin,2021-11-06 11:32:37,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 35KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
962478265,15128,herbelin,2021-11-06 16:49:27,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 44KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
962516148,15128,herbelin,2021-11-06 22:06:30,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 53KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
962545760,15128,herbelin,2021-11-07 03:23:44,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 43KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
962572103,15128,herbelin,2021-11-07 09:40:43,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 53KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
962615344,15128,herbelin,2021-11-07 13:57:56,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 46KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
962665261,15128,herbelin,2021-11-07 19:14:56,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 53KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
962714428,15128,herbelin,2021-11-08 00:31:56,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 53KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
962832331,15128,herbelin,2021-11-08 05:48:55,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 48KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
963041052,15128,herbelin,2021-11-08 11:05:54,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 48KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
963323698,15128,herbelin,2021-11-08 16:22:53,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 68KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
963599438,15128,herbelin,2021-11-08 21:39:57,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 62KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
963767815,15128,herbelin,2021-11-09 02:57:20,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 59KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
963908960,15128,herbelin,2021-11-09 08:14:33,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 59KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
964154715,15128,herbelin,2021-11-09 13:31:45,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscvStep.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 59KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/be"
965623788,15128,herbelin,2021-11-10 18:29:38,JasonGross,"ci-bedrock2 was looping because the file took too long to test to make progress.  No idea what's up with ci-metacoq.  The minimizer has been improved, so hopefully it'll work if I ask @coqbot ci minimize ci-fiat_crypto"
965623854,15128,herbelin,2021-11-10 18:29:43,coqbot-app,I am now running minimization at commit 61ae10a on requested target ci-fiat_crypto. I'll come back to you with the results once it's done.
965630699,15128,herbelin,2021-11-10 18:38:43,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Util/Tuple.v (from ci-fiat_crypto) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 45KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive F"
965646057,15128,herbelin,2021-11-10 18:58:46,JasonGross,"Reported ci-metacoq issue as MetaCoq/metacoq#605.  And, oops, sorry, I forgot to actually merge JasonGross/coq-tools#85 and JasonGross/coq-tools#84.  @coqbot ci minimize ci-fiat_crypto"
965646085,15128,herbelin,2021-11-10 18:58:49,coqbot-app,I am now running minimization at commit 61ae10a on requested target ci-fiat_crypto. I'll come back to you with the results once it's done.
965653376,15128,herbelin,2021-11-10 19:08:04,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Util/Tuple.v (from ci-fiat_crypto) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 44KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive F"
854101463,14137,mattam82,2021-06-03 18:55:24,coqbot-app,"Hey, I have detected that there were CI failures at commit 4bd2ea0 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit e8040a4 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
860549014,14137,mattam82,2021-06-14 09:42:44,SkySkimmer,@coqbot ci minimize
860549089,14137,mattam82,2021-06-14 09:42:50,coqbot-app,I have initiated minimization at commit 4bd2ea0 for the suggested target ci-metacoq as requested.
860550960,14137,mattam82,2021-06-14 09:45:53,coqbot-app,Error: Could not minimize file  (from ci-metacoq) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.7MiB file on GitHub Actions Artifacts under build.log)\noq.a  \n  inflating: _build_ci/metacoq/template-coq/src/template_coq.cmi  \n  inflating: _build_ci/metacoq/template-coq/src/template_coq.cmx  \n  inflating: _build_ci/metacoq/template-coq/src/template_coq.cmxa  \n  inflating: _build_ci/metacoq/template-coq/src/template_coq.cmxs  \n  inflating: _build_ci/metacoq/template-coq/sr
861033540,14137,mattam82,2021-06-14 22:23:28,JasonGross,"Metacoq minimization now works!\nMinimized File /github/workspace/builds/coq/coq-failing/_build_ci/metacoq/pcuic/theories/PCUICSigmaCalculus.v (from ci-metacoq) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/metacoq/template-coq/theories"" ""MetaCoq.Template"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_b"
663771189,12743,herbelin,2020-07-24 23:23:05,jfehrle,"I don't understand how associativity is used for nonterminals without levels, so not sure about that part.\nSupporting recursive definitions in ARGUMENT EXTEND could be useful.  On the other hand, it's odd that we have 2 different ways to specify productions that have different formats and feature sets.  The original Camlp5 method already supports recursive productions without any additional feature such as WITH.  Wouldn't it be possible to move the definition of rewstrategy into a GRAMMAR EXTEND"
663771575,12743,herbelin,2020-07-24 23:24:46,jfehrle,The doc_grammar.ml change looks OK.  I'd encourage you to do a make doc_gram and examine fullGrammar just to see it in action (look at the diffs)--and to perhaps familiarize yourself more with doc_grammar.
663854183,12743,herbelin,2020-07-25 13:12:55,herbelin,"@jfehrle: there are several questions in your comment.\n\nWouldn't it be possible to move the definition of rewstrategy into a GRAMMAR EXTEND and then have the ARGUMENT EXTEND provide only the extra semantic information?\n\nDo you mean it as a general move of ARGUMENT EXTEND to GRAMMAR EXTEND or just for rewstrategy? If the latter, it seems to me (and @ppedrot was saying the them, afaicj) that we should stick to one way to do such extensions (which would include at the same time parsing, and interpr"
663854578,12743,herbelin,2020-07-25 13:17:15,herbelin,"[ARGUMENT EXTEND] don't have all the features of the Campl5 style productions (e.g. inline subproductions). I think we'd be better off if we moved the semantic information elsewhere--either as annotations in the Camlp5 format or in some new file, perhaps with a build-time check that all the necessary semantic info is present.\n\nWhy not, but that may be a lot of things to do.\nAs a bit of history, here is how tactic extensions were done before the ARGUMENT EXTEND mechanism (in Coq V6.3):\nIn a v fil"
663856766,12743,herbelin,2020-07-25 13:40:06,herbelin,"Also, BTW, IIUC attribute_list in EXTEND is always interpreted as a LIST of attribute and can't refer to the nonterminal attribute_list.  And the same for induction_clause_list.\n\nThe attribute_list trick is not the clearest thing we can imagine. I did it like that to be closer to the the foo_list names used in the grammar entries at this time, but it is neither very orthodox nor very compatible with primitive entry name already having a similar suffix (even if the suffix is supposed to commute w"
664111482,12743,herbelin,2020-07-27 04:24:59,jfehrle,"Perhaps we can chat about this on a phone call as well.  We could add this additional feature to ARGUMENT EXTEND.  I have no objection.  OTOH we have 2 ways to represent productions (GRAMMAR EXTEND and ARGUMENT EXTEND) that look a bit different and have different capabilities.  The WITH is adding something that's already supported in GRAMMAR EXTEND.  If we can get to a single mechanism that serves all our requirements that will be simpler for us use, think about and maintain, and this PR might n"
675719107,12743,herbelin,2020-08-18 21:03:18,herbelin,@jfehrle: we could talk on next Thursday evening 8pm Paris time?
675758076,12743,herbelin,2020-08-18 22:52:18,jfehrle,"@herbelin To talk about possible improvements to parsing?  I don't have anything new to say yet about this particular PR.  For parsing improvements, it may make more sense to wait a little longer so I have specific ideas that I've vetted somewhat.  But I could do 8PM Paris time in any case.  On August 20th, right?"
675893601,12743,herbelin,2020-08-19 07:06:16,herbelin,"To talk about possible improvements to parsing?\n\nI meant to talk about this PR (providing recursivity vs levels, and if levels, with which syntax). But this can be a larger discussion too. Yes, on August 20th."
691910774,12743,herbelin,2020-09-14 08:40:54,herbelin,"@ppedrot: I'd like to have your opinion about this PR. Indeed, this PR is introducing new syntax, namely support for recursive grammars, which is an alternative way to using levels.\nI could also support levels, e.g. with a user syntax of the following form:\nARGUMENT EXTEND rewstrategy\nLEVEL 1\n    RIGHT ASSOCIATIVITY\n    PRINTED BY { pr_strategy1 }\n  | [ rewstrategy(0)(h) "";"" rewstrategy(0)(h') ] -> { StratBinary (Compose, h, h') }\n  | [ rewstrategy(0)(h) ] -> { h }\nLEVEL 0\n     RIGHT ASSOCIATIVI"
691920797,12743,herbelin,2020-09-14 08:59:31,ppedrot,"@herbelin On second thoughts I am not sure I see the interest of adding that much complexity to the ARGUMENT EXTEND macro. At first I thought that at least it'd help to generate a printer automatically, but I realized that it's not even the case because you still have to provide one in the PRINTED BY clauses.\nSo, essentially, my opinion on this PR depends on the following question: what is gained here compared to an explicit parsing rule performed through GRAMMAR EXTEND? The latter gives you all"
691932494,12743,herbelin,2020-09-14 09:20:01,herbelin,"The question is about not having too many APIs and syntaxes to do the same thing. It is also a way to explicitly say that declaring an argument is not only a parsing rule, but also a printing rule, an interning rule, an interpretation rule, a substitution rule.\nOr are you saying that we could keep the ARGUMENT EXTEND header but change the syntax for the body of ARGUMENT EXTEND to camlp5 syntax?"
691934500,12743,herbelin,2020-09-14 09:24:11,ppedrot,"The question is about not having too many APIs and syntaxes to do the same thing\n\nIn that respect, this PR is making things worse then?\n\nIt is also a way to explicitly say that declaring an argument is not only [...]\n\nThere is more you can define around generic arguments, e.g. you can extend constr quotations with arbitrary stuff and the like. The set of features registered on a generic argument is open. To me, ARGUMENT EXTEND is just a helper to make the easy case easy. If you want to get non-t"
691950212,12743,herbelin,2020-09-14 09:56:26,herbelin,"The question is about not having too many APIs and syntaxes to do the same thing\n\nIn that respect, this PR is making things worse then?\n\nNot if we consider that camlp5 is not supposed to be used by plugin developers.\n\n\nIt is also a way to explicitly say that declaring an argument is not only [...]\n\nThere is more you can define around generic arguments, e.g. you can extend constr quotations with arbitrary stuff and the like. The set of features registered on a generic argument is open. To me, ARG"
691956213,12743,herbelin,2020-09-14 10:08:03,ppedrot,"Not if we consider that camlp5 is not supposed to be used by plugin developers.\n\nIn the end the Tacentries API generates tokens using the campl5 production type, so at best it's a pious lie.\n\nI don't get what is your proposal. Is it to keep things as they are?\n\nThe current situation is not satisfactory, but I think that adding layers of complexity to reimplement the very same thing as the base API except for the use of a half-baked, quirky syntax that is constrained by some unfortunate historica"
692295473,12743,herbelin,2020-09-14 20:27:52,herbelin,"In particular, I have a concrete question which is blocking me to continue working on notations\n\nI agree this is a real problem[1], but judging from the parsing rules of that argument, it's definitely leaning on the side of full-blown DSLs. It'd be indeed more robust to write it via a GRAMMAR EXTEND in ssr-style, which would solve your blocker on notations.\n\nHonestly, in term of time, it would be faster to me to have this PR merged (which is not a big deal), but I can also backtrack and study ho"
692338556,12743,herbelin,2020-09-14 22:04:51,jfehrle,"Given the guarantees enforced by the campl5 engine and its overall implementation, I technically believe that most of the Coq syntax works by accident.\n\n""works"" meaning ""parses correctly"", right?\n\nIn a streak of cognitive dissonance, I both dream and fear of the day we switch to a parser engine that gives you more invariants.\n\nWe should think about ways to evolve what we have; switching to another parser engine is likely to create havoc both for developers and users.  I've been thinking about wr"
699529814,12743,herbelin,2020-09-26 18:15:25,herbelin,"@ppedrot: unless we take the decision to renounce to ARGUMENT EXTEND, I'd be leaning to keep ARGUMENT EXTEND for rewstrategy."
851624138,12743,herbelin,2021-05-31 18:15:36,herbelin,"I don't know how to unblock this PR. @ppedrot and @jfehrle seem to prefer GRAMMAR EXTEND. On my side, I find clearer to have a command which forces to declare a printer."
851681041,12743,herbelin,2021-05-31 21:02:34,coqbot-app,"Hey, I have detected that there were CI failures at commit f58742f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ff1040b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_performance_tests."
851686394,12743,herbelin,2021-05-31 21:18:30,JasonGross,@coqbot ci minimize
851686428,12743,herbelin,2021-05-31 21:18:34,coqbot-app,I have initiated minimization at commit f58742f for the suggested target ci-coq_performance_tests as requested.
851692477,12743,herbelin,2021-05-31 21:33:24,coqbot-app,Error: Could not minimize file /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/src/fiat_crypto_via_setoid_rewrite_standalone.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 3.5MiB file on GitHub Actions Artifacts under build.log)\n                                mod 2305843009213693952 =? 0)\n                                                 []))\n                                                 (prod_rect\n             
851700002,12743,herbelin,2021-05-31 22:08:19,JasonGross,"This seems to be a nondeterministic bug in Coq's native compilation handling, let's try again.  Does Coq fail to clean up in /tmp and then error on trying to link everything in /tmp?\n@coqbot CI minimize"
851700009,12743,herbelin,2021-05-31 22:08:22,coqbot-app,I have initiated minimization at commit f58742f for the suggested target ci-coq_performance_tests as requested.
851702877,12743,herbelin,2021-05-31 22:22:52,coqbot-app,Error: Could not minimize file /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/src/fiat_crypto_via_setoid_rewrite_standalone.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 3.5MiB file on GitHub Actions Artifacts under build.log)\n                                mod 2305843009213693952 =? 0)\n                                                 []))\n                                                 (prod_rect\n             
852299337,12743,herbelin,2021-06-01 17:17:08,JasonGross,"I've worked around the issue, let's try once more, and sorry for the noise\n@coqbot CI minimize"
852299411,12743,herbelin,2021-06-01 17:17:15,coqbot-app,I have initiated minimization at commit f58742f for the suggested target ci-coq_performance_tests as requested.
852366903,12743,herbelin,2021-06-01 18:55:32,jfehrle,"I don't know how to unblock this PR.\n\nAnd it has been dormant for 9 months.  Clearly we need some discussion.  I would like to see the parsing code become simpler and more consistent (fewer mechanisms if possible).  It seemed that this PR might add complexity and make it harder to simplify the parsing code.  Also it would help to say how this will benefit users, what problem it would solve for them.\nPerhaps we (including @ppedrot in particular) could have a discussion about how we'd like to evol"
852410261,12743,herbelin,2021-06-01 20:03:52,herbelin,I would like to see the parsing code become simpler and more consistent (fewer mechanisms if possible).\n\nI'm fine with fewer parsing mechanisms if you are ready to go in this direction (and @ppedrot seemed to find on his site that ARGUMENT EXTEND/TACTIC EXTEND/VERNAC EXTEND are too ad hoc to be worth being extended further).\nMy primary concern was to work on fixing associativity in camlp5 and fixing it revealed that the ARGUMENT EXTEND for rewstrategy was broken and working in practice by chance
852534186,12743,herbelin,2021-06-01 22:44:37,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/src/fiat_crypto_via_setoid_rewrite_standalone.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/src"" ""CoqPerformanceTests"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci"
852538642,12743,herbelin,2021-06-01 22:53:11,JasonGross,"I'm confused why this PR would change the behavior of things, but CI says it does.  @herbelin can you reproduce the issue with the minimized file?"
852706748,12743,herbelin,2021-06-02 04:15:25,jfehrle,"From here:\n\n@ppedrot It'd be indeed more robust to write it via a GRAMMAR EXTEND in ssr-style, which would solve your blocker on notations.\n\nI don't know all the details of ARGUMENT EXTEND (or VERNAC EXTEND, for that matter).  What would the code look like to handle rewstrategy ""ssr-style""?  And how easy would it be for non-parser experts to use the latter form?\nI suppose this is an example of ""ssr-style"", i.e. the productions are in GRAMMAR EXTEND with a separate ARGUMENT EXTEND to give the pri"
852806313,12743,herbelin,2021-06-02 07:23:49,herbelin,"I suppose this is an example of ""ssr-style"", i.e. the productions are in GRAMMAR EXTEND with a separate ARGUMENT EXTEND to give the printing info.\nARGUMENT EXTEND ssrterm\n     PRINTED BY { pr_ssrterm }\n     INTERPRETED BY { interp_ssrterm }\n     GLOBALIZED BY { glob_ssrterm } SUBSTITUTED BY { subst_ssrterm }\n     RAW_PRINTED BY { pr_ssrterm }\n     GLOB_PRINTED BY { pr_ssrterm }\nEND\n\nGRAMMAR EXTEND Gram\n  GLOBAL: ssrterm;\n  ssrterm: TOP [[ k = ssrtermkind; c = Pcoq.Constr.constr -> { mk_term k c "
852958768,12743,herbelin,2021-06-02 11:45:41,JasonGross,Should we also add a test of the rewstrategy grammar associativity to the test-suite?
853013532,12743,herbelin,2021-06-02 13:09:38,ppedrot,If it is clear that ARGUMENT EXTEND/TACTIC EXTEND/VERNAC EXTEND are going to disappear\n\nHow on earth have you reached that conclusion @herbelin ? It's a far shot to jump from the fact that the EXTEND mechanism are ad-hoc but practical to wanting to remove them altogether?\n@jfehrle EXTEND statements do much more than parsing extensions. The fact that some parsing rules are a bit tricky to be handled by them does not mean at all that we can do everything with GRAMMAR EXTEND.
853096336,12743,herbelin,2021-06-02 14:52:53,herbelin,"@ppedrot: sure, I could use a GRAMMAR EXTEND, and I could continue working on associativity without caring more about ARGUMENT EXTEND.\nThis would not solve the question that ARGUMENT EXTEND, if kept, is not strong enough to express a grammar with precedences (if precedences had be controllable, I'd bet that other precedences had been used for rewstrategy). So, the discussion is worth in my opinion.\nSecond, the point of @jehrle is legitimate. Why does ARGUMENT EXTEND use a different syntax than c"
853128154,12743,herbelin,2021-06-02 15:32:23,ppedrot,"if I take the time to propose a variant of ARGUMENT EXTEND with LEVEL, can I count on your support?\n\nThat depends on how you do it. I don't really care that you bring this syntax closer to the one of GRAMMAR EXTEND provided that it doesn't lead to nonsensical situations. I put quite a lot of effort in ensuring that coqpp macros were statically preventing useless arguments and the like, it's not to regress on that. Also, while not actively trying to deter you from that I think this kind of endeav"
853179786,12743,herbelin,2021-06-02 16:38:38,herbelin,"I put quite a lot of effort in ensuring that coqpp macros were statically preventing useless arguments and the like, it's not to regress on that.\n\nCan you give an example? It is a kind of effort I probably did not realize.\n\nAlso, while not actively trying to deter you from that I think this kind of endeavour is the essence of bikeshedding and moving for the sake of moving.\n\nThat's indeed a question, or at least, there is a question of prioritizing what can be done in general, and I'd be actually"
853272078,12743,herbelin,2021-06-02 18:09:58,jfehrle,"IIUC, the SSR-style approach is sufficient to handle ""rewstrategy"", and if so, let's not add additional syntax to ARGUMENT EXTEND.\n\nif @jfehrle proposes, supported by enough users, to unify the different ways to give syntactic rules in Tactic Notation, Ltac2 Notation, ARGUMENT EXTEND, ... can we count on your support?\n\n@herbelin and I discussed this informally last year.  It's a topic beyond the scope of this PR.  The next step would be to have some general discussion about how (and whether) we "
853314413,12743,herbelin,2021-06-02 19:09:13,herbelin,"the SSR-style approach is sufficient to handle ""rewstrategy"",\n\nThere are different points of view.\nIf we admit that ARGUMENT EXTEND is the relevant abstraction level for declaring the methods associated to a new element of the tactic/vernac languages, using GRAMMAR EXTEND would defeat this abstraction level.\nAnother point of view (yours, right?) is that it is overkill, or confusing, to declare the grammar rules of new elements with ARGUMENT EXTEND rather than with GRAMMAR EXTEND, considering tha"
853329878,12743,herbelin,2021-06-02 19:35:10,jfehrle,"I would feel uncomfortable, and I would find it difficult to explain to plugin developers that we deliberatedly maintain both approaches at the same time without recommending one over the other.\n\nBy all means, let's add some explanation for plugin developers on which form is preferred and when the SSR-style form is necessary.  Isn't there already a document somewhere in the source tree that explains how to create plugins to which such comments could be added?\n\nAnother point of view (yours, right"
853350789,12743,herbelin,2021-06-02 20:10:58,herbelin,"By all means, let's add some explanation for plugin developers on which form is preferred and when the SSR-style form is necessary.\n\nI don't have a good overview of the reasons why ssrparser uses GRAMMAR EXTEND on top of ARGUMENT EXTEND. Here are some examples:\n\nssrtacarg and ssrtac3arg: I don't see the reason. Maybe to introduce a ""ssr"" level of abstraction to ltac_expr levels 3 and 5?\nssrsimpl_ne, ssrbwdview, ssrfwdview, ident_no_do, ssrcpat, ssrfwdid : suspectingly because they use look-ahead"
853355926,12743,herbelin,2021-06-02 20:19:18,herbelin,"The (x), (c) and (y) metasyntax below is not valid in GRAMMAR EXTEND. For consistency, it would be nice if the metasyntax was more similar, if it's reasonably possible.\n\nYou mean using ; instead of spaces to separate the symbols? But the argument could go the other way round moving the GRAMMAR EXTEND rules to the syntax of ARGUMENT EXTEND (up to a few extensions)?"
853393456,12743,herbelin,2021-06-02 21:24:47,jfehrle,"I don't have a good overview of the reasons why ssrparser uses GRAMMAR EXTEND on top of ARGUMENT EXTEND.\n\nIt may be that some (or even all) of the uses could be done without GRAMMAR EXTEND.  The point is that GRAMMAR EXTEND is necessary and sufficient to handle the rewstrategy case.\n\nYou mean using ; instead of spaces to separate the symbols? But the argument could go the other way round moving the GRAMMAR EXTEND rules to the syntax of ARGUMENT EXTEND (up to a few extensions)?\n\nIndeed, that was "
914440670,14854,SkySkimmer,2021-09-07 16:13:27,coqbot-app,"Hey, I have detected that there were CI failures at commit 5590599 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit b027387 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-mtac2 (because base job at b027387 failed)"
914471222,14854,SkySkimmer,2021-09-07 16:59:08,ejgallego,@coqbot: merge now
898964431,14786,JasonGross,2021-08-14 22:12:25,Alizter,@coqbot merge now
898964433,14786,JasonGross,2021-08-14 22:12:26,coqbot-app,@Alizter: You can't merge the PR because you're not among the assignees and no milestone is set.
898964522,14786,JasonGross,2021-08-14 22:13:18,Alizter,@coqbot merge now
911912790,14839,SkySkimmer,2021-09-02 17:38:22,coqbot-app,"Hey, I have detected that there were CI failures at commit c0e7cdd without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 9d18eff succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-category_theory (because base job at 9d18eff failed)\nHowever, you may want "
911984731,14839,SkySkimmer,2021-09-02 19:20:01,ppedrot,"It's a net progress, but it does not seem to be enough..."
912037639,14839,SkySkimmer,2021-09-02 20:37:24,Zimmi48,"As discussed on Zulip, there's also an issue that's not on Coq's side."
912038326,14839,SkySkimmer,2021-09-02 20:38:27,Zimmi48,So IMHO it's still worth merging as is.
912422917,14839,SkySkimmer,2021-09-03 10:08:31,Zimmi48,"@jwiegley said on Zulip that he's disabled the parts that are not building with master, so I'm restarting the job to check that everything is in order now."
912506439,14839,SkySkimmer,2021-09-03 12:38:46,ppedrot,Looks like it worked. Can we get a quick merge please?
912509105,14839,SkySkimmer,2021-09-03 12:43:20,Alizter,@coqbot merge now
912509112,14839,SkySkimmer,2021-09-03 12:43:21,coqbot-app,@Alizter: You can't merge the PR because there is no kind: label and no milestone is set.
912509243,14839,SkySkimmer,2021-09-03 12:43:36,Alizter,@coqbot merge now
912509246,14839,SkySkimmer,2021-09-03 12:43:36,coqbot-app,@Alizter: You can't merge the PR because there is no kind: label.
912509782,14839,SkySkimmer,2021-09-03 12:44:28,Alizter,@coqbot merge now
912509788,14839,SkySkimmer,2021-09-03 12:44:29,coqbot-app,@Alizter: You can't merge the PR because it hasn't been approved yet.
912510020,14839,SkySkimmer,2021-09-03 12:44:53,Alizter,@coqbot merge now\nplease
912510786,14839,SkySkimmer,2021-09-03 12:46:07,ppedrot,You can get much farther with a kind word and a gun than you can with a kind word alone. ☠️
912511589,14839,SkySkimmer,2021-09-03 12:47:34,Alizter,@Zimmi48 Is it possible for coqbot to complain about all the missing things all at once in order to avoid the repetition?
912524301,14839,SkySkimmer,2021-09-03 13:05:49,Zimmi48,"@Alizter You will notice that the first message contained two pieces of information, but you probably read too fast and saw only one:\n\nYou can't merge the PR because there is no kind: label and no milestone is set.\n\nThe reason why it also doesn't include the info on the missing review is because at this point in the process, it hasn't fetched it yet, cf.: https://github.com/coq/bot/blob/a48d26947e0ce679529d1308a40b06cb05ea3e1f/src/actions.ml#L1650-L1681\nWe could change the process to always fetc"
912610588,14839,SkySkimmer,2021-09-03 15:10:32,Alizter,It might be helpful to write the information as a list:\n\nNo kind: label\nNo milestone\n\nSo that impatient users such as myself can quickly parse the message.
912642533,14839,SkySkimmer,2021-09-03 15:54:34,Zimmi48,"Sounds good, please open either a PR or an issue on the bot repository to track that."
909623565,14828,herbelin,2021-08-31 20:47:23,coqbot-app,"Hey, I have detected that there were CI failures at commit 7a38a88 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910245963,14828,herbelin,2021-09-01 12:41:39,coqbot-app,"Hey, I have detected that there were CI failures at commit 7a38a88 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910267369,14828,herbelin,2021-09-01 13:07:08,gares,CI failure seems unrelated\n@coqbot merge now
909633195,14829,herbelin,2021-08-31 21:00:13,coqbot-app,"Hey, I have detected that there were CI failures at commit 137cdb4 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910277421,14829,herbelin,2021-09-01 13:17:59,gares,@coqbot merge now
909608847,14826,herbelin,2021-08-31 20:27:16,coqbot-app,"Hey, I have detected that there were CI failures at commit e1a086f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910275667,14826,herbelin,2021-09-01 13:15:56,gares,@coqbot merge now
700099560,13107,SkySkimmer,2020-09-28 15:36:35,maximedenes,"@SkySkimmer Doesn't the build:base failure look strange?\nThe heuristic suggested by @ggonthier was ""putting the | immediately after the last argument on which the return type depends, when other arguments depend on it""."
700624716,13107,SkySkimmer,2020-09-29 10:51:24,SkySkimmer,"@SkySkimmer Doesn't the build:base failure look strange?\n\nI forgot to change the .mllib\nThe dune build is not affected and breaks on a real issue:\nInductive PeanoView : positive -> Type :=\n| PeanoOne : PeanoView 1\n| PeanoSucc : forall p, PeanoView p -> PeanoView (succ p).\n(* auto hint: Arguments PeanoSucc _ & _. *)\nCheck PeanoSucc _ PeanoOne : PeanoView 2.\n(* The term ""PeanoSucc ?p ?p0"" has type ""PeanoView (succ ?p)"" while it is expected to have type\n ""PeanoView 2"".* )\nie succ _ is not unifiable"
702161873,13107,SkySkimmer,2020-10-01 14:08:58,gares,"theories/Init/Nat.v:\nDefinition succ := S.\nHum, how is that evarconv does not unfold succ ?"
702162999,13107,SkySkimmer,2020-10-01 14:10:44,gares,"Oh I see, it's another succ"
702178499,13107,SkySkimmer,2020-10-01 14:34:36,SkySkimmer,There is another failure in Fin.v around\nFixpoint L {m} n (p : t m) : t (m + n) :=\n  match p with |F1 => F1 |FS p' => FS (L n p') end.\nIf we\nSet Printing All.\nPrint L.\nin master:\nL = \nfix L (m n : nat) (p : t m) {struct p} : t (Nat.add m n) :=\n  match p in (t n0) return (t (Nat.add n0 n)) with\n  | @F1 n0 =>\n      @F1\n        ((fix add (n1 m0 : nat) {struct n1} : nat :=\n            match n1 return nat with\n            | O => m0\n            | S p0 => S (add p0 m0)\n            end) n0 n)\n  | @FS n0
702188907,13107,SkySkimmer,2020-10-01 14:50:13,SkySkimmer,I think we probably want a less agressive heuristic.\nMaybe put the bidi hint after the longest prefix of arguments which appear rigidly (for conversion) in the output type?\nThe L fixpoint would still need to unfold addition to uncover the S though.
702198215,13107,SkySkimmer,2020-10-01 15:03:50,gares,The first error makes me think that a failure in bidir hint application makes sense if I tell Coq to use  the hint. But if I don't a failure should fallback to the usual code path imo.
702199700,13107,SkySkimmer,2020-10-01 15:05:57,gares,Rigidly = arguments to a rigid term?
702201374,13107,SkySkimmer,2020-10-01 15:08:25,gares,"One could also say that the automatic attempt of bidir is performed using fo unif. That is, if you can trivially read some info fine, otherwise try the usual way. If the user tells you do it, do it full throttle as today. This would avoid the unfolding."
870566806,13107,SkySkimmer,2021-06-29 12:43:47,SkySkimmer,"Version based on rigidly matching the tycon at https://github.com/SkySkimmer/coq/tree/auto-bidi-hints-rigid\nrunning at https://gitlab.com/SkySkimmer/coq/-/pipelines/328961501\nWe get different errors in the stdlib, but they look nicer than producing big naked fix terms so may be more practical (some of the errors are the same, like in fmapfacts).\nmenhir error because I didn't account for coercions: in fun x : sigT (fun _ : supertype => _) => projT1 x : subtype we must not use bidi for projT1 in g"
870602415,13107,SkySkimmer,2021-06-29 13:31:03,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
870646262,13107,SkySkimmer,2021-06-29 14:22:28,JasonGross,"I'm going to have coqbot minimize the CI failures (even though it looks like the test-suite is hanging on success/Nia?); I want to test the minimizer some more, and hopefully the minimized examples will also be useful for development.\n@coqbot ci minimize"
870646277,13107,SkySkimmer,2021-06-29 14:22:29,coqbot-app,"I was unable to minimize any of the CI targets that you requested.\nHowever, you may want to try again once the pipeline for the head commit (7c15938) finishes.\nThe following requests were not fulfilled:\n\ndoc:refman could not be minimized (Could not separate 'doc:refman' into job_kind:ci-target.)\ndoc:refman could not be minimized (Could not separate 'doc:refman' into job_kind:ci-target.)\ndoc:refman could not be minimized (Could not separate 'doc:refman' into job_kind:ci-target.)\n\nAdditionally, th"
870660682,13107,SkySkimmer,2021-06-29 14:40:15,JasonGross,"(Oops, there was a bug in coq/bot#152, I've since fixed it, let's do this again.)\nI'm going to have coqbot minimize the CI failures (even though it looks like the test-suite is hanging on success/Nia?Edit: Actually, the test-suite fails, rather than hangs.  Is it usual for it to take 80 minutes to run, though?); I want to test the minimizer some more, and hopefully the minimized examples will also be useful for development.\n@coqbot ci minimize"
870661403,13107,SkySkimmer,2021-06-29 14:41:10,coqbot-app,"I have initiated minimization at commit 7c15938 for the suggested targets ci-bbv, ci-bedrock2, ci-bignums, ci-compcert, ci-coq_performance_tests, ci-coq_tools, ci-cross_crypto, ci-elpi, ci-equations, ci-fiat_crypto_legacy, ci-fiat_parsers, ci-hott, ci-iris, ci-mathcomp, ci-mtac2, ci-perennial, ci-relation_algebra, ci-rewriter, ci-tlc, ci-unimath, ci-verdi_raft, ci-vst as requested.\nHowever, you may want to try again once the pipeline for the head commit (7c15938) finishes."
870663613,13107,SkySkimmer,2021-06-29 14:43:55,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/cross_crypto/src/Minimalistic.v (from ci-cross_crypto) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 122KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.Logic.Eqdep_d"
870663767,13107,SkySkimmer,2021-06-29 14:44:05,coqbot-app,Error: Could not minimize file  (from ci-elpi) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 2.9MiB file on GitHub Actions Artifacts under build.log)\nq-native/Nelpi_apps_eltac_fail.cmx /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps/eltac//.coq-native\nINSTALL theories/.coq-native/Nelpi_apps_eltac_discriminate.cmx /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps/eltac//.coq-native\nINSTALL theories/.coq-native/Nelpi_apps_eltac_injection.cmx /builds/co
870663887,13107,SkySkimmer,2021-06-29 14:44:15,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/equations/test-suite/issues/issue7.v (from ci-equations) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.ssr.ssreflect.\nRequire Coq.Unicode.Utf8.\nReq"
870664130,13107,SkySkimmer,2021-06-29 14:44:32,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/relation_algebra/traces.v (from ci-relation_algebra) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-notation-overridden"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/relation_algebra"" ""RelationAlgebra"" """
870664233,13107,SkySkimmer,2021-06-29 14:44:40,coqbot-app,Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/tlc/src/LibFixDemos.v (from ci-tlc) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 46KiB file on GitHub Actions Artifacts under bug.v)\n(**************************************************************************\n* TLC: A library for Coq                                                  *\n* Examples for LibFix                                                     *\n********************************************
870664255,13107,SkySkimmer,2021-06-29 14:44:41,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/external/stdpp/theories/vector.v (from ci-perennial) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(** This file collects general purpose definitions and theorems on vectors\n(lists of fixed length). It uses the definitions from the standard library, but\nrenames or changes their notations, so that it becomes more consistent with the\nnaming conventions in this development. *)"
870664569,13107,SkySkimmer,2021-06-29 14:45:02,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq."
870665002,13107,SkySkimmer,2021-06-29 14:45:36,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil/Word/ZifyLittleEndian.v (from ci-bedrock2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.ZArith.ZArith.\nRequire C"
870665219,13107,SkySkimmer,2021-06-29 14:45:53,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mtac2/theories/intf/MTele.v (from ci-mtac2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-bt"" ""-w"" ""-unrecognized-unicode"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/mtac2/theories"" ""Mtac2"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_c"
870666244,13107,SkySkimmer,2021-06-29 14:47:10,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/unimath/UniMath/Foundations/PartA.v (from ci-unimath) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-type-in-type"" ""-w"" ""-notation-overridden"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/unimath/UniMath"" ""UniMath"" ""-Q"" "
870666806,13107,SkySkimmer,2021-06-29 14:47:52,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/ssreflect/ssrnat.v (from ci-mathcomp) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-ambiguous-paths"" ""-w"" ""+non-primitive-record"" ""-w"" ""+undeclared-scope"" ""-w"" ""-deprecated-hint-without-"
870667159,13107,SkySkimmer,2021-06-29 14:48:20,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Basics/PathGroupoids.v (from ci-hott) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hott/theories"" ""HoTT"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci"
870667534,13107,SkySkimmer,2021-06-29 14:48:49,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Common.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parser"
870668454,13107,SkySkimmer,2021-06-29 14:50:02,JasonGross,"Looks like many of these did not work, I'll diagnose and debug.  Some of them did work, though."
870669556,13107,SkySkimmer,2021-06-29 14:51:26,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/bbv/src/bbv/Word.v (from ci-fiat_crypto_legacy) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-notation-overridden"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/src"" ""Crypto"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_cry"
870669593,13107,SkySkimmer,2021-06-29 14:51:29,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bbv/src/bbv/Word.v (from ci-bbv) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bbv/src/bbv"" ""bbv"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-top"" ""Wor"
870671859,13107,SkySkimmer,2021-06-29 14:54:16,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/compcert/lib/UnionFind.v (from ci-compcert) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-undeclared-scope"" ""-w"" ""-omega-is-deprecated"" ""-dump-glob"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/doc/UnionFind.glob"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/lib"" ""compcert.lib"" ""-R"" ""/github/w"
870673481,13107,SkySkimmer,2021-06-29 14:56:20,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/rewriter/src/Rewriter/Language/Language.v (from ci-rewriter) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+deprecated-hint-constr,+fragile-hint-constr,+variable-collision,+unexpected-implicit-decla"
870673616,13107,SkySkimmer,2021-06-29 14:56:29,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/msl/sig_isomorphism.v (from ci-vst) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/sepcomp"" ""VST.sepcomp"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/v"
870732910,13107,SkySkimmer,2021-06-29 16:11:59,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/verdi/core/TotalMapExecutionSimulations.v (from ci-verdi_raft) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/verdi/core"" ""Verdi"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/verdi/lib"" ""Verdi"""
870741212,13107,SkySkimmer,2021-06-29 16:23:43,JasonGross,"Summary of minimizer results so far:\n\n\nThe following generate usable minimized test-cases: ci-mtac2, ci-unimath, ci-mathcomp, ci-hott, ci-fiat_parsers, ci-bbv, ci-compcert (looks like a change in autogenerated names), ci-rewriter, ci-vst (seems to be a regression in Program mode proj1_sig insertion, presumably it has to be moved later in unification or something?), and ci-verdi_raft\n\n\nci-fiat_parsers and ci-vst generate especially-short 2-definition test-cases where I expect it's clear exactly w"
870753111,13107,SkySkimmer,2021-06-29 16:42:25,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/stdpp/theories/vector.v (from ci-iris) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-hint-rewrite-without-locality"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/stdpp/theories"" ""stdpp"" ""-Q"" ""/github/workspace/builds/coq/coq-failing"
870766576,13107,SkySkimmer,2021-06-29 17:03:19,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bignums/BigN/NMake.v (from ci-bignums) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 45KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bignums"" ""Bignums"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/u"
870865222,13107,SkySkimmer,2021-06-29 19:42:28,JasonGross,"Minimization of ci-perennial should work now, minimizing ci-elpi is blocked on math-comp/hierarchy-builder#256\n@coqbot ci minimize ci-perennial\nEdit: Oops, forgot to push the change."
870865251,13107,SkySkimmer,2021-06-29 19:42:33,coqbot-app,I am now running minimization at commit 7c15938 on requested target ci-perennial. I'll come back to you with the results once it's done.
870866381,13107,SkySkimmer,2021-06-29 19:44:32,JasonGross,"Minimization of ci-perennial should work now, minimizing ci-elpi is blocked on math-comp/hierarchy-builder#256\n@coqbot ci minimize ci-perennial"
870866464,13107,SkySkimmer,2021-06-29 19:44:41,coqbot-app,I am now running minimization at commit 7c15938 on requested target ci-perennial. I'll come back to you with the results once it's done.
870867794,13107,SkySkimmer,2021-06-29 19:46:50,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/external/stdpp/theories/vector.v (from ci-perennial) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(** This file collects general purpose definitions and theorems on vectors\n(lists of fixed length). It uses the definitions from the standard library, but\nrenames or changes their notations, so that it becomes more consistent with the\nnaming conventions in this development. *)"
870874054,13107,SkySkimmer,2021-06-29 19:57:28,coqbot-app,Error: Could not minimize file  (from ci-coq_tools) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 2.8MiB file on GitHub Actions Artifacts under build.log)\ng: _build_ci/coq_tools/examples/example_42/\n  inflating: _build_ci/coq_tools/examples/example_42/.A.aux  \n  inflating: _build_ci/coq_tools/examples/example_42/.B.aux  \n  inflating: _build_ci/coq_tools/examples/example_42/.C.aux  \n  inflating: _build_ci/coq_tools/examples/example_42/.bug_42.aux  \n   creating: _build_ci/c
870888906,13107,SkySkimmer,2021-06-29 20:19:49,JasonGross,@coqbot ci minimize ci-equations
870888937,13107,SkySkimmer,2021-06-29 20:19:53,coqbot-app,I am now running minimization at commit 7c15938 on requested target ci-equations. I'll come back to you with the results once it's done.
870891459,13107,SkySkimmer,2021-06-29 20:24:23,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/equations/test-suite/issues/issue7.v (from ci-equations) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/equations/test-suite"" ""TestSuite"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/equations/theories"" ""Equations"" ""-Q"" ""/github"
870929654,13107,SkySkimmer,2021-06-29 21:25:24,JasonGross,Fixed issue with comment stripping at JasonGross/coq-tools@f3c3d32\n@coqbot ci minimize ci-relation_algebra
870929698,13107,SkySkimmer,2021-06-29 21:25:28,coqbot-app,I am now running minimization at commit 7c15938 on requested target ci-relation_algebra. I'll come back to you with the results once it's done.
870934945,13107,SkySkimmer,2021-06-29 21:35:37,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/relation_algebra/traces.v (from ci-relation_algebra) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-notation-overridden"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/relation_algebra"" ""RelationAlgebra"" """
910246465,14831,proux01,2021-09-01 12:42:21,ppedrot,Only the last commit should go in this PR.
910247916,14831,proux01,2021-09-01 12:44:20,proux01,"My bad, thanks."
910336602,14831,proux01,2021-09-01 14:23:45,coqbot-app,"Hey, I have detected that there were CI failures at commit 73fa62b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 87f85f1 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-category_theory (because base job at 87f85f1 failed)"
910420060,14831,proux01,2021-09-01 15:55:39,coqbot-app,"Hey, I have detected that there were CI failures at commit 73fa62b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 87f85f1 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-category_theory (because base job at 87f85f1 failed)"
898584073,14780,SkySkimmer,2021-08-13 16:33:17,coqbot-app,"Hey, I have detected that there were CI failures at commit 1852bfc without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a0460b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-vst.\nHowever, you may want to wait until the pipeline for the base commit (1a0460b) finishes."
898595368,14780,SkySkimmer,2021-08-13 16:55:08,coqbot-app,"Hey, I have detected that there were CI failures at commit 1852bfc without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a0460b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-vst."
898645817,14780,SkySkimmer,2021-08-13 18:30:08,coqbot-app,"Hey, I have detected that there were CI failures at commit 1852bfc without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a0460b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-vst."
902234322,14780,SkySkimmer,2021-08-19 20:48:01,SkySkimmer,"Weird test suite failure, did we get a hash collision or tmp name reuse?\nhttps://gitlab.com/coq/coq/-/jobs/1517714075"
908448118,14780,SkySkimmer,2021-08-30 15:39:16,ejgallego,"Can't hurt, I wonder what more state we have on vernac w.r.t. section / modules.\nIMHO it would be great to work a bit on declaremods as a lot of things are happenning there under the rug."
913635400,14780,SkySkimmer,2021-09-06 13:05:51,ejgallego,@SkySkimmer I'll be happy to merge when you remove the needs tag.
914263215,14780,SkySkimmer,2021-09-07 12:30:36,ejgallego,@coqbot: merge now
587489809,11327,herbelin,2020-02-18 14:35:14,herbelin,"Report on the failures: the compatibility test works pretty well. Only the case where a second coercion to Funclass is applicable fails to be detected. This happens in two cases:\n\nIris: the fix is to replace some F  into F  which is expected\nUnimath: the fix is more complicated. Due to the implicit arguments, the coercion is not correctly applied by exact and I replaced some pr1 a c (the c is extra) with disp_functor_on_objects (pr1 a).\n\nHere is for the record a simplified example of what exact "
587493725,11327,herbelin,2020-02-18 14:43:19,herbelin,"Yet another question. If I have:\nAxiom f : nat -> forall {n:nat}, n=n.\n\nshould I accept f to be a coercion to Funclass or do I expect for it to be to Funclass that at least one argument is non-implicit? I don't see examples where I might want a coercion to Funclass and not expecting an explicit argument. So, this seems reasonable to me that coercions skip the implicit arguments and that the following instead work: (?)\nAxiom f : nat -> forall {n:nat}, n=n.\nCoercion f : nat >-> eq.\n\nMaybe, @pi8027"
587503432,11327,herbelin,2020-02-18 15:02:35,gares,"I've mixed feelings about this feature, especially in his cost/benefit.\nThe cost is a more tight coupling between two components, I could live with that.\nThe benefits are totally unclear to me. In particular quantifying in the middle of a spine of arrows is weird, it seems more natural to put the type of the term acting as a coercion in a prenex form, i.e. put the implicit argument before the term being casted. To me the coercion is a ""technical term"" (that the user is not even supposed to see) "
587534940,11327,herbelin,2020-02-18 16:01:15,herbelin,"@gares: @tchajed gave an example at #5527 and there are examples in Iris, UniMath, suspectingly in mathcomp too. You are basically liable to have implicit arguments in a coercion to Funclass anytime you want a coercion to a field which has dependent arguments.\nSee for instance a comment mentioning this issue in Iris' file ofe.v:\n(** Note that the implicit argument [Cofe A] is not taken into account when\n[oFunctor_diag] is used as a coercion. So, given [F : oFunctor] and [A : ofeT]\none has to wri"
587537925,11327,herbelin,2020-02-18 16:06:50,tchajed,"Yes, @gares, from a benefits perspective this feature would be awesome, though I can't comment on how much complexity it adds.\nThe issue is basically that you effectively can't have Funclass coercions to polymorphic functions; it actually exposes that you're using a coercion because you need these _ arguments. My example in #5527 is a reduced artificial example (and this is long enough ago that I've forgotten what my real use case was at the time), but the Iris example is a good realistic one."
587592590,11327,herbelin,2020-02-18 17:57:59,herbelin,"@gares: if you want examples in MathComp, look for the warning funclass-coercion-implicit-arguments-skipping-deprecated in the CI for mathcomp (there are about 40 of them). The first example is the coercion apply in gfunctor.v, whose first argument is implicit. As a consequence, F gT G could be simplified into F G in line 251 of gfunctor.v."
588232297,11327,herbelin,2020-02-19 13:34:26,amahboubi,"@gares, your suggestion to put the quantification in prenex position works, but does not survive composition.\nSo it seems to me that it is a clear improvement. However, the gfunctor file is an infrastructure library and probably not one as curated as other files in mathcomp. As far as I can tell (but I did not inspect the warnings), this does not impact ""client code"" of this infrastructure. So I am not sure that this would bring us a significant gain."
588244605,11327,herbelin,2020-02-19 13:58:10,pi8027,"Yet another question. If I have:\nAxiom f : nat -> forall {n:nat}, n=n.\n\nshould I accept f to be a coercion to Funclass or do I expect for it to be to Funclass that at least one argument is non-implicit? I don't see examples where I might want a coercion to Funclass and not expecting an explicit argument. So, this seems reasonable to me that coercions skip the implicit arguments and that the following instead work: (?)\nAxiom f : nat -> forall {n:nat}, n=n.\nCoercion f : nat >-> eq.\n\n\nIMO, declarat"
588402044,11327,herbelin,2020-02-19 19:25:06,herbelin,"@amahboubi\n\nAs far as I can tell (but I did not inspect the warnings), this does not impact ""client code"" of this infrastructure.\n\nWould it be ok that the warning is temporary and that taking implicit arguments of coercions to Funclass into account eventually becomes the default rule?\n@pi8027\n\nIMO, declarations of implicit coercions should be independent of Arguments declarations. One may change that implicit argument n to an explicit argument after the above coercion declaration of f, and then "
589300066,11327,herbelin,2020-02-20 20:46:16,SkySkimmer,"I'm not convinced that we want to use implicits for this coercion feature.\nMaybe we could have an extended syntax like\nAxiom f : A -> B -> C -> D. (* maybe dependent arrows *)\nCoercion f _ ! _ : B >-> D.\nwhere the _ mean ""insert some hole when coercing"" and the ! designates the principal argument.\nThen we could bring back implicits slightly indirectly such that\nAxiom f : nat -> forall {n:nat}, n=n.\nCoercion f ! : nat >-> eq.\nis equivalent to\nCoercion @f ! _ : nat >-> eq.\nThis syntax idea could p"
589304214,11327,herbelin,2020-02-20 20:56:04,herbelin,"It also means that changing the implicits after declaring the coercion doesn't change the coercion's behaviour,\n\nLooks interesting, I'm sensitive to the argument.\nI believe that there is indeed a nice story to develop here, which should also give a nicer status to the ""extra"" scopes."
589975920,11327,herbelin,2020-02-22 17:00:27,herbelin,"@SkySkimmer, let me come back to your comment:\n\nI'm not convinced that we want to use implicits for this coercion feature.\nMaybe we could have an extended syntax like\nAxiom f : A -> B -> C -> D. (* maybe dependent arrows *)\nCoercion f _ ! _ : B >-> D.\n\nI'm not exactly sure if you are referring here to the main feature (inheriting implicit arguments for coercions to Funclass) or to my comment above (relaxing the conditions for accepting T >-> U).\nRegarding my later comment, I don't consider it to"
627368924,11327,herbelin,2020-05-12 14:08:07,Zimmi48,"Dear PR author(s) and contributors, it seems to us this PR may need additional work beyond the 8.12 branching deadline on May 15th.\nWe are thus removing the 8.12+beta1 milestone; please retarget as appropriate, and also consider updating labels to reflect current status, moving the PR to draft status, etc.\nWe apologize in advance if we misunderstood the PR status."
627511777,11327,herbelin,2020-05-12 18:21:34,herbelin,No time to work on it by Friday but this is clearly something valuable about which the developers should take position.
884753183,11327,herbelin,2021-07-22 08:51:19,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
885101629,11327,herbelin,2021-07-22 17:53:43,coqbot-app,"Hey, I have detected that there were CI failures at commit 3e1fc8c without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 9f5d448 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-unimath."
905455269,11327,herbelin,2021-08-25 12:24:27,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
906397764,11327,herbelin,2021-08-26 13:07:32,coqbot-app,"Hey, I have detected that there were CI failures at commit d6439ac without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 18fe7e8 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-unimath."
907230565,11327,herbelin,2021-08-27 14:07:30,herbelin,"Tentative summary of the status of the PR:\n\nthe ""feature"" implements an expected interaction between coercions and implicit arguments which was overlooked up to now\nprevious comments have been taken into account\ncompatibility strategy:\n\nwhen the error is related to inh_app_to_fun, the PR writes a warning to tell where the location of where a change should be made\nthere are almost no CI incompatibility but I should try without the warning\nI anyway added an option Set Implicit Arguments Coercion I"
929763929,11327,herbelin,2021-09-29 02:10:59,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
954354119,11327,herbelin,2021-10-29 02:13:02,coqbot-app,"This PR was not rebased after 30 days despite the warning, it is now closed."
882681805,14679,ppedrot,2021-07-19 16:20:33,ppedrot,"Here is a minimal example of a fringe case.\nCreate HintDb foo discriminated.\n\nDefinition F (n : nat) := n.\n\nInductive Pred : nat -> Prop := pred : forall n, Pred (S n).\n\n#[local]\nHint Unfold F : foo.\n\n#[local]\nHint Resolve pred : foo.\n\nPrint HintDb foo.\n\nGoal forall n, Pred (F (S n)).\nProof.\nintros n.\nsolve [ auto with foo ]. (* with this PR auto leaves the goal unchanged and this line fails *)\nQed."
882789035,14679,ppedrot,2021-07-19 19:08:03,coqbot-app,"Hey, I have detected that there were CI failures at commit 3d8c49d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1bba7d6 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-hott, ci-math_classes."
883221555,14679,ppedrot,2021-07-20 08:54:04,ppedrot,"CI shows that only HoTT, math-classes and (by transitivity) corn are broken. It seems quite a small change in the end thus, so maybe it's worth pursueing and writing overlays. @mattam82 what do you think?"
884115131,14679,ppedrot,2021-07-21 11:24:18,ppedrot,"Let's close for the time being, I'll reopen after the deadzone known as summer."
918097254,14679,ppedrot,2021-09-13 11:24:32,coqbot-app,"Hey, I have detected that there were CI failures at commit 641dd02 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 89818ca succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-hott, ci-math_classes."
918097545,14679,ppedrot,2021-09-13 11:24:59,coqbot-app,"Hey, I have detected that there were CI failures at commit 641dd02 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 89818ca succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-hott, ci-math_classes."
918232397,14679,ppedrot,2021-09-13 14:10:19,ppedrot,Why are there CI failures in ml-api and refman? In the first case I don't see how it's related to this PR and in the second I don't even see any outstanding error.
924128580,14679,ppedrot,2021-09-21 16:00:28,ppedrot,"All overlays were merged, so this is ready to go as-is and needs an assignee."
924728246,14679,ppedrot,2021-09-22 09:01:42,SkySkimmer,Maybe we could have a test for this?
924866251,14679,ppedrot,2021-09-22 12:05:52,ppedrot,Do you want a positive or a negative test?
924890144,14679,ppedrot,2021-09-22 12:37:46,SkySkimmer,Why not both?
926499482,14679,ppedrot,2021-09-24 09:53:42,SkySkimmer,ping
926577165,14679,ppedrot,2021-09-24 12:13:03,ppedrot,@SkySkimmer test added.
926579110,14679,ppedrot,2021-09-24 12:16:17,SkySkimmer,"This test passes in master, shouldn't we test the changed behaviour?"
926580112,14679,ppedrot,2021-09-24 12:18:02,ppedrot,"You're right, let me add another discriminating test."
926650787,14679,ppedrot,2021-09-24 14:02:43,SkySkimmer,@coqbot merge now
909600018,14825,herbelin,2021-08-31 20:18:02,coqbot-app,"Hey, I have detected that there were CI failures at commit 47a78b9 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
913663108,14763,SkySkimmer,2021-09-06 13:46:08,ppedrot,Merging soon then.
913768173,14763,SkySkimmer,2021-09-06 16:49:00,coqbot-app,"Hey, I have detected that there were CI failures at commit 7fb8571 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4de7bc5 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
913769840,14763,SkySkimmer,2021-09-06 16:53:33,coqbot-app,"Hey, I have detected that there were CI failures at commit 7fb8571 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4de7bc5 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
913773277,14763,SkySkimmer,2021-09-06 17:02:17,coqbot-app,"Hey, I have detected that there were CI failures at commit 7fb8571 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4de7bc5 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
913793165,14763,SkySkimmer,2021-09-06 17:58:56,coqbot-app,"Hey, I have detected that there were CI failures at commit 7fb8571 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4de7bc5 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
910961830,14836,proux01,2021-09-02 00:44:14,coqbot-app,"Hey, I have detected that there were CI failures at commit e63ee29 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 6bd07ba succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-category_theory (because base job at 6bd07ba failed)"
911400002,14836,proux01,2021-09-02 08:44:09,ppedrot,"That's a duplicate of #14834 but since I have merge rights, that nobody cared about the other one and that fixing the test-suite is urgent, I'll merge this right now and close the other one."
911405319,14836,proux01,2021-09-02 08:48:30,proux01,"@ppedrot sorry, I somehow missed #14834 (and I don't (yet) have merge rights anyway ;) )\nWell, thanks for merging!"
914438780,14855,silene,2021-09-07 16:10:52,silene,"The related pull requests are now part of the branch, so this is ready."
914447038,14855,silene,2021-09-07 16:22:02,Zimmi48,"@silene It seems like I missed this while reviewing #14490 but the current changelog is consolidated under a title ""Changes in 8.14.0"". While the .0 release is expected to have very little change compared to the +rc1 release, I still think that we should aim for accuracy and thus document this list as what is included in the +rc1 release. Can you fix this before I merge (in a separate commit)?"
914453810,14855,silene,2021-09-07 16:32:06,silene,"Are you sure? For the previous releases, we only wrote a separate changelog for betas, not for release candidates. So, naming the section ""Changes in 8.14+rc1"" does not seem consistent."
914474596,14855,silene,2021-09-07 17:04:20,coqbot-app,"Hey, I have detected that there were CI failures at commit 980991a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 873de82 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-mtac2 (because base job at 873de82 failed)"
914539659,14855,silene,2021-09-07 18:44:28,Zimmi48,"It's been a very long time (8.5 or 8.6) since we didn't do release candidates, and at the time we also did beta releases. I guess we just interpreted differently what ""release candidate"" was supposed to mean in @gares's CEP. I didn't put as much meaning in this renaming as you did.\nIn the end, you're the RM so it's your call."
914540431,14855,silene,2021-09-07 18:45:55,Zimmi48,"In the interest of efficiency, I'll merge this PR and you can open another one if you adopt my interpretation."
898455419,14779,SkySkimmer,2021-08-13 13:23:53,SkySkimmer,Needed for #14780
898634837,14779,SkySkimmer,2021-08-13 18:09:42,Alizter,Also for #12004 we should have:\nFail +\nFail -\nFail *
898644434,14779,SkySkimmer,2021-08-13 18:27:30,coqbot-app,"Hey, I have detected that there were CI failures at commit 31def7b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a0460b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-vst."
898685479,14779,SkySkimmer,2021-08-13 19:49:42,coqbot-app,"Hey, I have detected that there were CI failures at commit 31def7b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a0460b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-vst."
898699422,14779,SkySkimmer,2021-08-13 20:17:52,coqbot-app,"Hey, I have detected that there were CI failures at commit 31def7b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a0460b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-vst."
898711584,14779,SkySkimmer,2021-08-13 20:45:46,coqbot-app,"Hey, I have detected that there were CI failures at commit 31def7b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a0460b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-vst."
900050732,14779,SkySkimmer,2021-08-17 07:09:39,ejgallego,"Happy to merge, however I understand we need to solve #14783 first?"
902108491,14779,SkySkimmer,2021-08-19 17:33:32,Alizter,So why does Fail { work whilst Fail + doesn't? Are bullets not interpreted at a similar time to brackets?
903781611,14779,SkySkimmer,2021-08-23 13:43:05,Alizter,@coqbot merge now
903781625,14779,SkySkimmer,2021-08-23 13:43:06,coqbot-app,@Alizter: You can't merge the PR because you're not among the assignees.
903782802,14779,SkySkimmer,2021-08-23 13:44:26,Alizter,@coqbot merge now
903782844,14779,SkySkimmer,2021-08-23 13:44:28,coqbot-app,@Alizter: Please take care of the following overlays:\n\n14779-SkySkimmer-typed-vernac-modular.sh
904181882,14779,SkySkimmer,2021-08-23 22:39:58,jfehrle,"@Alizter As the merger, you are responsible for merging the elpi overlay promptly after the merge.  Note the message from coqbot ""Please take care of the following overlays.""  The lack of the merge breaks the ci-elpi test in #14354.  I've not done this before myself, maybe ask @gares (elpi maven) or @SkySkimmer if you have questions about how to do that.\nThe overlay is included by the dev/ci/user-overlays/14779-SkySkimmer-typed-vernac-modular.sh file.\nSee dev/ci/user-overlays/README.md for a des"
904182902,14779,SkySkimmer,2021-08-23 22:42:39,jfehrle,"@Alizter See my previous comment.  (I initially misspelled your ID, not sure editing thereafter will send a notification.)"
643777053,12512,ppedrot,2020-06-14 14:50:06,ppedrot,"Actually, in master the documentation is lying since it claims that\n\nThe hints passed through the using clause are used in the same way as if they were passed through a hint database.\n\nbut as argued above since the using terms are interpreted with resolution of holes and whatnot, this is different from merely adding the references to a hint database. Some of the changes I had to introduce in the stdlib are an example of that."
644890323,12512,ppedrot,2020-06-16 16:59:37,Blaisorblade,"Answering to https://gitlab.mpi-sws.org/iris/stdpp/-/merge_requests/165#note_52540:\n\nIt's actually a bit strange that typeclasses are never resolved when applying hints, regardless of the using clause.\n\n\nShould Coq fix this oddity, that is, support typeclass-polymorphic hints?\nHow hard would it be?\nIf it's easy, could that be done first? Or could these changes be planned together?\n\nThat might reduce the impact of this change, but it might be small; IMHO more importantly, if you're going to fix T"
644897573,12512,ppedrot,2020-06-16 17:14:17,Blaisorblade,"Also having to change eauto using 0 with eauto using O (even where 0 defaults to O, in https://gitlab.mpi-sws.org/iris/iris/-/merge_requests/464/diffs#note_52545) seems surprising.\nLooking at the doc, it's not obvious if the documented syntax qualid excludes notations for qualids..."
644931159,12512,ppedrot,2020-06-16 18:22:49,tchajed,"@ppedrot could you make eauto using thm1, thm2 just be pose proof thm1; pose proof thm2; eauto? Then we wouldn't have all this upstream breakage, and it would restore the existing functionality (mostly; a few cases might need using @thm1, but I can understand that)."
644959100,12512,ppedrot,2020-06-16 19:10:58,JasonGross,"Looking at the doc, it's not obvious if the documented syntax qualid excludes notations for qualids...\n\nI think as-of a recently merged PR, we're now using reference for qualid + by notation.  Were you looking at the doc on master (includes many improvements), or the doc on 8.11?\n(also cc @jfehrle @herbelin @Zimmi48 for the doc question)"
644972344,12512,ppedrot,2020-06-16 19:38:37,ppedrot,"@tchajed this is one of my ideas, but then this would still make the documentation lie, as adding hints that way doesn't work the same as through the Hint command."
644981565,12512,ppedrot,2020-06-16 19:59:23,Zimmi48,"Looking at the doc, it's not obvious if the documented syntax qualid excludes notations for qualids...\n\nI think as-of a recently merged PR, we're now using reference for qualid + by notation. Were you looking at the doc on master (includes many improvements), or the doc on 8.11?\n(also cc @jfehrle @herbelin @Zimmi48 for the doc question)\n\nThat's correct, but this is only about the possibility of replacing a qualid by a string representing a notation when calling some commands (cf https://coq.gith"
644988159,12512,ppedrot,2020-06-16 20:13:55,tchajed,"@ppedrot why is the documentation a concern? It can be updated, and clearly many people wrote code based on what seems to work rather than the specification in the documentation.\nThe using hints don't need to be exactly as powerful as Hint Resolves, but this PR makes them much more limited than seems necessary and it clearly has a huge backwards-compatibility cost. I'm not just concerned about the number of changes but also that the new code is hard to read and understand."
644990563,12512,ppedrot,2020-06-16 20:19:31,Blaisorblade,"@JasonGross I had checked 8.11, but the same question applies to master (tho the manual looks much better organized!). But if notations are forbidden in places like auto using ... (here, I mean notations that expand to qualids), I’d want to know “why’s that not a bug” before going to “how should that be explained”.\n@Zimmi48 You’re clearly right for Locate, but does that mean that Tactic Notations that take a “smart_global” can take a notation as a string? Hopefully not? See\nhttps://coq.github.io"
644992379,12512,ppedrot,2020-06-16 20:23:33,Zimmi48,"Why ""hopefully not""?"
644999726,12512,ppedrot,2020-06-16 20:39:28,JasonGross,"That's correct, but this is only about the possibility of replacing a qualid by a string representing a notation when calling some commands (cf https://coq.github.io/doc/master/refman/proof-engine/vernacular-commands.html#grammar-token-reference). It doesn't really apply in this case, where Paolo was expected to be able to use a notation (without the quotes) in place of a qualid.\n\nI'm a bit confused, now.  It seems there are two different yes/no questions to answer about qualid-like-things, and "
645007190,12512,ppedrot,2020-06-16 20:56:10,Blaisorblade,"@Zimmi48 I start seeing your point after having written the code below, which follows the new manual. But I wrote it to prove that the manual was wrong and no tactics exist that take strings as notations.\nIt's already weird enough that Locate takes a string, but that's well-known.\nDefinition T := True.\nNotation TT := T.\nNotation ""'TTT'"" := T.\n\nGoal TTT.\nsimpl ""TTT"". (* Uh? I'd want `simpl TTT` instead. *)\ncbn [""TTT""]. (* Uh? I'd want `cbn [TTT]` instead. *)\nunfold TT.\nunfold ""TTT"". (* Uh? I'd wa"
645007252,12512,ppedrot,2020-06-16 20:56:20,Blaisorblade,"@JasonGross On your earlier question:\nDocs of auto https://coq.github.io/doc/master/refman/proof-engine/tactics.html#coq:tacn.auto still mentions qualid, and qualid’s explanation doesn’t discuss notations.\nI can’t find “reference” in the general index or the glossary; the only “explanation” I ran into is\nhttps://coq.github.io/doc/master/refman/user-extensions/syntax-extensions.html#tactic-notations, but the table is puzzling: I don’t get what the “Parsed as” column mean; and the table suggests t"
645009325,12512,ppedrot,2020-06-16 21:00:56,JasonGross,"To add to the confusion, both the code and the doc have reference, but they refer to different things...  This will hopefully be fixed soon."
645012886,12512,ppedrot,2020-06-16 21:08:33,Zimmi48,"Does anybody use things like unfold ""TTT""? I wouldn't even preserve support for it unless uses exist.\n\nYes, of course, I do use it all the time. It seems like you are confusing usual notations with abbreviations (see https://coq.github.io/doc/master/refman/user-extensions/syntax-extensions.html#abbreviations)."
645013946,12512,ppedrot,2020-06-16 21:10:55,Zimmi48,"@JasonGross Seeing this table, it seems to me it was a mistake to rename ""smart_qualid"" / ""smart_global"" into ""reference"" in the manual."
645021917,12512,ppedrot,2020-06-16 21:29:28,Blaisorblade,"@Zimmi48 Re unfold ""TTT"", I don't see where an outsider would learn it from. It's not documented in the current manual, nor AFAIK in SF/CPDT.\nOn notations vs abbreviations, I know they're distinct (even tho using ""Notation"" for abbreviations doesn't help), but Fail unfold TTT. still violates the reasonable expectation that TTT and TT are interchangeable in all contexts.\nIt's sad enough that TTT has likely valid use cases and we can't deprecate it...\n@ppedrot @Zimmi48 Both for ""unfold"" and for au"
645023026,12512,ppedrot,2020-06-16 21:32:05,Blaisorblade,"It's not documented in the current manual, nor AFAIK in SF/CPDT.\n\nI must retract: unfold ""string"" appears later. I remain unconvinced that justifies Fail unfold TTT to somebody unfamiliar with the implementation."
645027762,12512,ppedrot,2020-06-16 21:44:15,ppedrot,"It can be updated, and clearly many people wrote code based on what seems to work rather than the specification in the documentation\n\nThe full-fledged syntax is not so much used in the CI, actually. Also, writing code that just works as opposed to a specification that was actually written down is begging the stick to get beaten.\nThe reason why I'm not so fond about trying to preserve the old behaviour when it's in reach to get rid of it is that it relies on a broken heuristic that is hard to doc"
645028919,12512,ppedrot,2020-06-16 21:47:12,ppedrot,(When was this PR turned from a draft to a proper one BTW? I don't remember doing that...)
645034846,12512,ppedrot,2020-06-16 22:02:59,tchajed,"I don't understand what's wrong with providing a tactic eauto using thm1, thm2 with the documented semantics that it's equivalent to whatever pose proof thm1; pose proof thm2; eauto would do. Then it's clear that it takes terms and not some heuristic thingy, which I agree is bad.\nI'm suggesting this under the hypothesis that much of the breakage would go away with this change."
645035705,12512,ppedrot,2020-06-16 22:05:21,tchajed,"Also in fixing Argosy I discovered that pose thm1; eauto isn't equivalent because it will clutter the context when eauto doesn't solve the goal, which is not great...\nMost people don't have output tests that would catch this regression, but it will affect interactive proofs."
645036659,12512,ppedrot,2020-06-16 22:08:02,ppedrot,"pose proof foo; auto is not strictly equivalent to auto using foo since the handling of evar is different. In the second case the generated evars are requantified over in an implementation-specific way, while in the first case they will linger around. If we want to keep backwards compatibility, we need to emulate that behaviour as well."
645037652,12512,ppedrot,2020-06-16 22:10:36,tchajed,"I'm specifically not suggesting backward compatibility, so that you can drop this functionality, but I'm trying to find a middle ground between ""only global references"" and ""obscure heuristics"" that seems to match the historical usage."
645038092,12512,ppedrot,2020-06-16 22:11:42,Blaisorblade,"@tchajed this is one of my ideas, but then this would still make the documentation lie, as adding hints that way doesn't work the same as through the Hint command.\n\n\n\n\n\n@ppedrot why is the documentation a concern? It can be updated, and clearly many people wrote code based on what seems to work rather than the specification in the documentation.\n\n\n\nAlso, writing code that just works as opposed to a specification that was actually written down is begging the stick to get beaten.\n\nWith respect for"
645039683,12512,ppedrot,2020-06-16 22:16:04,ppedrot,"@tchajed OK, I'll write an alternative patch to see how better it works."
645043488,12512,ppedrot,2020-06-16 22:26:56,ppedrot,"I am just realizing this is going to break in universe-polymorphic mode, since you can only have one instance of the term when you pose it. Well, if your proofs rely on using clauses with two different instances I think you've deserved it..."
645049375,12512,ppedrot,2020-06-16 22:46:05,JasonGross,"I am just realizing this is going to break in universe-polymorphic mode, since you can only have one instance of the term when you pose it. Well, if your proofs rely on using clauses with two different instances I think you've deserved it...\n\nEasy backwards-compatible fix for this is to turn auto using x into auto using x, x (I guess this might blow up the complexity though?)"
645063042,12512,ppedrot,2020-06-16 23:32:53,jfehrle,"@Blaisorblade:\n\nI don’t get what the “Parsed as” column mean\n\nThe first column is what you type in the Tactic Notation command.  ""Parsed as"" is the link to the nonterminal that gives the syntax.\n\nIt's not all that different from the table in the 8.11 manual (shown below), except now you have a hyperlink to the syntax.\n\n\nAlso, in the current manual the table had examples^H^H the 4th column wasn't hidden by an invisible scroll-bar.\n\nProbably your browser.  It works fine for me on Chrome/Windows.\n\n"
645091196,12512,ppedrot,2020-06-17 01:20:11,Blaisorblade,"@jfehrle Sorry, I didn't mean to criticize the improvements or your work, or suggest things were going the wrong direction — all the review comments I’ve seen from you are spot-on. I was just too confused to offer more structured feedback, so I just documented my impressions, hoping it’d help. Apologies again.\n""Parsed as"" was clear in 8.11, but the new entries in the tactic notation table were confusing because of e.g. #12512 (comment) (reference means one thing in the concrete syntax and a diff"
645100613,12512,ppedrot,2020-06-17 01:56:19,jfehrle,"@Blaisorblade No worries.  What you said is worthwhile.  I just wanted to give a complete response to your comments.\nWe'd love it if you have time to help improve the doc.  You could pick some part you'd interested in (and maybe that you'd like to understand better).  @Zimmi48 can help you find an expert if you'd like that.  BTW, I am by no means an expert on Coq, but I've learned quite a bit while working on the doc."
646004542,12512,ppedrot,2020-06-18 13:06:28,Zimmi48,(When was this PR turned from a draft to a proper one BTW? I don't remember doing that...)\n\nIt was done by yourself two days ago.
646010867,12512,ppedrot,2020-06-18 13:17:21,Zimmi48,@Blaisorblade I agree with your point that abbreviations should be resolved to the underlying global reference instead of being rejected where a global reference is expected. Might be worth opening a specific issue.
647158817,12512,ppedrot,2020-06-21 17:40:47,jfehrle,"@Zimmi48:\n\n@JasonGross Seeing this table, it seems to me it was a mistake to rename ""smart_qualid"" / ""smart_global"" into ""reference"" in the manual.\n\nMakes sense.  I could reverse that with the Ltac2 change or as a standalone PR.  Which do you prefer?"
647159270,12512,ppedrot,2020-06-21 17:44:43,Zimmi48,"I could reverse that with the Ltac2 change or as a standalone PR. Which do you prefer?\n\nDepends whether you think the Ltac2 changes will be mergeable before 8.12.0. If not, a separate PR would be preferable. But we should decide what to revert to. smart_global might be a sensible choice after all if we explain that ""global"" is an abbreviation for ""global reference"", i.e. that it refers to an object from the global environment."
648760905,12512,ppedrot,2020-06-24 11:22:15,ppedrot,"After a few experiments, it seems to hard to aim for the middle ground of replacing using merely by pose. Instead, I wrote a patch that performs pose on the mangled term (i.e. requantified over evars). I personally find this disappointing, but it seems to be much more backwards compatible, and it solves the underlying implementation problem I had for hint databases. Hence, everybody is happy.\nLet's see how it behaves on a full CI."
649387579,12512,ppedrot,2020-06-25 08:47:57,ppedrot,"The two real errors in the CI are:\n\ndpdgraph, because posing a term can introduce a spurious dependency in the resulting proof\nrewriter, which fails in a place I don't understand because there is too much automation involved (maybe @JasonGross can help?)"
649410623,12512,ppedrot,2020-06-25 09:12:27,JasonGross,"Based on the error message on GitLab, I believe what's happening is that at https://github.com/mit-plv/rewriter/blob/1e47fca6eb33b149119025be063c935f0393b76a/src/Rewriter/Language/UnderLetsProofs.v#L1324 there are now two goals left over where previously there was just one, i.e., the automation is leaving over a goal that was previously solved.  Almost certainly, this was a goal that used to be solved by one of the branches of automation using wf_t or wf_safe_t, which are defined in https://gith"
656141782,12512,ppedrot,2020-07-09 13:54:11,Blaisorblade,"I guess this PR isn't planned for 8.12, right? In that case, #12576 can wait."
864415318,12512,ppedrot,2021-06-19 14:43:00,coqbot-app,"Hey, I have detected that there were CI failures at commit 39ce95a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-rewriter.\nHowever, you may want to wait until the pipeline for the base commit (533596b) finishes."
864417862,12512,ppedrot,2021-06-19 15:03:29,coqbot-app,"Hey, I have detected that there were CI failures at commit 39ce95a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-rewriter.\nHowever, you may want to wait until the pipeline for the base commit (533596b) finishes."
864420204,12512,ppedrot,2021-06-19 15:23:50,coqbot-app,"Hey, I have detected that there were CI failures at commit 39ce95a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-rewriter.\nHowever, you may want to wait until the pipeline for the base commit (533596b) finishes."
864422303,12512,ppedrot,2021-06-19 15:42:00,coqbot-app,"Hey, I have detected that there were CI failures at commit 39ce95a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-rewriter.\nHowever, you may want to wait until the pipeline for the base commit (533596b) finishes."
864424479,12512,ppedrot,2021-06-19 16:01:10,coqbot-app,"Hey, I have detected that there were CI failures at commit 39ce95a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-rewriter.\nHowever, you may want to wait until the pipeline for the base commit (533596b) finishes."
864436226,12512,ppedrot,2021-06-19 16:59:06,coqbot-app,"Hey, I have detected that there were CI failures at commit 39ce95a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-rewriter.\nHowever, you may want to wait until the pipeline for the base commit (533596b) finishes."
864662708,12512,ppedrot,2021-06-21 01:37:25,JasonGross,@coqbot ci minimize
864662718,12512,ppedrot,2021-06-21 01:37:28,coqbot-app,I have initiated minimization at commit 39ce95a for the suggested target ci-rewriter as requested.
864777536,12512,ppedrot,2021-06-21 06:54:20,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/rewriter/src/Rewriter/Language/UnderLetsProofs.v (from ci-rewriter) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 68KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-patt"
864825030,12512,ppedrot,2021-06-21 08:10:55,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/rewriter/src/Rewriter/Language/UnderLetsProofs.v (from ci-rewriter) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 70KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+deprecated-hint-constr,+fragile-hint-constr,+variab"
874939911,12512,ppedrot,2021-07-06 17:15:49,coqbot-app,"Hey, I have detected that there were CI failures at commit 5af549a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 3577566 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-rewriter.\nHowever, you may want to wait until the pipeline for the base commit (3577566) finishes."
898049838,14777,Alizter,2021-08-12 23:58:02,coqbot-app,"Hey, I have detected that there were CI failures at commit 78ff594 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a041fc1 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-fiat_parsers, ci-hott, ci-perennial, ci-stdlib2, ci-vst."
898420893,14777,Alizter,2021-08-13 12:20:58,Alizter,@coqbot ci minimize
898420976,14777,Alizter,2021-08-13 12:21:08,coqbot-app,"I have initiated minimization at commit 78ff594 for the suggested targets ci-fiat_parsers, ci-hott, ci-perennial, ci-stdlib2, ci-vst as requested."
898424109,14777,Alizter,2021-08-13 12:27:21,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/stdlib2/src/prop.v (from ci-stdlib2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-w"" ""+non-primitive-record"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/stdlib2/src"" ""Stdlib"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/l"
898424892,14777,Alizter,2021-08-13 12:28:55,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Common/Telescope/Instances.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_"
898426754,14777,Alizter,2021-08-13 12:32:38,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Basics/PathGroupoids.v (from ci-hott) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hott/theories"" ""HoTT"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci"
898617799,14777,Alizter,2021-08-13 17:37:50,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/src/goose_lang/lib/typed_mem/typed_mem.v (from ci-perennial) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-ssr-search-moved"" ""-w"" ""-deprecated-hint-without-locality"" ""-w"" ""-deprecated-instance-without-locality"" ""-w"" ""-deprecated-hint-rewrite-without-locality"" ""-w"" ""+dep"
898617937,14777,Alizter,2021-08-13 17:38:05,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/floyd/mapsto_memory_block.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/sepcomp"" ""VST.sepcomp"" "
898621923,14777,Alizter,2021-08-13 17:46:01,Zimmi48,"Hi @Alizter, thanks for working on this! But somehow it seems that you have implemented something closer to my initial post at  #14752 rather than the more limited first bullet-point of #14752 (comment) (which only changes the behavior of Hint commands without changing the one of auto / eauto).\nIt seems that since users may want a cumulative behavior for defining the default databases of auto / eauto, it would be preferable to not provide any default database feature for auto / eauto until we ca"
898642598,14777,Alizter,2021-08-13 18:23:58,Alizter,"OK, so you want Default HintDb to only change the behaviour of the hint commands and not auto? That seems a bit weird to me since someone might do:\nSet Default HintDb ""myhintdb"".\nAxiom magic : nat.\nHint Resolve magic. (* uses myhintdb *)\nGoal nat.\nauto. (* doesn't use myhintdb *)\nI would expect this to be invariant of setting the default hint database, but with what you are proposing this would no longer be the case."
898666857,14777,Alizter,2021-08-13 19:11:10,Zimmi48,That's a good point.
898758507,14777,Alizter,2021-08-13 22:54:38,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/src/goose_lang/lib/typed_mem/typed_mem.v (from ci-perennial) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-ssr-search-moved"" ""-w"" ""-deprecated-hint-without-locality"" ""-w"" ""-deprecated-instance-without-locality"" ""-w"" ""-deprecated-hint-rewrite-without-locality"" ""-w"" ""+dep"
898758600,14777,Alizter,2021-08-13 22:55:03,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/floyd/mapsto_memory_block.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 54KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_buil"
898814000,14777,Alizter,2021-08-14 04:11:21,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/src/goose_lang/lib/typed_mem/typed_mem.v (from ci-perennial) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-ssr-search-moved"" ""-w"" ""-deprecated-hint-without-locality"" ""-w"" ""-deprecated-instance-without-locality"" ""-w"" ""-deprecated-hint-rewrite-without-locality"" ""-w"" ""+dep"
898814035,14777,Alizter,2021-08-14 04:11:51,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/floyd/mapsto_memory_block.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 58KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_buil"
898870845,14777,Alizter,2021-08-14 09:28:25,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/src/goose_lang/lib/typed_mem/typed_mem.v (from ci-perennial) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 35KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-ssr-search-moved"" ""-w"" ""-deprecated-hint-without-locality"" ""-w"" ""-deprecated-instance-without-locality"" ""-w"" ""-deprecated-hint-rewr"
898870902,14777,Alizter,2021-08-14 09:28:51,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/floyd/mapsto_memory_block.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 60KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_buil"
898903221,14777,Alizter,2021-08-14 14:45:15,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/src/goose_lang/lib/typed_mem/typed_mem.v (from ci-perennial) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-ssr-search-moved"" ""-w"" ""-deprecated-hint-without-locality"" ""-w"" ""-deprecated-instance-without-locality"" ""-w"" ""-deprecated-hint-rewrite-without-locality"" ""-w"" ""+dep"
898903289,14777,Alizter,2021-08-14 14:45:44,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/floyd/mapsto_memory_block.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 64KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_buil"
898936774,14777,Alizter,2021-08-14 17:50:25,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/src/goose_lang/lib/typed_mem/typed_mem.v (from ci-perennial) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-ssr-search-moved"" ""-w"" ""-deprecated-hint-without-locality"" ""-w"" ""-deprecated-instance-without-locality"" ""-w"" ""-deprecated-hint-rewrite-without-locality"" ""-w"" ""+deprecated-tactic-notation"" ""-w"" ""-notation-overridden,-red"
898953115,14777,Alizter,2021-08-14 20:02:46,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/floyd/mapsto_memory_block.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 102KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_bui"
898979751,14777,Alizter,2021-08-15 01:19:48,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/floyd/mapsto_memory_block.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 79KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_buil"
899003924,14777,Alizter,2021-08-15 06:36:41,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/floyd/mapsto_memory_block.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 68KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_buil"
899038969,14777,Alizter,2021-08-15 11:53:39,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/floyd/mapsto_memory_block.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 72KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_buil"
899083119,14777,Alizter,2021-08-15 17:10:32,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/floyd/mapsto_memory_block.v (from ci-vst) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 74KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_buil"
899098135,14777,Alizter,2021-08-15 19:20:54,Alizter,@JasonGross @Zimmi48 the minimizer seems to have gone a bit haywire. How can I stop it?
899098603,14777,Alizter,2021-08-15 19:25:17,Zimmi48,I've canceled the current run.
913182542,14846,herbelin,2021-09-05 16:09:17,coqbot-app,"Hey, I have detected that there were CI failures at commit b62a186 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 9b921f6 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-elpi, ci-paramcoq."
913213210,14846,herbelin,2021-09-05 19:22:56,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
913765663,14846,herbelin,2021-09-06 16:42:05,coqbot-app,"Hey, I have detected that there were CI failures at commit b62a186 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 9b921f6 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-elpi, ci-paramcoq."
913899001,14846,herbelin,2021-09-06 23:38:41,coqbot-app,"Hey, I have detected that there were CI failures at commit ae0ee30 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 98b3530 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-elpi, ci-paramcoq."
913940032,14846,herbelin,2021-09-07 02:13:18,coqbot-app,"Hey, I have detected that there were CI failures at commit ae0ee30 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 98b3530 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-elpi, ci-paramcoq."
915686947,14846,herbelin,2021-09-09 01:24:56,coqbot-app,"Hey, I have detected that there were CI failures at commit ae0ee30 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 98b3530 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-elpi, ci-paramcoq."
915834340,14846,herbelin,2021-09-09 07:27:13,SkySkimmer,┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬──────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]   │   mem faults    │\n│                             │                         │                                       │                                     
915876213,14846,herbelin,2021-09-09 08:28:57,SkySkimmer,"@herbelin please don't use [ci skip], it looks like it's skipping the windows/osx tests even though I don't think that's what you wanted."
915975769,14846,herbelin,2021-09-09 10:48:49,herbelin,"@herbelin please don't use [ci skip], it looks like it's skipping the windows/osx tests even though I don't think that's what you wanted.\n\nI wanted to skip redoing the same tests after the push of a commit modifying only comments.\n\nDo the inductive_subst definitions in cclosure and reduction still need the\n  let rec self i accu =\n    if Int.equal i ntypes then accu\n    else self (i + 1) (subs_cons (inject (mkIndU ((mind, i), u))) accu)\n  in\n\nIt's indeed now useless, well spotted! Taken into acco"
915998645,14846,herbelin,2021-09-09 11:23:20,coqbot-app,"Hey, I have detected that there were CI failures at commit 8cab0b2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4cb8479 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-elpi, ci-paramcoq.\nHowever, you may want to wait until the pipeline for the base commit (4cb8479) finishes."
916116919,14846,herbelin,2021-09-09 13:51:01,coqbot-app,"Hey, I have detected that there were CI failures at commit 8cab0b2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4cb8479 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-elpi, ci-paramcoq.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do "
916117857,14846,herbelin,2021-09-09 13:52:06,coqbot-app,"Hey, I have detected that there were CI failures at commit 8cab0b2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4cb8479 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-elpi, ci-paramcoq.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do "
916820411,14846,herbelin,2021-09-10 11:05:10,herbelin,"Bench indicates a small but uniform time improvement.\nIf the PR goes in, I'm still hesitating whether the API should provide an emulation of the old lookup_inductive and lookup_mind_specif (that replaces back the Ind with Rel), or if we require plugins to adapt straightahead to the modified model."
916826224,14846,herbelin,2021-09-10 11:15:32,SkySkimmer,Plugins must adapt
917603142,14846,herbelin,2021-09-12 09:54:23,herbelin,"An inelegance in this PR is that mind_entry_lc uses Rel but mind_user_lc uses Ind to represent the self-references. This is particularly visible in translation plugins such as paramcoq which have to translate back from Ind to Rel.\nOn the other side, type-checking the self-references using Rel is simpler to do than using Ind so I'd keep Rel in mind_entry.\nI suspect that @SkySkimmer and @ppedrot would find this excessive but a compromise would be to keep mind_user_lc and mind_nf_lc as they are and"
917630863,14846,herbelin,2021-09-12 12:54:18,coqbot-app,"Hey, I have detected that there were CI failures at commit 45631d9 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 89818ca succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-elpi, ci-metacoq."
917967024,14846,herbelin,2021-09-13 08:36:28,SkySkimmer,I suspect that @SkySkimmer and @ppedrot would find this excessive but a compromise would be to keep mind_user_lc and mind_nf_lc as they are and to only add new variants mind_user_lc_self and mind_nf_lc_self in the inductive packets.\n\nSuch functionality fits better as Inductiveops functions imo
917994243,14846,herbelin,2021-09-13 09:11:30,ppedrot,"I also believe that storing redundant data in vo files is not a good practice. I'd rather have a function that does that, as argued above by @SkySkimmer."
922505356,14846,herbelin,2021-09-19 17:04:17,herbelin,"@gares: The example example_fuzzer.v has code written in Elpi that (presumably) assumes the type of constructors to refer to inductive types as Rel rather than as Ind (failure at line 96). Do you have an idea of what should be done to adapt it (not knowledgeable in Elpi, it is not clear to me what this code is supposed to do)?"
922507824,14846,herbelin,2021-09-19 17:22:28,herbelin,Such functionality fits better as Inductiveops functions imo\n\nI put it in inductive.ml (so that the checker can use it).
922702998,14846,herbelin,2021-09-20 07:52:14,gares,"@gares: The example example_fuzzer.v has code written in Elpi that (presumably) assumes the type of constructors to refer to inductive types as Rel rather than as Ind (failure at line 96). Do you have an idea of what should be done to adapt it (not knowledgeable in Elpi, it is not clear to me what this code is supposed to do)?\n\nThe elpi code does not know how inductive constructor names are represented, they are an opaque data. So the problem is at the ML level, there is some tricky code (you di"
922720131,14846,herbelin,2021-09-20 08:19:49,herbelin,"The elpi code does not know how inductive constructor names are represented, they are an opaque data. So the problem is at the ML level, there is some tricky code (you did edit) to transform a coq inductive declaration into an elpi one and back.\n\nThanks for the help. The problem was indeed where you spotted it. A stupid mistake, sorry."
923975191,14846,herbelin,2021-09-21 13:13:04,SkySkimmer,maybe squash the last commit?
923996929,14846,herbelin,2021-09-21 13:36:13,herbelin,"maybe squash the last commit?\n\nSure, will eventually do if no other comments come."
924713132,14846,herbelin,2021-09-22 08:41:23,SkySkimmer,@coqbot merge now
924713178,14846,herbelin,2021-09-22 08:41:26,coqbot-app,@SkySkimmer: Please take care of the following overlays:\n\n14846-herbelin-master+inlining-inductive-names-in-inductive-blocks.sh
890515424,14733,herbelin,2021-08-01 12:51:54,coqbot-app,"Hey, I have detected that there were CI failures at commit 52dc88e without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 661a835 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-color, ci-corn, ci-hott, ci-mathcomp, ci-metacoq, ci-mtac2, ci-relation_algebra, ci-rewriter, ci-unimath."
890562219,14733,herbelin,2021-08-01 17:59:53,coqbot-app,"Hey, I have detected that there were CI failures at commit 02ef052 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 661a835 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-color, ci-hott, ci-mathcomp, ci-mtac2, ci-relation_algebra, ci-rewriter, ci-unimath."
892686901,14733,herbelin,2021-08-04 14:04:24,SkySkimmer,@coqbot ci minimize
892687000,14733,herbelin,2021-08-04 14:04:31,coqbot-app,"I have initiated minimization at commit 02ef052 for the suggested targets ci-color, ci-hott, ci-mathcomp, ci-mtac2, ci-relation_algebra, ci-rewriter, ci-unimath as requested."
892691909,14733,herbelin,2021-08-04 14:10:41,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mtac2/theories/intf/MTele.v (from ci-mtac2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-bt"" ""-w"" ""-unrecognized-unicode"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/mtac2/theories"" ""Mtac2"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_c"
892703261,14733,herbelin,2021-08-04 14:24:07,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/relation_algebra/atoms.v (from ci-relation_algebra) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-notation-overridden"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/relation_algebra"" ""RelationAlgebra"" ""-"
892714971,14733,herbelin,2021-08-04 14:39:16,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/unimath/UniMath/MoreFoundations/PartA.v (from ci-unimath) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-type-in-type"" ""-w"" ""-notation-overridden"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/unimath/UniMath"" ""UniMath"" """
892723662,14733,herbelin,2021-08-04 14:50:29,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/color/Coccinelle/term_orderings/modular_dp.v (from ci-color) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/color"" ""CoLoR"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Bi"
892756137,14733,herbelin,2021-08-04 15:30:12,Janno,The Mtac2 failure is in sort-polymorphic code so it's probably inscrutable. I am happy to explain what I am doing there and help out in other ways.
892772832,14733,herbelin,2021-08-04 15:52:18,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Homotopy/ClassifyingSpace.v (from ci-hott) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hott/theories"" ""HoTT"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_bui"
892779498,14733,herbelin,2021-08-04 16:01:10,Alizter,"@herbelin I'm the author of that file in the HoTT library, if you need help understanding what is going on just ping me.\n@JasonGross Would it be possible to get coqbot to supply a backtrace of the minimized file? i.e. by running coqc -bt, it would be useful especially when there is an anomaly thrown."
892911365,14733,herbelin,2021-08-04 19:21:19,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/rewriter/src/Rewriter/Rewriter/Reify.v (from ci-rewriter) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 54KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+depre"
892911459,14733,herbelin,2021-08-04 19:21:27,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 125KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-amb"
893016756,14733,herbelin,2021-08-04 22:29:24,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/rewriter/src/Rewriter/Rewriter/Reify.v (from ci-rewriter) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 43KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+deprecated-hint-constr,+fragile-hint-constr,+variable-collisi"
893073518,14733,herbelin,2021-08-05 00:38:07,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 48KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-ambi"
893185243,14733,herbelin,2021-08-05 05:54:51,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 39KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-ambi"
893372675,14733,herbelin,2021-08-05 11:11:28,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 203KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-amb"
893775296,14733,herbelin,2021-08-05 20:29:40,JasonGross,"@Alizter Easy, yes; reasonable, I'm not sure.  Do you think it's a good idea to pass -bt unconditionally to coqc on all runs?  I'm a bit worried that it might interfere with minimizing some errors, but perhaps it's always safe to pass -bt?  If you want to do this, create a PR that modifies wrap_file at https://github.com/coq-community/run-coq-bug-minimizer/blob/484e7221bcfaeda0b5c7db1bbd76b0cd8c048a61/coqbot-config.sh#L55-L65 that has something like\nif [[ ""$file"" == *coqc* ]] || [[ ""$file"" == *c"
895109161,14733,herbelin,2021-08-09 10:19:21,Alizter,"@JasonGross I had a go on Friday, to reproduce the same bug the bug minimizer ran into, but I couldn't succeed. I was using the branch from this PR as the version of coq, and running the find-bug script. If you can find the step (the .v file) where the bug minimizer fails, I would like to take a look. I am unable to reproduce this issue myself. (Thought it could be because I didn't run it long enough)."
949720187,14733,herbelin,2021-10-22 15:10:47,SkySkimmer,@herbelin any chance of progress before 8.15?
949798075,14733,herbelin,2021-10-22 16:44:49,herbelin,"Unfortunately little chance. I plan to work back on the pending unification PRs from mid-November, which will be too late."
952350392,14733,herbelin,2021-10-26 21:42:24,JasonGross,"@herbelin If you're willing to rebase this on current master, the minimizer should be able to correctly minimize ci-hott now (well, once JasonGross/coq-tools#75 is merged).  (Or, if you're okay with it, I could rebase + force push.)\n@Alizter the issue stopping minimization ended up being that Inductive False := . lands in Type with a universe argument when polymorphism is set, combined with #15073 obscuring error reporting; see JasonGross/coq-tools#74 if you're interested in details."
952585511,14733,herbelin,2021-10-27 06:34:23,herbelin,Rebase done.
952660786,14733,herbelin,2021-10-27 08:23:26,coqbot-app,"Hey, I have detected that there were CI failures at commit 84f1715 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit e9c1223 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-category_theory, ci-color, ci-coq_tools, ci-hott, ci-mathcomp, ci-mtac2, ci-relation_algebra, ci-rewriter, ci-unimath."
953314986,14733,herbelin,2021-10-27 21:11:00,JasonGross,"Thanks @herbelin , but, unfortunately, as I discovered in #14748 (comment), the existence of Type.v (HoTT/HoTT#1592) prevents full minimization, so we'll have to wait for that to be fixed..."
955624853,14733,herbelin,2021-10-31 02:18:25,JasonGross,This should now work: @coqbot ci minimize ci-mathcomp
955624855,14733,herbelin,2021-10-31 02:18:27,coqbot-app,I am now running minimization at commit 84f1715 on requested target ci-mathcomp. I'll come back to you with the results once it's done.
955624868,14733,herbelin,2021-10-31 02:18:43,coqbot-app,I am now running minimization at commit 84f1715 on requested target ci-mathcomp. I'll come back to you with the results once it's done.
955651596,14733,herbelin,2021-10-31 07:35:44,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 140KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-amb"
955694993,14733,herbelin,2021-10-31 12:52:38,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 63KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-ambi"
955767296,14733,herbelin,2021-10-31 18:09:39,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 123KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-amb"
955811782,14733,herbelin,2021-10-31 23:26:32,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 75KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-ambi"
955926047,14733,herbelin,2021-11-01 04:43:38,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 184KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-amb"
956091088,14733,herbelin,2021-11-01 10:00:25,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 114KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-amb"
956323235,14733,herbelin,2021-11-01 15:17:30,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 87KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-ambi"
956569544,14733,herbelin,2021-11-01 20:34:30,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 89KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-ambi"
957027778,14733,herbelin,2021-11-02 01:52:07,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 170KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-amb"
957153530,14733,herbelin,2021-11-02 07:08:50,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 97KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-ambi"
957444151,14733,herbelin,2021-11-02 12:25:49,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 103KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-amb"
957968341,14733,herbelin,2021-11-02 17:25:31,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 103KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constan"
954110096,15088,SkySkimmer,2021-10-28 18:49:51,SkySkimmer,Saying unbound rel 24 doesn't seem useful to anyone.
954131742,15088,SkySkimmer,2021-10-28 19:20:58,gares,"well, imo it should be an anomaly and the number be helpful to debug. if retyping is used on random terms, then I agree with you it serves no purpose and an anomaly is too much. I thought retyping was for typing well typed terms only...."
954131915,15088,SkySkimmer,2021-10-28 19:21:15,ejgallego,"Indeed, shouldn't this be an anomaly?"
954145136,15088,SkySkimmer,2021-10-28 19:41:08,SkySkimmer,"It is an anomaly, as seen in build:base\nReduced:\nAxiom u:unit.\nAxiom p:unit -> unit * unit.\n\nLemma foo : let (r, n) := p u in n = n.\nProof.\n  set (t := _ u).\nNot_found caught by \n  \n    \n      coq/pretyping/unification.ml\n    \n    \n        Lines 1653 to 1654\n      in\n      13b2d89\n    \n    \n    \n    \n\n        \n          \n           (* MS: This is pretty bad, it catches Not_found for example *) \n        \n\n        \n          \n           | e when CErrors.noncritical e -> raise (NotUnifiable None) i"
958153880,15088,SkySkimmer,2021-11-02 20:47:26,coqbot-app,"Hey, I have detected that there were CI failures at commit 6abb8b3 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 13b2d89 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-menhir."
958154376,15088,SkySkimmer,2021-11-02 20:48:09,coqbot-app,"Hey, I have detected that there were CI failures at commit 6abb8b3 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 13b2d89 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-menhir."
958160170,15088,SkySkimmer,2021-11-02 20:56:47,SkySkimmer,@coqbot ci minimize
958160193,15088,SkySkimmer,2021-11-02 20:56:49,coqbot-app,I have initiated minimization at commit 6abb8b3 for the suggested target ci-menhir as requested.
958184180,15088,SkySkimmer,2021-11-02 21:33:38,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/menhirlib/coq-menhirlib/src/Validator_complete.v (from ci-menhir) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/build"
958297770,15088,SkySkimmer,2021-11-02 22:34:19,SkySkimmer,"Further reduced\nInductive lookahead_action (term:unit) := Shift_act.\n\nClass IsValidator (P : Prop) (b : bool) := {}.\n\nGlobal Hint Extern 2 (IsValidator (match ?u with _ => _ end) ?b0) =>\n  let b := fresh ""b"" in\n  unshelve notypeclasses refine (let b : bool := _ in _);\n  [destruct u; intros; shelve|];\n  unify b b0;\n  unfold b; destruct u; clear b\n  : typeclass_instances.\n\nAxiom Awt : forall t:unit, lookahead_action t.\n\nLemma foo x0\n  : exists g:bool, forall x1,\n      IsValidator\n        match x0 "
959411419,15088,SkySkimmer,2021-11-03 15:17:57,SkySkimmer,bench https://gitlab.com/coq/coq/-/jobs/1743677461
960591974,15088,SkySkimmer,2021-11-04 09:35:03,SkySkimmer,┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬──────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]   │   mem faults    │\n│                             │                         │                                       │                                     
960985482,15088,SkySkimmer,2021-11-04 13:56:23,gares,@coqbot merge now
909628379,14827,herbelin,2021-08-31 20:53:53,coqbot-app,"Hey, I have detected that there were CI failures at commit a6a4565 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910273103,14827,herbelin,2021-09-01 13:13:14,gares,"On non-existent files in the Coq Project, the commit chooses to raise a warning rather than an error. This is a compromise but maybe a disputable one.\n\nWhy do you need to ""compromise""? Can't you just print a better error message?"
910293641,14827,herbelin,2021-09-01 13:37:03,herbelin,"On non-existent files in the Coq Project, the commit chooses to raise a warning rather than an error. This is a compromise but maybe a disputable one.\n\n\n\nWhy do you need to ""compromise""? Can't you just print a better error message?\n\nI don't remember. Keeping an error would indeed be as good."
913110811,14827,herbelin,2021-09-05 08:38:57,herbelin,"I changed the first error to foo.v: No such file or directory and the warning to an error In file ""bar"": foo.v: No such file or directory.\nOne day we should adopt a convention about error messages of such tools (such as printing *** Error, or Error, or the name of the command, etc.)."
918009941,14827,herbelin,2021-09-13 09:31:26,SkySkimmer,@coqbot: merge now
907472198,14813,thery,2021-08-27 20:58:11,thery,related to #14809
909067822,14813,thery,2021-08-31 09:33:11,olaure01,@thery there is apparently a problem with an empty line in changelog.
909073050,14813,thery,2021-08-31 09:40:25,thery,@olaure01  sorry with md and rst I am getting lost. I've tried something.
909134036,14813,thery,2021-08-31 11:06:07,coqbot-app,"Hey, I have detected that there were CI failures at commit 20c1f1f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
909191674,14813,thery,2021-08-31 12:29:01,thery,@Alizter  sorry I've deleted your comment by mistake (I wanted to delete my responses that were not appropriate).\nYes @herbelin in  #14809 mentioned that it would be nice to have some kind of subtyping in this kind of situation.
909205123,14813,thery,2021-08-31 12:48:20,coqbot-app,"Hey, I have detected that there were CI failures at commit 20c1f1f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
909207642,14813,thery,2021-08-31 12:51:44,coqbot-app,"Hey, I have detected that there were CI failures at commit 20c1f1f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
909208740,14813,thery,2021-08-31 12:53:20,coqbot-app,"Hey, I have detected that there were CI failures at commit 20c1f1f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
909209252,14813,thery,2021-08-31 12:54:03,Alizter,"@thery no worries, let me ask again: is it possible to use the (_, _)  notation for both prod and sigma? If not what are the blockers? IIRC the notation for Sigma is left assoc whilst prod is right."
909211115,14813,thery,2021-08-31 12:56:37,coqbot-app,"Hey, I have detected that there were CI failures at commit 20c1f1f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
909214094,14813,thery,2021-08-31 13:00:32,coqbot-app,"Hey, I have detected that there were CI failures at commit 20c1f1f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
909235520,14813,thery,2021-08-31 13:25:03,thery,@Alizter I am not an expert in notation but if I read this Coq seems to enforce that a notation has always the same associativity. Maybe @herbelin  is more expert than me in that matters.
909243821,14813,thery,2021-08-31 13:35:06,Alizter,"Yes, I suspected the reserved notation had something to do with it. I wonder if it is a historical accident that we have both products and sigma types rather than defining products as a special case of sigma.\nWhy for instance are product types right associative?\nI guess these questions are for @herbelin"
909487236,14813,thery,2021-08-31 18:22:03,herbelin,"Yes, I suspected the reserved notation had something to do with it. I wonder if it is a historical accident that we have both products and sigma types rather than defining products as a special case of sigma.\nWhy for instance are product types right associative?\n\nIt is an historical accident that associativity of and/or/exists and prod/sum do not match. Changing it now would be quite complicated :(\nHowever, the difference between product and sigma types is also motivated by the difference of und"
910182852,14813,thery,2021-09-01 11:14:55,herbelin,"It is an historical accident that associativity of and/or/exists and prod/sum do not match. Changing it now would be quite complicated :(\n\nActually, now that I remember, it is not so much an accident.\nSubtraction and division associate by default on the left, so t + u - v - w has to be interpreted as ((t + u) - v) - w and t * u / v / w has to be interpreted as ((t * u) / v) / w.\nConversely, existential quantification can be nested only on the right. Then, I presumed that conjunction and disjunct"
910187342,14813,thery,2021-09-01 11:21:11,olaure01,But /\ and * associate differently #7676
910207493,14813,thery,2021-09-01 11:48:39,herbelin,"An additional problem is that * is used both as an arithmetic operator (with the constraint coming from /) and as type combinator (which probably is a bad choice, that's another question). With a smarter system of notations, we could have different precedences of binary operators depending on the scope but the current constraint is that we need the same associativity. (Typically, to support associativity based on the interpretation, one would need the parser to simply return a list of expression"
910302675,14813,thery,2021-09-01 13:47:43,Zimmi48,"I wanted to delete my responses that were not appropriate\n\nYou should probably hide comments instead of deleting them, as this would avoid such mistakes."
910341713,14813,thery,2021-09-01 14:29:03,olaure01,"@herbelin\n\nWhile at it, there was the question at some time to provide an alternative syntax to sigT which can be iterated easily. The candidate was sigma binders, typ (following the model of exists binders, typ). Do you have an opinion?\nIn this case, we could even make the notation ( t ; u ) recursive (with associativity on the right...)\n\nDo you mean being able to write something like { x & P1 x & P2 x & P3 x & P4 x } or  { x | Q1 x & Q2 x & Q3 x & Q4 x }?\nI would be very happy to have this."
911339983,14813,thery,2021-09-02 07:54:56,herbelin,"@herbelin\n\nWhile at it, there was the question at some time to provide an alternative syntax to sigT which can be iterated easily. The candidate was sigma binders, typ (following the model of exists binders, typ). Do you have an opinion?\nIn this case, we could even make the notation ( t ; u ) recursive (with associativity on the right...)\n\nDo you mean being able to write something like { x & P1 x & P2 x & P3 x & P4 x } or { x | Q1 x & Q2 x & Q3 x & Q4 x }?\nI would be very happy to have this.\n\nYe"
911369123,14813,thery,2021-09-02 08:21:22,olaure01,Should we consider first merging the PR in its current state? It seems without problem while the other directions probably deserve more discussion/work.
911399882,14813,thery,2021-09-02 08:44:05,herbelin,"Should we consider first merging the PR in its current state? It seems without problem while the other directions probably deserve more discussion/work.\n\nA pending question is also whether it is worth going now to the generalization Notation ""( x ; .. ; y ; z )"" := (existT _ x .. (existT _ y z) ..) or if if is better to have a discussion about it too.\nIn any case, I'm ok with merging this one now (or the part of it which does not depend on #14809 if #14809 is finally merged after)."
911661205,14813,thery,2021-09-02 13:06:53,Alizter,What's going on with the ci?
911716294,14813,thery,2021-09-02 13:59:43,herbelin,What's going on with the ci?\n\nCategory Theory fails everywhere. Windows64 seems unrelated (and I saw it failing easily recently).
915031759,14813,thery,2021-09-08 08:31:09,Alizter,@coqbot merge now
915132806,14863,ppedrot,2021-09-08 10:55:43,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
915179584,14863,ppedrot,2021-09-08 12:11:54,coqbot-app,"Hey, I have detected that there were CI failures at commit 64aaaf3 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit c6ab549 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following targets (which I do not suggest minimizing):\n\nci-fiat_crypto (because base job at c6ab549 failed)\nci-fiat_crypto_legacy (b"
915182059,14863,ppedrot,2021-09-08 12:15:39,coqbot-app,"Hey, I have detected that there were CI failures at commit 64aaaf3 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit c6ab549 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following targets (which I do not suggest minimizing):\n\nci-fiat_crypto (because base job at c6ab549 failed)\nci-fiat_crypto_legacy (b"
915195301,14863,ppedrot,2021-09-08 12:28:23,Zimmi48,"I don't get how this is a bug fix. There is a bug, which is the behavior of the Unicode input mode in the presence of certain key bindings. This PR gives more flexibility to the user and a better workaround than what we have today, but it doesn't fix the bug, does it?"
915201427,14863,ppedrot,2021-09-08 12:37:35,ppedrot,"it doesn't fix the bug, does it?\n\nThe bug does not seem to come from CoqIDE proper, since the callback is triggered by any keyboard input that looks like <Shift>Space. I don't know why BEPO insecable space does this, but in any case the problem would rather lie in GTK, upon which we have zero control. Apart from changing the key combination, I don't see how we could fix this thus.\nAlso, as already mentioned during the original discussion, I find the unicode input feature both utterly useless and"
916014982,14863,ppedrot,2021-09-09 11:46:30,Alizter,Shall I merge tomorrow?
916062149,14863,ppedrot,2021-09-09 12:50:46,Zimmi48,The current state is fine to me. @charguer may want to have a look though.
916201869,14863,ppedrot,2021-09-09 15:25:31,charguer,"I have fine having unicode bindings ""off"" by default, provided there is an easily accessible menu for turning it on.\nThis is probably better than having users unable to type in a backslash without a mess at the next character.\n\nwhy on earth should we have to reimplement a homegrown version of it.\nA few years back, I spent several day trying quite a fair number of unicode input mechanisms that were advertized as ""usable"" on Ubuntu, and none was delivering the experience I was looking for. If you "
916217432,14863,ppedrot,2021-09-09 15:43:57,herbelin,"As far as my experience is concerned, there used to be an input method for CoqIDE implemented by Vincent G. long time ago It was too complicated to install and I renounced. The approach working out of the box provided by the current mechanism (without falling in #14856) is with this respect pretty convenient."
916218563,14863,ppedrot,2021-09-09 15:45:27,Zimmi48,"I have fine having unicode bindings ""off"" by default, provided there is an easily accessible menu for turning it on.\n\nI don't think that this PR turns the mode off by default, does it?"
916223748,14863,ppedrot,2021-09-09 15:52:18,Alizter,"During my testing, it was on by default."
916668023,14863,ppedrot,2021-09-10 06:38:07,ppedrot,"No, this PR does not turn the mode off by default. The default value is true which means ""on"".\n(EDIT: it's even document so...)"
916734851,14863,ppedrot,2021-09-10 08:37:54,Alizter,I will merge tomorrow if there are no objections.
917365979,14863,ppedrot,2021-09-11 08:19:52,Alizter,@coqbot merge now
909580282,14824,herbelin,2021-08-31 20:04:48,coqbot-app,"Hey, I have detected that there were CI failures at commit fb2087d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
900229811,14790,SkySkimmer,2021-08-17 11:52:10,coqbot-app,"Hey, I have detected that there were CI failures at commit eef65fe without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 86cd9dd succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-vst."
775267999,13837,SkySkimmer,2021-02-08 16:26:19,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
779252990,13837,SkySkimmer,2021-02-15 14:20:39,SkySkimmer,The compcert error is basically #13727\nStill investigating the others
824138764,13837,SkySkimmer,2021-04-21 15:09:38,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
824925213,13837,SkySkimmer,2021-04-22 15:07:48,SkySkimmer,"The verdi error looks like\nClass TheClass := {}.\n\nAxiom P : Prop.\nAxiom Q:TheClass -> nat -> Prop.\n\nAxiom A : forall {x:TheClass} (n:nat), Q x n -> P.\n\nGoal forall x:TheClass, nat -> P.\n  intros x n.\n  apply A with (n0:=n).\nConfusingly ""Check A"" or ""About A"" say the nat argument is ""n"", but in Coq master apply expects the renamed ""n0"".\nThis is because ""apply A"" is really apply (@A ?X) with ""n"" from the context appearing in the instance of ?X, the type is then ""forall n0, Q ?X{n} n0 -> P"" forcing"
865667426,13837,SkySkimmer,2021-06-22 07:24:49,RalfJung,"Confusingly ""Check A"" or ""About A"" say the nat argument is ""n"", but in Coq master apply expects the renamed ""n0"".\nThis is because ""apply A"" is really apply (@A ?X) with ""n"" from the context appearing in the instance of ?X, the type is then ""forall n0, Q ?X{n} n0 -> P"" forcing the rename.\n\nFWIW, even with an @ in front of the lemma name, #13759 still remains a problem. So the insertion of implicit arguments alone is not the main issue here, it seems."
889277129,13837,SkySkimmer,2021-07-29 16:10:19,ppedrot,"@SkySkimmer I am quite supportive of this PR, what should we do to make progress?"
892677066,13837,SkySkimmer,2021-08-04 13:52:26,SkySkimmer,I guess we need to decide to go through the compat break (and maybe to add a compat flag?)\nThis may need t wait until coq calls resume
897063125,13837,SkySkimmer,2021-08-11 18:43:13,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
909032856,13837,SkySkimmer,2021-08-31 08:47:13,ppedrot,"@SkySkimmer I took the liberty to push a commit atop of this PR to make a little experiment. Since most of the failures are caused by apply with, I added code to emulate the backwards compatible behaviour for the latter (in a simplified way, it's voluntarily not 100% compatible) while leaving all remaining tactics that use the clenv mechanism not renamed variables on the fly. Let's see what happens on the CI."
909084143,13837,SkySkimmer,2021-08-31 09:55:57,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
913155531,13837,SkySkimmer,2021-09-05 13:31:52,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
915285513,13837,SkySkimmer,2021-09-08 14:23:58,herbelin,"Note that I made a similar experiment at #14639 (noticing it would also fix #3273, #4536, #14632). This PR includes a warning telling which renaming to do."
916069537,13837,SkySkimmer,2021-09-09 13:00:45,ppedrot,"@herbelin I am not sure I see the point of the message being a warning in your patch. If the warning is triggered, isn't the tactic going to fail anyway because the identifiers do not match? Shouldn't be this information displayed in the error message instead?"
916916727,13837,SkySkimmer,2021-09-10 13:46:03,herbelin,"@ppedrot: the idea was to have a recovering mode where it succeeds using the renamed name, but warns that the name should be changed. This information could be then retrieved from the compilation and the changes applied globally, without having to treat one failing occurrence after one failing occurrence (in case there'd be a very lot of them)."
929147109,13837,SkySkimmer,2021-09-28 12:21:20,SkySkimmer,Added compat option
929214718,13837,SkySkimmer,2021-09-28 13:33:28,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
932958737,13837,SkySkimmer,2021-10-03 14:07:31,coqbot-app,"Hey, I have detected that there were CI failures at commit 20b473b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 67c70fa succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-fiat_crypto, ci-metacoq."
932967813,13837,SkySkimmer,2021-10-03 14:56:36,coqbot-app,"Hey, I have detected that there were CI failures at commit 20b473b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 67c70fa succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-fiat_crypto, ci-metacoq."
933371035,13837,SkySkimmer,2021-10-04 10:59:02,coqbot-app,"Hey, I have detected that there were CI failures at commit 8389d0d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit fdb98e9 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_crypto."
933384194,13837,SkySkimmer,2021-10-04 11:16:37,coqbot-app,"Hey, I have detected that there were CI failures at commit 8389d0d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit fdb98e9 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_crypto."
935566319,13837,SkySkimmer,2021-10-06 06:27:52,ppedrot,@SkySkimmer is it possible to submit the second commit as a distinct PR? It's quite unrelated and it'd be better to have it separately.
936147480,13837,SkySkimmer,2021-10-06 12:32:12,SkySkimmer,@SkySkimmer is it possible to submit the second commit as a distinct PR? It's quite unrelated and it'd be better to have it separately.\n\nThere's a diff conflict so I'd prefer not to.
939292777,13837,SkySkimmer,2021-10-09 12:55:19,SkySkimmer,All overlays merged
939309030,13837,SkySkimmer,2021-10-09 14:49:11,coqbot-app,"Hey, I have detected that there were CI failures at commit b5c54a2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 3049b7c succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_crypto."
939437517,13837,SkySkimmer,2021-10-10 09:20:45,ppedrot,"This shouldn't need an overlay, the CI failures are due to overlays for the revertcast PR not being merged upstream yet."
939448062,13837,SkySkimmer,2021-10-10 10:09:57,coqbot-app,"Hey, I have detected that there were CI failures at commit b5c54a2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 3049b7c succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_crypto."
939449992,13837,SkySkimmer,2021-10-10 10:17:34,ppedrot,"Hmm, actually fiat-crypto does seem to require an overlay."
939477045,13837,SkySkimmer,2021-10-10 12:51:03,SkySkimmer,Just waiting for mit-plv/fiat-crypto#1031 to be merged then
939634326,13837,SkySkimmer,2021-10-11 02:50:44,JasonGross,It's been merged
939839525,13837,SkySkimmer,2021-10-11 09:11:35,ppedrot,Let's merge!
897551251,14771,Zimmi48,2021-08-12 11:12:06,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
897594885,14771,Zimmi48,2021-08-12 12:23:05,coqbot-app,"Hey, I have detected that there were CI failures at commit 7517fa4 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 080920e succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-aac_tactics, ci-bedrock2, ci-color, ci-coq_dpdgraph, ci-coqprime, ci-coquelicot, ci-corn, ci-equations, ci-fiat_crypto_legacy, "
897752506,14771,Zimmi48,2021-08-12 15:50:41,Zimmi48,"The compatibility impact is too large to follow up on this idea, so I'm removing the last commit (changing the default value) from this PR. The rest can be considered clean-up / refactoring."
899390503,14771,Zimmi48,2021-08-16 10:11:01,SkySkimmer,How are the stdlib changes related to the ocaml changes? Was it just to deal with the compat break from the removed commit?
899403105,14771,Zimmi48,2021-08-16 10:30:41,Zimmi48,"Yes, I could split this into two unrelated PRs if you want."
899405825,14771,Zimmi48,2021-08-16 10:35:31,SkySkimmer,@coqbot merge now
624740387,12259,ejgallego,2020-05-06 16:07:03,ejgallego,Example artifact: https://coq.gitlab.io/-/coq/-/jobs/541070076/artifacts/_build/coq-coverage/index.html
624768286,12259,ejgallego,2020-05-06 16:58:10,SkySkimmer,What's the perf impact of running the coverage? Is it small enough to activate it for the 3rd party jobs (fiat-crypto etc)?
624771725,12259,ejgallego,2020-05-06 17:04:49,ejgallego,What's the perf impact of running the coverage? Is it small enough to activate it for the 3rd party jobs (fiat-crypto etc)?\n\nI think it is around 2x / 3x time.
625154567,12259,ejgallego,2020-05-07 09:58:16,ejgallego,"@SkySkimmer certainly at every commit this could be too much, but we could run a weekly deeper coverage testing run indeed."
626495793,12259,ejgallego,2020-05-11 06:21:31,aantron,"I think it is around 2x / 3x time.\n\nIs this based on a measurement? I would not have expected the impact to be such, though I suppose it's plausible for very CPU-bound work."
626623962,12259,ejgallego,2020-05-11 10:41:20,JasonGross,"I'd be quite interested in seeing the code coverage diff between, say, all of the current CI vs all of the current CI + fiat-crypto-legacy (which I've been maintaining compatible with master for, even though it's been removed from the CI).  If there's any diff, we might be able to extract some useful new test-cases."
626675012,12259,ejgallego,2020-05-11 12:37:37,aantron,"We would probably need to restore the old ""combine expressions"" for this (arithmetic/diffs on coverage output). If there is indeed interest in this, I can add them to Bisect_ppx."
626685736,12259,ejgallego,2020-05-11 12:58:45,ejgallego,"Is this based on a measurement? I would not have expected the impact to be such, though I suppose it's plausible for very CPU-bound work.\n\n@aantron it is based on CI timings, bisect job: 73 mins, regular job ~ 40 mins.\n@JasonGross hopefully we do indeed start doing stuff like that once the setup is more stable."
626694611,12259,ejgallego,2020-05-11 13:15:23,aantron,"it is based on CI timings, bisect job: 73 mins, regular job ~ 40 mins.\n\nOk. Just want to note: that difference would not be only from the instrumentation inserted into the code, but also due to the time taken to generate the report at the end."
626697568,12259,ejgallego,2020-05-11 13:20:35,ejgallego,"Ok. Just want to note: that difference would not be only from the instrumentation inserted into the code, but also due to the time taken to generate the report at the end.\n\nIndeed; I was maybe a bit pessimistic but also note that in the above job OCaml compilation time itself is a significant part so the current numbers are around a bit more than 2x ; Coq is likely worst case in this sense as some instrumented code paths are called dozens of millions of times as they are in critical loops [such "
658860680,12259,ejgallego,2020-07-15 16:19:44,jfehrle,"@ejgallego The example artifact is long gone.  Perhaps you could rerun the build for the PR so I can look at the output?  I'd like to see how usable the output is for parser statistics as you suggested on the Coq call.  I expect the 2x-3x overhead to run code coverage is far more expensive than generating the parser statistics in my PR, which should have a negligible effect on run time."
713430278,12259,ejgallego,2020-10-21 09:15:26,SkySkimmer,"@ejgallego is this still useful after bisect_ppx 2.5? https://discuss.ocaml.org/t/bisect-ppx-the-coverage-tool-now-has-excellent-integration-with-dune/6634/1\n\nBisect_ppx , the coverage tool, has just had its 2.5.0 release, in which the main addition is a very neat integration with Dune"
713639226,12259,ejgallego,2020-10-21 14:58:38,ejgallego,"@SkySkimmer this needs update as indeed the instrumentation system changed a lot, it is on my todo."
713708221,12259,ejgallego,2020-10-21 16:43:09,ejgallego,"Ok, updated; dune now also supports other backends such as landmarks"
713759360,12259,ejgallego,2020-10-21 18:02:43,ejgallego,"As I understand we could merge this, it should have no effect on a regular build, but I need to check more carefully. Let's keep it like this for now."
714616882,12259,ejgallego,2020-10-22 16:38:22,ejgallego,"The build didn't terminate, seems like some part of the bisect toolchain got botched."
797735130,12259,ejgallego,2021-03-12 20:26:19,ejgallego,"Coverage is looking pretty good IMHO, making this non-draft.\nArtifact: https://coq.gitlab.io/-/coq/-/jobs/1093804561/artifacts/_build/coq-coverage/index.html"
798823319,12259,ejgallego,2021-03-14 02:50:43,jfehrle,"The stats look quite useful.  Would you add some description in an .md file somewhere mentioning the capability, how to invoke it and how to access/interpret the results?  For example, (in words) what exactly does it count for computing ratios?  I didn't understand why ""h"" at the end of ""length"" is highlighted or why Option.iter2 isn't highlighted.\n\n\nI think much of it is relatively self-explanatory if you've ever used a code coverage tool.  A paragraph or two may be sufficient."
798841044,12259,ejgallego,2021-03-14 06:09:03,aantron,"I'll add a bit of explanation to base it on:\n\nI didn't understand why ""h"" at the end of ""length"" is highlighted or why Option.iter2 isn't highlighted.\n\nBisect instruments the out-edges of application expressions, when those applications are not in tail position (otherwise, it would change the tail recursion semantics). When there is a ""neat"" next expression to visually put the instrumentation point on, such as in fn x; e, it puts the point on e. Otherwise, it puts the point on the last character"
799372183,12259,ejgallego,2021-03-15 12:14:56,Zimmi48,Artifact: https://coq.gitlab.io/-/coq/-/jobs/1093804561/artifacts/_build/coq-coverage/index.html\n\nHow come this artifact is already a 404 three days after you posted it?
799418026,12259,ejgallego,2021-03-15 13:26:49,ejgallego,How come this artifact is already a 404 three days after you posted it?\n\nWorks here @Zimmi48
799440192,12259,ejgallego,2021-03-15 13:56:39,Zimmi48,"Hum, it's working here as well now."
800300032,12259,ejgallego,2021-03-16 14:20:14,Zimmi48,"Once this is fully ready, how do you plan to use this? I guess it's not really useful to run on every PR. WDYT? Run it on master and deploy to a webpage?"
800312082,12259,ejgallego,2021-03-16 14:34:34,ejgallego,"Once this is fully ready, how do you plan to use this? I guess it's not really useful to run on every PR. WDYT? Run it on master and deploy to a webpage?\n\nThe idea is to feed the data to coveralls / codecov, so indeed we would run it in every PR, seems worth it."
800312942,12259,ejgallego,2021-03-16 14:35:41,ejgallego,"Main blocker is some timeouts in the test suite, seem too strict, and if we want to have the codecov integration in this PR or after.\nWe can chat a bit about coverage if you want in a Call, I'm not expert myself."
800313733,12259,ejgallego,2021-03-16 14:36:42,Zimmi48,"We can chat a bit about coverage if you want in a Call, I'm not expert myself.\n\nI'd be interested to learn more about it. I have virtually zero knowledge on this aspect."
800470429,12259,ejgallego,2021-03-16 17:39:43,jfehrle,"In my experience, code coverage tools are useful for those who are writing tests.  Such tools let developers discover routines or lines of code that aren't covered by the test suite.  But that's a rather weak criterion--it's often particular inputs run through the covered lines that give erroneous results.\nSome parts of the code can be quite hard to cover in tests.  For example, the handling of exceptions or error conditions detected by Coq code.  Frequently that would require modifying the sour"
800531931,12259,ejgallego,2021-03-16 19:08:17,Zimmi48,Thanks for sharing these insights!
804033974,12259,ejgallego,2021-03-22 12:46:54,JasonGross,"It might be possible to combine code coverage diffs with the bug minimizer to increase the coverage of the test-suite.  In particular, if you can find CI developments that cover cases that Coq + stdlib + test-suite don't cover, then you can insert a unique error message into the Coq source code in that case (perhaps even do this automatically from the code coverage stats?), and then use the minimizer to make a stand-alone test-case that triggers that path."
886763578,12259,ejgallego,2021-07-26 14:41:21,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
955869980,12259,ejgallego,2021-11-01 02:15:17,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
961521292,12259,ejgallego,2021-11-04 23:55:25,Alizter,@ejgallego Can we get some progress with this?
961522230,12259,ejgallego,2021-11-04 23:58:02,ejgallego,"@ejgallego Can we get some progress with this?\n\nActually I had rebased it but forgot to push; IMHO the setup is ready, but we need to integrate it with of the services such as codecov .\nIf anyone could look into that, it'd be great, see the fixme in the gitlab file.\nAnother thing to consider is that we only run coverage with the test-suite, but it is also possible to have an extended run with the whole CI [that takes a while tho].\nSo maybe adding a cron job that does that could be interesting.\nB"
961899034,12259,ejgallego,2021-11-05 13:34:23,ejgallego,@SkySkimmer do you remember why this happens?\nlogs/coq-makefile/timing.log\n+ set -e\n+ ./001-correct-diff-sorting-order/run.sh\n+ set -e\n++ dirname ./001-correct-diff-sorting-order/run.sh\n+ cd ./001-correct-diff-sorting-order\n+ /builds/coq/coq/_build/coverage/../install/default/lib/coq-core/tools/make-both-time-files.py time-of-build-after.log.in time-of-build-before.log.in time-of-build-both-user.log\n./001-correct-diff-sorting-order/run.sh: line 8: /builds/coq/coq/_build/coverage/../install/defau
961909054,12259,ejgallego,2021-11-05 13:48:49,SkySkimmer,Probably because test-suite/Makefile includes the config/Makefile from _build/default regardless of the dune context\nso COQPREFIX is incorrect
961910707,12259,ejgallego,2021-11-05 13:51:03,ejgallego,"Probably because test-suite/Makefile includes the config/Makefile from _build/default regardless of the dune context so COQPREFIX is incorrect\n\nOh indeed, thanks for the help, will try to push a fix.\nAny other thoughts on this PR?"
964152426,12259,ejgallego,2021-11-09 13:28:53,ejgallego,"It seems to have worked, https://app.codecov.io/gh/coq/coq/commits?page=1 !\nTho maybe some tweaking is needed for codecov to understand that's a pull request?"
964164214,12259,ejgallego,2021-11-09 13:44:21,aantron,"There is already bisect-ppx-report send-to Codecov, which knows how to send all the right metadata to Codecov from Travis, CircleCI, and GitHub Actions. I probably should extend it to GitLab CI as well (it just hasn't been visibly needed until now). In the immediate term, you can include commit information with the --git option, and use --service-pull-request to pass the value of whatever environment variable GitLab uses to store the PR number."
964168464,12259,ejgallego,2021-11-09 13:49:40,aantron,"Looking at the entry on Codecov, it looks like it has some apparently invalid commit hash and a pr-12259 branch. I wonder where these come from. Perhaps Codecov is querying GitLab for metadata associated with the GitLab job number, and this is the data GitLab is responding with.\nI'm not yet familiar with integrating GitHub, GitLab CI, and Codecov, so speculating here."
964169978,12259,ejgallego,2021-11-09 13:51:35,ejgallego,"Looking at the entry on Codecov, it looks like it has some apparently invalid commit hash and a pr-12259 branch. I wonder where these come from. Perhaps Codecov is querying GitLab for metadata associated with the GitLab job number, and this is the data GitLab is responding with.\nI'm not yet familiar with integrating GitHub, GitLab CI, and Codecov, so speculating here.\n\nThat commit only exists on my fork, that's why codecov thinks it is invalid.\nIndeed I hope I get some cycles and submit gitlab s"
964171441,12259,ejgallego,2021-11-09 13:53:24,SkySkimmer,coqbot doesn't make a PR on gitlab so gitlab support is useless to us
964173587,12259,ejgallego,2021-11-09 13:56:02,ejgallego,"There is already bisect-ppx-report send-to Codecov, which knows how to send all the right metadata to Codecov from Travis, CircleCI, and GitHub Actions. I probably should extend it to GitLab CI as well (it just hasn't been visibly needed until now). In the immediate term, you can include commit information with the --git option, and use --service-pull-request to pass the value of whatever environment variable GitLab uses to store the PR number.\n\nI'm much afraid that doesn't work, it bails out wi"
964202225,12259,ejgallego,2021-11-09 14:27:52,aantron,"I'm much afraid that doesn't work, it bails out with ""cannot detect CI provider""; we could fake it but I guess we better fix it.\n\nIt shouldn't work at tthe moment — there is no GitLab CI support (EDIT: meaning, no neat integration).\n\nwe may need to fine tune the parameters so it correctly identifies the github PR\n\nSome of the parameters are (perhaps redundantly) stored in the coverage JSON itself, hence I suggest also trying --git and --service-pull-request when generating the JSON using bisect-"
964206133,12259,ejgallego,2021-11-09 14:32:13,SkySkimmer,"gitlab is just where we run the job, why do we need integration?"
964210236,12259,ejgallego,2021-11-09 14:36:46,aantron,"gitlab is just where we run the job, why do we need integration?\n\nYou don't need integration. It's just a convenience in bisect-ppx-report to have it discover all the right settings for --git, --service-pull-request, --service-name, --service-job-id based on environment variables and the needs of the coverage service the report will be sent to, and contact the service at the right endpoint itself. This can all be done manually — or near manually. Right now (EDIT: meaning, in this PR), about half"
965314651,12259,ejgallego,2021-11-10 14:49:51,ejgallego,"Thanks a lot for the hints @aantron , I'm gonna tweak some of these parameters."
966561003,12259,ejgallego,2021-11-11 19:19:36,ejgallego,"Didn't get codecov to recognize the github PR yet, I guess it can be done setting the right parameters but I am out of time for this now :("
906527951,14810,ppedrot,2021-08-26 15:46:03,ppedrot,"I think I'll need a bit of help to write the overlays, this PR seems to have weird consequences on Equations (cc @mattam82) and Mtac2 (cc @Janno)."
906561187,14810,ppedrot,2021-08-26 16:27:54,Janno,"I am happy to help but it will take me a while to set everything up on this laptop. As far as I can tell from reading the code, it is failing after (1) defining ty_c to be a Sort (either Type or Prop), (2) creating an evar of that sort, and (3) cumulatively unifying that evar with a given type dtype disallowing all reduction. Step (1) uses CClosure's weak head reduction to compute away S.stype_of isort which should yield either Prop or Type depending on the value of isort.\nI don't yet fully unde"
906567288,14810,ppedrot,2021-08-26 16:36:37,coqbot-app,"Hey, I have detected that there were CI failures at commit 2ecbee5 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 18fe7e8 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-mtac2."
906572245,14810,ppedrot,2021-08-26 16:43:59,Janno,Making a new comment because I didn't want to butcher the previous one even more. The problem is a bit more fundamental: The Mtac2 reduction strategy RedWhd RedAll stands for RedWhd [...; RedDelta; ..] which is translated into CClosure's weak head reduction with fDelta with the expectation that this means all delta reductions are performed. This worked before. I suppose this PR changes that.
906663289,14810,ppedrot,2021-08-26 18:58:26,coqbot-app,"Hey, I have detected that there were CI failures at commit 2ecbee5 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 18fe7e8 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-mtac2."
906801197,14810,ppedrot,2021-08-26 23:07:24,ppedrot,"The problem is a bit more fundamental\n\nWell if that's the only problem it should be easy. We just have to wrap the RedDelta flag to fDELTA + full transparent state. I think I've seen where this was occurring, I'll have a try at a quick fix."
907241883,14810,ppedrot,2021-08-27 14:22:56,coqbot-app,"Hey, I have detected that there were CI failures at commit 2ecbee5 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 18fe7e8 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-mtac2."
907255668,14810,ppedrot,2021-08-27 14:43:46,ppedrot,Seems to be working as intended on Mtac2 now!
908154431,14810,ppedrot,2021-08-30 08:34:55,ppedrot,"I believe this is ready and needs an assignee. For a bench with an additional optim, see #14808."
913662478,14810,ppedrot,2021-09-06 13:45:05,SkySkimmer,@coqbot merge now
913662493,14810,ppedrot,2021-09-06 13:45:07,coqbot-app,@SkySkimmer: Please take care of the following overlays:\n\n14810-ppedrot-cclosure-cleanup-fdelta.sh
906303673,14809,thery,2021-08-26 10:59:27,thery,@Casteran seems lke everybody has a version of this. So it should be in the standard lib. I had also the transitivity but don't know where to put it
906406971,14809,thery,2021-08-26 13:19:11,olaure01,"Providing a link with the dependent case might be relevant. I mean something like:\nLemma slexprod_lexprod p1 p2 :\n  slexprod p1 p2 <->\n  lexprod _ _ leA (fun _ => leB) (existT _ (fst p1) (snd p1)) (existT _ (fst p2) (snd p2)).\nProof.\nnow split; intros HP; destruct p1, p2; inversion HP; constructor; auto.\nQed."
906413097,14809,thery,2021-08-26 13:26:55,thery,@olaure01 maybe it would also be better to get the wf  directly from this equivalence.
906416418,14809,thery,2021-08-26 13:30:55,olaure01,@olaure01 maybe it would also be better to get the wf directly from this equivalence.\n\nNot clear to me what would be the best.
906446303,14809,thery,2021-08-26 14:07:40,thery,@olaure01  look much better to me now
907122716,14809,thery,2021-08-27 11:08:49,thery,@olaure01  Thanks!
907138413,14809,thery,2021-08-27 11:38:27,olaure01,"The CI-windows64 failure looks independent, I will merge on next Tuesday if there is no more comment."
907489587,14809,thery,2021-08-27 21:36:44,olaure01,"Merging #14813 should be considered before merging the present PR, so that the present one could be updated accordingly before merging."
915034967,14809,thery,2021-09-08 08:36:02,olaure01,"@thery  #14813 being merged, could you update the present PR? and I will merge it quickly."
915188096,14809,thery,2021-09-08 12:24:34,thery,@olaure01  should be ok now
915280880,14809,thery,2021-09-08 14:18:17,coqbot-app,"Hey, I have detected that there were CI failures at commit bb53171 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit c6ab549 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following targets (which I do not suggest minimizing):\n\nci-fiat_crypto (because base job at c6ab549 failed)\nci-fiat_crypto_legacy (b"
915282077,14809,thery,2021-09-08 14:19:52,coqbot-app,"Hey, I have detected that there were CI failures at commit bb53171 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit c6ab549 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following targets (which I do not suggest minimizing):\n\nci-fiat_crypto (because base job at c6ab549 failed)\nci-fiat_crypto_legacy (b"
915292983,14809,thery,2021-09-08 14:33:06,thery,the failure of fiat-cryto is unrelated to this PR #14819
915897069,14809,thery,2021-09-09 08:59:00,olaure01,@coqbot merge now
913768552,14844,ejgallego,2021-09-06 16:50:06,coqbot-app,"Hey, I have detected that there were CI failures at commit 9c92540 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4de7bc5 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
913772208,14844,ejgallego,2021-09-06 16:59:53,coqbot-app,"Hey, I have detected that there were CI failures at commit 9c92540 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4de7bc5 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
914161142,14844,ejgallego,2021-09-07 09:47:29,ejgallego,"Wording suggestions applied, thanks @jfehrle !"
914468280,14844,ejgallego,2021-09-07 16:54:50,ejgallego,@SkySkimmer you mind assigning this? [I got a lot of PRs depending on this one + the next one]
914478787,14844,ejgallego,2021-09-07 17:10:34,Alizter,@coqbot merge now
914614778,14844,ejgallego,2021-09-07 20:38:55,Zimmi48,"If that PR is not backported, the changelog it introduced will have to be fixed."
920923529,14844,ejgallego,2021-09-16 13:53:49,coqbot-app,This PR was postponed. Please update accordingly the milestone of any issue that this fixes as this cannot be done automatically.
920929161,14844,ejgallego,2021-09-16 14:00:20,Zimmi48,"👇\n\nIf that PR is not backported, the changelog it introduced will have to be fixed.\n\n☝️"
946598178,15048,SkySkimmer,2021-10-19 10:41:33,SkySkimmer,Bench https://gitlab.com/coq/coq/-/jobs/1692631703
946769730,15048,SkySkimmer,2021-10-19 14:15:59,SkySkimmer,@coqbot ci minimize hott
946769746,15048,SkySkimmer,2021-10-19 14:16:00,coqbot-app,"I was unable to minimize any of the CI targets that you requested.\nHowever, you may want to try again once the pipeline for the head commit (e9fdfae) finishes.\nThe requested target 'hott' could not be found among the jobs .\nSome jobs may have been missed because the pipeline for the head commit (e9fdfae) has not yet finished."
946770446,15048,SkySkimmer,2021-10-19 14:16:41,SkySkimmer,@coqbot ci minimize ci-hott
946770567,15048,SkySkimmer,2021-10-19 14:16:47,coqbot-app,I am now running minimization at commit e9fdfae on requested target ci-hott. I'll come back to you with the results once it's done.
946807997,15048,SkySkimmer,2021-10-19 14:54:54,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Categories/Comma/Core.v (from ci-hott) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/gi"
946868124,15048,SkySkimmer,2021-10-19 15:59:15,SkySkimmer,@coqbot ci minimize ci-hott ci-relation_algebra
946868165,15048,SkySkimmer,2021-10-19 15:59:17,coqbot-app,I am now running minimization at commit ab1d8de on requested target ci-hott. I'll come back to you with the results once it's done.\nThe requested target 'ci-relation_algebra' could not be found among the jobs .\nSome jobs may have been missed because the pipeline for the head commit (ab1d8de) has not yet finished.
946868370,15048,SkySkimmer,2021-10-19 15:59:31,SkySkimmer,@coqbot ci minimize ci-category_theory
946868406,15048,SkySkimmer,2021-10-19 15:59:34,coqbot-app,I am now running minimization at commit ab1d8de on requested target ci-category_theory. I'll come back to you with the results once it's done.
946878445,15048,SkySkimmer,2021-10-19 16:10:08,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Theory/Isomorphism.v (from ci-category_theory) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/bui"
946880986,15048,SkySkimmer,2021-10-19 16:12:59,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/WildCat/Equiv.v (from ci-hott) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/wor"
946999307,15048,SkySkimmer,2021-10-19 18:32:24,SkySkimmer,bench again as I had to fix some code https://gitlab.com/coq/coq/-/jobs/1694464732
947446609,15048,SkySkimmer,2021-10-20 08:32:10,SkySkimmer,┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │   mem faults    │\n│                             │                         │                                       │                                       
948057063,15048,SkySkimmer,2021-10-20 21:40:39,Alizter,"I guess we shouldn't do it in this PR but vernac/comCoercion.ml has a lot of French comments we should translate at some point. Also from what I understand they also need to be updated, they seem to be referencing no-longer existing arguments."
949534107,15048,SkySkimmer,2021-10-22 11:19:13,ppedrot,Merging soon.
950692439,15048,SkySkimmer,2021-10-25 09:03:15,ppedrot,@coqbot merge now
885700157,14705,SkySkimmer,2021-07-23 14:59:51,ppedrot,"Uh, I didn't think of doing it that straightforwardly. This will definitely conflict with #14697 though, can I advocate for merging mine first?"
891924914,14705,SkySkimmer,2021-08-03 15:06:56,coqbot-app,"Hey, I have detected that there were CI failures at commit 2f0321a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a41c99a succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following targets (which I do not suggest minimizing):\n\nci-coq_tools (because base job at a41c99a failed)\nci-perennial (because base"
893118370,14705,SkySkimmer,2021-08-05 02:40:27,jfehrle,Shouldn't there be a brief changelog entry?
894668036,14705,SkySkimmer,2021-08-07 15:20:54,ppedrot,@SkySkimmer can you add a short changelog so we can merge this?
895158779,14705,SkySkimmer,2021-08-09 11:50:32,ppedrot,Will merge when CI finishes.
884876678,14692,herbelin,2021-07-22 12:34:27,coqbot-app,"Hey, I have detected that there were CI failures at commit 933d887 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 9f5d448 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-metacoq (because base job at 9f5d448 failed)"
885770426,14692,herbelin,2021-07-23 16:53:37,SkySkimmer,@coqbot: merge now
885770531,14692,herbelin,2021-07-23 16:53:49,coqbot-app,@SkySkimmer: Please take care of the following overlays:\n\n14692-herbelin-master+UContext-include-names.sh
913762720,14848,ppedrot,2021-09-06 16:34:28,coqbot-app,"Hey, I have detected that there were CI failures at commit 60b4545 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4de7bc5 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
913791621,14848,ppedrot,2021-09-06 17:53:36,ppedrot,@coqbot ci minimize
913791634,14848,ppedrot,2021-09-06 17:53:40,coqbot-app,I have initiated minimization at commit 60b4545 for the suggested target ci-equations as requested.
913791737,14848,ppedrot,2021-09-06 17:54:01,ppedrot,Bench: https://gitlab.com/coq/coq/-/jobs/1566107508
913793276,14848,ppedrot,2021-09-06 17:59:18,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/equations/test-suite/fin.v (from ci-equations) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/equations/test-suite"" ""TestSuite"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/equations/theories"" ""Equations"" ""-Q"" ""/github/workspace"
913807813,14848,ppedrot,2021-09-06 18:41:07,ppedrot,"The Equation failure also seems to happen on master, so it's unrelated to this PR."
915346519,14848,ppedrot,2021-09-08 15:35:15,coqbot-app,"Hey, I have detected that there were CI failures at commit d5565fd without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit c6ab549 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following targets (which I do not suggest minimizing):\n\nci-fiat_crypto (because base job at c6ab549 failed)\nci-fiat_crypto_legacy (b"
915891938,14848,ppedrot,2021-09-09 08:51:45,ppedrot,┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │   mem faults    │\n│                             │                         │                                       │                                       
915892276,14848,ppedrot,2021-09-09 08:52:13,ppedrot,"Some single lines show a big speedup in various developments, but they're drowned in the noise."
917421865,14848,ppedrot,2021-09-11 15:03:33,ppedrot,"I've added some language tweaks, but left the hint-specific vocabulary in the doc."
930202656,14848,ppedrot,2021-09-29 13:57:39,SkySkimmer,"Not sure what's going on with quickchick, should be unrelated.\n@coqbot merge now"
930202688,14848,ppedrot,2021-09-29 13:57:42,coqbot-app,@SkySkimmer: Please take care of the following overlays:\n\n14848-ppedrot-btermdn-discriminate-evar.sh
930244509,14848,ppedrot,2021-09-29 14:43:00,ppedrot,FTR I can't reproduce the quickchick error locally.
763032652,13760,jfehrle,2021-01-19 18:23:37,CohenCyril,"Since 8.12 and 8.13 has not been extensively tested yet by mathcomp users, and that Search is one the most important features needed for mathcomp, I strongly advise not to remove the ssrsearch plugin for a few versions of Coq."
763041885,13760,jfehrle,2021-01-19 18:38:32,CohenCyril,I'm worried that the team @coq/ssreflect-maintainers  was not automatically added for reviews.
763048265,13760,jfehrle,2021-01-19 18:49:10,jfehrle,"Just so I understand: Why hasn't mathcomp ""extensively tested"" 8.12 or 8.13?  At 1 version/6 months, ""a couple versions"" seems excessive.  Is there an upper bound on that?  I'll leave it to others to consider your request; I'm just doing the code changes for removals."
763061713,13760,jfehrle,2021-01-19 19:06:50,CohenCyril,"Why hasn't mathcomp ""extensively tested"" 8.12 or 8.13? At 1 version/6 months,\n\nIt's easy to check .v still compile, it's way harder to check puerely interactive command have the desired behavior, especially a command as complex as Search. It's quite difficult to list all the use cases.\nWe could have had output checks, but the syntax and the output style changed, so it would have been a lot of work to update it.\nI guess one should do it anyway.\nFew people would update to 8.12 because of the bug t"
763117368,13760,jfehrle,2021-01-19 20:32:28,Zimmi48,"As I said in the issue, it would be easy to revert the removal if big issues arose during the release cycle. But it's also easy to leave this PR waiting for about five months and to only merge it after the v8.14 branching point. In which case, there would be 4 major releases and 2 full years with the deprecation before the removal."
763405133,13760,jfehrle,2021-01-20 07:43:51,gares,"I would wait too, 8.12 became a viable option only recently because of a few nasty bugs. I would postpone to 8.15."
763853463,13760,jfehrle,2021-01-20 18:43:13,jfehrle,"OK, let's do it in 8.15 then.  Perhaps one you gentlemen would create an 8.15 milestone and set it for this PR?"
763854707,13760,jfehrle,2021-01-20 18:45:19,Zimmi48,"Done. Note that it was as simple as typing ""8.15+beta1"" in the milestone field and clicking ""create""."
763857601,13760,jfehrle,2021-01-20 18:50:31,jfehrle,Thanks.  I thought there were some limitations on adding tags so I didn't even think to try that.
865012017,13760,jfehrle,2021-06-21 12:59:45,ppedrot,"Since we've branched this should be ready to merge, up to a rebase."
865047091,13760,jfehrle,2021-06-21 13:47:38,ejgallego,"Is this such a maintenance burden? There are still many users of this search command, so I dunno if its removal is warranted."
865204605,13760,jfehrle,2021-06-21 17:11:48,Zimmi48,"Not a burden AFAICT but the goal is just to go toward more uniformity of the language and blocking the removal defeats this purpose.\n\nThere are still many users of this search command\n\nIf you know them, can you ask them to open issues regarding why they didn't switch to the improved vanilla Search command yet?"
865222718,13760,jfehrle,2021-06-21 17:40:25,jfehrle,Updated.
865334771,13760,jfehrle,2021-06-21 20:50:05,coqbot-app,"Hey, I have detected that there were CI failures at commit bb3cd60 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ff73469 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
865350948,13760,jfehrle,2021-06-21 21:18:20,jfehrle,I think the failures are unrelated.
865366550,13760,jfehrle,2021-06-21 21:47:02,ejgallego,Let me cc some expert such as @strub to see what he thinks about @Zimmi48 questions
909713196,13760,jfehrle,2021-08-31 23:05:03,Alizter,@ejgallego @Zimmi48 Any updates with this?
912648662,13760,jfehrle,2021-09-03 16:04:15,Zimmi48,"I'm in favor of merging, but I am not a user of this and never was, so this is still awaiting feedback from actual users to confirm that they switched over to the new mechanism."
913983643,13760,jfehrle,2021-09-07 04:35:35,jfehrle,Let's discuss in the next Coq call.
917987512,13760,jfehrle,2021-09-13 09:04:19,SkySkimmer,In the coq call it was said\n\nreconsider after Math-Comp meeting if we remove in 8.15.\n\nWhen is the mathcomp meeting?
918108444,13760,jfehrle,2021-09-13 11:41:29,ejgallego,When is the mathcomp meeting?\n\nhttps://github.com/math-comp/math-comp/wiki#meetings says September 22nd
924725813,13760,jfehrle,2021-09-22 08:58:27,gares,"Given this is not super urgent, the MC meeting decided to also ask the MC community at large via Zulip (and give them a few weeks to speak up). At the meeting nobody had complaints about the new search (other than the syntax is different hence one needs to learn it...).\nSee also: https://coq.zulipchat.com/#narrow/stream/237664-math-comp-users/topic/Removal.20of.20ssrsearch"
924729283,13760,jfehrle,2021-09-22 09:02:58,ejgallego,"A brief summary of the discussion on the meeting:\n\n@ybertot : mostly satisfied with the new search [heavy user of Search]\n\nmaybe need a bit more of testing, still migration work in progress\nI like I can filter easily using + and -\n\n\n@CohenCyril:\n\nneed for better syntax, for example for module qualification\nnew search should be good, modulo some syntax improvements\n\n\nSometimes it is hard to remember all the options, for example head_concl: vs concl: [pointed by several people] , a bit of a learni"
965928410,13760,jfehrle,2021-11-11 02:13:57,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
966221604,13760,jfehrle,2021-11-11 11:20:28,ppedrot,"Decision was taken at the weekly call yesterday that this PR was ready to go. Since there is no point in waiting any further, I am assigning and merging this PR right now. (CI failures unrelated, by the way)."
966221830,13760,jfehrle,2021-11-11 11:20:48,ppedrot,@coqbot merge now
966240371,13760,jfehrle,2021-11-11 11:51:40,SkySkimmer,This broken the docgram lint
966240439,13760,jfehrle,2021-11-11 11:51:50,SkySkimmer,#15167
966240950,13760,jfehrle,2021-11-11 11:52:44,ppedrot,"Whoops, my brain filtered out this real failure of the CI..."
574393544,11390,herbelin,2020-01-14 21:58:17,herbelin,I added a warning for Context not in a section (but I'm not fully convinced; refining the refman to tell that Context outside a section is like the declarations made Local is maybe lighter).\nMaybe the incompatibilities are too important and it'll be preferable to do the fix in two steps... A first release with a warning telling how to fix. The next release w/o the warning??
574648039,11390,herbelin,2020-01-15 12:55:57,SkySkimmer,"Some people use context outside sections a lot, eg https://github.com/mit-pdos/perennial/blob/cdaa737e40d08c1c7c7d514db69a8f9b55814713/src/CSL/RefinementIdempotenceModule.v#L18-L52\nNot sure we want to warn for that. Maybe an off-by-default warning?"
575084343,11390,herbelin,2020-01-16 10:21:29,herbelin,"Some people use context outside sections a lot, eg https://github.com/mit-pdos/perennial/blob/cdaa737e40d08c1c7c7d514db69a8f9b55814713/src/CSL/RefinementIdempotenceModule.v#L18-L52\nNot sure we want to warn for that. Maybe an off-by-default warning?\n\nThanks. This confirms my view that we should rather change the doc. (But still keep a warning for Context {a : A} outside a section).\nTo deal with the compatibility, I'm now otherwise considering using the multiple sequence of implicit arguments feat"
585798110,11390,herbelin,2020-02-13 14:57:08,herbelin,"If this is meant to be a breaking change, the changelog entry should be much more explicit about this.\n\nI started investigating how to make it  (hopefully) a non-breaking change, by using multiple lists of implicit arguments. It is not so clear how to do in an elegant way though:\n\n\nFirst, this has to exclude constants with flexible conclusion as e.g. in type forall X, X -> X, since this kind of constant have an arity difficult to control syntactically.\n\n\nSecond, it would be too ad hoc to do it o"
627370422,11390,herbelin,2020-05-12 14:10:35,Zimmi48,"Dear PR author(s) and contributors, it seems to us this PR may need additional work beyond the 8.12 branching deadline on May 15th.\nWe are thus removing the 8.12+beta1 milestone; please retarget as appropriate, and also consider updating labels to reflect current status, moving the PR to draft status, etc.\nWe apologize in advance if we misunderstood the PR status."
627516129,11390,herbelin,2020-05-12 18:29:44,herbelin,"This PR implements/fixes what I think is the expected behavior for Context and, to me, there is no doubt that it is good. The problem was to preserve compatibility. User and developer feedback welcome about how to manage the incompatibilities (a flag, an upgrading script, manual updates, ...)?"
628128119,11390,herbelin,2020-05-13 17:13:58,Zimmi48,"I'm slightly worried about your ideas for making this a non-breaking change. I'd much rather advertise this as a breaking bug fix (like the one of Export) and implement the only correct behavior. Have you tried preparing overlays for the affected projects? Naively, I'd think that if the implicit binders were ignored, a backward-compatible fix is just to remove the implicit binders from these projects, wherever they create trouble. If backward-compatible overlays are easy to prepare, then the num"
729791336,11390,herbelin,2020-11-18 16:23:21,Zimmi48,"BTW, the change to the doc is completely independent of the rest of the PR and should have been its own PR (it would have been merged much faster)."
729795074,11390,herbelin,2020-11-18 16:29:21,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
729802816,11390,herbelin,2020-11-18 16:41:43,Zimmi48,The number of impacted projects seems so huge that I'm having a very hard time believing that there are really this many projects that used an implicit binder in the type of a variable declared in a Context command. It may instead be the effect of a buggy implementation...
729812014,11390,herbelin,2020-11-18 16:56:37,SkySkimmer,Why's the test suite broken?
729929653,11390,herbelin,2020-11-18 20:19:06,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
729993096,11390,herbelin,2020-11-18 22:19:14,herbelin,"Why's the test suite broken?\n\nBecause I mistakenly pushed an experimental and non finalized commit living on top of my local copy of the branch. 😞\nThe failures are otherwise not so many apparently: unimath, rewriter, cross-crypto, fiat-parsers."
730264630,11390,herbelin,2020-11-19 10:03:58,Zimmi48,"The failures are otherwise not so many apparently: unimath, rewriter, cross-crypto, fiat-parsers.\n\nThat's a reasonable number then. The next step is fixing these to determine how easy / difficult it was without a warning."
731719636,11390,herbelin,2020-11-22 09:16:09,herbelin,Do we try to have this fix in 8.13? Note that overlays are not needed: the two upstream PRs remaining to be merged will maintain compatibility.
731723987,11390,herbelin,2020-11-22 10:00:46,Zimmi48,"Backward-compatible overlays are good because they avoid issues of synchronization and spurious failures on master. However, they don't change the fact that backporting a breaking change still requires updating the pinned commits on the release branch. So it really depends whether @gares thinks it's worth the effort or not.\nBTW, how easy was it to fix the errors?"
731725437,11390,herbelin,2020-11-22 10:14:48,herbelin,"BTW, how easy was it to fix the errors?\n\nIn most of cases, just removing the { } was the intended things to do.\nIn other cases, the { } were expected and this was simplifying the code. So as to be backward-compatible, I added extra (eventually superflous) Local Arguments declarations to compensate the non-declaration of implicit arguments, and I removed some _ here and there.\nIn total, this was not a lot of changes. It took me about 2h though (doing other things in parallel) because the developm"
731736051,11390,herbelin,2020-11-22 11:52:53,Zimmi48,The changelog looks better. Note the comment of Jim on the documentation change.
731739889,11390,herbelin,2020-11-22 12:24:03,herbelin,Note the comment of Jim on the documentation change.\n\nI don't exactly what to do. Maybe is it useless to refer to Variable and Let (even more than Variables accept several declarations). Do we try to improve it now or will it change anyway later?
731760241,11390,herbelin,2020-11-22 14:55:47,Zimmi48,Maybe revert the documentation change since it's not viewed as a clear improvement.
731776426,11390,herbelin,2020-11-22 16:53:47,herbelin,"Maybe revert the documentation change since it's not viewed as a clear improvement.\n\nI agree. Actually, I'm not fully convinced that Context outside a section is worth to be recommended, compared e.g. to Parameters and Axioms."
731842348,11390,herbelin,2020-11-22 20:29:13,Zimmi48,"I agree. Actually, I'm not fuly convinced that Context outside a section is worth to be recommended, compared e.g. to Parameters and Axioms.\n\nBefore deciding whether to recommend it, I would like to clarify the status of #13068."
732137640,11390,herbelin,2020-11-23 12:40:29,gares,IMO this one goes to 8.14
732239130,11390,herbelin,2020-11-23 15:38:51,Zimmi48,@gares: Segfault in the base+async job. See https://gitlab.com/coq/coq/-/jobs/866272033
732241602,11390,herbelin,2020-11-23 15:43:03,Zimmi48,fiat-crypto is failing but it looks like this is because you didn't include the overlay for this project in your overlay file.
732254322,11390,herbelin,2020-11-23 16:03:01,gares,"@gares: Segfault in the base+async job. See https://gitlab.com/coq/coq/-/jobs/866272033\n\n\n[ 4015.845895] coqc[13309]: segfault at 55a3e3f5a1cc ip 000055a3e3f5a1cc sp 00007ffe29464240 error 14\n[ 4015.860215] Code: Bad RIP value.\n\nIt's not an OOM, but a true segfault because it's fetching an instruction at a wrong address.\nI've no idea why/how this can happen."
732410915,11390,herbelin,2020-11-23 20:34:08,jfehrle,"I've no idea why/how this can happen.\n\nIf rerunning the job clears the segfault, the error was probably caused by cosmic rays flipping bits in DRAM.  Some high-end servers have error correcting memory to address this.  They could fix single-bit errors and detect 2-bit errors in a single word of memory.  IIRC this required 5 extra bits for every 32 (16??) bits of memory.  Another alternative was to have a parity bit that could detect a single-bit error.  Both of these require additional hardware."
732428186,11390,herbelin,2020-11-23 21:11:06,gares,"Thanks for the support. Here it is believed that there is a correlation between ""async"" and these failures.\nAsync uses threads (in a very trivial ways), doubles the number of processes (hence memory usage), and marshals data between processes (the only unsafe feature of OCaml we use).\nI'd love cosmic rays to be the culprit, but I'm afraid it's too often reproducible to be that. Even if I've no clue what the true reason could be :-/\nThe async job tests what happens when you open CoqIDE (or an oth"
732770610,11390,herbelin,2020-11-24 09:27:13,Zimmi48,Note that the suggestion to revert the changes to the documentation is still not addressed.
732785135,11390,herbelin,2020-11-24 09:52:38,herbelin,Note that the suggestion to revert the changes to the documentation is still not addressed.\n\nI was waiting for more feedback...\nBut we can also take the decision only the two of us...
732787369,11390,herbelin,2020-11-24 09:56:29,Zimmi48,Feedback on the wording or feedback on whether to advertise Context outside sections or not?
732789699,11390,herbelin,2020-11-24 10:00:22,herbelin,Feedback on going in the direction of not documenting Context outside sections.
732792905,11390,herbelin,2020-11-24 10:05:28,Zimmi48,"Feedback on going in the direction of not documenting Context outside sections.\n\nOK, then it's a discussion that is worth having with more than two developers IMHO but definitely not in this orthogonal PR.\nAnd if we do decide to advertise Context beyond sections, then it's more than an additional paragraph that we need: it's a change of location of the Context documentation.\nLet's take this to the Coq Call."
732860635,11390,herbelin,2020-11-24 11:25:19,herbelin,I then removed the doc commit so as to split the different issues.
733105226,11390,herbelin,2020-11-24 16:52:27,Zimmi48,The version you pushed doesn't build anymore.
733162194,11390,herbelin,2020-11-24 18:39:14,herbelin,The version you pushed doesn't build anymore.\n\nWhat a relief! I was looking everywhere where my ongoing work on #13468 had gone and it was just accidentally committed to this branch!
866972160,11390,herbelin,2021-06-23 16:08:58,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
867018331,11390,herbelin,2021-06-23 17:17:26,coqbot-app,"Hey, I have detected that there were CI failures at commit 9629257 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit c750baa succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-fiat_crypto, ci-fiat_crypto_legacy.\nHowever, you may want to wait until the pipeline for the base commit (c750baa) finishes."
924526151,11390,herbelin,2021-09-22 02:14:59,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
924886752,11390,herbelin,2021-09-22 12:33:09,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
889064826,14718,herbelin,2021-07-29 12:11:25,ppedrot,"this is a hot fix\n\n@herbelin last time I had a look the code was completely nonsensical. I don't think your code restores soundness at all, it's just hiding the nonsense under the rug and is probably going to break some developments in fancy ways. I'd recommend kicking @ejgallego 's ass for the PR development to go faster rather than piling hacks over hacks in this very broken part of the code. Worst case that qualifies as a reasonable hotfix is to copy Loadpath into coqdep and remove it when th"
889142101,14718,herbelin,2021-07-29 13:25:28,herbelin,"Interestingly, the PR reveals that in the presence of overlapping between -R/-Q options, there are different kinds of overlapping. Let's consider the following layout:\n├── B1\n│   └── C\n│   |   └── E.v\n│   └── D\n│       └── E.v\n├── B2\n    └── E.v\n\nIn coqdep -R B1 B -R B2 B, there are ambiguities of different kinds: the resolution of E between B.C.E and B.D.E is determined by the order between C and D in the file system (knowing that the underlying hash table fortunately preserves the order of ent"
889212225,14718,herbelin,2021-07-29 14:51:14,herbelin,"the code was completely nonsensical. I don't think your code restores soundness at all...\n\nWhat kind of ""nonsensical"" do you have in mind? Barring corner cases, it seems these days to reasonably work? (I'm not saying that the code should not be shared with coqc, on the contrary, but it is relatively better now than say 10 years ago, at a time where coqc and coqdep quickly disagreed).\nMoreover, the warnings I added (as a compensation of the ones I removed) allow to reveal that e.g. hierarchy-buil"
889274828,14718,herbelin,2021-07-29 16:07:26,coqbot-app,"Hey, I have detected that there were CI failures at commit 6ba59ae without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 122470b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
890573393,14718,herbelin,2021-08-01 19:26:50,coqbot-app,"Hey, I have detected that there were CI failures at commit 9a26c01 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 661a835 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
901031833,14718,herbelin,2021-08-18 11:20:02,herbelin,Do not exit 1\n\nI added an exception UnableToOpenProjectFile but we still need to eventually do something when the exception is raised. I don't know what else to do than reporting a failure and exiting. Tell me if you have something else in mind.
901049021,14718,herbelin,2021-08-18 11:51:25,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
909194906,14718,herbelin,2021-08-31 12:33:40,ppedrot,"It looks like this PR is turning into a hodgepodge of random fixes that are loosely related and not even for the same binaries (coq_makefile vs. coqdep). Couldn't we get instead smaller PRs that would be merged faster and more easily?\nAlso, my main remark still stands: coqdep is just as broken as before and no amount of haphazard fiddling with the set of clashes is going to fix it. You need to completely rework the thing for it to be sound."
909208026,14718,herbelin,2021-08-31 12:52:17,herbelin,"Yes, it is a hodgepodge of not random but indeed heteroclitous fixes while observing various problems of coqdep, ocamllibdep and coq_makefile.\nSure, it can be split. Will do.\nAbout reworking the whole thing, it will not be by me, but I will not cry for the current coqdep if someone finds the courage to rewrite it."
909587299,14718,herbelin,2021-08-31 20:08:10,coqbot-app,"Hey, I have detected that there were CI failures at commit 8cbe86a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
909607697,14718,herbelin,2021-08-31 20:26:04,coqbot-app,"Hey, I have detected that there were CI failures at commit 8cbe86a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
909638166,14718,herbelin,2021-08-31 21:06:26,coqbot-app,"Hey, I have detected that there were CI failures at commit 8cbe86a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
912384903,14718,herbelin,2021-09-03 09:08:01,herbelin,"As another divergence between coqdep and coqc, in:\n├── B\n│   └── D.v  (* 1 *)\n│   └── C\n│       └── D.v (* 2 *)\n\ncoqc treats the files of B before the ones of B/C leading to give priority to instance 1 of D.v while coqdep treats files and subdirectories in a same pass, so depending on the internal order of the contents of B, treating 1 first if D.v comes before C in the order given by Sys.readdir for directory B and treating 2 first otherwise."
912400069,14718,herbelin,2021-09-03 09:31:23,herbelin,"I'd recommend kicking @ejgallego 's ass for the PR development to go faster rather than piling hacks over hacks in this very broken part of the code. Worst case that qualifies as a reasonable hotfix is to copy Loadpath into coqdep and remove it when the factoring actually happens.\n\n@ejgallego, @ppedrot: how would you rewrite coqdep? In addition to preserving order, I believe efficiency is important, no? Would dune comes with support for what we need? Otherwise, would you typically have in mind a"
912407872,14718,herbelin,2021-09-03 09:43:45,herbelin,"Another parameter to take into account about ordering:\n├── B\n│   └── E.v (* 1 *)\n│   └── C\n│       └── E.v (* 2 *)\n│       └── D\n│           └── E.v (* 3 *)\n\ndo we go upwards or downwards? coqc goes in a mixed order 1, 3, 2 and, probably, we should keep this order for compatibility. Or we can also adopt the more intuitive order 1, 2, 3? The reason for the mixed order is that the top directory is treated separately. So with more nestings, it would be 1, n+1, n, ..., 2."
912541039,14718,herbelin,2021-09-03 13:29:05,ejgallego,"@herbelin indeed we likely need to tweak the current semantics a bit, but we need to put all the loadpath code in one place first."
912541411,14718,herbelin,2021-09-03 13:29:37,ejgallego,"@herbelin thanks for all the careful and detailed analysis here, it is indeed super useful."
912597594,14718,herbelin,2021-09-03 14:51:12,herbelin,"@herbelin indeed we likely need to tweak the current semantics a bit, but we need to put all the loadpath code in one place first.\n\nOne thing about sharing the loadpath code is that coqc works in a lazy way in the sense that it builds first the loadpath structure without looking at the files, then, for each Require, looks (dynamically) in the different possible directories. I don't know how much this is really useful in practice, but, for instance, you can compile files after having started the "
913109238,14718,herbelin,2021-09-05 08:26:30,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
913118637,14718,herbelin,2021-09-05 09:40:17,herbelin,"I gave in to and implemented a direct map from pairs (from,suffix) with a hash-table. Execution times seem equivalent (that is, most of the time is spent in building the -R coqlibpath Coq map!).\nThis allows to be independent of the order of Hashtbl.fold and to fix the second part of #14539. This also somehow answers a comment of @ppedrot in 31c7542 (""We should rather use some trie-based data structure, but I'll leave this for a future commit.""). [Note that this does not prevent at all a cleanup "
913134938,14718,herbelin,2021-09-05 11:23:24,ppedrot,"I then don't see what alternatives there are than forbidding such Requires whose resolution rely on the filesystem order??\n\nWhy not normalize the output of readdir? The OCaml doc explicitly states that\n\nThere is no guarantee that the name strings in the resulting array will appear in any specific order; they are not, in particular, guaranteed to appear in alphabetical order."
913156234,14718,herbelin,2021-09-05 13:36:23,herbelin,"Why not normalize the output of readdir?\n\nYou mean using byte order? Yes, that's a possibility also.\nThere might be utf8 issues though when working across different platforms. A same unicode file can be encoded in different utf8 ways depending on file systems (e.g. on MacOS X, accented letters are encoded in filenames with combining accents)."
913189076,14718,herbelin,2021-09-05 16:52:04,ppedrot,"You mean using byte order?\n\nNot necessarily with byte order. As you mention, we could also perform Unicode normalization. That said, it's not clear that we wouldn't already have other similar issues with cross-platform binary vo files in coqc, since we handle identifiers as mere binary strings."
913465123,14718,herbelin,2021-09-06 08:46:03,herbelin,"You mean using byte order?\n\nNot necessarily with byte order. As you mention, we could also perform Unicode normalization.\n\nYou mean Unicode normalization + Stdlib.compare? Or collation? The first is maybe easier according to uucp's page.\n\nThat said, it's not clear that we wouldn't already have other similar issues with cross-platform binary vo files in coqc, since we handle identifiers as mere binary strings.\n\nI believe we embed strings the form they were entered, even the few filenames stored i"
913596353,14718,herbelin,2021-09-06 12:07:05,ejgallego,"Sorry folks I am not following the discussion closely, but something I am positive based on experience with large builds is that all directory traversal has to be lazy if possible."
913600992,14718,herbelin,2021-09-06 12:13:42,herbelin,"Sorry folks I am not following the discussion closely, but something I am positive based on experience with large builds is that all directory traversal has to be lazy if possible.\n\nAs a matter of fact, most of the time spent in a call to coqdep is to reconstruct the map for the standard library. It should indeed be done lazily or maybe even cached somewhere."
917666327,14718,herbelin,2021-09-12 16:21:24,herbelin,"As far as I can judge, the error in perennial was ""real"": coqdep and coqc disagreed on how to manage the loadpath but since, thanks to coqdep, only one of the two conflicting files was compiled, the vo file that coqc would have taken by default was absent and the file mentioned by coqdep was taken.\nTold in another way, coqdep may impact the choices made by coqc by imposing an order of compilation to coqc.\nSo, it is not clear that coqdep should necessarily comply with coqc. It can be coqc which a"
936610024,14718,herbelin,2021-10-06 16:24:43,Alizter,"@herbelin In the review window you can ""add to batch"" in order to commit all suggestions at once. Then you can sort the commits out locally."
936986825,14718,herbelin,2021-10-06 19:39:45,Alizter,"LGTM, I might do some more cleanup after this PR but that seems to be orthogonal to this."
936990210,14718,herbelin,2021-10-06 19:41:40,Alizter,I will merge tomorrow if @ppedrot and the CI is happy with it
937021208,14718,herbelin,2021-10-06 19:59:14,herbelin,I will merge tomorrow if @ppedrot and the CI is happy with it\n\nNote that the test-suite will fail again on the tests sensitive to the file-system order.
937314793,14718,herbelin,2021-10-06 23:11:58,ejgallego,"This may be performance sensitive, so a quick check with a large coqdep invocation could be helpful."
937316743,14718,herbelin,2021-10-06 23:16:16,Alizter,How can we time coqdep for the stdlib?
937480132,14718,herbelin,2021-10-07 06:10:15,SkySkimmer,https://gitlab.com/coq/coq/-/jobs/1656073139\ncoqdep should be a significant part of fiat-crypto
937532222,14718,herbelin,2021-10-07 07:34:39,herbelin,"Note that for From, it uses now a direct access in a hash table while before it was looking in a list. So, I suspect that performance can only be better in general.\nNote also that performance-wise, a lot of the time is spent to reconstruct again and again the file map for the stdlib, so a cache would help here if someone knows how to build one (for coqdep on a single file, rebuilding the stdlib map is close to 100% of the time)."
938046432,14718,herbelin,2021-10-07 18:25:42,ejgallego,"Something such as time coqdep $opts $(find -name *.v dirs) , you can see the invocation on the stdlib for example in the makefile. I can do it myself provided some time."
938057148,14718,herbelin,2021-10-07 18:41:45,SkySkimmer,Bench indicates no issue
938080527,14718,herbelin,2021-10-07 19:13:36,herbelin,"Bench indicates no issue\n\nAren't times around 0 on the average in general? (Anyway, I don't see a reason why coquelicot would be slower because of coqdep.)"
938085540,14718,herbelin,2021-10-07 19:20:38,ejgallego,Bench indicates no issue\n\nMy own benchmarking indicates same time on both master and this PR [with 25k .v files]
938537417,14718,herbelin,2021-10-08 10:38:30,herbelin,"I finally implemented a variant of what was discussed at Zulip:\n\nIf some files exactly match the required logical name, they are selected. If there is a From clause, this uniquely determines a file. If there is no From clause, the file corresponding to the most recently given -R or -Q is selected.\nIf no files exactly match the required logical name, the ones corresponding to the most recently given -R or -Q (or to the From prefix if any) are selected. If there are several of them (in case of -R)"
938552938,14718,herbelin,2021-10-08 11:05:45,Alizter,"I'm going to have a go at changing the reliance on exceptions like I suggested.\nOn closer inspection (in coqdep_common.ml), it seems to be more trouble than it's worth. From what I have been reading, there isn't really a performance gain when it comes to Hashtbl.find vs Hashtbl.find_opt since they are both doing some expensive things anyway. The latter simply lets the type checker encourage you to handle exceptions."
943316050,14718,herbelin,2021-10-14 12:38:03,Alizter,"@herbelin Can you have a look at Jim's review? I want to merge this soon, but we should finish polishing up the doc."
943532352,14718,herbelin,2021-10-14 16:43:13,herbelin,"I'm now also leaning in the direction to fail if a Require is ambiguous. But should it fail as soon as coqdep or only in coqc/coqtop. I would lean to continue to warn in coqdep and fail in coqc but that's disputable.\nI also found yet a small issue to address: The order in which subdirectories of user-contrib are added to the loadpath is dependent on the file system. That is, if there are Foo1 and Foo2 in user-contrib, and both contains a file Bar, Require Bar will be system dependent. One answer"
943534392,14718,herbelin,2021-10-14 16:45:53,herbelin,"@jfehrle\n\nHope you will improve the wording in modules.rst.\nIMHO much of that section (not just your changes) deserves to be rewritten. Also, I would consider other improvements to the described functionality--though not in this PR.\n\nYes, this was my feeling too. The section deserves to be rewritten.\nBefore, there are still issues to solve. See last comment."
943535306,14718,herbelin,2021-10-14 16:47:08,herbelin,"@herbelin Can you have a look at Jim's review? I want to merge this soon, but we should finish polishing up the doc.\n\nI answered to Jim.\nNote that I added in the meantime a Changed section next to the Fixed section in the changelog."
943578876,14718,herbelin,2021-10-14 17:42:39,SkySkimmer,"I also found yet a small issue to address: The order in which subdirectories of user-contrib are added to the loadpath is dependent on the file system. That is, if there are Foo1 and Foo2 in user-contrib, and both contains a file Bar, Require Bar will be system dependent. One answer would be to force to use From whenever we require a file from an installed package? Is it acceptable?\n\nI thought user-contrib is like -Q so we can't do Require Bar?"
943621906,14718,herbelin,2021-10-14 18:40:37,jfehrle,"I'm now also leaning in the direction to fail if a Require is ambiguous.\n\nA warning (and ignoring one file) would be more user-friendly.  The conflict may be unimportant.  The message should be specific about the conflicting files.  If there are several conflicts, they should all be reported.  I expect coqc exits after reporting the first error, which would be less friendly.\n\nThe order in which subdirectories of user-contrib are added to the loadpath is dependent on the file system.\n\nHow about s"
943661599,14718,herbelin,2021-10-14 19:30:25,herbelin,"I also found yet a small issue to address: The order in which subdirectories of user-contrib are added to the loadpath is dependent on the file system. That is, if there are Foo1 and Foo2 in user-contrib, and both contains a file Bar, Require Bar will be system dependent. One answer would be to force to use From whenever we require a file from an installed package? Is it acceptable?\n\nI thought user-contrib is like -Q so we can't do Require Bar?\n\nOption -Q does not require From, if this is what y"
943667257,14718,herbelin,2021-10-14 19:38:18,herbelin,"I'm now also leaning in the direction to fail if a Require is ambiguous.\n\nA warning (and ignoring one file) would be more user-friendly.\n\nYou mean as soon as coqdep?\n\nThe conflict may be unimportant. The message should be specific about the conflicting files.\n\nYes, and the code for reporting the conflict is already done (with a warning).\n\nIf there are several conflicts, they should all be reported. I expect coqc exits after reporting the first error, which would be less friendly.\n\nThis is one of"
943716415,14718,herbelin,2021-10-14 20:43:24,SkySkimmer,"Option -Q does not require From, if this is what you mean.\n\nI mean for instance I cannot do Require Ltac2 I need to do Require Ltac2.Ltac2 or From Ltac2 Require Ltac2, so even if someone installs user-contrib/foo/Ltac2.vo there is no confusion."
905705261,14808,ppedrot,2021-08-25 16:50:26,ppedrot,Bench: https://gitlab.com/coq/coq/-/jobs/1534424055
906357456,14808,ppedrot,2021-08-26 12:18:48,coqbot-app,"Hey, I have detected that there were CI failures at commit 8206fa4 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 18fe7e8 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
906398571,14808,ppedrot,2021-08-26 13:08:31,ppedrot,┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │   mem faults    │\n│                             │                         │                                       │                                       
906399036,14808,ppedrot,2021-08-26 13:09:12,ppedrot,"I will split this PR in two parts, the first one being a cleanup and the second one being the change that introduces the speed-up."
907386958,14808,ppedrot,2021-08-27 18:18:00,coqbot-app,"Hey, I have detected that there were CI failures at commit dc048ca without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4433e3 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
913664886,14808,ppedrot,2021-09-06 13:49:00,ppedrot,This is now ready.
914274490,14808,ppedrot,2021-09-07 12:44:30,SkySkimmer,@coqbot merge now
840075287,14314,gares,2021-05-12 20:27:59,robbertkrebbers,"Awesome, thanks for fixing this bug!\nThis means we can finally get rid of Global Set SsrOldRewriteGoalsOrder in Iris :)"
840082726,14314,gares,2021-05-12 20:41:16,gares,This PR could use some help for the overlays / test suite updates given my limited time in the upcoming weeks.\nCC @coq/ssreflect-maintainers @SkySkimmer @erikmd
840100583,14314,gares,2021-05-12 21:13:07,ejgallego,"This PR could use some help for the overlays / test suite updates given my limited time in the upcoming weeks.\n\n@gares wouln't the overlays in this case not be backwards compatible?\nIf so, a flag may be required, I think."
840114277,14314,gares,2021-05-12 21:39:28,gares,"The situation is not that bad, the test suite has one failure related to ssr under, to be adapted.\nThe fix is about adding ; last first where things break, so it won't be backward compatible. I would avoid another flag, we have to see the breakage extent for metacoq and perennial..."
840140104,14314,gares,2021-05-12 22:41:17,ejgallego,"The situation is not that bad, the test suite has one failure related to ssr under, to be adapted.\nThe fix is about adding ; last first where things break, so it won't be backward compatible. I would avoid another flag, we have to see the breakage extent for metacoq and perennial...\n\nWell there are only 2 developments, so indeed I think we can survive it, but it will take a bit more work as I think for this case we must use some hack to make the code work in 8.13 too for a while.\nBut indeed I'm "
840140457,14314,gares,2021-05-12 22:42:13,ejgallego,"Of course I'm assuming here than the cost of having the flag for one release is small enough, I understand so but not expert in this part of the code."
851479045,14314,gares,2021-05-31 13:06:12,SkySkimmer,I don't understand the test suite error enough to help.
853132980,14314,gares,2021-06-02 15:38:24,silene,"This requires various overlays (potentially not backward compatible), so tentatively postponing to 8.15."
884249282,14314,gares,2021-07-21 14:47:14,ppedrot,@gares are you slightly more available now or may I start writing the overlays?
884328985,14314,gares,2021-07-21 16:35:37,gares,Please go ahead
943277715,14314,gares,2021-10-14 11:43:49,coqbot-app,"Hey, I have detected that there were CI failures at commit 2046ad3 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 85c065e succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
946087343,14314,gares,2021-10-18 19:18:51,gares,ping @CohenCyril @maximedenes
946531372,14314,gares,2021-10-19 09:29:18,gares,"To be fair, in a previous message @ejgallego was asking for a backward compat flag which I did not implement. Impacted projects have to use rewrite with both strict and setoid equalities, otherwise the OldSSRRewriteOrder flag already does what he asks. I'm not very keen in adding a OldSSRRewriteOrderOnlyForSetoids flag, but it can surely be done.\nAccording to our CI only one development was impacted, Metacoq, and in a very minor way. I did write a patch which should work in both Coq versions, bu"
947509926,14314,gares,2021-10-20 09:52:39,ppedrot,"By the way, why isn't the OldSSRRewriteOrder flag deprecated?"
947514093,14314,gares,2021-10-20 09:58:25,gares,"We still use it in MC, porting is long and nasty to keep it working with 2 versions of Coq.\nIt would be doable if we had some sort of #ifdef for vernaculars such as Set (like #[only] and #[skip] for Elpi Accumulate)."
947641051,14314,gares,2021-10-20 12:59:16,gares,@CohenCyril would you assign?
947642290,14314,gares,2021-10-20 13:00:44,gares,"The overlay has now merge conflicts, I must update it before we can actually merge :-/"
947704880,14314,gares,2021-10-20 14:09:19,gares,"done, CI should re-run now."
949495847,14314,gares,2021-10-22 10:29:31,ppedrot,@gares can you remove the overlay commit now that it has been merged upstream?
949565295,14314,gares,2021-10-22 12:01:56,gares,done
951161290,14314,gares,2021-10-25 17:50:25,ppedrot,@coqbot merge now
951227931,14314,gares,2021-10-25 19:13:22,robbertkrebbers,Many thanks @gares for fixing this long-standing bug!! 🎉
909604998,14820,herbelin,2021-08-31 20:23:18,herbelin,The two lines of lightbulb.v mentioned in @ppedrot's #11711 comment went back from 10.0s to 3.6s and from 23.9s to 10.6s as expected.
909634961,14820,herbelin,2021-08-31 21:02:23,ppedrot,"I had a deeper look at those files, and even if we're back to the old time profile, we're doing very weird things in the trace. It looks like apply keeps regenerating clenvs with a growing prefix on these examples, and most of the time is passed substituting fresh metas again and again."
909729874,14820,herbelin,2021-08-31 23:34:46,coqbot-app,"Hey, I have detected that there were CI failures at commit 564bf87 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910035562,14820,herbelin,2021-09-01 07:56:55,herbelin,"I had a deeper look at those files, and even if we're back to the old time profile, we're doing very weird things in the trace. It looks like apply keeps regenerating clenvs with a growing prefix on these examples, and most of the time is passed substituting fresh metas again and again.\n\nCould it be descend_in_conjunctions. Does it change something with simple apply?"
910149098,14820,herbelin,2021-09-01 10:25:15,ppedrot,"Could it be descend_in_conjunctions\n\nNo, the reason is in the algorithm of try_red_apply. When applying try_red_product we do not keep the product prefix across recursive calls, and this reduction function is not idempotent so it can be called many times recursively on a growing list of products."
753973583,13664,herbelin,2021-01-04 13:26:15,proux01,"@herbelin does that mean that literals such as ""0"" or ""1"" shouldn't be used as non-number notations? That lind of use seems not that uncommon, for instance in mathcomp. Sure, a number notation can always be used but that's slightly more heavy to setup. Printing of number notations / interaction with printing of regular notations is certainly still buggy but I wonder whether this is the best fix?"
813046243,13664,herbelin,2021-04-04 14:51:50,herbelin,"@herbelin does that mean that literals such as ""0"" or ""1"" shouldn't be used as non-number notations? That kind of use seems not that uncommon, for instance in mathcomp. Sure, a number notation can always be used but that's slightly more heavy to setup. Printing of number notations / interaction with printing of regular notations is certainly still buggy but I wonder whether this is the best fix?\n\nSorry for so late answer. 0or 1 can still be used as notations for arbitrary terms. The only change "
853316166,13664,herbelin,2021-06-02 19:12:09,silene,What is the status with respect to #14071? Is it still needed or is #14429 sufficient as a dependency?
853324257,13664,herbelin,2021-06-02 19:25:25,herbelin,It still depend on #14071 (but not on #14429).
855803983,13664,herbelin,2021-06-07 10:19:36,proux01,"Given that #14071 got postponed to 8.15, I guess this should be to. I'll try to take soon a closer look though."
868460315,13664,herbelin,2021-06-25 12:20:14,proux01,"@herbelin could you please rebase now that dependency PRs are merged, in order to ease review?"
869040721,13664,herbelin,2021-06-26 18:07:23,herbelin,"@herbelin could you please rebase now that dependency PRs are merged, in order to ease review?\n\nI rebased but also made the PR evolved. First, it has a new dependency #14562 (present here in the 2 first commits).\nSecond, it addresses 2 new cases of bad interactions in the presence of notations with numbers."
890632548,13664,herbelin,2021-08-02 01:00:22,coqbot-app,"Hey, I have detected that there were CI failures at commit 7e12ccd without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 53fb47d succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-bedrock2."
890648918,13664,herbelin,2021-08-02 01:41:54,coqbot-app,"Hey, I have detected that there were CI failures at commit 7e12ccd without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 53fb47d succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-bedrock2."
891929843,13664,herbelin,2021-08-03 15:12:39,coqbot-app,"Hey, I have detected that there were CI failures at commit 1ca6daf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a41c99a succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-coq_tools (because base job at a41c99a failed)"
892026283,13664,herbelin,2021-08-03 17:25:16,coqbot-app,"Hey, I have detected that there were CI failures at commit 1ca6daf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a41c99a succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following targets (which I do not suggest minimizing):\n\nci-coq_tools (because base job at a41c99a failed)\nci-perennial (because base"
907612360,13664,herbelin,2021-08-28 11:21:49,proux01,@coqbot merge now
907612363,13664,herbelin,2021-08-28 11:21:50,coqbot-app,@proux01: You can't merge this PR because you're not a member of the @coq/pushers team.
907783983,13664,herbelin,2021-08-29 12:30:41,herbelin,"@proux01: you probably have to join the @coq/extensible-syntax-maintainers (cc @Zimmi48). Maybe could we also create a group of maintainers on numbers in general (number notations, int, float, ...)."
910254724,13664,herbelin,2021-09-01 12:53:21,ppedrot,"Let me merge in the meantime, there is no point in leaving this open."
910255523,13664,herbelin,2021-09-01 12:54:32,proux01,Thanks!
910294561,13664,herbelin,2021-09-01 13:38:11,Zimmi48,"Sorry for not responding earlier.\n@proux01 I could add you right now to the @coq/extensible-syntax-maintainers team or wait until the @coq/number-maintainers team is created. To do the latter, please open a PR updating https://github.com/coq/coq/blob/master/.github/CODEOWNERS with the list of files the team should own (note that order matters in this file). @JasonGross might also be interested in being a member of this new team.\nAlso, let me know if there are any other maintainer teams (see the "
812769978,14059,ejgallego,2021-04-03 01:06:42,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
827798799,14059,ejgallego,2021-04-27 17:55:02,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
852926799,14059,ejgallego,2021-06-02 10:52:28,ejgallego,"There is still a bit of work to do, in particular for cleaning up envars stuff, but we can try to get this in already I think."
853321189,14059,ejgallego,2021-06-02 19:20:22,ejgallego,"@silene I broke this on my last push, but was passing CI since a few weeks; let me fix it.\nThis is the only PR I'm involved with I'd like to get into 8.14, as having a central place for this logic will greatly help if we hit some problem w.r.t. the package split / build system overhaul in 8.14 , which we likely will."
853331713,14059,ejgallego,2021-06-02 19:38:09,ejgallego,"Should be fixed now, was a silly typo."
855758670,14059,ejgallego,2021-06-07 09:14:21,ppedrot,@ejgallego shouldn't this be demilestoned from 8.14?
856773379,14059,ejgallego,2021-06-08 13:35:13,silene,"This is too massive a change, so postponing."
880046557,14059,ejgallego,2021-07-14 16:43:41,Alizter,"The refman cannot be built since coqdoc complains about not having the coqlib option. Even when supplied in the doc/dune file, it complains that it could not find the .sty files. I'm not sure if this is because of the new directory code for coqdoc or the coqlib option being supplied incorrectly."
880128134,14059,ejgallego,2021-07-14 18:48:18,ejgallego,"The refman cannot be built since coqdoc complains about not having the coqlib option. Even when supplied in the doc/dune file, it complains that it could not find the .sty files. I'm not sure if this is because of the new directory code for coqdoc or the coqlib option being supplied incorrectly.\n\nThanks a lot @Alizter , this is very helpful"
880136018,14059,ejgallego,2021-07-14 19:02:05,Alizter,I should mention that previously we didn't need to supply coqlib because coqdoc could guess the directory. It looks like that code was removed however.
881414731,14059,ejgallego,2021-07-16 12:35:16,ejgallego,"I should mention that previously we didn't need to supply coqlib because coqdoc could guess the directory. It looks like that code was removed however.\n\nIt should still do it, I will look into it; also, I think we want to add some kind of COQENV_DEBUG env variable, so we can just set it and get a debug output for the env resolution."
894134531,14059,ejgallego,2021-08-06 09:31:46,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
900667271,14059,ejgallego,2021-08-17 22:15:08,Alizter,There are some additions to the test-suite in #14718 that are probably relevant here.
915063582,14059,ejgallego,2021-09-08 09:15:22,ejgallego,"@SkySkimmer the problem you mentioned should be fixed.\nThis surely needs more refinement, but maybe we should go ahead now and keep working on other PRs?"
915064435,14059,ejgallego,2021-09-08 09:16:33,ejgallego,"In particular, a todo list is:\n\nforce Env is not doubly-initialized\nget rid of set_coqlib and instead pass it as an argument to init\nmove the loadpath code to boot [that for sure should be done in a different PR]"
915107617,14059,ejgallego,2021-09-08 10:14:29,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
915140940,14059,ejgallego,2021-09-08 11:08:27,coqbot-app,"Hey, I have detected that there were CI failures at commit 2aa652a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit c6ab549 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following targets (which I do not suggest minimizing):\n\nci-fiat_crypto (because base job at c6ab549 failed)\nci-fiat_crypto_legacy (b"
915144453,14059,ejgallego,2021-09-08 11:13:44,coqbot-app,"Hey, I have detected that there were CI failures at commit 2aa652a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit c6ab549 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following targets (which I do not suggest minimizing):\n\nci-fiat_crypto (because base job at c6ab549 failed)\nci-fiat_crypto_legacy (b"
915156267,14059,ejgallego,2021-09-08 11:32:59,coqbot-app,"Hey, I have detected that there were CI failures at commit 2aa652a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit c6ab549 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following targets (which I do not suggest minimizing):\n\nci-fiat_crypto (because base job at c6ab549 failed)\nci-fiat_crypto_legacy (b"
915270643,14059,ejgallego,2021-09-08 14:06:02,coqbot-app,"Hey, I have detected that there were CI failures at commit f888ec6 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit c6ab549 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following targets (which I do not suggest minimizing):\n\nci-fiat_crypto (because base job at c6ab549 failed)\nci-fiat_crypto_legacy (b"
916223364,14059,ejgallego,2021-09-09 15:51:48,ejgallego,@SkySkimmer note my comment above [and the removal of the needs:progress tag] ; I'm unsure if it is easy to see with the GH interface hiding stuff.
916997771,14059,ejgallego,2021-09-10 15:36:50,SkySkimmer,@coqbot merge now
916997788,14059,ejgallego,2021-09-10 15:36:52,coqbot-app,@SkySkimmer: Please take care of the following overlays:\n\n14059-ejgallego-coq+path_boot.sh
917445683,14059,ejgallego,2021-09-11 17:45:19,Zimmi48,"@ejgallego it seems like you forgot to add code owners for this new library, didn't you?"
918113761,14059,ejgallego,2021-09-13 11:50:06,ejgallego,"@ejgallego it seems like you forgot to add code owners for this new library, didn't you?\n\nIndeed, thanks for pointing that out."
890405452,14732,ppedrot,2021-07-31 21:23:46,ppedrot,Bench: https://gitlab.com/coq/coq/-/jobs/1467678974
890548108,14732,ppedrot,2021-08-01 16:18:39,coqbot-app,"Hey, I have detected that there were CI failures at commit 4ed0613 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 661a835 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-equations, ci-hott, ci-iris, ci-perennial, ci-quickchick."
890584117,14732,ppedrot,2021-08-01 20:46:25,ppedrot,Bench: https://gitlab.com/coq/coq/-/jobs/1468503386
892007960,14732,ppedrot,2021-08-03 16:57:33,coqbot-app,"Hey, I have detected that there were CI failures at commit 61529cf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a41c99a succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following targets (which I do not suggest minimizing):\n\nci-coq_tools (because base job at a41c99a failed)\nci-perennial (because base"
894451358,14732,ppedrot,2021-08-06 18:46:16,ppedrot,See #14722 (comment) for a complete bench with the variable matching change.
894474398,14732,ppedrot,2021-08-06 19:29:46,Janno,"This is great! Could you include the following test case (that should now pass):\nFrom Coq Require Import List. Import ListNotations.\nMonomorphic Universe i o.\nClass FMap (M : Type@{i} -> Type@{o}) :=\n  fmap : forall {A:Type@{i}} {B:Type@{o}}, (A -> B) -> M A -> M B.\nGlobal Arguments fmap {_ _ _ _} _ !_ / : assert.\nMonomorphic Instance fmap_list@{a b} : FMap (fun T => list T) :=\n  fun (A : Type@{a}) (B : Type@{b}) f => @map A B f.\nFail Fail Monomorphic Constraint i < list.u0.\nFail Fail Example in"
894503413,14732,ppedrot,2021-08-06 20:31:17,ppedrot,"Did anybody know that introducing universe constraints can mess up Instances by eta-expanding them automatically?\n\nIsn't this some funny side-effect of unification? Since some terms are ill-typed when η-contracted and unification can η-expand, this might explain this..."
894504847,14732,ppedrot,2021-08-06 20:34:25,SkySkimmer,It's coercion\nUniverses a b.\nConstraint b < a.\nAxiom f : Type@{a} -> Prop.\nSet Printing Universes.\nCheck f : Type@{b} -> Prop.\n(* (fun x : Type@{b} => f x) : Type@{b} -> Prop *)
894507572,14732,ppedrot,2021-08-06 20:40:47,ppedrot,"@Janno just in case, do you have a full self-contained test for your issue that does not require the list module and refers to some fragile global universe? I can probably simplify it myself but am otherwise too lazy to do this."
894629688,14732,ppedrot,2021-08-07 09:19:11,Janno,"@Janno just in case, do you have a full self-contained test for your issue that does not require the list module and refers to some fragile global universe? I can probably simplify it myself but am otherwise too lazy to do this.\n\nI would love to help but I don't think I know how to write a small test case that fulfills your requirements. In fact, trying to reconstruct the list example with definitions instead of Constraint shows once again that I have no clue what is really going on here."
894652113,14732,ppedrot,2021-08-07 13:01:45,ppedrot,"Without the require, I get a weird error\nThe term ""id"" has type ""ID"" while it is expected to have type\n ""Type -> ?B"" (cannot instantiate ""?B"" because ""A"" is not in its scope).\n\nin both the new code and the old one, which looks like a bizarre unification issue. I have no idea why this is solved by the require, but I imagine it is due to backtrack caused by a universe error somewhere. Not sure it is very wise to add a test nobody understands :/"
894658983,14732,ppedrot,2021-08-07 14:01:58,ppedrot,"In any case, I believe this is ready and needs an assignee."
895952105,14732,ppedrot,2021-08-10 11:29:43,SkySkimmer,@coqbot: merge now
850459055,14402,ppedrot,2021-05-28 14:29:19,coqbot-app,"Hey, I have detected that there were CI failures at commit f4bcc35 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit d5cebc8 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools.\nHowever, you may want to wait until the pipeline for the base commit (d5cebc8) finishes."
851015436,14402,ppedrot,2021-05-30 15:13:54,ppedrot,This needs an assignee. @SkySkimmer ?
851397638,14402,ppedrot,2021-05-31 10:37:53,SkySkimmer,@coqbot: merge now
951286121,14402,ppedrot,2021-10-25 20:22:18,LasseBlaauwbroek,It appears that this PR has fixed #14116. Can anyone shed any light on why that might be?
951318385,14402,ppedrot,2021-10-25 20:48:49,herbelin,"The tactic rewrite dynamically creates a rewriting scheme when what it needs is not defined (e.g. for dependent rewriting), so it is a related. @ppedrot can probably explain how exactly the PR fixes #14116."
951608177,14402,ppedrot,2021-10-26 06:39:06,ppedrot,"The previous code defined global scheme constants when rewriting. This adds new global monomorphic constraints. But they were abstracted away via the so-called side-effect mechanism (i.e. abstract-like tactics). So they were never used, but because of #13324 they were lingering around. Now we're more careful and don't generate side-effects, but directly inline the proofs. So no more global definitions, and no more universes."
951719518,14402,ppedrot,2021-10-26 08:46:10,LasseBlaauwbroek,"Thanks guys. I was hoping I could backport this PR to older versions of Coq, but this does not seem easy since it relies on other PR's. Do you see any easy/hacky way in which I could backport this?"
951873843,14402,ppedrot,2021-10-26 12:08:58,ppedrot,"Backporting is going to be very hard, indeed it depends on a lot of previous cleanups. It's probably easier to bump your Coq version dependency 🤷"
951875796,14402,ppedrot,2021-10-26 12:11:27,LasseBlaauwbroek,Oke thanks. I'm not even going to attempt then. Unfortunately I cannot bump because I rely on lots of older Coq projects that I need to compile...
951880986,14402,ppedrot,2021-10-26 12:18:05,Alizter,"@LasseBlaauwbroek Out of interest, which older projects are you relying on?"
951881391,14402,ppedrot,2021-10-26 12:18:34,LasseBlaauwbroek,All of them :-) I'm running benchmarks for https://coq-tactician.github.io/
952168907,14402,ppedrot,2021-10-26 17:46:03,LasseBlaauwbroek,"As a workaround, I'm looking at\n\n  \n    \n      coq/tactics/equality.mli\n    \n    \n         Line 22\n      in\n      12cb782\n    \n    \n    \n    \n\n        \n          \n           type dep_proof_flag = bool (* true = support rewriting dependent proofs *) \n        \n    \n  \n\n\nIf I set that, will it temporarily disable all dynamic creation of schemes in rewrite and subst and friends?"
952171567,14402,ppedrot,2021-10-26 17:49:49,ppedrot,"This is a type, not a boolean. And it's not about dynamic schemes, it's about dependent elimination, i.e. whether the equality you're rewriting with can appear in the goal."
952173607,14402,ppedrot,2021-10-26 17:52:35,LasseBlaauwbroek,"This is a type, not a boolean.\n\nYeah sorry, I meant if I set that during calls to the functions that accept it.\n\nAnd it's not about dynamic schemes, it's about dependent elimination, i.e. whether the equality you're rewriting with can appear in the goal.\n\nBut isn't it the case that a dynamic scheme has to be created when one has dependent equalities, as @herbelin pointed out?"
952199654,14402,ppedrot,2021-10-26 18:26:41,herbelin,"For some cases of dependent rewrite, you may try to replace the find_scheme in Equality.ind_elim by a call to the function which builds the body of the scheme as given in eqschemes.ml, without ever registering the scheme.\nIn the rewrite <- case of #14116, you need to build the body of internal_eq_rew_dep, which is bound to the scheme kind rew_r2l_dep_scheme_kind which is built with a call to build_r2l_rew_scheme true env ind InType.\n(It would be more difficult for rewrite -> whose corresponding "
953316711,14402,ppedrot,2021-10-27 21:13:31,LasseBlaauwbroek,"For who is interested in how I resolved this:\nIt turns out that I'm experiencing quite a few bugs that would be solved by this PR. So I decided to backport it anyway:\n\nFor v8.13 and v8.12 I backported #14402, #14391 and #14351\nFor v8.11 I additionally backported #12202, #12164 and #11269\nI may do 8.10 in the future, but I've not attempted it yet.\n\nThe backports certainly get more difficult when the versions get older, but it is still doable I would say.\nThanks for helping explain all the issues "
694164808,13024,JasonGross,2020-09-17 11:16:35,Zimmi48,@coqbot: merge now
841853720,14328,JasonGross,2021-05-16 18:06:23,JasonGross,@coqbot ci minimize
841854346,14328,JasonGross,2021-05-16 18:10:52,JasonGross,@coqbot minimize\ntest
841854357,14328,JasonGross,2021-05-16 18:10:56,coqbot-app,"Hey @JasonGross, the coq bug minimizer is running your script, I'll come back to you with the results once it's done."
841854417,14328,JasonGross,2021-05-16 18:11:13,JasonGross,@coqbot ci minimize all
841854424,14328,JasonGross,2021-05-16 18:11:14,coqbot-app,"Hey @JasonGross, you cannot run CI minimization on issues that are not pull requests."
841854521,14328,JasonGross,2021-05-16 18:11:49,JasonGross,@coqbot ci minimize
841854522,14328,JasonGross,2021-05-16 18:11:50,coqbot-app,"Hey @JasonGross, you cannot run CI minimization on issues that are not pull requests."
841854573,14328,JasonGross,2021-05-16 18:12:11,coqbot-app,"@JasonGross, Error: Could not minimize file  (full log on GitHub Actions)\nbuild log\n++ �[33;1m(/github/workspace/run-script.sh @ line 2) $�[0m test\n\n\nminimizer log\n\n\n\nIf you have any comments on your experience of the minimizer, please share them in a reply (possibly tagging @JasonGross).\nIf you believe there's a bug in the bug minimizer, please report it on the bug minimizer issue tracker."
845483305,14328,JasonGross,2021-05-20 21:16:55,JasonGross,@coqbot ci minimize
845483621,14328,JasonGross,2021-05-20 21:17:32,JasonGross,@coqbot ci minimize
845543783,14328,JasonGross,2021-05-20 23:17:28,coqbot-app,"Hey, I have detected that there were CI failures at commit af028cf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit b2431b3 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-elpi, ci-mathcomp, ci-cross_crypto."
845544826,14328,JasonGross,2021-05-20 23:19:50,JasonGross,@coqbot ci minimize
845544891,14328,JasonGross,2021-05-20 23:19:58,coqbot-app,"I have initiated minimization at commit af028cf for the suggested target ci-elpi, ci-mathcomp, ci-cross_crypto as requested."
845548504,14328,JasonGross,2021-05-20 23:29:43,JasonGross,@coqbot minimize\ntest
845548513,14328,JasonGross,2021-05-20 23:29:45,coqbot-app,"Hey @JasonGross, the coq bug minimizer is running your script, I'll come back to you with the results once it's done."
845548943,14328,JasonGross,2021-05-20 23:31:05,coqbot-app,"@JasonGross, Error: Could not minimize file  (full log on GitHub Actions)\nbuild log\n++ �[33;1m(/github/workspace/run-script.sh @ line 2) $�[0m test\n\n\nminimizer log\n\n\n\nIf you have any comments on your experience of the minimizer, please share them in a reply (possibly tagging @JasonGross).\nIf you believe there's a bug in the bug minimizer, please report it on the bug minimizer issue tracker."
845955319,14328,JasonGross,2021-05-21 13:36:13,JasonGross,@coqbot ci minimize
845955420,14328,JasonGross,2021-05-21 13:36:22,coqbot-app,"I have initiated minimization at commit af028cf for the suggested targets ci-elpi, ci-mathcomp, ci-cross_crypto as requested."
845956908,14328,JasonGross,2021-05-21 13:38:41,coqbot-app,Error: Could not minimize file  (full log on GitHub Actions)\nbuild log\n++ set -e\n++++ dirname /github/workspace/coqbot-ci.sh\n+++ cd /github/workspace\n+++ pwd\n++ DIR=/github/workspace\n++ sudo apt-get update -y\nGet:1 http://security.ubuntu.com/ubuntu bionic-security InRelease [88.7 kB]\nHit:2 http://archive.ubuntu.com/ubuntu bionic InRelease\nGet:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease [88.7 kB]\nGet:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease [74.6 kB]\nGet:5 htt
845957008,14328,JasonGross,2021-05-21 13:38:49,coqbot-app,Error: Could not minimize file  (full log on GitHub Actions)\nbuild log\n++ set -e\n++++ dirname /github/workspace/coqbot-ci.sh\n+++ cd /github/workspace\n+++ pwd\n++ DIR=/github/workspace\n++ sudo apt-get update -y\nGet:1 http://security.ubuntu.com/ubuntu bionic-security InRelease [88.7 kB]\nHit:2 http://archive.ubuntu.com/ubuntu bionic InRelease\nGet:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease [88.7 kB]\nGet:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease [74.6 kB]\nGet:5 htt
845957076,14328,JasonGross,2021-05-21 13:38:56,coqbot-app,Error: Could not minimize file  (full log on GitHub Actions)\nbuild log\n++ set -e\n++++ dirname /github/workspace/coqbot-ci.sh\n+++ cd /github/workspace\n+++ pwd\n++ DIR=/github/workspace\n++ sudo apt-get update -y\nGet:1 http://security.ubuntu.com/ubuntu bionic-security InRelease [88.7 kB]\nHit:2 http://archive.ubuntu.com/ubuntu bionic InRelease\nGet:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease [88.7 kB]\nGet:4 http://security.ubuntu.com/ubuntu bionic-security/universe i386 Packages [1231 
845997267,14328,JasonGross,2021-05-21 14:37:58,JasonGross,@coqbot ci minimize
845997381,14328,JasonGross,2021-05-21 14:38:05,coqbot-app,"I have initiated minimization at commit af028cf for the suggested targets ci-elpi, ci-mathcomp, ci-cross_crypto as requested."
845999224,14328,JasonGross,2021-05-21 14:40:10,coqbot-app,Error: Could not minimize file  (full log on GitHub Actions)\nbuild log\n++ set -e\n++++ dirname /github/workspace/coqbot-ci.sh\n+++ cd /github/workspace\n+++ pwd\n++ DIR=/github/workspace\n++ sudo apt-get update -y\nHit:1 http://security.ubuntu.com/ubuntu bionic-security InRelease\nHit:2 http://archive.ubuntu.com/ubuntu bionic InRelease\nHit:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease\nHit:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease\nReading package lists...\n++ sudo apt-ge
845999443,14328,JasonGross,2021-05-21 14:40:23,coqbot-app,Error: Could not minimize file  (full log on GitHub Actions)\nbuild log\n++ set -e\n++++ dirname /github/workspace/coqbot-ci.sh\n+++ cd /github/workspace\n+++ pwd\n++ DIR=/github/workspace\n++ sudo apt-get update -y\nHit:1 http://security.ubuntu.com/ubuntu bionic-security InRelease\nHit:2 http://archive.ubuntu.com/ubuntu bionic InRelease\nHit:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease\nHit:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease\nReading package lists...\n++ sudo apt-ge
845999540,14328,JasonGross,2021-05-21 14:40:30,coqbot-app,Error: Could not minimize file  (full log on GitHub Actions)\nbuild log\n++ set -e\n++++ dirname /github/workspace/coqbot-ci.sh\n+++ cd /github/workspace\n+++ pwd\n++ DIR=/github/workspace\n++ sudo apt-get update -y\nHit:1 http://archive.ubuntu.com/ubuntu bionic InRelease\nHit:2 http://archive.ubuntu.com/ubuntu bionic-updates InRelease\nHit:3 http://archive.ubuntu.com/ubuntu bionic-backports InRelease\nHit:4 http://security.ubuntu.com/ubuntu bionic-security InRelease\nReading package lists...\n++ sudo apt-ge
846002449,14328,JasonGross,2021-05-21 14:44:30,JasonGross,@coqbot ci minimize
846002555,14328,JasonGross,2021-05-21 14:44:37,coqbot-app,"I have initiated minimization at commit af028cf for the suggested targets ci-elpi, ci-mathcomp, ci-cross_crypto as requested."
846003623,14328,JasonGross,2021-05-21 14:46:12,JasonGross,@coqbot ci minimize
846003700,14328,JasonGross,2021-05-21 14:46:18,coqbot-app,"I have initiated minimization at commit af028cf for the suggested targets ci-elpi, ci-mathcomp, ci-cross_crypto as requested."
846003969,14328,JasonGross,2021-05-21 14:46:42,coqbot-app,Error: Could not minimize file  (full log on GitHub Actions)\nbuild log\n++ set -e\n++++ dirname /github/workspace/coqbot-ci.sh\n+++ cd /github/workspace\n+++ pwd\n++ DIR=/github/workspace\n++ sudo apt-get update -y\nHit:1 http://security.ubuntu.com/ubuntu bionic-security InRelease\nHit:2 http://archive.ubuntu.com/ubuntu bionic InRelease\nHit:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease\nHit:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease\nReading package lists...\n++ sudo apt-ge
846004171,14328,JasonGross,2021-05-21 14:46:58,coqbot-app,Error: Could not minimize file  (full log on GitHub Actions)\nbuild log\n++ set -e\n++++ dirname /github/workspace/coqbot-ci.sh\n+++ cd /github/workspace\n+++ pwd\n++ DIR=/github/workspace\n++ sudo apt-get update -y\nHit:1 http://security.ubuntu.com/ubuntu bionic-security InRelease\nHit:2 http://archive.ubuntu.com/ubuntu bionic InRelease\nHit:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease\nHit:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease\nReading package lists...\n++ sudo apt-ge
846004296,14328,JasonGross,2021-05-21 14:47:11,coqbot-app,Error: Could not minimize file  (full log on GitHub Actions)\nbuild log\n++ set -e\n++++ dirname /github/workspace/coqbot-ci.sh\n+++ cd /github/workspace\n+++ pwd\n++ DIR=/github/workspace\n++ sudo apt-get update -y\nHit:1 http://security.ubuntu.com/ubuntu bionic-security InRelease\nHit:2 http://archive.ubuntu.com/ubuntu bionic InRelease\nHit:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease\nHit:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease\nReading package lists...\n++ sudo apt-ge
846005286,14328,JasonGross,2021-05-21 14:48:39,coqbot-app,Error: Could not minimize file  (full log on GitHub Actions)\nbuild log\n++ set -e\n++++ dirname /github/workspace/coqbot-ci.sh\n+++ cd /github/workspace\n+++ pwd\n++ DIR=/github/workspace\n++ sudo apt-get update -y\nHit:1 http://security.ubuntu.com/ubuntu bionic-security InRelease\nHit:2 http://archive.ubuntu.com/ubuntu bionic InRelease\nHit:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease\nHit:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease\nReading package lists...\n++ sudo apt-ge
846005416,14328,JasonGross,2021-05-21 14:48:50,coqbot-app,Error: Could not minimize file  (full log on GitHub Actions)\nbuild log\n++ set -e\n++++ dirname /github/workspace/coqbot-ci.sh\n+++ cd /github/workspace\n+++ pwd\n++ DIR=/github/workspace\n++ sudo apt-get update -y\nHit:1 http://security.ubuntu.com/ubuntu bionic-security InRelease\nHit:2 http://archive.ubuntu.com/ubuntu bionic InRelease\nHit:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease\nHit:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease\nReading package lists...\n++ sudo apt-ge
846005524,14328,JasonGross,2021-05-21 14:49:01,coqbot-app,Error: Could not minimize file  (full log on GitHub Actions)\nbuild log\n++ set -e\n++++ dirname /github/workspace/coqbot-ci.sh\n+++ cd /github/workspace\n+++ pwd\n++ DIR=/github/workspace\n++ sudo apt-get update -y\nHit:1 http://security.ubuntu.com/ubuntu bionic-security InRelease\nHit:2 http://archive.ubuntu.com/ubuntu bionic InRelease\nHit:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease\nHit:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease\nReading package lists...\n++ sudo apt-ge
846009118,14328,JasonGross,2021-05-21 14:53:48,JasonGross,@coqbot ci minimize
846009188,14328,JasonGross,2021-05-21 14:53:55,coqbot-app,"I have initiated minimization at commit af028cf for the suggested targets ci-elpi, ci-mathcomp, ci-cross_crypto as requested."
846011305,14328,JasonGross,2021-05-21 14:56:41,coqbot-app,Error: Could not minimize file  (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.5MiB file on GitHub Actions Artifacts under ```)\nefinition_C.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_D.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_E.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_F.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_G.html  \n  inflating: _instal
846011327,14328,JasonGross,2021-05-21 14:56:43,coqbot-app,Error: Could not minimize file  (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.7MiB file on GitHub Actions Artifacts under ```)\nDPoS4rElD%2FbNeou13DYOmh6laR9DE7Z81GZIeTgQ%3D%3D&Expires=1621609601 [following]\n--2021-05-21 14:56:41--  https://storage.googleapis.com/gitlab-gprd-artifacts/e9/08/e90857e7bd14c877063362e92560ccc07e3c490623d322542e6f83f13867d6d1/2021_05_20/1281044620/1374823283/library_ci-mathcomp.zip?response-content-disposition=attachment%3B%20filename%3D%22li
846011337,14328,JasonGross,2021-05-21 14:56:43,coqbot-app,Error: Could not minimize file  (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.6MiB file on GitHub Actions Artifacts under ```)\narchy_builder/coq-hierarchy-builder-shim.opam  \n  inflating: _build_ci/hierarchy_builder/coq-hierarchy-builder.opam  \n  inflating: _build_ci/hierarchy_builder/coq.hb  \n  inflating: _build_ci/hierarchy_builder/default.nix  \n   creating: _build_ci/hierarchy_builder/examples/\n   creating: _build_ci/hierarchy_builder/examples/.coq-native/\n  inflatin
846095001,14328,JasonGross,2021-05-21 16:43:06,JasonGross,@coqbot ci minimize
846095083,14328,JasonGross,2021-05-21 16:43:13,coqbot-app,"I have initiated minimization at commit af028cf for the suggested targets ci-elpi, ci-mathcomp, ci-cross_crypto as requested."
846097302,14328,JasonGross,2021-05-21 16:46:09,coqbot-app,Error: Could not minimize file  (from ci-cross_crypto) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.5MiB file on GitHub Actions Artifacts under build.log)\nefinition_C.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_D.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_E.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_F.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_
846097312,14328,JasonGross,2021-05-21 16:46:10,coqbot-app,Error: Could not minimize file  (from ci-mathcomp) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.7MiB file on GitHub Actions Artifacts under build.log)\n7G4H%2Bpe60oQGChLGEnMIwo3g%3D%3D&Expires=1621616169 [following]\n--2021-05-21 16:46:09--  https://storage.googleapis.com/gitlab-gprd-artifacts/e9/08/e90857e7bd14c877063362e92560ccc07e3c490623d322542e6f83f13867d6d1/2021_05_20/1281044620/1374823283/library_ci-mathcomp.zip?response-content-disposition=attachment%3B%20filenam
846097353,14328,JasonGross,2021-05-21 16:46:14,coqbot-app,Error: Could not minimize file  (from ci-elpi) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.6MiB file on GitHub Actions Artifacts under build.log)\narchy_builder/coq-hierarchy-builder-shim.opam  \n  inflating: _build_ci/hierarchy_builder/coq-hierarchy-builder.opam  \n  inflating: _build_ci/hierarchy_builder/coq.hb  \n  inflating: _build_ci/hierarchy_builder/default.nix  \n   creating: _build_ci/hierarchy_builder/examples/\n   creating: _build_ci/hierarchy_builder/examples/.c
846148216,14328,JasonGross,2021-05-21 18:18:17,JasonGross,@coqbot ci minimize
846155196,14328,JasonGross,2021-05-21 18:31:35,JasonGross,@coqbot ci minimize
846159314,14328,JasonGross,2021-05-21 18:40:30,JasonGross,@coqbot ci minimize
846159322,14328,JasonGross,2021-05-21 18:40:31,coqbot-app,Error while attempting to find job minimization information:\nCould not find pipeline check for base commit b2431b3.
830717046,14234,liyishuai,2021-05-02 00:53:22,JasonGross,"Perhaps also add ltb?  And maybe we want a lemma that says that if two strings are leb in both directions, them they're equal, and that for all strings, one is leb to the other?  (Maybe look at what lemmas exist around Z.leb?) But feel free also to not add these; we don't want the perfect to be the enemy of the good"
830720931,14234,liyishuai,2021-05-02 01:30:48,liyishuai,I'm restructuring these definitions into compare-based.
834054599,14234,liyishuai,2021-05-07 04:26:06,liyishuai,Not sure why MetaCoq was broken. Did I pollute its namespace?
834247646,14234,liyishuai,2021-05-07 10:27:30,herbelin,Metacoq was broken for all PRs a few days ago. You should rebase to double-check.
841864976,14234,liyishuai,2021-05-16 19:25:46,coqbot-app,"Hey, I have detected that there were CI failures at commit 7e89743 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 77d56f3 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-metacoq."
841864979,14234,liyishuai,2021-05-16 19:25:47,coqbot-app,"Hey @coqbot-app[bot], you cannot run CI minimization on issues that are not pull requests."
841875754,14234,liyishuai,2021-05-16 20:50:22,liyishuai,@coqbot ci minimize\n(Did the bot just talk to itself?)
841875758,14234,liyishuai,2021-05-16 20:50:23,coqbot-app,"Hey @liyishuai, you cannot run CI minimization on issues that are not pull requests."
841875940,14234,liyishuai,2021-05-16 20:51:48,anton-trunov,@liyishuai I tried re-running the MetaCoq job but to no avail.
841887109,14234,liyishuai,2021-05-16 22:34:22,liyishuai,This job depends on other jobs with expired/erased artifacts: build:base\n\nShould I re-push?
841905088,14234,liyishuai,2021-05-17 00:29:29,JasonGross,"(Did the bot just talk to itself?)\n\nOops.  I've fixed this issue.  The other issue is waiting on waiting on feedback from @Zimmi48 on how to retrieve PR info on non-review comments, so I've disabled the ci minimization for now"
852586092,14234,liyishuai,2021-06-02 00:17:59,coqbot-app,"Hey, I have detected that there were CI failures at commit a706e26 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit cecee26 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
852599193,14234,liyishuai,2021-06-02 00:32:15,JasonGross,@coqbot CI minimize
852599241,14234,liyishuai,2021-06-02 00:32:18,coqbot-app,I have initiated minimization at commit a706e26 for the suggested target ci-metacoq as requested.
852610659,14234,liyishuai,2021-06-02 00:43:52,coqbot-app,"Error: Could not minimize file  (from ci-metacoq) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 3.4MiB file on GitHub Actions Artifacts under build.log)\nances outside of sections without\nspecifying an explicit locality is therefore deprecated. It is recommended to\nuse ""export"" whenever possible.\n[deprecated-instance-without-locality,deprecated]\nFile ""/github/workspace/builds/coq/coq-passing/_build_ci/metacoq/template-coq/theories/Reflect.v"", line 377, characters 0-8:\nWarn"
852821475,14234,liyishuai,2021-06-02 07:49:10,herbelin,"Hi, I took the freedom of rebasing the PR so as to restart CI. It seems that the incompatibility is only in leb needing to be qualified into Nat.leb in file pcuic/theories/PCUICToTemplateCorrectness.v of MetaCoq."
854576338,14234,liyishuai,2021-06-04 10:18:16,coqbot-app,"Hey, I have detected that there were CI failures at commit 24a5bb7 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 255d2c8 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
855290182,14234,liyishuai,2021-06-05 20:15:02,liyishuai,@coqbot ci minimize
855290189,14234,liyishuai,2021-06-05 20:15:10,coqbot-app,I have initiated minimization at commit 24a5bb7 for the suggested target ci-metacoq as requested.
855291379,14234,liyishuai,2021-06-05 20:26:16,coqbot-app,Error: Could not minimize file  (from ci-metacoq) (full log on GitHub Actions)\nbuild log\n++ set -e\n++++ dirname /github/workspace/coqbot-ci.sh\n+++ cd /github/workspace\n+++ pwd\n++ DIR=/github/workspace\n++ echo '::group::install dependencies'\n::group::install dependencies\n++ sudo apt-get update -y\nHit:1 http://security.ubuntu.com/ubuntu bionic-security InRelease\nHit:2 http://archive.ubuntu.com/ubuntu bionic InRelease\nHit:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease\nHit:4 http://arch
855325113,14234,liyishuai,2021-06-06 02:13:34,JasonGross,Unfortunately minimization of metacoq does not work yet due to #14453
856948066,14234,liyishuai,2021-06-08 17:15:34,herbelin,"@ liyishuai: if you rebase, metacoq should now pass, after MetaCoq/metacoq#561 and MetaCoq/metacoq#562 were merged."
897081340,14234,liyishuai,2021-08-11 19:11:02,Alizter,@anton-trunov Will you be merging this?
897878251,14234,liyishuai,2021-08-12 18:37:57,anton-trunov,@coqbot merge now
897878416,14234,liyishuai,2021-08-12 18:38:15,anton-trunov,@Alizter thanks for the ping :)
895393038,14758,SkySkimmer,2021-08-09 17:10:47,coqbot-app,"Hey, I have detected that there were CI failures at commit 1865755 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit d731d92 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-equations, ci-hott."
897143636,14758,SkySkimmer,2021-08-11 20:51:27,coqbot-app,"Hey, I have detected that there were CI failures at commit 764f8e7 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 080920e succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-equations, ci-hott."
897179754,14758,SkySkimmer,2021-08-11 21:54:13,Alizter,@coqbot ci minimize
897179801,14758,SkySkimmer,2021-08-11 21:54:18,coqbot-app,"I have initiated minimization at commit 764f8e7 for the suggested targets ci-equations, ci-hott as requested."
897189180,14758,SkySkimmer,2021-08-11 21:59:41,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/equations/theories/Type/EqDecInstances.v (from ci-equations) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/equations/src"" ""Equations"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/equations/the"
897192128,14758,SkySkimmer,2021-08-11 22:05:03,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Modalities/ReflectiveSubuniverse.v (from ci-hott) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hott/theories"" ""HoTT"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-faili"
922790920,14758,SkySkimmer,2021-09-20 10:10:39,SkySkimmer,ping @coq/pretyper-maintainers
926785956,14758,SkySkimmer,2021-09-24 17:04:08,ppedrot,"I wouldn't mind a high level description of the changes. The major difference is that the equality function is now aware of the arity of inductive types, but this looks hardly enough to really be more complete?"
926803922,14758,SkySkimmer,2021-09-24 17:32:43,ppedrot,"@SkySkimmer the two overlays are merged, can you rebase and remove the corresponding commit?"
926814921,14758,SkySkimmer,2021-09-24 17:50:34,SkySkimmer,Bench to exercise the machines https://gitlab.com/coq/coq/-/jobs/1621327786
874345513,14606,herbelin,2021-07-05 22:01:36,coqbot-app,"Hey, I have detected that there were CI failures at commit b711386 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8560c27 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-argosy."
874357822,14606,herbelin,2021-07-05 22:50:57,coqbot-app,"Hey, I have detected that there were CI failures at commit b711386 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8560c27 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-argosy."
874359016,14606,herbelin,2021-07-05 22:56:45,coqbot-app,"Hey, I have detected that there were CI failures at commit b711386 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8560c27 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-argosy."
876348297,14606,herbelin,2021-07-08 11:08:43,coqbot-app,"Hey, I have detected that there were CI failures at commit 5b9df34 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 444aa95 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
882079565,14606,herbelin,2021-07-18 16:04:48,ppedrot,@herbelin can you also take advantage of the nitpick to rebase and get a green CI? I'll merge after.
885641926,14606,herbelin,2021-07-23 13:32:35,RalfJung,Is it possible that this is the cause of #14703?
885753680,14606,herbelin,2021-07-23 16:24:18,RalfJung,"It looks like this PR also changed notation parsing:\n(Σ[ ty; rc ty ]).(ty_size) now fails (""unknown interpretation for notation"") where ty_size (Σ[ ty; rc ty ]) still works; here Σ[...] is a notation in a scope that is not opened globally but via Arguments ty_size."
885773909,14606,herbelin,2021-07-23 17:00:14,herbelin,I could not reproduce. Could you give an example if possible?
885785608,14606,herbelin,2021-07-23 17:20:57,herbelin,"For instance, the following works:\nDeclare Scope foo_scope.\nDelimit Scope foo_scope with foo.\nRecord prod A B := pair { fst : A ; snd : B }.\nNotation ""[[ t , u ]]"" := (pair _ _ t u) : foo_scope.\nArguments fst {A B} p%foo.\nCheck [[2,3]].(fst).\n\n@RalfJung : How different is your real example?"
885788591,14606,herbelin,2021-07-23 17:26:45,RalfJung,This is the change that was required. I can try to minimize this.
885793571,14606,herbelin,2021-07-23 17:36:00,RalfJung,"Hm, my attempt to isolate this also failed:\nFrom Coq Require Import List.\nExport ListNotations.\n\nRecord type :=\n  { ty_size : nat;\n    ty_own : list nat -> Prop;\n    ty_size_eq vl : ty_own vl -> length vl = ty_size;\n  }.\n\nDeclare Scope lrust_type_scope.\nDelimit Scope lrust_type_scope with T.\nBind Scope lrust_type_scope with type.\n\nAxiom sum : list type -> type.\n\nNotation ""Σ[ ty1 ; .. ; tyn ]"" :=\n  (sum (cons ty1%T (..(cons tyn%T nil)..))) : lrust_type_scope.\n\nAxiom t : type.\nCheck (ty_size Σ[t; "
885794227,14606,herbelin,2021-07-23 17:37:16,herbelin,"Actually, this has nothing to do with scopes and notations. It is another instance of the class argument of ty_size being forced to be explicit and in position of main argument when using the .( ) notation! No more worries than #14703!"
885795645,14606,herbelin,2021-07-23 17:39:47,RalfJung,"I don't see that. Σ[ ty; rc ty ] is of type type and ty_size is a primitive projection of type.\nUsing foo.(ty_size) works in many other places, it just does not work here. And the error explicitly talks about ""unknown interpretation for notation"". I am pretty sure this is a different issue than #14703."
885797309,14606,herbelin,2021-07-23 17:42:38,RalfJung,"For example, further up the same file we do new [ #(option ty).(ty_size) ] and that works just fine. That should require exactly the same kind of inference as new [ #(Σ[ ty; rc ty ]).(ty_size) ]."
885808647,14606,herbelin,2021-07-23 18:02:51,herbelin,"You're right, there is a bug (I did not test on the right branch apparently). I'm going to submit a fix soon."
885841205,14606,herbelin,2021-07-23 19:04:18,RalfJung,"Awesome, thanks. :)"
735810435,13396,herbelin,2020-11-30 14:13:45,ppedrot,"This seems to be faulty, the printer complains about being registered several times? I might have missed that one somewhere. The joy of global variables..."
735817701,13396,herbelin,2020-11-30 14:26:26,herbelin,It is registered also in pptactic.ml (not only raw but also glob and top). It complains there.\nWhat to do? To add a register_extra_print0 for registering of only glob and top from pptactic.ml? Or to register the glob and top already in pvernac.ml?\nMaybe the second solution?
735822339,13396,herbelin,2020-11-30 14:34:10,ppedrot,Definitely the second one.
847263726,13396,herbelin,2021-05-24 18:57:21,coqbot-app,"Hey, I have detected that there were CI failures at commit 8f98d30 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 7ce1c48 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
851698962,13396,herbelin,2021-05-31 22:03:35,herbelin,Another example showing that Ltac2 would also need to track the environment in which Ltac2 variables live:\nFrom Ltac2 Require Import Ltac2.  \nLtac2 g x := clear y; intro y; exact ($x).\nTheorem foo (y:bool) : nat -> nat.\ng constr:(y).\n(* is it expected to work? *)
851952532,13396,herbelin,2021-06-01 08:52:11,ppedrot,"@herbelin you're confusing the dynamic proof environment with the static Ltac2 environment. If you need to know the name of a bound Ltac2 variable at runtime in the implementation, it means you basically lost and implemented dynamic binding."
852013126,13396,herbelin,2021-06-01 10:26:16,herbelin,"@herbelin you're confusing the dynamic proof environment with the static Ltac2 environment. If you need to know the name of a bound Ltac2 variable at runtime in the implementation, it means you basically lost and implemented dynamic binding.\n\nWhat sentence are you referring to? To the expression Ltac2 f x := intros y; apply (fun z => $x + $y + $z)? This doesn't need to know the name of a bound Ltac2 variable at runtime: it expands in only static bindings, i.e. to Ltac2 f x := let y := @y in intr"
852234265,13396,herbelin,2021-06-01 15:48:35,herbelin,"As an attempt to summarize the discussion on pretype_id, I have real time for it, but I'm ready to supporting a move of GlobEnv.ml to plugins/ltac, with the registration of an effect on push_rel."
858604015,13396,herbelin,2021-06-10 13:04:33,ppedrot,@herbelin we're both losing a lot of time with this trivial PR. Please move the genarg definition in extraargs and I will happily merge it in a blink.
858770868,13396,herbelin,2021-06-10 16:33:32,herbelin,"@herbelin we're both losing a lot of time with this trivial PR. Please move the genarg definition in extraargs and I will happily merge it in a blink.\n\nI was about to propose the converse! Let's join our forces rather than annihilating them. Once this PR, which I still think is right, is merged, I will happily merge a PR from you tomorrow which provides binders in vernac without the substitution and interpretation part, but in the meantime, the mechanism to make vernac extensions (and virtually "
949718783,13396,herbelin,2021-10-22 15:09:03,SkySkimmer,What's the status of this? @herbelin @ppedrot
963233061,13396,herbelin,2021-11-08 14:48:12,SkySkimmer,ping @herbelin @ppedrot
884872300,14698,Zimmi48,2021-07-22 12:26:44,Alizter,Did we document what was wrong with using dune for the test-suite somewhere? I only remember that it didn't work very well.
884878772,14698,Zimmi48,2021-07-22 12:38:02,Zimmi48,"What do you mean by using Dune? If that's running dune runtest / make -f Makefile.dune test-suite, there is no problem besides the lack of incrementality (which is what I document in this PR)."
897021714,14698,Zimmi48,2021-08-11 17:41:35,Zimmi48,"Since #14625 has been merged, this one is ready to merge as well."
897022533,14698,Zimmi48,2021-08-11 17:42:55,SkySkimmer,Should we recommend make -C or cd; make?
897023325,14698,Zimmi48,2021-08-11 17:44:10,Zimmi48,Aren't the two strictly equivalent?
897024292,14698,Zimmi48,2021-08-11 17:45:47,SkySkimmer,"Except for changing the shell's directory yes, but someone not familiar with make wouldn't know that."
897205397,14698,Zimmi48,2021-08-11 22:33:53,Zimmi48,Updated.
915079409,14698,Zimmi48,2021-09-08 09:37:08,SkySkimmer,That sounds OK to me
915205743,14698,Zimmi48,2021-09-08 12:43:48,Zimmi48,@ejgallego Updated to take your suggestion into account.
915302069,14698,Zimmi48,2021-09-08 14:43:56,coqbot-app,"Hey, I have detected that there were CI failures at commit f7f9d73 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit c6ab549 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following targets (which I do not suggest minimizing):\n\nci-fiat_crypto (because base job at c6ab549 failed)\nci-fiat_crypto_legacy (b"
916883688,14698,Zimmi48,2021-09-10 12:56:57,ejgallego,@coqbot: merge now
898772541,14783,SkySkimmer,2021-08-13 23:53:29,coqbot-app,"Hey, I have detected that there were CI failures at commit 371632d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a0460b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-vst."
898862039,14783,SkySkimmer,2021-08-14 07:59:42,SkySkimmer,@coqbot ci minimize\n(error at https://github.com/PrincetonUniversity/VST/blob/1d70827abb17bda3842883689440a41d00e64313/progs/ghosts.v#L1103 btw)
898862052,14783,SkySkimmer,2021-08-14 07:59:50,coqbot-app,I have initiated minimization at commit 371632d for the suggested target ci-vst as requested.
898862697,14783,SkySkimmer,2021-08-14 08:04:51,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/progs/ghosts.v (from ci-vst) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 57KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.Logic.ClassicalFacts.\nRequire Coq.Lo"
898864307,14783,SkySkimmer,2021-08-14 08:21:50,SkySkimmer,@JasonGross that doesn't look right
900051685,14783,SkySkimmer,2021-08-17 07:11:15,ejgallego,"@SkySkimmer @Zimmi48 IMVHO this is a good example of the problems that high latency in CI may cause, just noting this one in case we do a writeup of the CI."
900059833,14783,SkySkimmer,2021-08-17 07:23:48,JasonGross,@SkySkimmer The minimizer is set up to minimize a single source against two versions of Coq.  Here you have two different versions of the CI against one version of Coq.  What were you hoping for?
900345486,14783,SkySkimmer,2021-08-17 14:25:37,SkySkimmer,@JasonGross I see.\nIs there a way to run the minimizer against the success with 8.13 at https://gitlab.com/coq/coq/-/jobs/1509687999 ?
900824099,14783,SkySkimmer,2021-08-18 05:32:43,JasonGross,"@SkySkimmer the easiest way to do that is to rebase this PR on that commit, or else open a new PR with that commit as the base one.  If you want to do it without rebasing, that's doable, but quite painful; you basically need to be coqbot and make a branch on the minimizer repo with the relevant files filled out."
900824907,14783,SkySkimmer,2021-08-18 05:35:01,JasonGross,"Also, if that job isn't from master, you'll also need to target the PR to whatever branch that job is on (and the branch should be on coq/coq at least long enough for the minimizer to run)"
901776012,14783,SkySkimmer,2021-08-19 09:53:40,SkySkimmer,"Looks like VST isn't compatible with the fix to #13413, I will PR"
901956665,14783,SkySkimmer,2021-08-19 14:19:59,SkySkimmer,Ready
902093858,14783,SkySkimmer,2021-08-19 17:15:12,Zimmi48,@coqbot: merge now
911772948,14840,ppedrot,2021-09-02 14:53:11,ppedrot,Bench: https://gitlab.com/coq/coq/-/jobs/1557531385
911861830,14840,ppedrot,2021-09-02 16:31:49,Janno,"I am surprised to see that projects use  Typeclasses Strict Resolution. I tried once and immediately ran into non-minimizable issues where it didn't freeze evars correctly. In any case, this change looks very reasonable!"
912430296,14840,ppedrot,2021-09-03 10:20:28,coqbot-app,"Hey, I have detected that there were CI failures at commit 7d94f41 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 9d18eff succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not suggest minimizing): ci-category_theory (because base job at 9d18eff failed)\nHowever, you may want "
912504486,14840,ppedrot,2021-09-03 12:35:21,ppedrot,"HoTT uses the flag, and indeed it is observable in the bench.\n┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │   mem faults    │\n│                             │                         │                 "
912504987,14840,ppedrot,2021-09-03 12:36:15,ppedrot,"Since there are so few users I don't think it's worth it to introduce this change. Maybe when we fix the flag behaviour, but until then I'd rather close this experiment as a theoretical success without actual consequences."
847075093,14379,herbelin,2021-05-24 14:19:24,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
847117862,14379,herbelin,2021-05-24 15:22:39,coqbot-app,"Hey, I have detected that there were CI failures at commit 3d6e4ac without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ce69cf0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-coq_tools, ci-rewriter, ci-fiat_crypto_legacy."
847150580,14379,herbelin,2021-05-24 16:06:04,coqbot-app,"Hey, I have detected that there were CI failures at commit 3d6e4ac without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ce69cf0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-rewriter, ci-fiat_crypto_legacy, ci-coq_tools."
847154643,14379,herbelin,2021-05-24 16:12:49,JasonGross,"The changelog should also mention the change in the meaning of Reserved Infix ""'o'"".  Speaking of which, what's the correct way to reserve an infix for\nNotation ""f 'o' g"" := (compose f g).\n?  And what's the corresponding Infix command?  I thought it was Infix ""'o'"" and Reserved Infix ""'o'"", is this not the case?  Was this the case but it no longer is?"
847236011,14379,herbelin,2021-05-24 18:12:59,coqbot-app,"Hey, I have detected that there were CI failures at commit 3d6e4ac without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ce69cf0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-rewriter, ci-fiat_crypto_legacy."
847307761,14379,herbelin,2021-05-24 20:17:43,herbelin,"The changelog should also mention the change in the meaning of Reserved Infix ""'o'"". Speaking of which, what's the correct way to reserve an infix for\nNotation ""f 'o' g"" := (compose f g).\n? And what's the corresponding Infix command? I thought it was Infix ""'o'"" and Reserved Infix ""'o'"", is this not the case? Was this the case but it no longer is?\n\nThis is not changed by the PR. You should use Infix ""o""/Reserved Infix ""o"" (without single quotes). Using Infix ""'o'""/Reserved Infix ""o"" used to only"
847335472,14379,herbelin,2021-05-24 21:09:32,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
847385832,14379,herbelin,2021-05-24 22:12:17,coqbot-app,"Hey, I have detected that there were CI failures at commit 0656f03 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 205ccaf succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-fiat_crypto, ci-fiat_crypto_legacy."
851589439,14379,herbelin,2021-05-31 16:33:36,herbelin,"In the PR, some consistency is lost between Infix and Reserved Infix (as shown by fiat-crypto). I would prefer to redo this PR in a cleaner way on top of #13353. Postponing to 8.15."
873359266,14379,herbelin,2021-07-03 07:02:10,ppedrot,"Test-suite needs a trivial fix, though."
876319097,14379,herbelin,2021-07-08 10:20:16,ppedrot,@herbelin ping
877017200,14379,herbelin,2021-07-09 08:34:53,ppedrot,Last call for comments before merging.
908477917,14819,proux01,2021-08-30 16:15:58,Alizter,@silene can we add this to 8.14?
908545292,14819,proux01,2021-08-30 17:36:40,silene,"No, numerous users have already updated their developments for 8.14, so I will not merge any pull request that might cause breakage with respect to the alpha release of 8.14."
908596914,14819,proux01,2021-08-30 18:49:52,proux01,"Anyway, this is specifically targeting 8.15 since we commit to keep deprecations for 2 releases so: deprecation in 8.13 -> removal in 8.15"
908633151,14819,proux01,2021-08-30 19:38:29,olaure01,"Concerning prod_curry and prod_uncurry, the deprecation attribute in 8.13 was put on a Definition. Is it visible from the user side? wouldn't an intermediary step with a Notation be necessary?"
908739156,14819,proux01,2021-08-30 22:11:58,coqbot-app,"Hey, I have detected that there were CI failures at commit ee129e2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-category_theory, ci-fiat_parsers, ci-flocq, ci-iris, ci-mathcomp, ci-metacoq, ci-perennial."
908777093,14819,proux01,2021-08-30 23:29:32,coqbot-app,"Hey, I have detected that there were CI failures at commit ee129e2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-category_theory, ci-fiat_parsers, ci-flocq, ci-iris, ci-mathcomp, ci-metacoq, ci-perennial."
909533081,14819,proux01,2021-08-31 19:19:23,coqbot-app,"Hey, I have detected that there were CI failures at commit 25bdcd4 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-category_theory, ci-fiat_parsers, ci-flocq, ci-metacoq."
910352862,14819,proux01,2021-09-01 14:41:38,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910356361,14819,proux01,2021-09-01 14:45:26,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910359787,14819,proux01,2021-09-01 14:49:04,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910362705,14819,proux01,2021-09-01 14:52:10,proux01,@JasonGross @Zimmi48 is there a good reason for the above minimize messages to be duplicated?
910363172,14819,proux01,2021-09-01 14:52:41,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910366554,14819,proux01,2021-09-01 14:56:24,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910369770,14819,proux01,2021-09-01 14:59:58,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910373640,14819,proux01,2021-09-01 15:03:51,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910377220,14819,proux01,2021-09-01 15:07:25,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910380502,14819,proux01,2021-09-01 15:10:58,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910383921,14819,proux01,2021-09-01 15:14:41,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910387010,14819,proux01,2021-09-01 15:18:10,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910389280,14819,proux01,2021-09-01 15:20:38,proux01,"@JasonGross I'm sorry, I suck at git submodules and I'm unable to do the fiat_parsers overlay, it seems to be enough to replace Numeral Notation by Number Notation in etc/coq-script/compatibilitty/Coq__{8_15,master}__Compat.v"
910390283,14819,proux01,2021-09-01 15:21:42,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910393701,14819,proux01,2021-09-01 15:25:16,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910396760,14819,proux01,2021-09-01 15:28:42,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910399852,14819,proux01,2021-09-01 15:32:15,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910402894,14819,proux01,2021-09-01 15:35:43,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910403532,14819,proux01,2021-09-01 15:36:26,SkySkimmer,Why is coqbot repeating itself? @JasonGross
910406191,14819,proux01,2021-09-01 15:39:14,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910409117,14819,proux01,2021-09-01 15:42:46,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910412279,14819,proux01,2021-09-01 15:46:18,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910415274,14819,proux01,2021-09-01 15:49:47,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910418059,14819,proux01,2021-09-01 15:53:12,coqbot-app,"Hey, I have detected that there were CI failures at commit d6e6201 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910587768,14819,proux01,2021-09-01 18:55:38,Zimmi48,"@JasonGross @Zimmi48 is there a good reason for the above minimize messages to be duplicated?\n\nYou did manually restart the metacoq job several times, right? At this point, coqbot will print minimize messages every time that a pipeline completes, which explains some duplication (we plan on making coqbot less verbose by checking if it's reposting a comment similar to a previous one).\nThen there was an issue with the fiat-parsers job being restarted over and over by coqbot. In principle, it only r"
910688647,14819,proux01,2021-09-01 20:10:06,proux01,"Thanks for the explanations and advice, I didn't even thought coqbot could restart jobs and just thought the job was taking a very long time without looking further."
910985037,14819,proux01,2021-09-02 01:10:24,coqbot-app,"Hey, I have detected that there were CI failures at commit 4d3071b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 6bd07ba succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_parsers.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not su"
911465052,14819,proux01,2021-09-02 09:43:49,coqbot-app,"Hey, I have detected that there were CI failures at commit 89486cb without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 6685a40 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_parsers.\nHowever, you may want to wait until the pipeline for the base commit (6685a40) finishes."
911502958,14819,proux01,2021-09-02 10:21:05,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
911575754,14819,proux01,2021-09-02 11:41:38,coqbot-app,"Hey, I have detected that there were CI failures at commit 7984a76 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 6685a40 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-argosy, ci-bbv, ci-bedrock2, ci-cross_crypto, ci-fiat_crypto, ci-fiat_crypto_legacy, ci-fiat_parsers, ci-metacoq.\nIf you tag me"
911634214,14819,proux01,2021-09-02 12:40:00,coqbot-app,"Hey, I have detected that there were CI failures at commit 4bf243f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit dbe6d3c succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_parsers.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not su"
911673348,14819,proux01,2021-09-02 13:18:17,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
911705398,14819,proux01,2021-09-02 13:49:34,Alizter,@coqbot ci minimize
911705517,14819,proux01,2021-09-02 13:49:41,coqbot-app,"I have initiated minimization at commit bd6bd0d for the suggested targets ci-fiat_crypto, ci-fiat_crypto_legacy, ci-fiat_parsers, ci-metacoq as requested.\nHowever, you may want to try again once the pipeline for the head commit (bd6bd0d) finishes."
911711771,14819,proux01,2021-09-02 13:55:28,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Common/Coq__8_4__8_5__Compat.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/coq-failing"
911717081,14819,proux01,2021-09-02 14:00:26,Alizter,Hmm seems fiat parsers is still using Numeral rather than Number. I suspect this is to support an older version of coq. @JasonGross What should be done?\nEdit: Or perhaps just adding an overlay that changes Numeral to Number would be enough. The fiat devs should merge the overlay in their own time.
911719575,14819,proux01,2021-09-02 14:02:52,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/bbv/src/bbv/Word.v (from ci-fiat_crypto_legacy) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-notation-overridden"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/src"" ""Crypto"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_cry"
911721062,14819,proux01,2021-09-02 14:04:17,Alizter,So it looks like we need more overlays:\n\nfiat-parsers: replace Numeral with Number.\nfiat-crypto-legacy: replace Grab Existential Variables. with Unshelve.
911748328,14819,proux01,2021-09-02 14:29:25,coqbot-app,"Hey, I have detected that there were CI failures at commit bd6bd0d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit dbe6d3c succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-fiat_crypto, ci-fiat_crypto_legacy, ci-fiat_parsers, ci-metacoq.\nIf you tag me saying @coqbot ci minimize all, I w"
911805328,14819,proux01,2021-09-02 15:24:47,Zimmi48,The removal should be documented in (probably several distinct) changelog entries.
911886054,14819,proux01,2021-09-02 17:03:31,proux01,"So it looks like we need more overlays:\n\nfiat-parsers: replace Numeral with Number.\nfiat-crypto-legacy: replace Grab Existential Variables. with Unshelve.\n\n\nIndeed, I'm in the process of doing them, but those things use chains of git submodules, so I cannot add overlays directly here."
911914038,14819,proux01,2021-09-02 17:40:09,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Primitives/MxDHRepChange.v (from ci-fiat_crypto) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+variable-collision,+omega-is-deprecated,+deprecated-instantiate-syntax,+non-recursive"""
911974849,14819,proux01,2021-09-02 19:06:45,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/metacoq/safechecker/theories/PCUICWfReduction.v (from ci-metacoq) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 60KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/metacoq/template-coq/theories"" ""MetaCoq"
909461332,14818,proux01,2021-08-31 17:56:46,coqbot-app,"Hey, I have detected that there were CI failures at commit 0d89589 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
909490567,14818,proux01,2021-08-31 18:26:14,JasonGross,@coqbot CI minimize
909490624,14818,proux01,2021-08-31 18:26:19,coqbot-app,I have initiated minimization at commit 0d89589 for the suggested target ci-category_theory as requested.
909495003,14818,proux01,2021-08-31 18:31:38,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Lib/TList.v (from ci-category_theory) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.Bool.Bool.\nRequire Coq.Classes.CEquivalence.\nRe"
909529500,14818,proux01,2021-08-31 19:14:46,proux01,"@JasonGross this category_theory failure is unrelated, likely an error upstream"
914063585,14818,proux01,2021-09-07 07:33:03,proux01,@JasonGross would you be the assignee here? You are certainly the most knowledgeable about that part of the code.
914239589,14818,proux01,2021-09-07 11:55:21,JasonGross,@coqbot merge now
914258858,14818,proux01,2021-09-07 12:23:52,proux01,Thanks!
914278209,14818,proux01,2021-09-07 12:48:49,coqbot-app,This PR was postponed. Please update accordingly the milestone of any issue that this fixes as this cannot be done automatically.
732212803,13448,ybertot,2020-11-23 14:55:29,gares,"The 3 CI failures are real, but I don't have time to look at them closely. Even if we change implementation strategy, they have to be addressed."
732248884,13448,ybertot,2020-11-23 15:54:38,ppedrot,"Since simpl is a pretty sensitive part of the system, I believe this needs a benchmark to rule out bad surprises..."
736646175,13448,ybertot,2020-12-01 16:00:17,gares,"I did unblock the CI pipeline, bench job included."
736828954,13448,ybertot,2020-12-01 21:22:58,gares,"Every time you push a commit a new CI job ""tries to start"". In spite of Matthieu's attempts to get a ""gold"" gitlab account, Coq is still throttled, and one has to follow the link to gitlab ci and cancel/restart the ""pipeline"" of CI jobs, otherwise they don't run. (FYI)"
736832598,13448,ybertot,2020-12-01 21:30:10,gares,I've also started a bench as PMP asked: https://gitlab.com/coq/coq/-/jobs/884440631
737125236,13448,ybertot,2020-12-02 10:01:22,Zimmi48,"one has to follow the link to gitlab ci and cancel/restart the ""pipeline"" of CI jobs, otherwise they don't run. (FYI)\n\nFYI, as I mentioned in one of the recent Coq Calls, you can restart jobs directly from GitHub, by clicking on ""Re-run"" (your issue coq/bot#113 is fixed)."
748534812,13448,ybertot,2020-12-19 22:39:39,gares,"You need to rebase the branch (and resolve the conflict in reductionops), otherwise  CI won't run."
773934011,13448,ybertot,2021-02-05 10:09:04,gares,"Dear @coq/ci-maintainers it seems perennial uses it's own copy (git submodule) of stdpp hence the overlay is not picked up. What shall @ybertot do?\nTo me no CI job should use its own copies of other projects, as part of our CI policy."
774165748,13448,ybertot,2021-02-05 17:13:07,ybertot,"I was able to verify the compilation of perennial with my version of stdpp by cloning the repository on my machine and then checking out my version of stdpp.  It succeeds, but I don't know how to make the ci process reproduce the computations I did."
774289911,13448,ybertot,2021-02-05 21:09:15,Zimmi48,"There are many projects that use git submodules to get their dependencies. It's a bit cumbersome to prepare an overlay since you need another branch for the dependency and another branch of the tested project just to update the submodule.\nHowever, you should think of overlays as a convenience, not as a hassle. So if you have already tested compatibility of perennial with your branch locally, then you don't have to worry that it is failing in CI (although in this case, you have already figured it"
774638153,13448,ybertot,2021-02-07 09:00:17,ybertot,All checks pass.  Can we enter a more active review phase?
774709385,13448,ybertot,2021-02-07 17:02:43,gares,I've started a bench: https://gitlab.com/coq/coq/-/jobs/1011863809
775937527,13448,ybertot,2021-02-09 13:31:59,gares,┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │   mem faults    │\n│                             │                         │                                       │                                       
775944692,13448,ybertot,2021-02-09 13:42:04,gares,"The bench shows a little slowdown, unfortunately coquelicot does not use coq-makefile so we don't get the per line timing info in the benchmark artifacts :-/ Maybe @silene is willing to fix that one (here the relevant snippets):\n\n  \n    \n      coq/tools/CoqMakefile.in\n    \n    \n        Lines 712 to 720\n      in\n      1676587\n    \n    \n    \n    \n\n        \n          \n           ifneq (,$(TIMING)) \n        \n\n        \n          \n           TIMING_EXTRA = > $<.$(TIMING_EXT) \n        \n\n        \n      "
775953555,13448,ybertot,2021-02-09 13:54:05,gares,@ppedrot if you have time to do your magic about perf on coquelicot...
775968335,13448,ybertot,2021-02-09 14:12:51,silene,"unfortunately coquelicot does not use coq-makefile\n\nNote that there is a _CoqProject file, so you can always run coq_makefile if you need to. I am not the maintainer for the dev package, so feel free to modify it as you see fit for benchmarking.\nThat said, I can add a timing infrastructure to Coquelicot proper. But I don't understand how it is supposed to work. For example, dev/bench/gitlab.sh does export TIMING=1, but coq_makefile tests for TIMING=before and TIMING=after. Which one is it?"
776028847,13448,ybertot,2021-02-09 15:35:50,gares,"The former is the one used by the bench infrastructure.\nThe latter 2 were added by Jason (the python thing), I don't know what they do exactly but they should be documented in the refman."
776079313,13448,ybertot,2021-02-09 16:49:19,silene,The former is the one used by the bench infrastructure.\n\nI have pushed a commit that adds it to Coquelicot.
776083338,13448,ybertot,2021-02-09 16:54:56,gares,New bench here: https://gitlab.com/coq/coq/-/jobs/1018753767
776567431,13448,ybertot,2021-02-10 09:24:18,gares,"The good news is that coquelicot has now colored output. Example: https://coq.gitlab.io/-/coq/-/jobs/1018753767/artifacts/_bench/html/coq-coquelicot/theories/Complex.v.html\nThe other news is that bench is fluctuating a bit, there is a little generalized slowdown."
776569932,13448,ybertot,2021-02-10 09:27:45,gares,┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │   mem faults    │\n│                             │                         │                                       │                                       
776577990,13448,ybertot,2021-02-10 09:39:03,gares,"Dear @coq/bench-maintainers , can you help us read these results? Should we be worried or not?"
776608575,13448,ybertot,2021-02-10 10:27:40,ppedrot,"Probably not. The per-line diff shows a few slowdowns in the order of 2-3% that might be reproducible, but it's small enough to not be problematic."
776625947,13448,ybertot,2021-02-10 10:56:51,gares,Great! @ybertot would you mind accepting at least my last fix to the code? Then I think I can merge it.
776626889,13448,ybertot,2021-02-10 10:58:27,gares,@ppedrot you once showed me how to find the lines that do slow down (and now I forgot). Can we get the script be run automatically as part of bench and its output saved at the root of the html/ thing?
776652246,13448,ybertot,2021-02-10 11:45:47,ppedrot,"It generates a pretty big file though. I am already not quite happy about the current size of the artifact zip file (about 60Mib) which could be reduced by processing locally the relevant generated data. I had to access this data on a crappy connection recently and had to wait for like 15 minutes before getting my hand on it, so it's not just theoretical concern."
776757406,13448,ybertot,2021-02-10 14:46:57,gares,"It generates a pretty big file though.\n\nI usually browse the artifact online, I'd like to just have a list of files with the higher diff in time printed for me. Even just the first 10 hits would be great."
776761955,13448,ybertot,2021-02-10 14:53:39,gares,"For instance, we could extend the env argument to a tuple containing said flags.\n\nAs a reader of the code, I would not be happy having a variable called env carrying something that is not just the env.\nAlso, following the same reasoninig, we would pack env sigma and allowed_reds into a single argument.\nSo I find this specific comment quite debatable (I know it's optional, but IMO also not really improving the patch)"
776763832,13448,ybertot,2021-02-10 14:56:27,ppedrot,"It's quite clear that semantically those flags are part of the environment, so it seems legit to put them there. Note that environments and evar maps cannot be mixed although there would be a lot of advantages in doing so, because one is reader-like and the other state-like."
776769987,13448,ybertot,2021-02-10 15:05:13,gares,"one is reader-like and the other state-like.\n\nNot sure it is the case in this piece of code, their are both reader like IMO."
812827878,13448,ybertot,2021-04-03 07:32:22,gares,I took the liberty to commit the suggested changes. If CI is green I will merge.
812864527,13448,ybertot,2021-04-03 13:18:25,gares,The good new is that CI is green. @ppedrot I pushed a commit addressing your comment.
814733964,13448,ybertot,2021-04-07 08:54:27,gares,@ppedrot how is your bench? Can I merge
814748688,13448,ybertot,2021-04-07 09:12:01,ppedrot,"Oops, forgot to start the bench in the end. It is now running here: https://gitlab.com/coq/coq/-/jobs/1157134531."
815514844,13448,ybertot,2021-04-08 07:16:38,gares,┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬──────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]   │   mem faults    │\n│                             │                         │                                       │                                     
815515802,13448,ybertot,2021-04-08 07:18:10,gares,"Given perennial embeds iris, I guess the last two lines are about the same slowdown, which happens to be the only relevant one.\nI won't have time to investigate @ppedrot but if you have a minute to run your script and see if it is just a few places that blow up, it would be great."
815687329,13448,ybertot,2021-04-08 11:29:18,ppedrot,Here is a list of the per-line stats with > 1s difference.\nhtml/coq-unimath/UniMath/SubstitutionSystems/SignatureExamples.v.html:614 1.00 47.92 48.91 (2%)\nhtml/coq-rewriter-perf-SuperFast/src/Rewriter/Rewriter/Wf.v.html:510 1.00 58.88 59.88 (2%)\nhtml/coq-unimath/UniMath/SyntheticHomotopyTheory/Circle2.v.html:443 1.01 56.12 57.13 (2%)\nhtml/coq-perennial/src/goose_lang/metatheory.v.html:42 1.02 5.65 6.67 (18%)\nhtml/coq-unimath/UniMath/SubstitutionSystems/ModulesFromSignatures.v.html:201 1.03 49.13
817336378,13448,ybertot,2021-04-11 16:43:49,gares,"I could find a hot spot in iris https://coq.gitlab.io/-/coq/-/jobs/1157134531/artifacts/_bench/html/coq-lambda-rust/theories/typing/own.v.html , the solve_type_proper thing seems considerably slower. @RalfJung any idea how this PR could affect it?"
817348282,13448,ybertot,2021-04-11 18:08:45,RalfJung,"I'm afraid I have no idea -- performance of Coq is pretty much entirely a black box to me.\nThat tactic boils down to something like a loop running the std++ f_equiv tactic, but also trying to apply some lemmas on each step -- so either part could be what has slowed down here."
817352745,13448,ybertot,2021-04-11 18:36:10,mattam82,I guess that has to do with searches for Proper? Maybe diffing the typeclasses search before and after could point to the problem.
853350329,13448,ybertot,2021-06-02 20:10:13,silene,What is the status of this pull request? Are we fine with the slowdown or should we just postpone the pull request?
853368710,13448,ybertot,2021-06-02 20:41:28,ppedrot,I'd personally recommend postponing until we find out if there is something that can be done to solve the slowdown.
912198636,13448,ybertot,2021-09-03 02:12:16,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
912350012,13448,ybertot,2021-09-03 08:13:19,Alizter,"Looks like this PR is heading to the graveyard, any plans to save it?"
912408155,13448,ybertot,2021-09-03 09:44:15,gares,"I've rebased this one, let's see how the bench goes"
912492134,13448,ybertot,2021-09-03 12:14:11,Janno,"One thing I have noticed is that stdpp sets decide and decide_rel set to simpl never but in practice clients rely on them being unfolded by simpl when used in if terms and when the underlying Decision instance reduces. Now, I am not sure if iris and perennial have a lot of case distinctions like that in their terms but it seems at least possible. If this patch makes it so that decide and decide_rel do not unfold any more then this could lead to much bigger terms in goals, potentially repeated re"
912495249,13448,ybertot,2021-09-03 12:19:06,gares,"Hum, if a term f is simpl never but it occurs in a match context, then it is reduced anyway. This is the desired spec, which makes the ""simpl never"" name badly chosen (by me), it should be documented as the expected behavior. (Opaque should do what you want).\nThis PR makes it so that if an occurrence of f is not reduced, then also an occurrence of d where Definition d := f. is not reduced either."
912497352,13448,ybertot,2021-09-03 12:22:47,Janno,"Ah, I see. Thanks for elaborating. That explains my confusion but sadly does not at all explain the slowdown."
915905558,13448,ybertot,2021-09-09 09:10:08,gares,┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │   mem faults    │\n│                             │                         │                                       │                                       
916058905,13448,ybertot,2021-09-09 12:46:14,gares,I suspect that the performance problem in lambda rust comes from an interactively Defined constant/instance which is less simplified than before and hence requires Coq's conversion check to run longer.
923183436,14903,ppedrot,2021-09-20 18:42:55,ppedrot,"FTR, in the recent years I've rewritten this PR from scratch a dozen of times already but always ended up banging my head against the walls in despair due to some subtle ""interactions"" with other parts of kernel / declare. All the nice cleanups in the latter component seem to have made this possible at last!"
923187651,14903,ppedrot,2021-09-20 18:49:34,SkySkimmer,Removal of the context set printing for monomorphic constants.\n\nOK for me
923694264,14903,ppedrot,2021-09-21 06:57:04,herbelin,"BTW, I may have already asked the question, but I don't remember the answer. What is still blocking for reducing template polymorphism to standard explicit polymorphism?"
923696708,14903,ppedrot,2021-09-21 07:01:37,herbelin,On a related notice (and not a request for this PR):\nSet Printing Universes.\nPrint id.\n(* id = fun (A : Type@{ID.u0}) (x : A) => x *)\nCheck Type@{ID.u0}.\n(* Type@{ID.u0} : Type@{ID.u0+1} *)\n\nShouldn't there be a warning at some point telling that the name ID.u0 is generated (hence fragile)?
923708872,14903,ppedrot,2021-09-21 07:20:06,ppedrot,"What is still blocking for reducing template polymorphism to standard explicit polymorphism?\n\nKernel-side, there is the Prop-collapse rule which will never be implemented, but its use is probably uncommon, except it is used pervasively in ssreflect (at least that was still the case last time I had a look). Outside of the kernel, a hell of a lot of code that depends on template polymorphism. A trivial patch like #14471 which is transparent from the point of view of typing rules has been blocked f"
923714280,14903,ppedrot,2021-09-21 07:28:20,ppedrot,"Shouldn't there be a warning at some point telling that the name ID.u0 is generated (hence fragile)?\n\nI'd be even more radical. The generation of universe names is quite costly, it often pops up at vo require time, and it's mostly useless. Since we shouldn't even be able to use the name, I'd rather have a structure that generalizes the dirpath representation in universes, i.e. simply print a unnamed universe as the name of the constant that generated it + its number. This would solve both issues"
923723893,14903,ppedrot,2021-09-21 07:43:58,ppedrot,@gares I'll need a bit of help to port the elpi plugin. It seems to be declaring a quoting mechanism but I am unsure what to do to adapt the return type.
923854046,14903,ppedrot,2021-09-21 10:37:17,SkySkimmer,PS metacoq is still failing
923855290,14903,ppedrot,2021-09-21 10:39:02,ejgallego,"Looks interesting @ppedrot , that was one of the things I had never understood. Do you guys know why these contexts where added in the first place?\nI have a few questions, but maybe would be quicker to discuss tomorrow in the call [given that we seems to have time]?"
923857841,14903,ppedrot,2021-09-21 10:42:18,coqbot-app,"Hey, I have detected that there were CI failures at commit 901fead without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 34bc846 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
923884346,14903,ppedrot,2021-09-21 11:20:06,herbelin,"Kernel-side, there is the Prop-collapse rule which will never be implemented\n\nYou mean that you are not confident that collapsing hProp in all universes is consistent? (Would you if we'd spend time at better understanding resizing and impredicativity?)\nOtherwise, that would be convenient and satisfactory to have Prop included in the quantification over universes (at least optionally)."
923890862,14903,ppedrot,2021-09-21 11:28:45,herbelin,"Shouldn't there be a warning at some point telling that the name ID.u0 is generated (hence fragile)?\n\nI'd be even more radical. The generation of universe names is quite costly, it often pops up at vo require time, and it's mostly useless. Since we shouldn't even be able to use the name, I'd rather have a structure that generalizes the dirpath representation in universes, i.e. simply print a unnamed universe as the name of the constant that generated it + its number. This would solve both issues"
923906514,14903,ppedrot,2021-09-21 11:51:21,ppedrot,"correctly register univ names\n\n@SkySkimmer I can put the printing removal first, but the other commit does not make sense alone. Best I can do is squash it with the one removing the monomorphic context from the entry. I didn't do it in the first place because I found it to be easier to review that way. Should I squash it nonetheless?"
923909174,14903,ppedrot,2021-09-21 11:54:58,SkySkimmer,"the other commit does not make sense alone\n\nIt does make sense, it's about passing the full (high level) entry to declare_univ_binders instead of looking up the univs from the global env."
923911490,14903,ppedrot,2021-09-21 11:58:01,ppedrot,"OK, let me try to do that then."
923946906,14903,ppedrot,2021-09-21 12:39:37,ppedrot,"@ejgallego it's not very complicated, but it's probably easier to talk about it viva voce tomorrow."
923952563,14903,ppedrot,2021-09-21 12:46:14,ppedrot,"hProp\n\n@herbelin please stop invoking an unrelated concept. @SkySkimmer has already argued with convincing evidence that Prop, SProp and hProp are different things and cannot be identified. Template poly is about Prop, and that's about it."
923959065,14903,ppedrot,2021-09-21 12:53:47,herbelin,"hProp\n\n@herbelin please stop invoking an unrelated concept. @SkySkimmer has already argued with convincing evidence that Prop, SProp and hProp are different things and cannot be identified. Template poly is about Prop, and that's about it.\n\n@ppedrot: I used the name hProp as a model of Prop. The question is the same using Prop. What is your model of Prop and why is it a problem for you (if ever it is a problem as you seem to say) to include it, at least optionally, in the quantification over uni"
923960056,14903,ppedrot,2021-09-21 12:54:57,ppedrot,"if ever it is a problem as you seem to say\n\nIt's not a problem, it's a POPL paper."
923965812,14903,ppedrot,2021-09-21 13:02:10,SkySkimmer,What's the prop collapse rule?
923967486,14903,ppedrot,2021-09-21 13:04:08,ppedrot,"@SkySkimmer this discussion is clearly veering out of topic. Anyways, I call ""prop collapse"" the fact that e.g. a template cartesian product type has sort Prop as soon as both its arguments have. I don't know whether this rule has an official name."
923971394,14903,ppedrot,2021-09-21 13:08:37,herbelin,"You mean ""Definitional Proof-Irrelevance without K""?\nDon't overestimate what I know of the paper! Some explicit information on what the paper implies on including Prop in the quantification over universes would help."
923978780,14903,ppedrot,2021-09-21 13:17:02,herbelin,I don't know whether this rule has an official name.\n\nStability of subsingletons by Cartesian product?
924024025,14903,ppedrot,2021-09-21 14:06:21,ppedrot,"@mattam82 after consultation of the local experts that happened to be around, it seems that the MetaCoq checker wrongly relies on the monomorphic field of the kernel entries to recompute the current set of global universes. This goes completely against this PR but I have no idea about how much work it would represent to get rid of this undesired specification. For the time being I commented out the failing test with a FIXME instead of trying to put too much effort into this. This is similar to w"
924034635,14903,ppedrot,2021-09-21 14:17:41,gares,@gares I'll need a bit of help to port the elpi plugin. It seems to be declaring a quoting mechanism but I am unsure what to do to adapt the return type.\n\nIs this still relevant?
924037038,14903,ppedrot,2021-09-21 14:20:16,ppedrot,"@gares I tried to port it bluntly by following the flow of type errors. It seems to work, though I don't know whether it's really correct. The previous state of the code didn't look very nice either so it's unlikely to be much worse. I wouldn't mind a bit of scrutiny..."
924714365,14903,ppedrot,2021-09-22 08:43:07,SkySkimmer,@coqbot merge now
924714396,14903,ppedrot,2021-09-22 08:43:10,coqbot-app,@SkySkimmer: Please take care of the following overlays:\n\n14903-ppedrot-split-mono-univ-entry.sh
924722650,14903,ppedrot,2021-09-22 08:54:10,ppedrot,"I thought we should have discussed it at the meeting today before merging, but well it does not hurt either that way..."
892381740,14644,jfehrle,2021-08-04 05:48:20,jfehrle,"@MSoegtropIMC Do you plan to try this sometime soon?  I've made several fixes and improvements, but it looks like I may need to rebase it before GitHub shows the build info on this page."
916560365,14644,jfehrle,2021-09-10 01:27:16,jfehrle,@ppedrot Give me a couple of days to fix the broken tests and do some minor cleanup before you dive too deeply into reviewing this.
922380436,14644,jfehrle,2021-09-18 22:06:35,jfehrle,@ppedrot Ready for review.
922705255,14644,jfehrle,2021-09-20 07:56:58,Zimmi48,"If you intend to squash your commit before the PR is merged, then you can safely ignore the linter failure. It is failing because some intermediate commit fails to build (with warnings as errors)."
923251728,14644,jfehrle,2021-09-20 20:01:01,jfehrle,"Yes, I expect to squash before merging."
938156155,14644,jfehrle,2021-10-07 21:06:53,jfehrle,"Updated to address a number of the comments, including more description of the API additions in DebugHook."
940604010,14644,jfehrle,2021-10-12 02:37:57,jfehrle,"Updated.  I made some improvements.\n\nI'd comment on them, but without documentation on the API it is hard to understand the intent.\n\nI added more comments.  Let me know what, if anything, is still unclear.\n\n\nisTerminal must go away; the debugger interface should be 100% backend agnostic. Current need is due to a deficiency in the protocol.\n\n\nI think you mean ""API"", not protocol.  ""backend"" usually refers to the server-side code but IIUC you're referring to differences between the various clients"
944520347,14644,jfehrle,2021-10-15 18:44:23,Alizter,"I've left some suggestions generated from my experience:\n\n#15032\n#15033\n#15034\n#15035\n#15036\n\nIn general the debugger seems to be working well. It was a bit counter intuitive to get started which I highlighted in #15032. I'm also not a fan of the debug highlight colour. Can we customise this or at least set the default to something less blue? It's currently very similar to highlighting text.\nMight it also be a good idea to have a help menu in the debug drop down, especially hinting that you need"
944769498,14644,jfehrle,2021-10-15 22:16:55,jfehrle,"Ali, I appreciate your comments and suggestions, but I'd like to keep the PR focused on the code review.  Please put your thoughts in issues rather than here (where they are likely to be lost).\n\nCan we customise this or at least set the default to something less blue? It's currently very similar to highlighting text.\n\nSee Edit / Preferences / Colors.  The setting will be persistent.\n\nMight it also be a good idea to have a help menu in the debug drop down, especially hinting that you need to do S"
949746974,14644,jfehrle,2021-10-22 15:43:18,SkySkimmer,Looks like this is waiting on reviewers @ejgallego @ppedrot
949947989,14644,jfehrle,2021-10-22 20:42:57,jfehrle,"Looks like this is waiting on reviewers @ejgallego @ppedrot\n\nThe three of us spent an hour chatting on Zulip Monday evening (your time).  Emilio and I followed up a bit more on Tuesday and Wednesday.  I'm currently waiting for a response to comments from ~15 hours ago.  The scope of the discussion is fairly small, centered on DebugHook.ml, but sometimes it's not so easy coming to agreement.  IIUC they're fine with the CoqIDE side changes--we did not discuss them.  If we haven't reached agreement"
950192620,14644,jfehrle,2021-10-23 18:20:56,jfehrle,"@ejgallego Continuing our discussion:\nThe DAP spec says that ""The ‘initialize’ request may only be sent once.""  This request generates the Initialized event you've been referring to.  This seems fatally inconsistent with your suggestion that breakpoints should be sent to Coq every time Coq enters the Ltac debugger (i.e. at every top-level call to an Ltac tactic).\nMy impression is that you've not looked too closely into the details of DAP.  It's one thing to review whether a spec appears to be a "
950373738,14644,jfehrle,2021-10-24 18:40:46,ejgallego,🙄
950374577,14644,jfehrle,2021-10-24 18:47:05,ejgallego,"Looks like this is waiting on reviewers @ejgallego @ppedrot\n\nAs of now my request for changes is still valid.\n\nThis seems fatally inconsistent with your suggestion that breakpoints should be sent to Coq every time Coq enters the Ltac debugger (i.e. at every top-level call to an Ltac tactic).\n\nThis is not my suggestion; when to send the breakpoints is open [DAP sends them on debugger initialization, which is a notion currently ltac_debug doesn't seem to have] . My request is that the breakpoints "
950530387,14644,jfehrle,2021-10-25 05:04:57,jfehrle,"when to send the breakpoints is open [DAP sends them on debugger initialization, which is a notion currently ltac_debug doesn't seem to have]\n\nI'm sure DAP also lets you update breakpoints in the middle of a debugging session.  The reason to send them at debugger initialization time is allow vsCode users to set breakpoints before starting the debugger.  For some languages, starting the debugger is an expensive operation (e.g. create a process, maybe do a make), but for Coq, starting the debugger"
951054089,14644,jfehrle,2021-10-25 15:39:02,ejgallego,"I'm sure DAP also lets you update breakpoints in the middle of a debugging session. The reason to send them at debugger initialization time is allow vsCode users to set breakpoints before starting the debugger. For some languages, starting the debugger is an expensive operation (e.g. create a process, maybe do a make), but for Coq, starting the debugger costs virtually nothing. I think ""initializing the debugger"" corresponds to starting the coqidetop process, not to entering Tacinterp.\n\nThe reas"
951355986,14644,jfehrle,2021-10-25 21:44:16,jfehrle,"For the XML protocol, all the calls in debug hook are just to be reified verbatim into the xml protocol.\n\nI don't understand what you mean by ""reified"" here."
951749180,14644,jfehrle,2021-10-26 09:22:18,ejgallego,"I don't understand what you mean by ""reified"" here.\n\nI mean they are translated ""automatically"", for example would we use ppx_deriving we could just do [@@deriving yojson] and get both Answer.t and Command.t serialized for the wire."
953068692,14644,jfehrle,2021-10-27 15:57:08,jfehrle,"@ppedrot As discussed, I pushed an experiment in an additional commit that identifies many of the places where the breakpoint information would need to be passed if it's not stored in a ref.  That approaches 200 places.  I started with Tactic_debug.debug_prompt, which is the routine that needs to check whether it's reached a breakpoint, then did a transitive closure.  The changes reach into the Ltac2 interpreter (e.g. need to preserve breakpoints definitions when Ltac1 calls Ltac2, which then ca"
953159217,14644,jfehrle,2021-10-27 17:38:23,coqbot-app,"Hey, I have detected that there were CI failures at commit 9b9c26a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 0354fc3 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
953501963,14644,jfehrle,2021-10-28 04:56:10,jfehrle,@ppedrot How do I get check_bpt to return a simple bool?  I get the error shown at the bottom.  Thanks.\nlet at_breakpoint tac =\n  let open Loc in\n  let check_bpt dirpath offset =\n    let open Proofview.NonLogical in\n      !breakpoints >>= fun breakpoints ->\n      return (BPSet.mem { dirpath; offset } breakpoints)   (* ERROR HERE *)\n  in\n  match CAst.(tac.loc) with\n  | Some {fname=InFile {dirpath=Some dirpath}; bp} -> check_bpt dirpath bp\n  | Some {fname=ToplevelInput;                 bp} -> chec
953908280,14644,jfehrle,2021-10-28 14:34:31,ejgallego,"Sorry for missing the discussion yesterday, one comment:\n\nI pushed an experiment in an additional commit that identifies many of the places where the breakpoint information would need to be passed if it's not stored in a ref.\n\nI don't think we should be doing this in this patch, IMHO, that's gonna be complex and not sure a good idea.\nMy request is that refs should not be exposed in the public API in debugHook, but I think it is fine and even reasonable to have tactic_debug store the debugger sta"
954112062,14644,jfehrle,2021-10-28 18:52:18,jfehrle,"If the breakpoints aren't stored in a ref, then we'd also have to figure out how to pass the breakpoints into the call to Proofview.NonLogical.run in Tacinterp.interp_gen.  If they're not a ref it means learning a great deal more about the interpreter code, refactoring it and more risk of introducing bugs.  I'd rather not take that now."
954135552,14644,jfehrle,2021-10-28 19:26:37,jfehrle,"BTW, when the debugger supports the Ltac2 interpreter, returning the stack and variables will require data from both interpreters when there's a call from Ltac1 to Ltac2 or vice-versa.  I'm sure we won't want the interpreters to share a common stack format.  We'll need a mechanism TBD to combine information from both interpreters to get the stack and variables for the GUI.  Both interpreters will need to expose some functions (i.e. not in DebugHook.Action) to make the info available.  I expect t"
954877085,14644,jfehrle,2021-10-29 16:21:37,ejgallego,I'm sure we won't want the interpreters to share a common stack format. We'll need a mechanism TBD to combine information from both interpreters to get the stack and variables for the GUI. Both interpreters will need to expose some functions (i.e. not in DebugHook.Action) to make the info available. I expect that trying to use the Action mechanism to communicate this info between interpreters will be unacceptably complex. Therefore I suggest we keep forward_get_stack and forward_get_vars as they
954968782,14644,jfehrle,2021-10-29 18:43:40,maximedenes,"My request is that refs should not be exposed in the public API in debugHook, but I think it is fine and even reasonable to have tactic_debug store the debugger state in a ref [privately]\n\nThat's literaly what was said during the Coq call, AFAICT :)"
954985492,14644,jfehrle,2021-10-29 19:11:39,jfehrle,"have tactic_debug store the debugger state in a ref [privately]\n\n\n\nThat's literaly what was said during the Coq call, AFAICT :)\n\nI don't recall hearing that in the meeting.  In the subsequent discussion here, @ppedrot wanted to put the breakpoints in TacStore.  Hopefully he will not object to storing it in a ref in tactic_debug.ml."
955016547,14644,jfehrle,2021-10-29 20:04:25,jfehrle,"No. The format exported to UI's should be the same regardless of the backend involved. On the contrary, they should not export anything, but you may need both debuggers to communicate at their gateway point, that's not to be exposed on debugHook\n\nOK, we'll perhaps continue discussion on this point in a future PR."
960352407,14644,jfehrle,2021-11-04 01:07:40,jfehrle,"@ejgallego Updated.  I changed the set breakpoint, get stack and get vars messages to go through DebugHook.Action and DebugHook.Answer as you asked.  This took significant time; I got stuck a few times.  I hope we're done now except for squashing."
963537813,14644,jfehrle,2021-11-08 20:18:04,jfehrle,ping @ejgallego
965040570,14644,jfehrle,2021-11-10 11:28:06,ejgallego,"ping @ejgallego\n\nSorry I missed this due to the terrible github interface and bug (*), will have a look ASAP.\n(*) I basically click on the PR updated notification, but I land on the buggy ""changes"" pages, so I need to get the full notification away :S"
965971188,14644,jfehrle,2021-11-11 04:10:17,jfehrle,"Updated and squashed.  I added the protocol documentation and moved set_break into tactic_debug, although I'll probably need to reverse the latter when we support additional interpreters such as Ltac2.  I believe I fixed the coqtail overlay, so this should be good to go once the tests pass, which I believe they will."
966036949,14644,jfehrle,2021-11-11 06:51:41,jfehrle,The two failing jobs appear unrelated.
967296952,14644,jfehrle,2021-11-12 17:40:55,jfehrle,"Thus this needs approval of @coq/ltac-maintainers and @coq/coqide-maintainers too.\n\n@ppedrot would you finish the review and be the assignee?  IIUC, in our Zoom conversation a couple weeks ago you had said the IDE changes were OK.  Let's try to get this completed for 8.15.  Thanks."
967334413,14644,jfehrle,2021-11-12 18:40:53,jfehrle,@ejgallego I updated dev/doc/changes.md.  Please take a look.
870477587,14573,SkySkimmer,2021-06-29 10:32:34,ejgallego,Forbig -> Forbid in the commit message.
871523364,14573,SkySkimmer,2021-06-30 15:52:47,coqbot-app,"Hey, I have detected that there were CI failures at commit 19b0e66 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit b69b918 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-mathcomp."
874091729,14573,SkySkimmer,2021-07-05 12:57:12,gares,overlay merged
874800678,14573,SkySkimmer,2021-07-06 14:17:15,ppedrot,"LGTM. I don't know how much we should document the error, it looks pretty self-explanatory to me. If nobody complains about it soon, I'll merge."
875055841,14573,SkySkimmer,2021-07-06 20:21:35,SkySkimmer,"@jfehrle it's not the variable getting renamed, it's the arguments of the variable. See the test."
875058752,14573,SkySkimmer,2021-07-06 20:26:33,jfehrle,"OK, how about ""Arguments of section variables such as @name may not be renamed.""?   ""have renamed arguments"" doesn't make much sense to me--IIUC the arguments cannot be renamed."
876477698,14573,SkySkimmer,2021-07-08 14:16:36,ppedrot,@jfehrle are you ok with the current phrasing?
877016062,14573,SkySkimmer,2021-07-09 08:32:53,ppedrot,"@SkySkimmer there is something wrong in the doc, refman is now broken on the CI."
847152157,14378,herbelin,2021-05-24 16:08:45,coqbot-app,"Hey, I have detected that there were CI failures at commit 108dc5d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ce69cf0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
847195803,14378,herbelin,2021-05-24 17:01:33,coqbot-app,"Hey, I have detected that there were CI failures at commit 108dc5d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ce69cf0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
847214320,14378,herbelin,2021-05-24 17:33:25,coqbot-app,"Hey, I have detected that there were CI failures at commit 108dc5d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ce69cf0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
847638929,14378,herbelin,2021-05-25 07:53:43,ppedrot,Adding a test is probably a good idea before I merge though.
848085880,14378,herbelin,2021-05-25 17:49:19,herbelin,Adding a test is probably a good idea before I merge though.\n\nThe problem is that I don't think we have a way to test parsing errors (they are not caught by Fail).
848245646,14378,herbelin,2021-05-25 20:41:37,ppedrot,"Oh, right. You could always write a misc test but it could legitimately be considered overblown. Let's merge as-is then."
909579425,14794,herbelin,2021-08-31 20:03:55,coqbot-app,"Hey, I have detected that there were CI failures at commit 829169c without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
803639070,13972,ejgallego,2021-03-21 18:40:28,ejgallego,"@MSoegtropIMC , see the above comments; there is not a clear choice here as every choice there has some downsides, personally I'd go for option 1 as this keeps more flexibility , tho doing 2 or 3 for example should also work as other protocols already require a printing call to set the formatting parameters anyways."
803639328,13972,ejgallego,2021-03-21 18:42:34,ejgallego,"For completeness, these are the parameters used in other protocols that expose rendering:\ntype format_opt =\n  { pp_format : print_format  [@default PpSer]\n  (** Output format ({e default PpSer}) *)\n  ; pp_depth  : int           [@default 0]\n  (** Depth  ({e default 0}) *)\n  ; pp_elide  : string        [@default ""...""]\n  (** Elipsis ({e default: ""...""}) *)\n  ; pp_margin : int           [@default 72]\n  (** Margin ({e default: 72}) *)\n  }"
803639828,13972,ejgallego,2021-03-21 18:45:45,MSoegtropIMC,"@MSoegtropIMC , see the above comments; there is not a clear choice here as every choice there has some downsides, personally I'd go for option 1 as this keeps more flexibility , tho doing 2 or 3 for example should also work as other protocols already require a printing call to set the formatting parameters anyways.\n\nI agree that it makes most sense to have a GUI option for this, as for all the other printing options. One could have a sub-menu with 10,20,50,100,200,500,1000,custom and ""custom"" s"
803641721,13972,ejgallego,2021-03-21 18:58:46,ejgallego,"I agree that it makes most sense to have a GUI option for this, as for all the other printing options. One could have a sub-menu with 10,20,50,100,200,500,1000,custom and ""custom"" set in the preferences.\n\nSounds good then, I'm a bit short of time this week due to deadlines and confs, feel free to push to this branch to implement the option, otherwise I'll take care when I can."
827700904,13972,ejgallego,2021-04-27 15:30:13,ejgallego,@coq/coqide-maintainers ping
830086562,13972,ejgallego,2021-04-30 13:14:35,Blaisorblade,Does this also address VsCoq (which has the same bug)?
830093814,13972,ejgallego,2021-04-30 13:26:48,MSoegtropIMC,"@herbelin : I would say an entry in the view menu, where all the other printing options are would be more consistent."
858591796,13972,ejgallego,2021-06-10 12:47:18,Zimmi48,Should this be considered at a discussion stage (in which case this PR should be turned into draft mode) or at a ready to merge stage (in which case @herbelin should probably self-assign)?
858595014,13972,ejgallego,2021-06-10 12:51:54,MSoegtropIMC,@Zimmi48 : I would say the Coq side of this (which is in this PR) is fine. What is missing is using this in CoqIDE. It would make sense to merge this as is - maybe VsCoq is quicker in picking it up. I have the CoqIDE side still on my ToDo list.
888946608,13972,ejgallego,2021-07-29 09:10:49,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
909185958,13972,ejgallego,2021-08-31 12:21:12,ppedrot,cc @maximedenes @fakusb could you prepare an overlay for vscoq so that when this get merged we don't get a flurry of people complaining that coq master is broken? Thanks.
909416795,13972,ejgallego,2021-08-31 17:00:00,ejgallego,Let me rebase just in case.
909660257,13972,ejgallego,2021-08-31 21:36:15,coqbot-app,"Hey, I have detected that there were CI failures at commit 2b18a1e without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-category_theory."
910147175,13972,ejgallego,2021-09-01 10:22:21,ppedrot,"CI failure unrelated, let's merge."
847185430,14377,herbelin,2021-05-24 16:43:44,coqbot-app,"Hey, I have detected that there were CI failures at commit 17889ff without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ce69cf0 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
851590699,14377,herbelin,2021-05-31 16:37:03,herbelin,@coq/extensible-syntax-maintainers : This is a 8.13 regression which should better be fixed earlier than later.
851958088,14377,herbelin,2021-06-01 09:00:21,ppedrot,"Given that this does not attract the masses, I am assigning."
865359534,14536,jfehrle,2021-06-21 21:32:25,coqbot-app,"Hey, I have detected that there were CI failures at commit 654617d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ff73469 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
865632084,14536,jfehrle,2021-06-22 06:21:19,ppedrot,"It depends quite a bit on implementation details of the IDLE callback, so ideally this should be tested on several machines / platforms."
865698986,14536,jfehrle,2021-06-22 08:12:13,silene,"In particular, we have to make sure that no Paint event happens before the Idle event can trigger the new Layout+Paint events. Otherwise we will just be regressing to the old bug, that is, a first layout is displayed and then a second one, which causes an ugly visual glitch."
866245220,14536,jfehrle,2021-06-22 18:50:05,jfehrle,"@ppedrot ideally this should be tested on several machines / platforms.\n\nI did the work on Ubuntu (on WSL).  I would be surprised if this doesn't work correctly on any other Linux variant.  If I'm able to build a native Windows version, I can try that, too.  Beyond those, I would need others to try it.  What other platforms would be most likely to behave differently?\n\nIt depends quite a bit on implementation details of the IDLE callback\n\nThe event loop uses a priority system, so I expect the beh"
866252005,14536,jfehrle,2021-06-22 19:00:36,jfehrle,"@silene Otherwise we will just be regressing to the old bug\n\nDo you mean #10578 or a different bug?  The original description in #10578 says:\n\nWhen starting Coqide, its layout is completely messed up until the first interaction of the user with the window (e.g., clicking the ""forward step"" button). Only the ""messages"" lower part is visible, neither script nor goals are visible. On 50 consecutive starts of Coqide, the initial layout was correct only three times.\n\nIn a couple dozen starts of CoqID"
866590807,14536,jfehrle,2021-06-23 07:12:59,silene,"Do you mean #10578 or a different bug?\n\nNo, I mean the fact that the window is painted twice in a quick succession with a layout change inbetween. You say that the ""flicker is quite minor"". But first, it is a subjective matter. What might seem minor to you might not be for other users. And second, it is obviously dependent on the operating system, window manager, refresh rate, etc. That is why it needs to be tested on various machines by various users.\nThe only difference between the original co"
866616375,14536,jfehrle,2021-06-23 07:54:54,jfehrle,Perhaps you would try the change and let us know whether it works for you.
867177190,14536,jfehrle,2021-06-23 21:34:30,jfehrle,The change works correctly on Windows.
867873731,14536,jfehrle,2021-06-24 18:49:13,jfehrle,"Somewhat off topic: I see that this callback in Coqide.build_ui is called a couple times a second even while the GUI is idle.  That seems pretty peculiar.  The size is always the same.\n  let _ = w#misc#connect#size_allocate\n            ~callback:(fun rect -> window_size := (rect.Gtk.width, rect.Gtk.height)) in"
868299231,14536,jfehrle,2021-06-25 07:53:10,herbelin,"I used the PR for a while yesterday and it apparently works well (on MacOS X).\n\nSomewhat off topic: I see that this callback in Coqide.build_ui is called a couple times a second even while the GUI is idle. That seems pretty peculiar. The size is always the same.\n  let _ = w#misc#connect#size_allocate\n            ~callback:(fun rect -> window_size := (rect.Gtk.width, rect.Gtk.height)) in\n\n\nAre you suspecting a gtk or lablgtk bug in size_allocate?\n\nPS: On MacOS, starting Coqide produces (3 copies "
868360405,14536,jfehrle,2021-06-25 09:18:46,herbelin,"About the flicker, I did not notice it at first, but if one wants to pay attention, it is visible."
868413551,14536,jfehrle,2021-06-25 10:51:13,ppedrot,@herbelin so you're actually saying that this PR is indeed introducing a regression?
868447534,14536,jfehrle,2021-06-25 11:58:01,herbelin,"introducing a regression?\n\nI would not say that. This ""flickering"" (*) can easily be interpreted as a step of the initialization.\n(*) Concretely, the ""flickering"" is that ""Welcome to CoqIDE, ..."" appears for a 10th of a second (or even shorter) in the middle of the whole coqide windows before reappearing in the message buffer.\nThe code in this PR seems less tricky to me than the previous one, so I would still lean to prefer this code."
868683990,14536,jfehrle,2021-06-25 16:26:17,jfehrle,"Are you suspecting a gtk or lablgtk bug in size_allocate?\n\nThe number of messages smells buggy, but I don't know that it's relevant to the flicker.  I often note unexpected behavior that's not immediately relevant--sometimes they become important clues later on.\nFWIW, I just tried this variation based on the doc.  With +21 there is a flicker and with +20 the allocation is 1 (i.e. not useful for setting the divider location).\n  let prio = Glib.(int_of_priority `HIGH_IDLE) + 21 in (* after sizing,"
868688029,14536,jfehrle,2021-06-25 16:33:07,herbelin,"Also, I've wondered how difficult it is to get changes into lablgtk3 or gtk3 itself (if I ever am tempted to try that). Do you have any experience doing that?\n\nI don't think I submitted to gtk3 yet (or I forgot). Lablgtk3 is maintained by relatively close colleagues, so it should be easy to propose changes."
869157582,14536,jfehrle,2021-06-27 12:58:35,ppedrot,"FTR, this PR works as intended on Debian amd64 + KDE + qt5-gtk. I wouldn't mind more users to test it, still."
942403501,14536,jfehrle,2021-10-13 15:10:28,jfehrle,"In a Coq Call discussion, we thought we couldn't be certain that this works for all possible cases.  Hard to prove a negative with testing."
642153946,12493,ppedrot,2020-06-10 17:32:02,Zimmi48,"There might be a fresh name issue, see the build error from HoTT:\n Error: The label Private_hint_local is already declared."
642154273,12493,ppedrot,2020-06-10 17:32:40,Zimmi48,The flag should probably be unset in the appropriate Compat file. (I'm surprised @JasonGross didn't say that already.)
642156112,12493,ppedrot,2020-06-10 17:36:15,JasonGross,I guess I'm not on top of my compat game today :-). Thanks for reminding!  Perhaps we should add a checkbox to the issue template for the compat files?
642187372,12493,ppedrot,2020-06-10 18:36:51,ppedrot,"The HoTT issue is due to the inclusion of a module after another one, and both define anonymous hints. Since the name is unique only locally to the module, boom! What should be done? Writing an overlay for HoTT, or try to put more data in the autogenerated hint name?"
642187974,12493,ppedrot,2020-06-10 18:38:09,Zimmi48,Perhaps we should add a checkbox to the issue template for the compat files?\n\nI dunno. This seems too infrequent to justify increasing the complexity of the template.
642204070,12493,ppedrot,2020-06-10 19:13:54,ejgallego,This whole thing seems quite hacky to me.\nIn particular there still are concerns about the scalability of the approach; how does this compare to the alternative for the Hints code of properly generalizing the hints; how's indexing supposed to work now if new head constants are added?\nToo many questions IMHO for 8.12 maybe.
642285228,12493,ppedrot,2020-06-10 21:47:38,Zimmi48,"If this is going to be leftover to 8.13, then IMHO we still need to remove the deprecation in 8.12."
642295571,12493,ppedrot,2020-06-10 22:14:49,ejgallego,"If this is going to be leftover to 8.13, then IMHO we still need to remove the deprecation in 8.12.\n\nNote that I'm just wary, but not essentially opposed to 8.12 for this. I understand the tradeoff is not easy here. My main worry points are:\n\nthis seems to break quite a few things in the CI, at this stage,\nit seems that the approach may need more testing / discussion,\nIMHO it adds a tad of technical debt [one quirk in exchange of another]\n\nOn the other hand, removing terms as hints should help w"
642502525,12493,ppedrot,2020-06-11 08:40:42,Zimmi48,"There are three errors in CI (CoLoR, bedrock2 and fiat-parsers). The error in CoLoR is the most surprising:\nThe field Private_hint_local_70c3eff3b9cc41a1_ is missing in\nCoLoR.Util.Relation.RelExtras.Eqset_def."
642512946,12493,ppedrot,2020-06-11 09:00:34,ppedrot,"The error in CoLoR is the most surprising\n\nI speculate that this corresponds to a hint added to a module type, but not to the corresponding module implementation.\nJudging from the level of breakage, this doesn't appear ready for 8.12. Since I really don't want to have to delay the hint database cleanup, can I advocate for a middle ground where the deprecation warning is turned into a pure warning recommending to replace non-global hints into definitions? At least this will provide an incentive t"
642515905,12493,ppedrot,2020-06-11 09:04:54,Zimmi48,"Since I really don't want to have to delay the hint database cleanup, can I advocate for a middle ground where the deprecation warning is turned into a pure warning recommending to replace non-global hints into definitions?\n\nSounds reasonable to me. Can you prepare the PR?"
642517133,12493,ppedrot,2020-06-11 09:06:38,Zimmi48,"Regarding this PR, since it now targets 8.13, note that you will have to go back to a standard changelog entry file and move the compat option to the Compat812.v file."
642698610,12493,ppedrot,2020-06-11 14:34:22,ejgallego,"can I advocate for a middle ground where the deprecation warning is turned into a pure warning recommending to replace non-global hints into definitions?\n\nYup, that seems like best option in view of the difficulties."
648234632,12493,ppedrot,2020-06-23 15:22:36,Zimmi48,"@ppedrot How far are we to merging this? If it is merged before the 8.12.0, then we can confidently adjust the deprecation warning in 8.12 to say ""in the next version, the behavior of terms declared as hints will change to generate a constant on the fly""."
648238543,12493,ppedrot,2020-06-23 15:28:47,ppedrot,"This is way too difficult, I believe. Color uses a pattern of declaring hints inside functors, which requires an involved patch. As for the other failures, I haven't had time to investigate yet, partly because they involve very complex automation.\nThe more I am fixing the hint implementation the more nonsensical it appears to me. I am definitely leaning towards the removal of the general term hint feature."
648245302,12493,ppedrot,2020-06-23 15:40:00,Zimmi48,Is there a middle-ground to be found where simple use cases would still work fine with Hint Resolve and more complex ones would need to be converted into a Definition (possibly a #[ hint(db) ] Definition to save an extra line)?
648247963,12493,ppedrot,2020-06-23 15:44:26,maximedenes,"simple use cases would still work fine with Hint Resolve and more complex ones would need to be converted into a Definition (possibly a #[ hint(db) ] Definition to save an extra line)?\n\nYuck, this sounds like a lot of complexity."
648266096,12493,ppedrot,2020-06-23 16:14:18,CohenCyril,What exactly is the problem with hints being arbitrary terms?
648268267,12493,ppedrot,2020-06-23 16:18:14,ppedrot,"What exactly is the problem with hints being arbitrary terms?\n\nThere are several issues. First, equality for terms is not unique and badly specified. Second, it forces to handle universe constraints and evars generated by non-global clenvs in a hackish (read unsound) way. Third, it forces to use an inefficient representation for hint databases."
648272768,12493,ppedrot,2020-06-23 16:26:40,gares,"I think the proxy constant is the right approach. I don't see the problem with functors, can you explain it?"
648276323,12493,ppedrot,2020-06-23 16:33:10,ppedrot,"@gares so, first, I have to generate somewhat unique names for hints, because there are people including two different modules declaring each a constr hint. So in order for this to work the hint name must depend on the current module name.\nBut, wait. In coq-color, one of the patterns is to declare a constr hint inside a functor type, to emulate partial application of hints. So, every time a module is defined with this type, it needs to declare the same proxy constants. Thus the constants must be"
648290583,12493,ppedrot,2020-06-23 16:59:53,ejgallego,"I am not very familiar with the current hints implementation, but indeed from a ""logic programming"" perspective this limitation seems pretty weird to me too. Is there a fundamental problem here in terms of equality / indexing, or it is just that the current design cannot accommodate it?"
648292362,12493,ppedrot,2020-06-23 17:03:11,ppedrot,"Is there a fundamental problem here in terms of equality / indexing\n\nThis is my belief. I still don't know how to properly define a map indexed by evar-containing terms, for instance."
648295627,12493,ppedrot,2020-06-23 17:09:34,ejgallego,"This is my belief. I still don't know how to properly define a map indexed by evar-containing terms, for instance.\n\nUsually you do so on the basis of the head constant, this can be used to build indexing tables indeed for ""hint"" application. IIANM there are many papers talking about this [I'd be happy to do a call and discuss]\nThe solution here is just a bit horrible IMHO, so indeed I dunno if we want to go this way, I can see already a few problems with this constant generation [pollution of bo"
648298579,12493,ppedrot,2020-06-23 17:15:15,ppedrot,"The solution here is just a bit horrible IMHO\n\nThe amount of non-global hints is rather low. I acknowledge that it's tiresome to have to work around it by hand, but it's not common. Meanwhile, the trade-offs are fairly clear to me. Declaring a constant is a fairly straightforward fix to satisfy everybody. The fact that color does strange things is not restricted to hints. I remember having had to port it several times due to reliance on a lot of hint-unrelated features that were frankly dubious."
648304790,12493,ppedrot,2020-06-23 17:26:52,ejgallego,"Umm, I'm still missing some stuff here, maybe I can try to ask my questions in the call if there is time."
648308287,12493,ppedrot,2020-06-23 17:33:37,maximedenes,"I still don't know how to properly define a map indexed by evar-containing terms, for instance.\n\nThis would be a nice topic for the Coq call IMHO."
648335704,12493,ppedrot,2020-06-23 18:22:43,gares,Evars do not exist outside a proof. Hints do. How are hints terms stored today? Are these terms globterms?
648342761,12493,ppedrot,2020-06-23 18:37:04,ppedrot,"@gares nope, they are essentially terms (clausenvs) + additional data to handle universe contexts."
648345095,12493,ppedrot,2020-06-23 18:41:46,ppedrot,"FTR, I forgot mentioning that, but there is already a similar mechanism to register hints. They are given a unique identifier which is constructed from the module name, but this suffers from a lot of drawbacks, including multiple registering of constants when using functors and the like. The only stable data in this case really is the kernel name of the corresponding global."
727909608,12493,ppedrot,2020-11-16 11:07:17,gares,Is this really a draft?
727922351,12493,ppedrot,2020-11-16 11:32:51,ppedrot,"Yes, because I still don't have ported coq-color to this new mechanism, and I am not sure how to do it actually."
853323789,12493,ppedrot,2021-06-02 19:24:37,silene,"As this is still a draft and has been for several releases, I am removing the milestone."
864447779,12493,ppedrot,2021-06-19 18:39:59,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color.\nHowever, you may want to wait until the pipeline for the base commit (533596b) finishes."
864450154,12493,ppedrot,2021-06-19 19:00:11,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color.\nHowever, you may want to wait until the pipeline for the base commit (533596b) finishes."
864452392,12493,ppedrot,2021-06-19 19:19:28,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color.\nHowever, you may want to wait until the pipeline for the base commit (533596b) finishes."
864454474,12493,ppedrot,2021-06-19 19:39:06,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864456410,12493,ppedrot,2021-06-19 19:57:06,JasonGross,@Zimmi48 do you know why the bot keeps posting here?  Does the pipeline keep updating every time a subpipeline completes and somehow the bot thinks the head pipeline is finished when it's not?
864456441,12493,ppedrot,2021-06-19 19:57:25,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864456480,12493,ppedrot,2021-06-19 19:57:50,JasonGross,@coqbot ci minimize
864456494,12493,ppedrot,2021-06-19 19:57:55,coqbot-app,"I have initiated minimization at commit 01ae7bf for the suggested targets ci-bedrock2, ci-color as requested.\nHowever, you may want to try again once the pipeline for the head commit (01ae7bf) finishes."
864457135,12493,ppedrot,2021-06-19 20:03:50,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/color/Util/Relation/RelExtras.v (from ci-color) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(**\nCoLoR, a Coq library on rewriting and termination.\nSee the COPYRIGHTS and LICENSE files.\n\n- Adam Koprowski, 2004-09-06\n- William Delobel, 2005-10-07\n\nThis file provides some basic results concerning relations that were\nmissing in the standard library.\n*)\n\nDeclare ML Module ""ltac_plugin""."
864458525,12493,ppedrot,2021-06-19 20:16:27,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864460664,12493,ppedrot,2021-06-19 20:37:16,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864462677,12493,ppedrot,2021-06-19 20:56:06,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864464595,12493,ppedrot,2021-06-19 21:15:11,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864466589,12493,ppedrot,2021-06-19 21:35:05,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864468355,12493,ppedrot,2021-06-19 21:54:56,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864470437,12493,ppedrot,2021-06-19 22:16:36,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864471925,12493,ppedrot,2021-06-19 22:36:03,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
833890006,14272,JasonGross,2021-05-06 21:46:16,jfehrle,Does this really need a changelog entry?\n\nNo.  In general we don't do changelog entries for documentation-only changes.  And also not worth it for tiny changes with low impact.\n\nI'm not sure how to get literal backticks in the doc\n\nDid you try \`?
850235245,14272,JasonGross,2021-05-28 08:08:22,ppedrot,"This is a trivial doc fix, so I am assigning."
850295752,14272,JasonGross,2021-05-28 09:46:21,coqbot-app,"Hey, I have detected that there were CI failures at commit 3454ede without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 2589a57 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
850363124,14272,JasonGross,2021-05-28 11:49:56,ppedrot,"CI failure unrelated, let's merge."
850365565,14272,JasonGross,2021-05-28 11:54:44,coqbot-app,"Hey, I have detected that there were CI failures at commit 3454ede without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 2589a57 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools.\nHowever, you may want to wait until the pipeline for the base commit (2589a57) finishes."
934464840,14986,SkySkimmer,2021-10-05 14:28:30,ppedrot,"We don't need that for meta-based clenv (see Clenv.clenv_environments) because the invariant is that we only call it on closed terms at toplevel. Are you saying that the evar instance can capture a rel somewhere? I don't understand how that can happen, except if setoid_rewrite is incorrectly calling the clenv on an open term."
934485146,14986,SkySkimmer,2021-10-05 14:53:37,SkySkimmer,"setoid_rewrite calls refresh_hypinfo \n  \n    \n      coq/plugins/ltac/rewrite.ml\n    \n    \n         Line 596\n      in\n      eb745e1\n    \n    \n    \n    \n\n        \n          \n           let refresh_hypinfo env sigma (is, cb) = \n        \n    \n  \n\n on constant Hfg : forall n m, n = n -> f n m = g n m\nmake_evar_clause is called on its type (which is closed) \n  \n    \n      coq/plugins/ltac/rewrite.ml\n    \n    \n         Line 503\n      in\n      eb745e1\n    \n    \n    \n    \n\n        \n          \n           "
934503106,14986,SkySkimmer,2021-10-05 15:16:05,ppedrot,"Ah, yes, obviously the problem is that the environment has an non-empty rel context..."
934574847,14986,SkySkimmer,2021-10-05 16:37:58,SkySkimmer,"No idea what's going on in fiat_parsers, cc @JasonGross"
934602337,14986,SkySkimmer,2021-10-05 17:12:33,coqbot-app,"Hey, I have detected that there were CI failures at commit e9af7c6 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit eb745e1 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_parsers."
934603069,14986,SkySkimmer,2021-10-05 17:13:30,SkySkimmer,@coqbot ci minimize
934603138,14986,SkySkimmer,2021-10-05 17:13:36,coqbot-app,"I have initiated minimization at commit e9af7c6 for the suggested target ci-fiat_parsers as requested.\nHowever, you may want to try again once the pipeline for the head commit (e9af7c6) finishes."
934652089,14986,SkySkimmer,2021-10-05 18:17:40,coqbot-app,"Hey, I have detected that there were CI failures at commit e9af7c6 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit eb745e1 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_parsers."
934948338,14986,SkySkimmer,2021-10-05 22:30:22,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 51KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
935375588,14986,SkySkimmer,2021-10-06 03:47:19,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 63KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
935796325,14986,SkySkimmer,2021-10-06 09:04:26,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 72KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
936327410,14986,SkySkimmer,2021-10-06 14:21:30,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 78KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
936984792,14986,SkySkimmer,2021-10-06 19:38:35,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 89KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
937358847,14986,SkySkimmer,2021-10-07 00:55:18,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 97KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
937481434,14986,SkySkimmer,2021-10-07 06:12:26,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 101KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/bui"
937704457,14986,SkySkimmer,2021-10-07 11:29:38,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 100KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/bui"
937973393,14986,SkySkimmer,2021-10-07 16:46:40,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 120KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/bui"
938187810,14986,SkySkimmer,2021-10-07 22:03:49,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 121KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/bui"
938273423,14986,SkySkimmer,2021-10-08 01:46:21,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 102KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" """
938600824,14986,SkySkimmer,2021-10-08 12:24:36,JasonGross,It seems that minimization has once again gotten stuck because of #14529 / #14541. I'll try to implement import absolutizing to fix this.
939201151,14986,SkySkimmer,2021-10-09 01:37:39,JasonGross,"I've hopefully fixed the import problem, let's try again (and wait another couple of days, because I'm too lazy to do manual minimization to take advantage of manual resumption).\n@coqbot ci minimize"
939201160,14986,SkySkimmer,2021-10-09 01:37:44,coqbot-app,I have initiated minimization at commit e9af7c6 for the suggested target ci-fiat_parsers as requested.
939242048,14986,SkySkimmer,2021-10-09 06:54:54,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 43KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
939287172,14986,SkySkimmer,2021-10-09 12:12:02,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 89KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
939331951,14986,SkySkimmer,2021-10-09 17:28:59,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 72KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
939371810,14986,SkySkimmer,2021-10-09 22:45:58,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 81KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
939402205,14986,SkySkimmer,2021-10-10 04:03:15,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 82KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
939437467,14986,SkySkimmer,2021-10-10 09:20:16,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 97KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
939493406,14986,SkySkimmer,2021-10-10 14:37:17,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 97KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
939542526,14986,SkySkimmer,2021-10-10 19:54:24,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 100KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/bui"
939596325,14986,SkySkimmer,2021-10-11 01:11:31,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 120KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/bui"
939722413,14986,SkySkimmer,2021-10-11 06:28:39,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 146KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/bui"
939945980,14986,SkySkimmer,2021-10-11 11:34:30,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 102KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" """
940059820,14986,SkySkimmer,2021-10-11 14:01:56,SkySkimmer,@JasonGross can you stop the minimization? I don't think it's going to be useful.
940074317,14986,SkySkimmer,2021-10-11 14:17:43,JasonGross,"Minimization finished, I'm a bit bummed that my fix didn't actually allow the minimizer to inline Fiat.Common.FMapExtensions, I'll have to look into that."
940400868,14986,SkySkimmer,2021-10-11 19:59:40,coqbot-app,"Hey, I have detected that there were CI failures at commit b541298 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 954deda succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_parsers."
940855315,14986,SkySkimmer,2021-10-12 09:57:21,SkySkimmer,Ready
941264369,14986,SkySkimmer,2021-10-12 18:22:04,ppedrot,What was the issue with fiat? Do you have a small reproducible example that could be added as a test?
941265238,14986,SkySkimmer,2021-10-12 18:22:49,SkySkimmer,Just the usual non monotony of ltac.
941266415,14986,SkySkimmer,2021-10-12 18:23:58,ppedrot,You mean that fiat was actively exploiting the bug?
941267573,14986,SkySkimmer,2021-10-12 18:25:19,SkySkimmer,More unconsciously working around it IMO
941524772,14986,SkySkimmer,2021-10-12 20:47:53,JasonGross,"The fiat issue was that, with this fix, there were no remaining goals after running a tactic, so the previous strategy of tac. handle goal that setoid_rewrite couldn't. tac. errors with ""no remaining goals""."
941547763,14986,SkySkimmer,2021-10-12 21:01:27,ppedrot,Bench just in case: https://gitlab.com/coq/coq/-/jobs/1670711344
941571204,14986,SkySkimmer,2021-10-12 21:14:53,SkySkimmer,"The fiat issue was that, with this fix, there were no remaining goals after running a tactic, so the previous strategy of tac. handle goal that setoid_rewrite couldn't. tac. errors with ""no remaining goals"".\n\nNot quite. The issue was that in a big match goal a branch that used to fail was now taken producing a garbage goal. By adding a solve in that branch the tactic then became more powerful."
942007192,14986,SkySkimmer,2021-10-13 07:30:05,ppedrot,@coqbot merge now
873725649,14598,herbelin,2021-07-05 01:58:42,coqbot-app,"Hey, I have detected that there were CI failures at commit d46ec0b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit d91d22d succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-argosy, ci-compcert."
873725914,14598,herbelin,2021-07-05 01:59:45,coqbot-app,"Hey, I have detected that there were CI failures at commit d46ec0b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit d91d22d succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-argosy, ci-compcert."
873885414,14598,herbelin,2021-07-05 07:47:49,JasonGross,@coqbot CI minimize
873885503,14598,herbelin,2021-07-05 07:47:59,coqbot-app,"I have initiated minimization at commit d46ec0b for the suggested targets ci-argosy, ci-compcert as requested."
873891188,14598,herbelin,2021-07-05 07:57:27,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/argosy/src/Spec/Proc.v (from ci-argosy) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/argosy/src"" ""RecoveryRefinement"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/argosy/vendor/classes/src"" ""Classes"" ""-R"" ""/github/workspace/builds/"
873894003,14598,herbelin,2021-07-05 08:00:56,ppedrot,"See also #6651. IIUC, this PR was reverted due to issues with backwards compatibility."
873899991,14598,herbelin,2021-07-05 08:07:56,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/compcert/common/Unityping.v (from ci-compcert) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-undeclared-scope"" ""-w"" ""-omega-is-deprecated"" ""-dump-glob"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/doc/Unityping.glob"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/lib"" ""compcert.lib"" ""-R"" ""/githu"
873926607,14598,herbelin,2021-07-05 08:45:09,herbelin,"See also #6651. IIUC, this PR was reverted due to issues with backwards compatibility.\n\nYes, I know well #6651 and I started from it. The differences are:\n\nThe PR applies to the syntax of both primitive and non-primitive projections indifferently in constr_expr and glob_term; its purpose is to get rid of the isproj encoding in CApp/CAppExpl, independently of the question of whether p.(x) was used for primitive or non-primitive records\nBecause it applies to both primitive and non-primitive projec"
873999415,14598,herbelin,2021-07-05 10:25:24,JasonGross,@coqbot ci minimize ci-compcert
873999441,14598,herbelin,2021-07-05 10:25:27,coqbot-app,I am now running minimization at commit d46ec0b on requested target ci-compcert. I'll come back to you with the results once it's done.
874009361,14598,herbelin,2021-07-05 10:41:26,coqbot-app,Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/compcert/common/Unityping.v (from ci-compcert) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* *********************************************************************)\n(*                                                                     *)\n(*              The Compcert verified compiler                         *)\n(*                                                                     
874301102,14598,herbelin,2021-07-05 19:48:38,herbelin,"@JasonGross: for the record, I could compile the minimized Compcert file with a few changes:\n\ninlining of the Compcert modules Coqlib (and Errors and Maps) in Module Import Coqlib. ... End Coqlib. (etc.), so that it is stand-alone (but a tar with several files and a makefile would have been as useful probably).\nan additional well-chosen Import List so that length is taken in List rather than in String"
874304312,14598,herbelin,2021-07-05 19:58:44,ppedrot,"Was someone thinking that adding an explicit Proj node in constr_expr and glob_term was a bad idea?\n\nAt least I believe it's a necessary change, but it must be performed as incrementally as possible. It's too easy to silently wreak havoc for users of primitive projections, so we must clearly delineate the potential effects on semantics that were not envisioned at the time of writing the patch."
874323850,14598,herbelin,2021-07-05 20:53:26,herbelin,"but it must be performed as incrementally as possible\n\nI moved the ""feature"" part in #14606. So, up to mistakes, this PR should now be restricted to only changing the isproj-based encoding of CApp/CAppExpl to explicit CProj/GProj/NProj constructors.\nIn particular, in this PR, NProj behaves like NApp and GProj like GApp (for instance, reversibility of parsing as in #6764 works).\nNote that the notation x.(f) when f is not registered as a (prim or not prim) projection, as in Check O.(S). fails thou"
874353053,14598,herbelin,2021-07-05 22:26:25,coqbot-app,"Hey, I have detected that there were CI failures at commit b5c563c without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8560c27 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-argosy."
874356482,14598,herbelin,2021-07-05 22:43:30,JasonGross,"@JasonGross: for the record, I could compile the minimized Compcert file with a few changes:\n\n@herbelin indeed, but the issue with the minimizer is that compcert dumps the .glob files in non-standard locations, and rebuilding the glob files clobbers the .vo files when it shouldn't.  I'll fix the minimizer to handle this.  Do you still have access to commit d46ec0b (the state of Coq when compcert failed to minimize)?  If so, could you force-push it to #14579 / JasonGross:test-coqbot-minimize so I"
874358102,14598,herbelin,2021-07-05 22:52:17,coqbot-app,"Hey, I have detected that there were CI failures at commit b5c563c without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8560c27 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-argosy."
874361068,14598,herbelin,2021-07-05 23:04:34,coqbot-app,"Hey, I have detected that there were CI failures at commit b5c563c without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8560c27 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-argosy."
874363414,14598,herbelin,2021-07-05 23:12:53,coqbot-app,"Hey, I have detected that there were CI failures at commit b5c563c without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8560c27 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-argosy."
874373198,14598,herbelin,2021-07-05 23:58:20,coqbot-app,"Hey, I have detected that there were CI failures at commit b5c563c without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8560c27 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-argosy."
874388415,14598,herbelin,2021-07-06 00:58:50,coqbot-app,"Hey, I have detected that there were CI failures at commit b5c563c without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8560c27 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-argosy."
875007024,14598,herbelin,2021-07-06 18:59:11,JasonGross,"Minimization of ci-compcert now works:\nMinimized File /github/workspace/builds/coq/coq-failing/_build_ci/compcert/common/Unityping.v (from ci-compcert) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-undeclared-scope"" ""-w"" ""-omega-is-deprecated"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/lib"" ""compcert.lib"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/c"
877019452,14598,herbelin,2021-07-09 08:38:45,Matafou,@herbelin can you tell where the exception in funin doccurs? I can't find it.
877025448,14598,herbelin,2021-07-09 08:48:20,herbelin,"It is in Glob_term_to_relation.build_entry_lc, corresponding to a situation term.(f args) args'. What do you think should be done?"
877028725,14598,herbelin,2021-07-09 08:53:27,Matafou,"Ho found it. I am not familiar with primitive projection but why do you think ""(Gapp (Gproj ...) ....)"" should not happen?"
877032883,14598,herbelin,2021-07-09 09:00:31,Matafou,I would say it needs a simple recursive treatment like at line 526.\nIt would probably need some testing.
877033224,14598,herbelin,2021-07-09 09:01:06,Matafou,l. 526 sorry.
877051724,14598,herbelin,2021-07-09 09:30:38,herbelin,I think I'm wrong. Something should be done. Would it be ok to do the same as in the Case case?
877058124,14598,herbelin,2021-07-09 09:42:00,herbelin,"Seeing your previous comments: what you propose is what I did on line 544 (for GProj not under a GApp). So doing the same under a GApp as in the Case case should do the same as what you said, right?\nWhere this code is used is a bit abstract to me. What would be a good example to test it?"
877059452,14598,herbelin,2021-07-09 09:44:22,herbelin,Or should I avoid calling combine_app which seems to do complex things?
877601644,14598,herbelin,2021-07-10 09:04:33,coqbot-app,"Hey, I have detected that there were CI failures at commit b8bac09 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8fd45c7 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-compcert."
877637448,14598,herbelin,2021-07-10 13:24:14,Matafou,"It is in Glob_term_to_relation.build_entry_lc, corresponding to a situation term.(f args) args'.\nWhat do you think should be done?\nSeeing your previous comments: what you propose is what I did on line 544 (for GProj\nnot under a GApp). So doing the same under a GApp as in the Case case should do the\nsame as what you said, right?\nOr should I avoid calling combine_app which seems to do complex things?\n\nProbably the call to combine_app is useless but not harmful: there will be one case to combine so"
877638345,14598,herbelin,2021-07-10 13:30:33,Matafou,"Where this code is used is a bit abstract to me. What would be a good example to test it?\n\n\nFTR: This function is the main function for building an inductive type equivalent to the function written by the user (which will be defined later in the Function process). More precisely builds the list of constructors types.\nAfter Function f ... this inductive type (and the proof that it is equivalent to the f) remains in the environment , it is named R_f. It is used in particular by the functional inve"
883427436,14598,herbelin,2021-07-20 14:12:38,herbelin,Waiting for some feedback before preparing overlays.
884048029,14598,herbelin,2021-07-21 09:41:28,gares,"For the files I'm supposed to review, it looks ok"
886059136,14598,herbelin,2021-07-24 14:10:59,gares,"The overlay for coq-elpi is now OK IMO. (but you need to rebase this PR, since another PR with an overlay was merged meanwhile)"
889267813,14598,herbelin,2021-07-29 15:58:57,ppedrot,"@herbelin can we try to get a clean CI? I don't remember if this was ever green, but if so it'd allow to merge quickly."
890146382,14598,herbelin,2021-07-30 20:49:41,ppedrot,"CI green. I'll leave a few more days for potential input before merging, but don't wait for too long if you want to comment here."
849142663,14395,SkySkimmer,2021-05-26 21:47:09,coqbot-app,"Hey, I have detected that there were CI failures at commit 4c10de2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ac9a310 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-unimath.\nHowever, you may want to wait until the pipeline for the base commit (ac9a310) finishes."
849410297,14395,SkySkimmer,2021-05-27 07:38:02,Zimmi48,"Given the choice to restrict the use of these flags inside sections (and the compatibility impact on Unimath), this PR should target 8.14 rather than 8.13.3. We should also update the documentation to mention this restriction."
850302132,14395,SkySkimmer,2021-05-28 09:56:54,SkySkimmer,"Let's also allow changing Kernel Term Sharing, maybe unimath will work."
850456201,14395,SkySkimmer,2021-05-28 14:24:54,ppedrot,Seems to have worked.
702346059,13126,herbelin,2020-10-01 19:20:48,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
702782951,13126,herbelin,2020-10-02 14:57:10,maximedenes,Wasn't the information already available after #7825?
702800289,13126,herbelin,2020-10-02 15:29:02,herbelin,"Wasn't the information already available after #7825?\n\nGood question.\nAfter looking at #7825, the answer is:\n\nthe aliased map there is tracking instanciations of the form ?x := ?y, and the map tells what is the current undefined incarnation of a defined evar that was yet undefined at some initial time of observation;\nthe equivalence classes here are partitioning the undefined evars involved in ?x == ?y pending conversion problems (i.e. equations that we are not able to ensure that they have eith"
716131789,13126,herbelin,2020-10-25 11:25:33,herbelin,Waiting for #13269 to first attach to the OccurCheck error in solve_simple_eqn a more precise meaning.
855963974,13126,herbelin,2021-06-07 14:11:28,coqbot-app,"Hey, I have detected that there were CI failures at commit e6e2f02 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ff1040b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-hott."
855965896,13126,herbelin,2021-06-07 14:13:47,JasonGross,@coqbot CI minimize
855965991,13126,herbelin,2021-06-07 14:13:54,coqbot-app,I have initiated minimization at commit e6e2f02 for the suggested target ci-hott as requested.
856089252,13126,herbelin,2021-06-07 16:36:22,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Spaces/Torus/TorusEquivCircles.v (from ci-hott) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-time"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hott/theories"" ""HoTT"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq"
857870352,13126,herbelin,2021-06-09 17:00:00,JasonGross,"Failure to fully minimize here is due to JasonGross/coq-tools#63, which I plan to fix soon"
858036203,13126,herbelin,2021-06-09 19:32:49,JasonGross,"Let's try minimizing again, now that the issue with vernac in proofs is fixed\n@coqbot ci minimize"
858036258,13126,herbelin,2021-06-09 19:32:54,coqbot-app,I have initiated minimization at commit e6e2f02 for the suggested target ci-hott as requested.
858038186,13126,herbelin,2021-06-09 19:36:00,coqbot-app,Error: Could not minimize file  (from ci-hott) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.7MiB file on GitHub Actions Artifacts under build.log)\nating: _build_ci/hott/theories/Spaces/Int.vos  \n  inflating: _build_ci/hott/theories/Spaces/Int/.Core.aux  \n  inflating: _build_ci/hott/theories/Spaces/Int/.Equiv.aux  \n  inflating: _build_ci/hott/theories/Spaces/Int/.LoopExp.aux  \n  inflating: _build_ci/hott/theories/Spaces/Int/.Spec.aux  \n  inflating: _build_ci/hott/theori
858043045,13126,herbelin,2021-06-09 19:43:45,JasonGross,Have the artifacts at the base job expired or something?
858044431,13126,herbelin,2021-06-09 19:46:07,JasonGross,I'm going to rebase and force-push
858079876,13126,herbelin,2021-06-09 20:30:32,JasonGross,@coqbot ci minimize ci-hott
858079912,13126,herbelin,2021-06-09 20:30:36,coqbot-app,I am now running minimization at commit 39ee7ec on requested target ci-hott. I'll come back to you with the results once it's done.
858125891,13126,herbelin,2021-06-09 21:50:58,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Spaces/Torus/TorusEquivCircles.v (from ci-hott) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hott/theories"" ""HoTT"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing"
858144215,13126,herbelin,2021-06-09 22:31:26,coqbot-app,"Hey, I have detected that there were CI failures at commit 39ee7ec without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 623a1af succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-hott."
858150804,13126,herbelin,2021-06-09 22:48:32,JasonGross,Success!  HoTT minimization worked!
905455333,13126,herbelin,2021-08-25 12:24:32,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
926291103,13126,herbelin,2021-09-24 02:13:22,coqbot-app,"This PR was not rebased after 30 days despite the warning, it is now closed."
926450078,13126,herbelin,2021-09-24 08:36:27,herbelin,Rebased and reopened as #14929.
848773080,14391,ppedrot,2021-05-26 13:32:26,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
848787675,14391,ppedrot,2021-05-26 13:51:37,SkySkimmer,@coqbot ci minimize fiat-crypto-legacy
848787686,14391,ppedrot,2021-05-26 13:51:38,coqbot-app,Error while attempting to find job minimization information:\nCould not find pipeline check for head commit 74506b3 and no summary was passed.  (Found checks: GitLab CI job library:ci-fiat_crypto_legacy (pull request))
848984491,14391,ppedrot,2021-05-26 17:41:13,ppedrot,Is the minimizer running or has it failed?
849011390,14391,ppedrot,2021-05-26 18:16:35,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
849046036,14391,ppedrot,2021-05-26 19:08:31,ppedrot,"@JasonGross I have found the issue. The problem is that fcl doesn't follow the Coq documentation. Equality schemes should manually define their subcomponents, but the previous code was lenient about that. It would silently generate the missing equality schemes, but now with these PRs these schemes are internal and thus prefixed with internal_ in their names. Since fcl explicitly refers to implicitly generated subschemes, it fails.\nThe precise root of the issue is in CommonSubexpressionEliminatio"
849062202,14391,ppedrot,2021-05-26 19:33:40,JasonGross,"Is the minimizer running or has it failed?\n\nIt failed to start because coqbot previous did not support starting minimization when the overall pipeline was still in progress.  I've since changed this, so it should work now if we try it again."
849077438,14391,ppedrot,2021-05-26 19:58:45,herbelin,"It would silently generate the missing equality schemes, but now with these PRs these schemes are internal and thus prefixed with internal_\n\nThere are already various problems with the late binding of previous scheme names. For instance, it is assumed that the name is necessarily of the form foo_beq. If there are several constants with such name, one is picked ""arbitrarily"". Also Scheme foo_scheme := Equality for foo. is broken (which maybe is good so that the scheme for foo is always foo_bweq -"
849084374,14391,ppedrot,2021-05-26 20:09:52,ppedrot,"is it crucial that the intermediate generated schemes have suffix internal_ rather than no particular suffix?\n\nNo, but it ensures better backwards compatibility. Some tests in the test-suite capture this naming scheme.\nRegarding the naming, the situation before the PR is quite dire, because it depends on the runtime reachability of declared schemes, which can influence the naming of the generated subschemes. After the PR, the naming is uniform, i.e. all subschemes are prefixed with internal_. My"
849757061,14391,ppedrot,2021-05-27 16:06:27,ppedrot,"CI is now green, FWIW."
850291228,14391,ppedrot,2021-05-28 09:38:50,SkySkimmer,@coqbot: merge now
825065261,14153,mrhaandi,2021-04-22 17:57:43,coqbot-app,"Hey, I have detected that there was a failure in project ci-mtac2 (for commit 7ddc0fe) without any failure in the test-suite.\nI checked that the corresponding job for the base commit d758cc5 succeeded. Now, I'm trying to extract a minimal test case from this so that it can be added to the test-suite. I'll come back to you with the results once it's done."
831050590,14153,mrhaandi,2021-05-03 06:28:04,mrhaandi,"@olaure01 would you take a look and see whether the changes are worthwhile?\nSomewhat related to this, I documented the removed anti-patterns in the wiki."
831053418,14153,mrhaandi,2021-05-03 06:35:16,olaure01,"@mrhaandi I have this on my todo list, but I will still not have time in the next two weeks unfortunately."
849495267,14153,mrhaandi,2021-05-27 09:46:08,mrhaandi,"There are small troubles with name mangling from a previous PR, it might be a good opportunity to correct them here.\n\n@olaure01 Which troubles/corrections do you mean? Is it related to your above suggestions?\n(also I now implemented your above suggestions, and rebased on current master)."
849621332,14153,mrhaandi,2021-05-27 13:09:43,olaure01,"Which troubles/corrections do you mean? Is it related to your above suggestions?\n\n@mrhaandi not at all. There are 3 places (if I remember well) where #13986 has introduced troubles with name mangling. You can locate them by adding Set Mangle Names. at the beginning of the file.\nSince this is not directly related to the present PR, I can do a separate one, but it seems we can save time by doing it here since the current PR already does quite a lot of cleaning."
849624992,14153,mrhaandi,2021-05-27 13:14:48,olaure01,There are 2 modified changelog files which looks a bit strange.
849644700,14153,mrhaandi,2021-05-27 13:41:12,mrhaandi,You can locate them by adding Set Mangle Names.\n\nFixed. Now List.v compiles with Set Mangle Names.\n\nThere are 2 modified changelog files which looks a bit strange.\n\nFixed. (I mistakenly touched the wrong changelog file).
849673425,14153,mrhaandi,2021-05-27 14:17:43,olaure01,"@mrhaandi Assuming CI goes well, you can squash and I will merge by Monday if there is no additional comment in the meantime."
849884831,14153,mrhaandi,2021-05-27 19:30:19,mrhaandi,"Assuming CI goes well, you can squash and I will merge by Monday if there is no additional comment in the meantime.\n\nAlright. Previous ci went through fine. I squashed the commits."
850265829,14153,mrhaandi,2021-05-28 08:57:49,coqbot-app,"Hey, I have detected that there were CI failures at commit f7621fe without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit b7d10ab succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
850272392,14153,mrhaandi,2021-05-28 09:08:49,coqbot-app,"Hey, I have detected that there were CI failures at commit f7621fe without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit b7d10ab succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
850382256,14153,mrhaandi,2021-05-28 12:26:02,coqbot-app,"Hey, I have detected that there were CI failures at commit f7621fe without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit b7d10ab succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
850448972,14153,mrhaandi,2021-05-28 14:14:00,coqbot-app,"Hey, I have detected that there were CI failures at commit f7621fe without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit b7d10ab succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
851287107,14153,mrhaandi,2021-05-31 07:55:32,olaure01,@coqbot: merge now
926503613,14924,ppedrot,2021-09-24 10:00:58,SkySkimmer,@coqbot ci minimize bedrock2
926503622,14924,ppedrot,2021-09-24 10:00:58,coqbot-app,I was unable to minimize any of the CI targets that you requested.\nci-bedrock2 was not minimized because no error message was found
926559733,14924,ppedrot,2021-09-24 11:42:13,ppedrot,"@SkySkimmer I can't reproduce the bedrock2 failure locally. I think it's just an OOM that was barely passing before, but now consumes slightly more memory and thus dies."
926560324,14924,ppedrot,2021-09-24 11:43:23,SkySkimmer,Are you benching this btw?
926569088,14924,ppedrot,2021-09-24 11:59:26,ppedrot,Bench: https://gitlab.com/coq/coq/-/jobs/1620249506
926570130,14924,ppedrot,2021-09-24 12:01:20,ppedrot,"Note that looking a bit at bedrock2 showed me that Print Assumptions is completely crazy, since it does not cache the contents of the body of a global. This is not specific to this PR, it can already be very slow on master since that means we keep fetching and substituting huge proof terms for nothing. Maybe this patch is making it marginally worse but there is a clear and small unrelated fix that I'll submit separately.\nEDIT: see #14931."
926574698,14924,ppedrot,2021-09-24 12:09:06,SkySkimmer,"We don't bench bedrock2 anyway (the bench claims to do it, but it's actually a tiny subset as you can tell by it taking less than 2min)"
926597864,14924,ppedrot,2021-09-24 12:47:58,ppedrot,"Wait a sec, I think I know why bedrock2 explodes midflight. I've just realized that I forgot to perform hashconsing on opaque proofs in the upper layers. That probably explains why the bench is faster. Out of curiosity I'll still let it run to completion before fixing the PR."
926636652,14924,ppedrot,2021-09-24 13:45:00,gares,General question: in the old API the safe_env opaque type had a method to ensure that all delayed proofs were there and checked.\nThis API was part of the TCB.\nI can't find the corresponding entry in the TCB. Can you point it out?
926662135,14924,ppedrot,2021-09-24 14:17:11,ppedrot,"I can't find the corresponding entry in the TCB. Can you point it out?\n\nIt didn't move, it's still Safe_env.is_joined_environment."
926735470,14924,ppedrot,2021-09-24 15:51:55,gares,"It didn't move, it's still Safe_env.is_joined_environment.\n\nGreat, but that one is not called (in master) whenever we save a .vo library to disk (while the one you moved to upper layers yes). IMO this one should be called, that is the tool that saves a .vo should ask the kernel if the env is joined."
926743569,14924,ppedrot,2021-09-24 16:02:14,ppedrot,I've added a check that the env is joined in the commit about assertions.
926780112,14924,ppedrot,2021-09-24 16:54:47,ejgallego,"Bench: https://gitlab.com/coq/coq/-/jobs/1620249506\n\nGiven this, having a flag -i-dont-care-about-memory-but-i-do-care-about speed could be very interesting for some users."
926872725,14924,ppedrot,2021-09-24 19:32:57,ppedrot,Bench with hashconsing: https://gitlab.com/coq/coq/-/jobs/1621402930
926886583,14924,ppedrot,2021-09-24 19:59:56,gares,@ppedrot I don't get why odd-order gets 16% more memory use without hashconsing. I thought we did hashcons only opaque terms (and for sure there is no extraction or Print which loads them).
926890683,14924,ppedrot,2021-09-24 20:07:52,ejgallego,@ppedrot I don't get why odd-order gets 16% more memory use without hashconsing. I thought we did hashcons only opaque terms (and for sure there is no extraction or Print which loads them).\n\nCould indeed this be due to actually 16% sharing inside opaque proofs?
926894426,14924,ppedrot,2021-09-24 20:15:01,gares,"That could be (just holding them until the file ends). If so, the option ""-dont-store-opaque-proofs"" would be even better."
926943681,14924,ppedrot,2021-09-24 22:05:46,ppedrot,"I don't get why odd-order gets 16% more memory use without hashconsing.\n\n@gares I am not sure what seems surprising to you there. Were you expecting less or more memory use without hashconsing? Obviously since we don't hashcons proof terms take more space in memory, leading to the observed increase..."
927133545,14924,ppedrot,2021-09-25 15:01:38,gares,"In general I'm puzzled the overhead is so little, so why bother?!\nI'm puzzled to see it in the OOthm, maybe there proofs are super large but then.. only 15% is saved by maximal sharing? Again why bother?!\nMoreover unimath gets a 50% extra space, but IIRC it has no opaque proofs. Do we share transparent terms?\nIt is OT for this PR, but these numbers don't make much sense to me. It seems a feature one may opt in, but not a sane default."
927135865,14924,ppedrot,2021-09-25 15:19:01,SkySkimmer,"In general I'm puzzled the overhead is so little, so why bother?!\n\nThere is also vo size\n\nMoreover unimath gets a 50% extra space, but IIRC it has no opaque proofs. Do we share transparent terms?\n\nhttps://github.com/UniMath/UniMath/search?q=qed"
927271005,14924,ppedrot,2021-09-26 09:40:12,ppedrot,We do share transparent proofs as well.
927272224,14924,ppedrot,2021-09-26 09:46:37,ppedrot,"Also note that the memory measure of the process is not reliable, it's common to see it vary up to 30% without any good reason. We should use instead the informations coming directly from the GC as per the Print Debug GC command."
928294390,14924,ppedrot,2021-09-27 21:24:45,ppedrot,@gares comments addressed.
928956402,14924,ppedrot,2021-09-28 08:07:48,gares,I will look into the async failure.\nI need a review from @coq/kernel-maintainers.\nI'm running a bench https://gitlab.com/coq/coq/-/jobs/1627376688
928961631,14924,ppedrot,2021-09-28 08:14:18,ppedrot,"The async failure is unrelated, it's been introduced by #14758. Also, we already had a bench there: #14924 (comment), there was no code change in between."
928967424,14924,ppedrot,2021-09-28 08:21:13,gares,"The async failure is unrelated, it's been introduced by #14758.\n\nYou mean that the PR adds a test with the case where processing proof in async mode (adding late univ constraints from opaque body) does matter for TC search? If so, @SkySkimmer you should add -async-proofs off to bug_14734.v (or even better implement assert_fails_univ_async)."
928976295,14924,ppedrot,2021-09-28 08:33:22,ppedrot,"You mean that the PR adds a test with the case where processing proof in async mode (adding late univ constraints from opaque body) does matter for TC search?\n\nErm, actually yes.\n\nor even better implement assert_fails_univ_async\n\nCouldn't we also have a few vernacular commands that act as write barriers and attributes to control finely the deferring of Qed-opaque proofs? For instance I started implementing a mechanism for private monomorphic universes and for efficient document processing it'd b"
930946251,14924,ppedrot,2021-09-30 07:39:31,ppedrot,@gares I've hardened the opaque filling API as you requested.
933504080,14924,ppedrot,2021-10-04 13:47:38,ppedrot,"@gares Thanks a lot, it seems this is fine now. I think that the STM API could be simplified quite a bit now that the futures are only in the upper layers, allowing for finer-grained invariants (and lesser reliance on hacks like fix_exn, no offense). But for now I think this PR can be considered ready."
933515008,14924,ppedrot,2021-10-04 13:59:57,gares,"Great! But I don't see how to make the fix_exn hack less hackish, so suggestions are welcome. If you hoist a thunk out of a context with try - with - in it, then you have to close it w.r.t. that. I can't think of a safe (by typing) and not heavy (monad heavy) solution. Maybe fix_exn:exn -> exn was a bit too blunt, but quite expressive ;-)"
933519159,14924,ppedrot,2021-10-04 14:03:59,ppedrot,@gares Futures are much less interesting now since we're basically only considering a fixed code path in vernac/declare. We could simply defunctionalize the beast and reify the possible interactions as a nice AST. The only reason we had higher-order functions was to hide the horrible process state from the kernel.
933605377,14924,ppedrot,2021-10-04 15:35:04,gares,"Oh, I see. But then Opaques should be even higher, in the DM (the STM for now), not in vernac."
933778979,14924,ppedrot,2021-10-04 19:15:57,ppedrot,"CI green, AFAIU this is ready to merge."
934175556,14924,ppedrot,2021-10-05 08:16:33,gares,@coqbot merge now and let's party!
934175598,14924,ppedrot,2021-10-05 08:16:36,coqbot-app,@gares: Please take care of the following overlays:\n\n14924-ppedrot-move-opaque-out-of-kernel.sh
850177001,14401,MSoegtropIMC,2021-05-28 06:30:36,MSoegtropIMC,"@koraa : fyi: the change log entry for your PR #14087 ended up in a wrong folder (which is fixed by this PR). Do you remember how you created it? I guess you followed some documented procedure and we might want to fix this documentation. I darkly remember that I did the same once, so I guess it is somewhere written down that it should be done like this."
850214752,14401,MSoegtropIMC,2021-05-28 07:33:50,Zimmi48,"I guess you followed some documented procedure and we might want to fix this documentation.\n\nAFAIK, the documentation only mentions the script that should be used to generate changelog entries."
850220173,14401,MSoegtropIMC,2021-05-28 07:43:06,MSoegtropIMC,"AFAIK, the documentation only mentions the script that should be used to generate changelog entries.\n\nYes I know, the documentation here (https://github.com/coq/coq/tree/master/doc/changelog#unreleased-changelog) is clear, but as I said, afair I did exactly the same thing once and really wonder how it came to that. I suspect there is some outdated alternate documentation which google leads to or whatever."
850274848,14401,MSoegtropIMC,2021-05-28 09:12:54,coqbot-app,"Hey, I have detected that there were CI failures at commit 81fd007 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit b7d10ab succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
850338635,14401,MSoegtropIMC,2021-05-28 11:03:26,koraa,I basically just followed the script and then had to fix it up manually later…\n./dev/tools/make-changelog.sh\nThe script is exceedingly hard to read but in lines [8…12] there are multiple candidates which might potentially add an extra directory. Maybe a combination of 8 + 12 (asking for the title of the pr and then determining it using git rev-parse?)
850366417,14401,MSoegtropIMC,2021-05-28 11:56:17,SkySkimmer,Yeah if the branch name contains a slash (as #14087 did) the script would misbehave.
855880283,14462,ppedrot,2021-06-07 12:23:56,ppedrot,Bench: https://gitlab.com/coq/coq/-/jobs/1324044303\n┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │   mem faults    │\n│                             │                         │                           
865421842,14462,ppedrot,2021-06-21 23:54:22,coqbot-app,"Hey, I have detected that there were CI failures at commit d8029bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 76e20b5 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
865432124,14462,ppedrot,2021-06-22 00:23:42,coqbot-app,"Hey, I have detected that there were CI failures at commit d8029bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 76e20b5 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
869468480,14462,ppedrot,2021-06-28 08:07:51,ppedrot,Rerunning a bench on the noisy coqprime to check whether the slowdown was real: https://gitlab.com/coq/coq/-/jobs/1381540510.
869523705,14462,ppedrot,2021-06-28 09:22:42,SkySkimmer,┌──────────────┬───────────────────────┬─────────────────────────────────────┬─────────────────────────────────────┬───────────────────────┬─────────────────┐\n│              │     user time [s]     │             CPU cycles              │          CPU instructions           │ max resident mem [KB] │   mem faults    │\n│              │                       │                                     │                                     │                       │                 │\n│ package_name │    NEW
869529962,14462,ppedrot,2021-06-28 09:31:04,ppedrot,Either coqprime is very noisy or this PR does weird stuff.
873958285,14462,ppedrot,2021-07-05 09:26:23,ppedrot,This needs an assignee.
874181635,14462,ppedrot,2021-07-05 15:08:14,herbelin,coqprime manipulates very large integers so is probably pretty sensitive to cache/memory issues (???).\nLet me assign since I'm currently around.
875430426,14462,ppedrot,2021-07-07 09:06:50,herbelin,@coqbot: merge now
864571604,14528,ppedrot,2021-06-20 15:30:12,ppedrot,"@silene this patch could even go into 8.14 in order not to delay the code removal it permits, but I would perfectly understand if you didn't want it to."
864571668,14528,ppedrot,2021-06-20 15:30:41,ppedrot,Also ping @mattam82 for an opinion on the matter.
864818314,14528,ppedrot,2021-06-21 08:02:21,herbelin,"In passing, I'd be interested on knowing the plans of the team about automation in general. Do we mostly aim to maintain what exists or are there plans to get closer to our ""dreams""?"
864838643,14528,ppedrot,2021-06-21 08:28:25,Zimmi48,"There's a lot of work going on by @mattam82 to improve automation supported by typeclasses eauto. AFAICT, the plans of the team are to focus the efforts there, by making programmable automation more and more controllable."
864891367,14528,ppedrot,2021-06-21 09:41:14,herbelin,"Thanks for the answer.\nMore generally, I had typically general questions about things like:\n\nsupport for destructing tuples in hypotheses in the variants of eauto\ncombination of rewriting and eauto\ncombination of eauto and tactics such as congruence, or ring, or lia\n\nI wanted to know if someone had projects in these directions."
864906703,14528,ppedrot,2021-06-21 10:04:43,mattam82,"I'm fine with this deprecation. Indeed most of it is available through typeclasses eauto.\nAbout Hugo's questions:\nMore generally, I had typically general questions about things like:\n\n\nsupport for destructing tuples in hypotheses in the variants of eauto\nOne can have an Hint Extern for that. It should probably be marked as an invertible rule so we don't backtrack on it. Hint Extern When should be enough to handle that.\n\n\ncombination of rewriting and eauto\nOne can also use Hint Extern for that. I"
864914933,14528,ppedrot,2021-06-21 10:16:39,herbelin,"Thanks for the answer. Then, is it a correct feeling that the Hint Extern technique is for relatively knowledgeable users? Or conversely, is there some collection of Hint Extern that should be made available out of the box without having to think (the same way as a collection of Hint Resolve and hint bases are provided - even if there are some mistakes in the building of these bases). [The question is quite naive. Automation is important but I know little about it. The question is more to have a"
864973815,14528,ppedrot,2021-06-21 11:57:00,MSoegtropIMC,"Unfortunately I am a bit out of the auto proof business right now - I am mostly working on numerics these days, which requires different techniques, mostly specialized decision procedures I write in Ltac2 and sometimes in Mtac2. There is not much to gain from auto in this domain. My tactics typically make heavy use of reliable building blocks like lia, ring, interval and gappa and I very much appreciate the increase of robustness and flexibility in these.\nRegarding hint extern: I used this exten"
865151008,14528,ppedrot,2021-06-21 15:57:14,silene,"this patch could even go into 8.14\n\nThere is a changelog entry, so backporting it would be painful."
865152056,14528,ppedrot,2021-06-21 15:58:47,ppedrot,@silene As you wish.
865202651,14528,ppedrot,2021-06-21 17:09:00,Zimmi48,"@silene If that's the only issue, then you can ask @ppedrot to move the changelog entry to the appropriate location in the 8.14 release notes (that works only if the patch is then guaranteed to go in 8.14+beta1)."
865213661,14528,ppedrot,2021-06-21 17:25:13,ppedrot,@silene ready to do that if you give your green light.
865655958,14528,ppedrot,2021-06-22 07:06:03,silene,Okay then.
865703712,14528,ppedrot,2021-06-22 08:18:35,ppedrot,"@silene done. Can a maintainer quickly assign and merge once the CI is green, so as to make the life of our beloved RM easier?"
865837984,14528,ppedrot,2021-06-22 09:50:06,herbelin,"Metacoq is failing everywhere, for apparently unrelated reasons.\nPing me, if I forgot to merge (actually it will be ok if @silene or @SkySkimmer happens to pass here and merge it)."
865903637,14528,ppedrot,2021-06-22 11:29:28,coqbot-app,"Hey, I have detected that there were CI failures at commit a4066da without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 76e20b5 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
865908745,14528,ppedrot,2021-06-22 11:37:54,coqbot-app,"Hey, I have detected that there were CI failures at commit a4066da without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 76e20b5 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
865926723,14528,ppedrot,2021-06-22 12:07:00,ppedrot,"metacoq is broken on master, I am trying to fix it with input from some of its devs but it ain't easy. I think this PR can be safely merged. The only important thing is the test-suite and the linter, since the PR removing the tactic had a green CI two days ago."
866676495,14528,ppedrot,2021-06-23 09:20:54,ppedrot,@herbelin this is ready to merge.
866887145,14528,ppedrot,2021-06-23 14:28:00,herbelin,@ppedrot: Would you mind if I push my + nitpicking on top of the PR before merging?
866896085,14528,ppedrot,2021-06-23 14:39:01,ppedrot,"@herbelin go ahead, but this needs to be merged quickly since this must go in 8.14."
866896625,14528,ppedrot,2021-06-23 14:39:40,ppedrot,"(@herbelin Please don't put a section though, this is complexifying the code and might have weird side-effects.)"
866909320,14528,ppedrot,2021-06-23 14:54:44,ppedrot,@herbelin you messed up the rebase it seems.
867677957,14528,ppedrot,2021-06-24 14:22:18,herbelin,UniMath is failing elsewhere too. I suppose we don't have to care.\n@coqbot: merge now
853451185,13269,herbelin,2021-06-02 23:40:13,coqbot-app,"Hey, I have detected that there were CI failures at commit a4e4ed0 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ff1040b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-hott."
853488630,13269,herbelin,2021-06-03 01:20:16,JasonGross,@coqbot CI minimize
853488687,13269,herbelin,2021-06-03 01:20:24,coqbot-app,I have initiated minimization at commit a4e4ed0 for the suggested target ci-hott as requested.
853490149,13269,herbelin,2021-06-03 01:24:50,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Spaces/Circle.v (from ci-hott) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; mode: visual-line -*- *)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire HoTT.Basics.Notations.\nRequire HoTT.Basics.Logic.\nRequire HoTT."
853645761,13269,herbelin,2021-06-03 07:29:32,herbelin,"Thanks @JasonGross and @Zimmi48, that's very cool and a time-saving to have these minimized examples!"
853732072,13269,herbelin,2021-06-03 09:33:44,Zimmi48,Thanks @herbelin! Do not hesitate to copy-paste this test case in the test-suite since it is reasonably small and shows a limitation of the current test-suite.
853847869,13269,herbelin,2021-06-03 12:57:54,JasonGross,"Unfortunately in this case the minimizer did not work well (note all the Require at the top and the comments).  I believe the issue is that it's not picking up -noinit and -indices-matter correctly, so I'm going to try to fix those later today sand then hopefully we'll have an actually minimized test-case."
853896210,13269,herbelin,2021-06-03 14:05:24,JasonGross,"Should be fixed now, let's try again.  @coqbot ci minimize"
853896283,13269,herbelin,2021-06-03 14:05:31,coqbot-app,I have initiated minimization at commit a4e4ed0 for the suggested target ci-hott as requested.
854117817,13269,herbelin,2021-06-03 19:22:28,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Spaces/Circle.v (from ci-hott) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-time"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hott/theories"" ""HoTT"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hott/contrib"" ""HoTT.Contrib"" ""-Q"" ""/github/w"
854126752,13269,herbelin,2021-06-03 19:37:52,JasonGross,And now we encounter the limitations of 6-hour timeouts.  I wonder if there's a way to make it easy to resume minimization...
855764232,13269,herbelin,2021-06-07 09:22:19,ppedrot,"Regardless of the backwards compatibility issues, this will need a bench when HoTT is fixed."
864662969,13269,herbelin,2021-06-21 01:38:37,JasonGross,"Now we have auto-resumption, let's try minimization again\n@coqbot ci minimize"
864662989,13269,herbelin,2021-06-21 01:38:40,coqbot-app,I have initiated minimization at commit a4e4ed0 for the suggested target ci-hott as requested.
864663684,13269,herbelin,2021-06-21 01:41:42,coqbot-app,Error: Could not minimize file  (from ci-hott) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.7MiB file on GitHub Actions Artifacts under build.log)\n_ci/hott/theories/Spaces/Cantor.vos  \n  inflating: _build_ci/hott/theories/Spaces/Card.v  \n  inflating: _build_ci/hott/theories/Spaces/Circle.glob  \n  inflating: _build_ci/hott/theories/Spaces/Circle.v  \n  inflating: _build_ci/hott/theories/Spaces/Circle.v.timing  \n   creating: _build_ci/hott/theories/Spaces/Finite/\n  inflat
864664427,13269,herbelin,2021-06-21 01:44:51,JasonGross,"This needs rebasing for minimization to be re-run, since the base commit artifacts are expired"
864953492,13269,herbelin,2021-06-21 11:20:07,JasonGross,And unfortunately ci-hott depends on build:base which is currently broken for unknown reasons :-/
865369253,13269,herbelin,2021-06-21 21:53:05,JasonGross,Rebase once more and we should be able to minimize?
893625246,13269,herbelin,2021-08-05 17:12:55,herbelin,This PR was going in the wrong direction: instantiating an evar by its eta-expansion doesn't actually need eta so as to be valid. This is because eta-expansion is idempotent where idempotency requires using only beta/iota.\nSee #14746 for a new version.
910262549,13269,herbelin,2021-09-01 13:02:43,ppedrot,IIUC we should close then.
862332115,14499,SkySkimmer,2021-06-16 12:19:38,Zimmi48,"The error in the Nix job seems related:\nFile ""theories/.coq-native/Ntest_test.native"", line 14, characters 3-40:\n14 |   (NCoq_Init_Nat.const_NCoq_Init_Nat_add\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nError: Unbound module NCoq_Init_Nat\nError: Native compiler exited with status 2 (in case of stack overflow,\n       increasing stack size (typicaly with ""ulimit -s"") often helps)\nmake[4]: *** [Makefile:765: theories/test.vo] Error 1\nmake[3]: *** [Makefile:386: all] Error 2\nmake[3]: Leaving direc"
863139261,14499,SkySkimmer,2021-06-17 10:53:58,SkySkimmer,I don't know how to debug the nix issue @coq/nix-maintainers
863176935,14499,SkySkimmer,2021-06-17 11:57:10,Zimmi48,"IIUC these tests were being skipped since the Dune switch and thus were never really checked against Dune and coqnative?\nIINM Nix is the only job that checks the test-suite after make install. Therefore, you might be able to reproduce the issue by doing ./configure -prefix ... && make && make install && make check on your own machine..."
863178795,14499,SkySkimmer,2021-06-17 12:00:07,SkySkimmer,"IIUC these tests were being skipped since the Dune switch and thus were never really checked against Dune and coqnative?\n\nNo, they were never skipped but they tested native compilation of a trivial file (with just a Qed proof in it) which is too trivial to detect bugs.\nI changed the test to make it nontrivial, which required fixing the skip logic so that we don't get errors when native is configured off."
863179513,14499,SkySkimmer,2021-06-17 12:01:16,SkySkimmer,"IINM Nix is the only job that checks the test-suite after make install. Therefore, you might be able to reproduce the issue by doing ./configure -prefix ... && make && make install && make check on your own machine...\n\nHow does make check use the installed coq instead of the non-installed files?"
863216543,14499,SkySkimmer,2021-06-17 12:57:51,Zimmi48,How does make check use the installed coq instead of the non-installed files?\n\nI'm not sure how things work.
863272148,14499,SkySkimmer,2021-06-17 14:09:19,SkySkimmer,I think the nix failure is because the default for native compile is ondemand. Let's try skipping also for ondemand.
863310153,14499,SkySkimmer,2021-06-17 14:54:55,SkySkimmer,That worked
865280504,14499,SkySkimmer,2021-06-21 19:14:21,ejgallego,@coqbot: merge now
865298975,14499,SkySkimmer,2021-06-21 19:48:15,coqbot-app,"Hey, I have detected that there were CI failures at commit ffbe972 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ff73469 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq.\nHowever, you may want to wait until the pipeline for the base commit (ff73469) finishes."
899841220,14788,ppedrot,2021-08-16 21:50:43,ppedrot,Bench: https://gitlab.com/coq/coq/-/jobs/1507802394
900727205,14788,ppedrot,2021-08-18 00:42:16,coqbot-app,"Hey, I have detected that there were CI failures at commit f0bbc18 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 23a8a7e succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-compcert, ci-vst."
900960994,14788,ppedrot,2021-08-18 09:23:57,ppedrot,@coqbot ci minimize
900961058,14788,ppedrot,2021-08-18 09:24:04,coqbot-app,"I have initiated minimization at commit f0bbc18 for the suggested targets ci-compcert, ci-vst as requested."
900978911,14788,ppedrot,2021-08-18 09:51:45,coqbot-app,"Hey, I have detected that there were CI failures at commit f0bbc18 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 23a8a7e succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-compcert, ci-vst."
901071858,14788,ppedrot,2021-08-18 12:28:41,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/veric/mem_lessdef.v (from ci-vst) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/msl"" ""VST.msl"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/sepcomp"" ""VST.sepcomp"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/ver"
901173184,14788,ppedrot,2021-08-18 14:41:16,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/compcert/x86/SelectLongproof.v (from ci-compcert) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 111KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-undeclared-scope"" ""-w"" ""-omega-is-deprecated"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/lib"" ""compcert.lib"" ""-R"" ""/github/"
901263195,14788,ppedrot,2021-08-18 16:40:03,ppedrot,"Further minimization of the compcert failure:\nDefinition ptr64 := false.\n\nInductive val: Set := Vundef: val.\n\nInductive lessdef: val -> val -> Prop := lessdef_undef: forall v, lessdef Vundef v.\n\nGlobal Hint Resolve lessdef_undef : foo.\n\nAxiom memval : Set.\nAxiom load_result : memval -> val.\n\nLemma foo : forall (v : val)\n  (vl' : memval), lessdef (if ptr64 then load_result vl' else Vundef) v.\nProof.\nintros vl'.\nauto with foo.\nQed.\n\nThe root of the failure is that btermdn pattern recognition does "
901390239,14788,ppedrot,2021-08-18 19:58:15,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/compcert/x86/SelectLongproof.v (from ci-compcert) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 95KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-undeclared-scope"" ""-w"" ""-omega-is-deprecated"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/lib"" ""compcert.lib"" ""-R"" ""/github/w"
901392205,14788,ppedrot,2021-08-18 20:01:23,coqbot-app,"Minimized File  (from ci-compcert) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 95KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-undeclared-scope"" ""-w"" ""-omega-is-deprecated"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/lib"" ""compcert.lib"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/common"" ""compcert.common"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/com"
901445254,14788,ppedrot,2021-08-18 21:34:25,ppedrot,Bench: https://gitlab.com/coq/coq/-/jobs/1514200166
901846443,14788,ppedrot,2021-08-19 11:44:47,Janno,The root of the failure is that btermdn pattern recognition does not realize that the if can be reduced by unfolding ptr64. Since we don't want to perform agressive βδι-reduction I guess we'll have to match everything in this case...\n\nAny connection to #13209? (My attempt at an explanation of the behavior is in #13209 (comment))
901849062,14788,ppedrot,2021-08-19 11:48:59,ppedrot,"Probably. The PRs I have been writing around Btermdn are precisely trying to put a bit of order around the semantics of dn matching, which was pretty crazy before. Now we're essentially using an (overapproximation) of syntactic equality on neutral forms for βι-reduction up to η-equality. There are still a few weird cases (notably for let-ins) but it should be saner."
901850233,14788,ppedrot,2021-08-19 11:51:00,ppedrot,"Indeed, I confirm that #13209 is solved by this PR."
901874638,14788,ppedrot,2021-08-19 12:30:30,Janno,"On second thought, I suppose I shouldn't be too happy before I understand this fully. Does this PR fix the bug by treating ifs as matching everything in a symmetric way? If so, it might be bad news because that would bring down the performance of some of our proofs by quite a bit. We have hints keyed on ifs and they always match everything. Obviously I would prefer if they only matched if terms but at least we only get a relatively small multiplicative factor (number of hints keyed on if times a"
901889420,14788,ppedrot,2021-08-19 12:52:47,ppedrot,"Would it be reasonable to return Everything only if the condition returns Everything? That would make sense to me.\n\nThis is possible, but I'll do that in the next round of changes. As I mentioned above, I believe that the correct criterion is to look at neutral forms. In particular, a case over a rigid term should be considered rigid, but any other case should be considered flexible."
901891101,14788,ppedrot,2021-08-19 12:55:14,ppedrot,that would bring down the performance of some of our proofs by quite a bit\n\nI'd be interested if you had some self-contained benchmarking files btw.
901903865,14788,ppedrot,2021-08-19 13:11:47,Janno,I'd be interested if you had some self-contained benchmarking files btw.\n\nI'll see if I can figure something out.
902085902,14788,ppedrot,2021-08-19 17:03:29,ppedrot,┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │   mem faults    │\n│                             │                         │                                       │                                       
902086192,14788,ppedrot,2021-08-19 17:03:53,ppedrot,Pretty good bench. Here is a leaderboard of the absolute speedups:\nhtml/coq-unimath/UniMath/Bicategories/DisplayedBicats/Examples/DisplayedInserter.v.html:857 -2.49 101.89 99.40 (-2%)\nhtml/coq-geocoq/Highschool/exercises.v.html:48 -1.43 2.92 1.49 (-49%)\nhtml/coq-geocoq/Highschool/exercises.v.html:56 -1.40 2.85 1.46 (-49%)\nhtml/coq-color/Coccinelle/term_orderings/rpo.v.html:5197 -1.25 3.28 2.03 (-38%)\nhtml/coq-rewriter-perf-SuperFast/src/Rewriter/Rewriter/Wf.v.html:510 -1.25 49.96 48.72 (-2%)\nhtm
902112856,14788,ppedrot,2021-08-19 17:40:48,ppedrot,"I deem this ready, even if this might introduce slowdowns in some of @Janno 's examples. There is always room for improvement by βι-normalizing on the fly. The current PR emphasizes soundness over efficiency."
906457949,14788,ppedrot,2021-08-26 14:21:48,ppedrot,"This needs an assignee, ping."
908362448,14788,ppedrot,2021-08-30 13:54:09,Janno,While documenting the fixed failure in #13209 I realized that the other test case doesn't fail on 8.13.2. Does it only fail on master?
908367395,14788,ppedrot,2021-08-30 14:00:41,ppedrot,"@Janno yes, it was discovered while writing this patch. I've added it to expand the test coverage of btermdn behaviour from the wild."
913622106,14788,ppedrot,2021-09-06 12:46:39,SkySkimmer,@coqbot merge now
889802166,14722,ppedrot,2021-07-30 10:32:14,ppedrot,Bench: https://gitlab.com/coq/coq/-/jobs/1465095402
889951101,14722,ppedrot,2021-07-30 15:00:18,ppedrot,"Small example extracted from fiat-parsers:\nClass Reflexive0 {A : Type} (R : A -> Prop) : Prop := {}.\n\nAxiom t : Type -> Type.\n\nAxiom map2 : forall [elt : Type], (option elt -> option Prop) -> t elt -> Prop.\n\nDefinition lift_relation_hetero {A}\n           (R : A -> Prop) (defaultA : A)\n  : t A -> Prop\n  := fun m1\n     => \n          (map2\n             (fun x1\n              => match x1 with\n                 | Some x1 => Some (R x1)\n                 | None => None\n                 end)\n             "
889997492,14722,ppedrot,2021-07-30 16:14:16,ppedrot,"Even simpler:\nClass Reflexive0 {A : Type} (R : A -> Prop) : Prop := {}.\n\nDefinition foo {A R} {HR : @Reflexive0 A R} : @Reflexive0 A (fun x => R x) := _.\n\nThe problem is that making the variable opaque prevents syntactic matching up to η-expansion, even though unification would succeed on this. I don't know if this semantics is intended, but it departs from the one for constants where a similar example fails on master.\nClass Reflexive0 {A : Type} (R : A -> Prop) : Prop := {}.\n\nAxiom A : Type.\nAx"
890216301,14722,ppedrot,2021-07-30 22:19:02,coqbot-app,"Hey, I have detected that there were CI failures at commit 0e84f00 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 80fb906 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color, ci-fiat_crypto, ci-fiat_parsers, ci-math_classes, ci-perennial."
890328874,14722,ppedrot,2021-07-31 10:47:23,ppedrot,@coqbot ci minimize
890328894,14722,ppedrot,2021-07-31 10:47:38,coqbot-app,"I have initiated minimization at commit 0e84f00 for the suggested targets ci-bedrock2, ci-color, ci-fiat_crypto, ci-fiat_parsers, ci-math_classes, ci-perennial as requested."
890331633,14722,ppedrot,2021-07-31 11:08:23,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/math_classes/implementations/option.v (from ci-math_classes) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/math_classes"" ""MathClasses"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/us"
890338609,14722,ppedrot,2021-07-31 12:06:01,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Common/FMapExtensions/LiftRelationInstances.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/"
890341416,14722,ppedrot,2021-07-31 12:30:36,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/src/goose_lang/lib/persistent_readonly.v (from ci-perennial) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-ssr-search-moved"" ""-w"" ""-deprecated-hint-without-locality"" ""-w"" ""-deprecated-instance-without-locality"" ""-w"" ""-deprecated-hint-rewrite-without-locality"" ""-w"" ""+deprecated-tactic-notation"" ""-w"" ""-notation-overridden,-red"
890353150,14722,ppedrot,2021-07-31 14:01:20,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/color/Term/Lambda/LComp.v (from ci-color) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/color"" ""CoLoR"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Bignums"" ""Bignums"" ""-"
890367669,14722,ppedrot,2021-07-31 15:52:57,ppedrot,"As mentioned on Zulip, in 8.12 constants were handled the same way as variables w.r.t. η-expansion. This is not the case in 8.13, and the commit that introduced the change was:\ncommit 4ebccb9d2722a7323cb7fce5c9e00bf2eea5b69f\nAuthor: Pierre-Marie Pédrot <pierre-marie.pedrot@inria.fr>\nDate:   Mon Jun 22 12:59:06 2020 +0200\n\n    Dnets now consider axioms as being opaque for pattern recognition.\n\nI am a bit befuzzled that there is no test that caught it, nor any dev in the CI. The fact that we get s"
890369110,14722,ppedrot,2021-07-31 16:04:00,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Curves/Weierstrass/Projective.v (from ci-fiat_crypto) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 35KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pa"
890369173,14722,ppedrot,2021-07-31 16:04:22,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscv.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 44KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedroc"
890370352,14722,ppedrot,2021-07-31 16:13:40,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Curves/Weierstrass/Projective.v (from ci-fiat_crypto) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 35KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+variable-collision,+omega-is-deprecated,+deprecat"
890390525,14722,ppedrot,2021-07-31 18:57:55,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscv.v (from ci-bedrock2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor"" ""processor"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_"
890606860,14722,ppedrot,2021-08-01 23:33:48,coqbot-app,"Hey, I have detected that there were CI failures at commit 6bb57d8 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 53fb47d succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-fiat_crypto, ci-fiat_parsers."
890794115,14722,ppedrot,2021-08-02 07:33:16,ppedrot,@coqbot ci minimize
890794198,14722,ppedrot,2021-08-02 07:33:24,coqbot-app,"I have initiated minimization at commit 6bb57d8 for the suggested targets ci-bedrock2, ci-fiat_crypto, ci-fiat_parsers as requested."
890852637,14722,ppedrot,2021-08-02 08:57:34,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Common/FMapExtensions/LiftRelationInstances.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/"
890998330,14722,ppedrot,2021-08-02 12:50:06,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscv.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 42KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedroc"
890998478,14722,ppedrot,2021-08-02 12:50:18,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Curves/Weierstrass/Projective.v (from ci-fiat_crypto) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+variable-collision,+omega"
891004664,14722,ppedrot,2021-08-02 12:59:46,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Curves/Weierstrass/Projective.v (from ci-fiat_crypto) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+variable-collision,+omega-is-deprecated,+deprecated-instantiate-syntax,+non-recur"
891127636,14722,ppedrot,2021-08-02 15:40:31,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscv.v (from ci-bedrock2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor"" ""processor"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_"
891251971,14722,ppedrot,2021-08-02 18:49:30,JasonGross,"@ppedrot Do you still have access to 0e84f00?  If so, could you force-push that commit to JasonGross/coq:test-coqbot-minimize (#14579).  I'm not sure how to access orphan commits, and I'd like to debug the failure to fully minimize from ci-color and ci-perennial (in addition to the issues with ci-fiat_crypto)"
891755989,14722,ppedrot,2021-08-03 11:08:26,ppedrot,@JasonGross done
891871442,14722,ppedrot,2021-08-03 14:00:10,coqbot-app,"Hey, I have detected that there were CI failures at commit 2827467 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 7c3f597 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-coq_tools, ci-fiat_crypto, ci-perennial."
892149385,14722,ppedrot,2021-08-03 20:37:59,ppedrot,@coqbot ci minimize\nci-fiat_crypto
892149437,14722,ppedrot,2021-08-03 20:38:05,coqbot-app,"I have initiated minimization at commit 2827467 for the suggested targets ci-bedrock2, ci-coq_tools, ci-fiat_crypto, ci-perennial as requested."
892170500,14722,ppedrot,2021-08-03 21:13:33,JasonGross,"@ppedrot the request needs to have the CI's listed on the same line as the coqbot tag, unquoted"
892272819,14722,ppedrot,2021-08-04 00:51:04,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Curves/Weierstrass/Projective.v (from ci-fiat_crypto) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+variable-collision,+omega-is-deprecated,+deprecated-instantiate-syntax,+non-recur"
892297184,14722,ppedrot,2021-08-04 01:54:43,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscv.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor"" ""pro"
892297278,14722,ppedrot,2021-08-04 01:54:57,coqbot-app,Error: Could not minimize file  (from ci-coq_tools) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 2.8MiB file on GitHub Actions Artifacts under build.log)\nools/examples/example_45_result.log  \n  inflating: _build_ci/coq_tools/examples/init-settings.sh  \n  inflating: _build_ci/coq_tools/examples/memoize.py  \n  inflating: _build_ci/coq_tools/examples/prefix-grep.py  \n  inflating: _build_ci/coq_tools/examples/run-example-00.sh  \n  inflating: _build_ci/coq_tools/examples/run-
892358774,14722,ppedrot,2021-08-04 04:44:49,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscv.v (from ci-bedrock2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor"" ""processor"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_"
893381837,14722,ppedrot,2021-08-05 11:27:17,ppedrot,"Minimal example from fiat-crypto:\nModule map.\n  Class map {value} := mk {\n    rep : Type;\n    get: rep -> option value;\n    empty : rep;\n    put : rep -> value -> rep;\n  }.\n  Arguments map : clear implicits.\n  Class ok {value : Type} {map : map value}: Prop := {\n    get_put_diff : forall m v, get (put m v) = None;\n  }.\n  Arguments ok {_} _.\n\nEnd map.\n\nAxiom wordX : Set.\nAxiom e : wordX.\n\nSection Equiv.\n\nContext {Registers: map.map wordX}\n        {mem: map.map Coq.Init.Byte.byte}.\n\nContext (Regis"
893468277,14722,ppedrot,2021-08-05 13:39:21,ppedrot,Bench: https://gitlab.com/coq/coq/-/jobs/1479760591
894119693,14722,ppedrot,2021-08-06 09:06:58,ppedrot,┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬────────────────────────────────────────┬─────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │            CPU instructions            │  max resident mem [KB]  │   mem faults    │\n│                             │                         │                                       │                                     
894122054,14722,ppedrot,2021-08-06 09:10:47,ppedrot,@JasonGross this divides by about two the compilation time of all the instances of typeclass_reification from performance-tests. I am a bit surprised that is has no other observable effects in actual developments but maybe we don't stress typeclasses so much there.
894230563,14722,ppedrot,2021-08-06 12:37:12,Janno,This could be very interesting for the development I am working on but I don't think I'll ever be able to test that against coq/master. We often have local variables (without bodies) appearing in patterns. I suppose this change should be expected to speed things up by avoiding the transparent state lookup?
894332734,14722,ppedrot,2021-08-06 15:19:31,JasonGross,"Wow, that's amazing @ppedrot !  Does it have something to do with how many binders the instances are under?  I wonder if there are any other low-hanging fruit for typeclasses"
894441273,14722,ppedrot,2021-08-06 18:27:20,ppedrot,"I suppose this change should be expected to speed things up by avoiding the transparent state lookup?\nDoes it have something to do with how many binders the instances are under?\n\nNah, it simply prunes some typeclass instances early, preventing them to be checked for unification with the goal (which might be very expensive). The main difference now is that variables without a body are considered rigid for pattern recognition (i.e. they only match themselves, where they would match anything before"
894492426,14722,ppedrot,2021-08-06 20:07:45,JasonGross,"preventing them to be checked for unification with the goal (which might be very expensive).\n\nMy hypothesis was that this unification is expensive because it's expensive to allocate evars under many binders, and IIUC evars must be allocated for all of the dependent premises of the instance in order to perform unification.  Are you saying that the cost lies in some other part of unification?"
894506350,14722,ppedrot,2021-08-06 20:37:39,ppedrot,"Are you saying that the cost lies in some other part of unification?\n\nNo, I am not saying anything about unification beyond the fact it can be expensive (e.g. we have quadratic behaviours to compute term groundness, but there are many other ones, and evars are part of the big picture). My point is just that this PR simply short-circuits unification which is now not called at all in some easy-to-recognize cases."
898390254,14722,ppedrot,2021-08-13 11:27:20,ppedrot,This is ready and needs an assignee.
899680562,14722,ppedrot,2021-08-16 17:19:49,SkySkimmer,@coqbot merge now
647479400,9711,mattam82,2020-06-22 12:15:24,SkySkimmer,@mattam82 is this PR dead?
756110819,9711,mattam82,2021-01-07 13:18:10,mattam82,"It's been forgotten, I'll try to bring it back to life"
834274489,9711,mattam82,2021-05-07 11:08:04,ppedrot,@mattam82 ping. I believe this is quite high priority actually.
835134392,9711,mattam82,2021-05-08 06:16:04,mattam82,"@ppedrot I’m on holidays next week, so if you want to pick it up you’re welcome. Otherwise thanks for the reminder !"
848623790,9711,mattam82,2021-05-26 09:36:51,mattam82,"Rebased now, let's see."
848767733,9711,mattam82,2021-05-26 13:25:03,mattam82,@ppedrot this is ready now.
850254648,9711,mattam82,2021-05-28 08:39:53,ppedrot,@mattam82 can you squash the last commit? It's useless to keep it.
850262997,9711,mattam82,2021-05-28 08:53:30,mattam82,Sure. I rebased on #14392 to see where CI gets now.
850266300,9711,mattam82,2021-05-28 08:58:37,ppedrot,"Erm, I would gladly have merged this PR without the additional comments as soon as the original CI would have finished... This needs to be merged before the branch, so you'll have to rebase again to remove the commits once your experiment is finished."
850267264,9711,mattam82,2021-05-28 09:00:15,mattam82,That's fine. I'm not sure this is the end just yet.
850362196,9711,mattam82,2021-05-28 11:48:12,coqbot-app,"Hey, I have detected that there were CI failures at commit 2a691de without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 92f3b90 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
850364075,9711,mattam82,2021-05-28 11:51:43,coqbot-app,"Hey, I have detected that there were CI failures at commit 2a691de without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 92f3b90 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
850368100,9711,mattam82,2021-05-28 11:59:33,ppedrot,Why is coqbot repeating the very same thing twice?
850398399,9711,mattam82,2021-05-28 12:54:17,JasonGross,"It'll report again every time the overall pipeline status check is finished.  If a job fails and then someone restarts the job, when it finishes the second time, this will trigger a second comment.  Perhaps that's what happened?  (The coq-tools issue is on my side, I'll fix it shortly, sorry.)"
850409140,9711,mattam82,2021-05-28 13:12:03,mattam82,What is coq-tools ?
850409440,9711,mattam82,2021-05-28 13:12:31,mattam82,"Yes, I did retrigger it."
850409743,9711,mattam82,2021-05-28 13:13:00,mattam82,Do you mean that the failure of the ci-coq_tools job is your fault?
850423380,9711,mattam82,2021-05-28 13:34:58,JasonGross,"Do you mean that the failure of the ci-coq_tools job is your fault?\n\nYes, I pushed what I thought was an innocuous commit working around an intermittent issue with the native compiler, not realizing that it would change the output log, and I didn't enforce the discipline of running the test-suite before pushing.  This broke about half of the output tests, which I'm now fixing; it should be fixed within 10 minutes, and sorry about this."
850424020,9711,mattam82,2021-05-28 13:36:02,mattam82,"That's good news, both PRs should go green by tonight then!"
850442829,9711,mattam82,2021-05-28 14:04:37,JasonGross,"coq-tools should be fixed now, I've restarted it"
850448021,9711,mattam82,2021-05-28 14:12:35,coqbot-app,"Hey, I have detected that there were CI failures at commit 2a691de without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 92f3b90 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
850448433,9711,mattam82,2021-05-28 14:13:10,ppedrot,... still failing it seems.
850458008,9711,mattam82,2021-05-28 14:27:51,JasonGross,"Yeah, I forgot that -native-compiler ondemand is required to work around native compiler issues on old versions of coq but produces warnings on new versions of Coq.  Hopefully now fixed"
850984254,9711,mattam82,2021-05-30 11:27:57,ppedrot,"@mattam82 in order not to lose time I have rebased and slightly tweaked the commit message, I'll merge when the CI finishes."
851970082,9711,mattam82,2021-06-01 09:17:37,mattam82,@ppedrot thanks a whole bunch!
858660178,14480,SkySkimmer,2021-06-10 14:15:13,SkySkimmer,BTW without this PR StuckClass would print anomalies (without failing) with TC debug verbosity 2.
858807919,14480,SkySkimmer,2021-06-10 17:20:46,coqbot-app,"Hey, I have detected that there were CI failures at commit fc48877 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit df6a160 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-iris, ci-perennial."
858809980,14480,SkySkimmer,2021-06-10 17:23:25,SkySkimmer,@coqbot ci minimize ci-iris
858810041,14480,SkySkimmer,2021-06-10 17:23:29,coqbot-app,I am now running minimization at commit fc48877 on requested target ci-iris. I'll come back to you with the results once it's done.
858903523,14480,SkySkimmer,2021-06-10 18:48:21,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/stdpp/theories/list.v (from ci-iris) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/stdpp/theories"" ""stdpp"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-"
859468582,14480,SkySkimmer,2021-06-11 10:07:30,SkySkimmer,"Further minimized:\nRequire Import Coq.Setoids.Setoid Coq.Classes.Morphisms.\n\nClass PartialOrder {A} (R : relation A) : Prop := {\n  partial_order_pre :> PreOrder R;\n}.\nGlobal Hint Mode PartialOrder ! ! : typeclass_instances.\n(* - ! also bugs *)\n\nAxiom Permutation : forall {A:Type}, list A -> list A -> Prop.\n\nInfix ""≡ₚ"" := Permutation (at level 70, no associativity).\n\nGlobal Declare Instance Permutation_cons A :\n Proper (Logic.eq ==> @Permutation A ==> @Permutation A) (@cons A) | 7.\n(* priority < "
859476919,14480,SkySkimmer,2021-06-11 10:21:44,SkySkimmer,I can't figure this out further.\ncc @mattam82
874103469,14480,SkySkimmer,2021-07-05 13:13:07,mattam82,"It looks like a failure to backtrack after a stuck class is found, likely solved by PR #13952\nLong-story short: currently typeclasses are solved in ""independent"" fixpoints that can produce sets of postponed constraints for stuck classes. The PR allows ""global"" backtracking so that if the stuck class has no solution, we try other branches than the one that led to this stuck constraint."
874138008,14480,SkySkimmer,2021-07-05 14:02:52,SkySkimmer,"It looks like a failure to backtrack after a stuck class is found, likely solved by PR #13952\n\nConfirm solved by #13952"
874148267,14480,SkySkimmer,2021-07-05 14:16:23,RalfJung,"I am confused... #14441 is still open, is it not?"
874149280,14480,SkySkimmer,2021-07-05 14:17:50,RalfJung,"Oh I see, #13952 has not landed yet."
875830217,14612,mrhaandi,2021-07-07 18:25:20,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
875850251,14612,mrhaandi,2021-07-07 18:55:23,fajb,I would propose red;intros. To deal with negations in the conclusion.\nBut not introducing regressions looks hard...
875875065,14612,mrhaandi,2021-07-07 19:32:30,coqbot-app,"Hey, I have detected that there were CI failures at commit 737b012 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 444aa95 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-aac_tactics, ci-argosy, ci-bbv, ci-bedrock2, ci-color, ci-compcert, ci-cross_crypto, ci-fiat_crypto_legacy, ci-fiat_parsers, ci"
875966073,14612,mrhaandi,2021-07-07 22:07:07,JasonGross,"Not sure how useful it'll be here, but we can get a sense of what sort of goals people expect congruence to solve if we @coqbot CI minimize"
875966553,14612,mrhaandi,2021-07-07 22:08:10,coqbot-app,"I have initiated minimization at commit 737b012 for the suggested targets ci-aac_tactics, ci-argosy, ci-bbv, ci-bedrock2, ci-color, ci-compcert, ci-cross_crypto, ci-fiat_crypto_legacy, ci-fiat_parsers, ci-geocoq, ci-iris, ci-math_classes, ci-metacoq, ci-perennial, ci-quickchick, ci-relation_algebra, ci-rewriter, ci-sf, ci-tlc, ci-verdi_raft, ci-vst as requested."
875968574,14612,mrhaandi,2021-07-07 22:12:02,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/aac_tactics/theories/Utils.v (from ci-aac_tactics) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+default"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/aac_tactics/theories"" ""AAC_tactics"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_c"
875968601,14612,mrhaandi,2021-07-07 22:12:06,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bbv/src/bbv/ZLib.v (from ci-bbv) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bbv/src/bbv"" ""bbv"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-top"" ""ZLi"
875968617,14612,mrhaandi,2021-07-07 22:12:08,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/relation_algebra/comparisons.v (from ci-relation_algebra) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-notation-overridden"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/relation_algebra"" ""RelationAlgeb"
875968768,14612,mrhaandi,2021-07-07 22:12:26,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/argosy/vendor/array/src/Array.v (from ci-argosy) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/argosy/src"" ""RecoveryRefinement"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/argosy/vendor/classes/src"" ""Classes"" ""-R"" ""/github/workspac"
875969325,14612,mrhaandi,2021-07-07 22:13:32,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/bbv/src/bbv/Nomega.v (from ci-fiat_crypto_legacy) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-notation-overridden"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/src"" ""Crypto"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_c"
875969724,14612,mrhaandi,2021-07-07 22:14:19,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/rewriter/src/Rewriter/Util/Decidable.v (from ci-rewriter) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+deprecated-hint-constr,+fragile-hint-constr,+variable-collision,+unexpected-implicit-declarat"
875969734,14612,mrhaandi,2021-07-07 22:14:20,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/metacoq/template-coq/theories/utils/MCList.v (from ci-metacoq) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/metacoq/template-coq/theories"" ""MetaCoq.Template"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failin"
875969890,14612,mrhaandi,2021-07-07 22:14:38,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/ext_lib/theories/Data/String.v (from ci-quickchick) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/ext_lib/theories"" ""ExtLib"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib"
875969927,14612,mrhaandi,2021-07-07 22:14:41,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil/Z/ZLib.v (from ci-bedrock2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil"" ""coqutil"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_ins"
875969965,14612,mrhaandi,2021-07-07 22:14:44,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Common.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parser"
875970024,14612,mrhaandi,2021-07-07 22:14:50,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/color/Util/List/ListUtil.v (from ci-color) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/color"" ""CoLoR"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Bignums"" ""Bignums"" """
875970846,14612,mrhaandi,2021-07-07 22:16:15,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/struct_tact/theories/ListUtil.v (from ci-verdi_raft) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/struct_tact/theories"" ""StructTact"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/use"
875970853,14612,mrhaandi,2021-07-07 22:16:16,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/math_classes/misc/util.v (from ci-math_classes) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/math_classes"" ""MathClasses"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Bi"
875972832,14612,mrhaandi,2021-07-07 22:20:26,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/sf/plf-current/Hoare.v (from ci-sf) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/sf/plf-current"" ""PLF"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-top"
875974398,14612,mrhaandi,2021-07-07 22:23:47,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/compcert/lib/Coqlib.v (from ci-vst) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/compcert/lib"" ""compcert.lib"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/compcert/common"" ""compcert.common"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/vst/compcert/x"
875974866,14612,mrhaandi,2021-07-07 22:24:48,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/compcert/lib/Coqlib.v (from ci-compcert) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-undeclared-scope"" ""-w"" ""-omega-is-deprecated"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/lib"" ""compcert.lib"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/common"" ""compcert.common"" ""-R"" ""/github/worksp"
875976282,14612,mrhaandi,2021-07-07 22:28:18,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/external/stdpp/theories/option.v (from ci-perennial) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-ssr-search-moved"" ""-w"" ""-deprecated-hint-without-locality"" ""-w"" ""-deprecated-instance-without-locality"" ""-w"" ""-deprecated-hint-rewrite-without-locality"" ""-w"" ""+deprecated-tactic-notation"" ""-w"" ""-notation-overridden,-redundant-c"
875978279,14612,mrhaandi,2021-07-07 22:32:56,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/stdpp/theories/option.v (from ci-iris) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-hint-rewrite-without-locality"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/stdpp/theories"" ""stdpp"" ""-Q"" ""/github/workspace/builds/coq/coq-failing"
875996067,14612,mrhaandi,2021-07-07 23:17:38,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/geocoq/Elements/OriginalProofs/lemma_sameside2.v (from ci-geocoq) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/geocoq"" ""GeoCoq"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-con"
875997669,14612,mrhaandi,2021-07-07 23:21:19,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/tlc/src/LibMap.v (from ci-tlc) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-implicit-core-hint-db,-omega-is-deprecated"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/tlc/src"" ""TLC"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq"
876007526,14612,mrhaandi,2021-07-07 23:47:23,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/cross_crypto/fcf/src/FCF/RndInList.v (from ci-cross_crypto) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/cross_crypto/fcf/src/FCF"" ""FCF"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/cross_crypto/fcf/src/HMAC"" ""HMAC"" ""-Q"" ""/git"
876326565,14612,mrhaandi,2021-07-08 10:32:12,mrhaandi,Thanks @JasonGross for the minimization comment.\nI now inspected a lot of regressions and have found the following illustrating examples:\n(* eager congruence : success\n   lazy congruence : failure *)\nGoal not (true = false).\nProof. congruence. Qed. \n\nAxiom P : Prop.\n\n(* eager congruence : success\n   lazy congruence : failure *)\nGoal (not P) -> not P.\nProof. congruence. Qed.\n\nDefinition Q := True -> P.\n\n(* eager congruence : failure\n   lazy congruence : success *)\nGoal Q -> Q.\nProof. congruence. 
877070003,14612,mrhaandi,2021-07-09 10:03:21,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
877105912,14612,mrhaandi,2021-07-09 11:08:23,coqbot-app,"Hey, I have detected that there were CI failures at commit 9b65eaf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit b0e85d7 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bbv, ci-color, ci-compcert, ci-cross_crypto, ci-fiat_crypto, ci-fiat_crypto_legacy, ci-fiat_parsers, ci-iris, ci-metacoq, ci-pe"
877139600,14612,mrhaandi,2021-07-09 12:08:38,mrhaandi,"I implemented the proposed change from #14612 (comment)\nThis fixes a good chunk of regressions.\nThe minimization has shown that congruence is often used for goals such as\nDefinition Symmetric {X : Type} (r : X -> X -> Prop) :=\n  forall x y, r x y -> r y x.\nGoal Symmetric (fun n m : nat => n = m).\nProof. congruence. Qed.\nThis requires eager introduction. Since this is a crucial use-case, I added the condition that introduction/unfolding can be performed eagerly, if the goal is convertible to fora"
877152755,14612,mrhaandi,2021-07-09 12:31:50,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
877154444,14612,mrhaandi,2021-07-09 12:34:43,Zimmi48,It would be worth adding test cases to the test-suite for the behavior you want to preserve.
877160845,14612,mrhaandi,2021-07-09 12:46:15,mrhaandi,"It would be worth adding test cases to the test-suite for the behavior you want to preserve.\n\nYes. Strangely, for me currently testing via make test-suite is broken reporting Package coq-core.toplevel not found.\nAlternatively, make -f Makefile.dune test-suite exits with Done: 25829/25832 /bin/sh: 1: cannot create success/section_poly.v.log: Permission denied."
877163537,14612,mrhaandi,2021-07-09 12:51:06,Zimmi48,"OK, the first one is #14624 I guess. The second one I don't know. Have you tried make -C test-suite?"
877175259,14612,mrhaandi,2021-07-09 13:09:59,SkySkimmer,"Have you tried make -C test-suite?\n\nThat will just get #14624 again\nBut the unit test error doesn't matter, just ignore it."
877191696,14612,mrhaandi,2021-07-09 13:34:31,JasonGross,"Should we ask the bot to minimize some of the failures again, or are these exactly the ones that you expect?"
877193911,14612,mrhaandi,2021-07-09 13:37:57,coqbot-app,"Hey, I have detected that there were CI failures at commit 6200dcb without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit b0e85d7 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bbv, ci-color, ci-compcert, ci-fiat_crypto, ci-fiat_crypto_legacy, ci-metacoq, ci-verdi_raft, ci-vst."
877195133,14612,mrhaandi,2021-07-09 13:38:42,mrhaandi,"Should we ask the bot to minimize some of the failures again, or are these exactly the ones that you expect?\n\nNo need right now. There are still issues that I fully understand (the not P trick is not strong enough, if a custom definition of not is used). A stronger auxiliary lemma is required to make ci happier."
878394494,14612,mrhaandi,2021-07-12 15:54:03,coqbot-app,"Hey, I have detected that there were CI failures at commit a7b8a6c without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 225339d succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-color."
878395896,14612,mrhaandi,2021-07-12 15:55:54,mrhaandi,"Alright, the current bug fix only has one ci issue with ci-color. Now I would like to @coqbot ci minimize"
878395952,14612,mrhaandi,2021-07-12 15:56:00,coqbot-app,I have initiated minimization at commit a7b8a6c for the suggested target ci-color as requested.
878599251,14612,mrhaandi,2021-07-12 21:12:41,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/color/HORPO/Horpo.v (from ci-color) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/color"" ""CoLoR"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_ins"
878729557,14612,mrhaandi,2021-07-13 02:29:40,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/color/HORPO/Horpo.v (from ci-color) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/color"" ""CoLoR"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_ins"
878761750,14612,mrhaandi,2021-07-13 04:09:20,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/color/HORPO/Horpo.v (from ci-color) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/color"" ""CoLoR"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Bignums"" ""Bignums"" ""-Q"" ""/g"
878816759,14612,mrhaandi,2021-07-13 06:30:55,mrhaandi,"Unfortunately, minimization shows that there are two somewhat mutually exclusive goals which congruence should be solving:\n\nEagerly unfold and introduce (current congruence, used in ci-color)\n\nRequire Import Morphisms Program.\n\nGoal forall (r : nat -> nat -> Prop), Proper (eq ==> eq ==> impl) r.\nProof. congruence. Qed.\n\nIntroduce, do not unfold (#13778)\n\nAxiom p : nat -> Prop.\nDefinition q n := True -> p n.\nGoal forall n m, n = m -> q n -> q m.\nProof. Fail congruence. Admitted.\nMy current bug fi"
878866362,14612,mrhaandi,2021-07-13 07:58:57,ppedrot,"I think that you should go for a compatibility flag that switches between both behaviours, and deprecate it in the next version."
878906108,14612,mrhaandi,2021-07-13 08:56:36,Zimmi48,"If the only backward-compatibility issues can be solved by adding repeat intro; before congruence, I wonder if a compatibility flag is even necessary..."
879931444,14612,mrhaandi,2021-07-14 14:16:14,mrhaandi,"I think that you should go for a compatibility flag that switches between both behaviours, and deprecate it in the next version.\n\nI now consider to redesign the bug fix to be behind an option e.g. ""Congruence Symbolic"" that does no unfolding whatsoever (also not in hypotheses) such that turning on the option also fixes #13189.\nNow turning on the option would make congruence fail in a lot of common use-cases for congruence, but enable very fast symbolic congruence arguments."
880543796,14612,mrhaandi,2021-07-15 09:28:34,mrhaandi,"Now turning on the option would make congruence fail in a lot of common use-cases for congruence, but enable very fast symbolic congruence arguments.\n\nSee PR #14657"
884113444,14612,mrhaandi,2021-07-21 11:21:24,ppedrot,"IIUC this PR was superseded by #14657, and the (optional) introduction of a flag is deferred to another PR. So we can close this one in the meantime."
832727962,14252,jfehrle,2021-05-05 14:21:00,MSoegtropIMC,"@jfehrle : I will compile your PR branch and do some VST analysis with it. I could also send you a simple VST test case, so that you can step through VST's Ltac code - which is huge and complex. It should be a good play ground to test an Ltac debugger."
832794221,14252,jfehrle,2021-05-05 15:41:18,jfehrle,"Thanks, @MSoegtropIMC .  Probably better if you wait a few days so I can write up user documentation.  There are a few limitations you should know about.\nAmong other things, I'll be interested to understand how well the debugger works with very large goals--does it perform well and is the user able to follow what's happening?  It may be helpful to have ways to limit what is shown.  Or to show proof diffs (the main question being figuring out what old state to compare with the current state).\nI t"
833479772,14252,jfehrle,2021-05-06 12:23:21,Alizter,"Whenever I run this version of coqide, it says ""coq is computing"" and hangs. The console is spitting out this error:\n[pid 20411] Unexpected XML message\n[pid 20411] Expected XML node: int\n[pid 20411] XML tree received: <pair>\n  <state_id val=""1""/>\n  <bool val=""true""/>\n</pair>\n\nSomething has gone wrong it seems.\nEven something like:\nSearch ""hello"".\nhangs.\nHere is the debug output for reference:\n[DEBUG] Begin command processing\n[DEBUG] Start eval_call Add ((""Search \""hello\""."",-1),(1,true))\n[DEBUG]"
833862411,14252,jfehrle,2021-05-06 21:00:00,jfehrle,"@Alizter Let's make that a separate discussion.  Please submit a new issue and put ""@jfehrle"" in the description so I see it.    In the issue, tell me what platform you're on and exact steps to reproduce.  Please run coqIDE with the -debug option and post the output in the issue.  I may not respond immediately, though."
836054575,14252,jfehrle,2021-05-10 01:45:10,jfehrle,"Rebased to include #14220 from master.  I made one change for alpha testing.  @MSoegtropIMC, please give this a try.  FWIW, I expect to push updates over the next several days."
836341545,14252,jfehrle,2021-05-10 08:10:44,MSoegtropIMC,"@jfehrle : I working on something else the first half of this week, but will have plenty of opportunity to test this later this and next week."
841487866,14252,jfehrle,2021-05-14 20:36:55,JasonGross,I should not be able to set breakpoints in the middle of Proof.
841492723,14252,jfehrle,2021-05-14 20:40:39,JasonGross,"If I ""step in"" to a tactic whose definition is in another file, the buffer switches to that file.  After that, ""step in"" does nothing.  This is an unusably painful mode of interaction, because it means I have to switch back to the main file for every single step.  Instead, I should be able to hold down F10 and watch the debugger take steps."
841511507,14252,jfehrle,2021-05-14 21:24:58,JasonGross,"Step in sometimes brings me to the top of a different file, not highlighting any tactic code.  This seems wrong?  Maybe it corresponds to a location with a filename but no position information?"
841512772,14252,jfehrle,2021-05-14 21:28:28,JasonGross,Am I supposed to get enormous Evaluated term messages in the debugger?
841513198,14252,jfehrle,2021-05-14 21:29:39,JasonGross,"Also, interaction is extremely sluggish while the debugger is running..."
841513524,14252,jfehrle,2021-05-14 21:30:33,JasonGross,And CoqIDE is using 2 GB of RAM...
841519492,14252,jfehrle,2021-05-14 21:47:16,jfehrle,@JasonGross would you put your usage comments in new issue(s)?
841527373,14252,jfehrle,2021-05-14 22:09:21,JasonGross,"Reported as #14325, #14326, #14327.  #14327 is high priority; the debugger is basically unusable until this is fixed.  #14325 is next-highest priority; ""step into"" is basically unusable until this is fixed, but the ""set a breakpoint, continue"" mode is usable.  #14326 is low priority.  The behavior is incorrect and might confuse newcomers, and I find it ever-so-slightly inconvenient, but it doesn't really impact my ability to use the debugger."
841729924,14252,jfehrle,2021-05-15 21:45:48,coqbot-app,"Hey, I have detected that there were CI failures at commit 78d6e5e without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit fd50269 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me and say ci minimize, I will minimize the following targets: ci-hott."
841736976,14252,jfehrle,2021-05-15 23:03:17,coqbot-app,"Hey, I have detected that there were CI failures at commit 445b385 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit fd50269 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me and say ci minimize, I will minimize the following targets: ci-hott."
841738340,14252,jfehrle,2021-05-15 23:18:53,jfehrle,@coqbot: ci minimize
841857701,14252,jfehrle,2021-05-16 18:34:34,coqbot-app,"Hey @jfehrle, you cannot run CI minimization on issues that are not pull requests."
841859083,14252,jfehrle,2021-05-16 18:43:43,Zimmi48,Sorry about these bugs 😖
841886422,14252,jfehrle,2021-05-16 22:27:25,jfehrle,@ejgallego Would you complete your initial review of this sometime soon if you haven't already done so?  I'd like to make a preliminary version available in 8.14--I think it will be useful even if it is a bit incomplete or buggy.  It's a timesaver to get the full list of initial comments early so they can be addressed in parallel and in priority order rather than serially.  (Points requiring nontrivial discussions probably should still be done serially to avoid confusion.)  I suggest focusing on
842054799,14252,jfehrle,2021-05-17 06:52:35,ppedrot,Will do.
842062691,14252,jfehrle,2021-05-17 07:02:27,jfehrle,Repeating since I misspelled @ejgallego the first time.\n@ejgallego Would you complete your initial review of this sometime soon if you haven't already done so?  I'd like to make a preliminary version available in 8.14--I think it will be useful even if it is a bit incomplete or buggy.  It's a timesaver to get the full list of initial comments early so they can be addressed in parallel and in priority order rather than serially.  (Points requiring nontrivial discussions probably should still be d
842364790,14252,jfehrle,2021-05-17 14:19:52,ejgallego,@ejgallego Would you complete your initial review of this sometime soon if you haven't already done so?\n\nI'll wait for this PR not to include the location rewriting change.
843280484,14252,jfehrle,2021-05-18 15:41:28,cpitclaudel,"Does this extend the existing Ltac debugger, or is it completely separate?  (Do we need a new UI in Emacs, or can we use the existing one?)"
843284166,14252,jfehrle,2021-05-18 15:46:35,ejgallego,"Does this extend the existing Ltac debugger, or is it completely separate? (Do we need a new UI in Emacs, or can we use the existing one?)\n\nChanges relevant to the topleve are already in master so you can try them, I understand this PR shouldn't change much for that case.\nInternally, we made communication with the debugger into a (kinda rough for the moment) protocol (see debugHook.mli) , but the interface coqtop exposes should not have been changed; however it is a bit more easy for other backe"
843333910,14252,jfehrle,2021-05-18 16:36:27,jfehrle,There is a single debugger on the Coq side.  This PR adds new features to it such as the ability to set and stop at breakpoints and step in/step over/step out/continue operations.  I've not added new commands to the coqtop debugger to support these because a human user of coqtop won't want to set breakpoints by giving the character offset and the filename.  Technically it would not be difficult to add such commands to support PG.  The changes to xml-protocol.md describe the new messages that you
843337492,14252,jfehrle,2021-05-18 16:39:17,jfehrle,PS you may also want to skim the user documentation.  See #14281.
845649728,14252,jfehrle,2021-05-21 04:47:05,jfehrle,@JasonGross This version works for let := and functors.  I made many but not all of the messages appear only if the debugger stops at the next step.
850760342,14252,jfehrle,2021-05-29 03:18:27,jfehrle,@JasonGross I just pushed an updated version.  There were still some debugging messages that were being displayed unconditionally.  Now all of them are displayed only if you stop at the next step.  I also made the handling of large messages more efficient.  Let me know your further thoughts and wishes.
850859846,14252,jfehrle,2021-05-29 16:24:13,jfehrle,"@MSoegtropIMC I working on something else the first half of this week, but will have plenty of opportunity to test this later this and next week.\n\nDid you get to try it?  @JasonGross found a number of issues, almost all of which are fixed.  I'll be interested to hear from you whether it works for Ltac2 (and Mtac?) as well as your general comments and questions."
853313076,14252,jfehrle,2021-06-02 19:06:59,ejgallego,"I had a quick look at the Coq parts [except tactic_debug which I leave to experts on ltac] and I think overall this looks fine, tho there are some hacks that we may need to remove, but should be easy.\nAll this modulo the dependency on #14354 which needs some more work."
875741634,14252,jfehrle,2021-07-07 16:19:10,jfehrle,"@ejgallego Can we get this reviewed and merged sometime very soon?  There have been no comments for more than a month.  FWIW, the third debugger installment is almost ready and I'm starting to plan the fourth installment."
905052839,14252,jfehrle,2021-08-25 00:00:28,jfehrle,"@ppedrot I hope you can review the next chunk of the debugger  sometime in the near future.  #14644 (+2,702 −502 lines) incorporates this PR (+1,612 −324 lines) and has much additional functionality,  including a good number of fixes relative to this PR.  Do you want to review these 2 PRs separately or review everything at once in #14644?  I'd prefer the latter if you're willing.\n#14644 still needs a bug fix in order to pass a few tests and my own review to fix any remaining nits I find."
916559570,14252,jfehrle,2021-09-10 01:24:49,jfehrle,Changes incorporated into #14644.
881948404,14671,herbelin,2021-07-17 19:26:41,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
881962062,14671,herbelin,2021-07-17 21:27:18,coqbot-app,"Hey, I have detected that there were CI failures at commit adf6e49 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 5fd802a succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-fiat_crypto_legacy."
881981803,14671,herbelin,2021-07-18 01:15:23,JasonGross,@coqbot CI minimize
881981810,14671,herbelin,2021-07-18 01:15:30,coqbot-app,"I have initiated minimization at commit adf6e49 for the suggested targets ci-bedrock2, ci-fiat_crypto_legacy as requested."
881982360,14671,herbelin,2021-07-18 01:22:03,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto_legacy/src/Specific/X25519/C32/freeze.v (from ci-fiat_crypto_legacy) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.ZArith.BinIntDef.\nRe"
882007123,14671,herbelin,2021-07-18 06:32:22,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/bedrock2/src/bedrock2Examples/lightbulb.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 45KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/"
882008039,14671,herbelin,2021-07-18 06:42:11,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/bedrock2/src/bedrock2Examples/lightbulb.v (from ci-bedrock2) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 47KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/bedrock2/src/bedrock2"" ""bedrock2"" ""-Q"" ""/github"
882438382,14671,herbelin,2021-07-19 10:32:43,ppedrot,Bench: https://gitlab.com/coq/coq/-/jobs/1432883247.
890072239,14725,herbelin,2021-07-30 18:21:20,coqbot-app,"Hey, I have detected that there were CI failures at commit 8828e95 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 80fb906 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-relation_algebra."
892682231,14725,herbelin,2021-08-04 13:58:38,SkySkimmer,"This PR/commit title is not very grammatical, I cannot parse it."
893356167,14725,herbelin,2021-08-05 10:43:17,herbelin,"This PR/commit title is not very grammatical, I cannot parse it.\n\nI intended something like: ""Faire en sorte que la définition locale do_subrelation n'échappe pas la portée du lieur qui l'introduit"".\nIt would probably be more intuitive to simply not add this local definition in the first place but I don't understand well its purpose and what could be an alternative implementation."
893356910,14725,herbelin,2021-08-05 10:44:30,SkySkimmer,"""Ensure that the internal do_subrelation local definition does not escape its scope"" should work then"
893362795,14725,herbelin,2021-08-05 10:55:19,herbelin,"""Ensure that the internal do_subrelation local definition does not escape its scope"" should work then\n\nTo be honest, ""ensure"" is maybe a bit too strong. I don't have a general overview of this code enough to claim that all occurrences are eventually substituted. For instance, some remain maybe in conversion problems or in other data used by the the tactic. Getting rid of the do_subrelation ""hack"" in the first place would probably be more satisfactory."
895101131,14725,herbelin,2021-08-09 10:06:14,ppedrot,Bench just in case: https://gitlab.com/coq/coq/-/jobs/1476050474\n┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │   mem faults    │\n│                             │                         │              
898341853,14725,herbelin,2021-08-13 09:59:10,ppedrot,"I don't know whether the verdi slowdown is real, we should probably relaunch a bench on this dev only..."
899047399,14725,herbelin,2021-08-15 13:03:46,ppedrot,Rerunning: https://gitlab.com/coq/coq/-/jobs/1504759418
899379942,14725,herbelin,2021-08-16 09:54:55,ppedrot,┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │   mem faults    │\n│                             │                         │                                       │                                       
899662378,14725,herbelin,2021-08-16 16:52:43,herbelin,"So it does look like verdi is slowed down by this PR.\n\nI don't see what else than the replace_vars can be in cause. But this replace_vars is necessary to prevent the scope escaping.\nAnyway, #14673 does not need it anymore. So, maybe can we wait for @mattam82's feedback. Maybe would there be after all a more principled way to deal with the Morphisms.do_subrelation/CMorphisms.do_subrelation distinction."
907320913,14725,herbelin,2021-08-27 16:21:38,ppedrot,@mattam82 ping. If you're fine with the current state of the PR I can merge it immediately.
909143253,14725,herbelin,2021-08-31 11:18:52,ppedrot,"I had another look at this PR and I'm now wondering why it's done this way.\nEven without considering the fix, do_subrelation could be the same for Prop / Type rewriting. It's just a marker that tracks the resolution phase of the rewriting algorithm. There are a few more like that, e.g. normalization_done.\nSecond, the only place where the variable is reachable is the morph evar found in this snippet.\n    let env' =\n      let dosub, appsub =\n        if b then PropGlobal.do_subrelation, PropGlobal."
909147920,14725,herbelin,2021-08-31 11:25:55,ppedrot,@herbelin do you have a test-case for the bug this PR is fixing?
909466481,14725,herbelin,2021-08-31 18:03:26,herbelin,"@herbelin do you have a test-case for the bug this PR is fixing?\n\nNo, I observed the scope escaping while experimenting with #14673 but I finally made that #14673 does not depend on this PR."
913488075,14725,herbelin,2021-09-06 09:16:34,ppedrot,"Here is a hackish test.\nFrom Coq Require Import Setoid Morphisms.\n\nAxiom T : Type.\nAxiom Teq : relation T.\n#[local] Declare Instance Teq_Equivalence : Equivalence Teq.\n\nAxiom P : T -> Prop.\nAxiom P_Proper : Proper (Teq ==> Basics.flip Basics.impl) P.\n\nLtac manual_P_proper :=\nmatch goal with\n| [ H : apply_subrelation |- Proper (Teq ==> Basics.flip Basics.impl) P ] =>\n  case H; apply P_Proper\nend.\n\n#[local] Hint Extern 1 => manual_P_proper : typeclass_instances.\n\nLemma foo : forall x y : T, Teq x "
914177196,14725,herbelin,2021-09-07 10:11:12,ppedrot,"@herbelin see #14850 for a more local fix, which is likely to be more efficient as well."
324089440,991,mattam82,2017-08-22 17:01:44,silene,"apply was allowing itself to produce dependent subgoals sometimes\n\nLooking at the changes to the standard library, it seems that the old apply allowed evars to be refined, while the new apply does not. I am not sure which of the two behaviors I prefer. The new one is simpler to explain (apply errors out if a new evar is created) but it could also be argued that the new evar is not really new (no universal quantifier was actually substituted with a fresh evar) and thus the old behavior was more u"
324149815,991,mattam82,2017-08-22 20:58:31,silene,"no universal quantifier was actually substituted with a fresh evar\n\nForget what I said. These are not refined evars; these are fresh evars used in universal quantifications. So, whichever way I look at it, there is no sane reason for the old behavior and the behavior you propose is akin to a bugfix."
324280856,991,mattam82,2017-08-23 09:54:40,mattam82,"Indeed, that's the new spec (barring bugs I might have introduced). The only new evars that are allowed are descendants of previous evars due to clearing/prunning of some of the evar's variables due to dependencies. This follows the same principle as for goals: if a tactic applied to goal1 forces goal2 to not depend on some variables, goal2 stays a goal and is not shelved."
431412357,991,mattam82,2018-10-19 15:59:19,mattam82,"Just rebased on master, waiting for #8741 and functional flags to continue."
450901096,991,mattam82,2019-01-02 15:55:37,SkySkimmer,Dependency merged some time ago.
451020232,991,mattam82,2019-01-02 23:45:53,mattam82,It still needs #7819 which has been lingering for a while
471963294,991,mattam82,2019-03-12 11:31:39,ejgallego,The dependency has been merged so this can be rebased now.
495215067,991,mattam82,2019-05-23 13:20:17,maximedenes,I'll try to rebase this now.
495392207,991,mattam82,2019-05-23 21:29:48,maximedenes,@mattam82 did you disallow edits from maintainers? It seems I can't push my rebase.
495394703,991,mattam82,2019-05-23 21:38:53,SkySkimmer,I can push fine
495394930,991,mattam82,2019-05-23 21:39:44,SkySkimmer,"What git interface are you using, what are you telling it to do and what is it telling you in response?"
495398697,991,mattam82,2019-05-23 21:53:17,maximedenes,"I can push fine\n\nAh yes, the address of my remote was incorrect. Thanks for testing."
685612360,991,mattam82,2020-09-02 10:53:03,maximedenes,"Alright, since #7825 is slowly converging, let's go for a rebase!"
686993836,991,mattam82,2020-09-04 08:10:26,maximedenes,"@mattam82 rebased, unfortunately it breaks on a file that was added to stdlib after the creation of this PR."
687000683,991,mattam82,2020-09-04 08:16:46,mattam82,The HoTT failure looks surprising. Is it a failure of typeclass resolution?
687103692,991,mattam82,2020-09-04 12:09:28,SkySkimmer,"Current compatibility break in HexadecimalFacts looks like\nDefinition left := list .\nDefinition right := list.\n\nDefinition bla T : left T := nil.\n\nLemma foo : right nat.\nProof.\n  simple apply bla.\nQed.\nmaster: success\nPR: Unable to unify ""left ?T"" with ""right nat""."
691908727,991,mattam82,2020-09-14 08:36:54,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
694067800,991,mattam82,2020-09-17 08:02:35,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
694373082,991,mattam82,2020-09-17 17:10:36,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
694575850,991,mattam82,2020-09-18 00:33:31,JasonGross,"Here's a minimized example of the bbv failure which can be added to the standard library:\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/home/runner/work/run-coq-bug-minimizer/run-coq-bug-minimizer/cwd"" ""Top"" ""-Q"" ""/home/runner/work/run-coq-bug-minimizer/run-coq-bug-minimizer/builds/coq/coq-failing/_build_ci/bbv/src/bbv"" ""bbv"" ""-top"" ""Word"") -*- *)\n(* File reduced by coq-bug-finder from original input, then from 7624 lines to 91 lines, then from 688 lines to 115 lines, then from 129 lines to "
694678894,991,mattam82,2020-09-18 06:19:07,maximedenes,"@JasonGross Thanks, that's useful! However, it seems that lia succeeds here, and since omega is deprecated... I guess the ""right"" fix would be to port bbv to lia."
696217934,991,mattam82,2020-09-21 16:12:59,maximedenes,"@mattam82 here's a reduced failure extracted from a regression in Flocq:\nDefinition F (n : nat) := match n with 0 => 1 | _ => 2 end.\nAxiom foo : forall n m : nat, ((F n) <= m) -> n <= m.\n\nGoal forall v, 1 <= v -> 0 <= v.\nintros v H.\napply foo with (1 := H).\nworks in master, but in this branch it says\nError:\nIn environment\nv : nat\nH : 1 <= v\nThe term ""H"" has type ""1 <= v"" while it is expected to have type\n ""F ?n <= ?m""."
696218624,991,mattam82,2020-09-21 16:14:08,maximedenes,"I guess this is again because we don't unify with the conclusion early enough, but I'm not sure what exactly should be done."
696275667,991,mattam82,2020-09-21 18:00:28,herbelin,"I guess this is again because we don't unify with the conclusion early enough, but I'm not sure what exactly should be done.\n\nAnticipating on @mattam82's answer, the point is that with bindings are able (for Meta) to postpone the unification of the actual and expected type of the argument (so as e.g. introduce coercions).\nBut even if insertion of coercions is abandoned in the unifall move (it would require dedicated ""coercion"" evars I believe), the problem falls in one of the limitation of the c"
696279678,991,mattam82,2020-09-21 18:07:31,maximedenes,"But even if insertion of coercions is abandoned in the unifall move\n\nWe added (some of) it back by postponing the instantiation of holes of not-yet-known type.\n\nwith bindings are able (for Meta) to postpone the unification of the actual and expected type of the argument (so as e.g. introduce coercions).\n\nOn master, when is this unification postponed? Maybe we could use the same criterion."
696360478,991,mattam82,2020-09-21 20:36:53,herbelin,"On master, when is this unification postponed? Maybe we could use the same criterion.\n\nIn Clenv.clenv_unify_binding_type, there is a Meta flag TypeNotProcessed to postpone this unification."
696568399,991,mattam82,2020-09-22 07:58:53,gares,"I guess this is again because we don't unify with the conclusion early enough, but I'm not sure what exactly should be done.\n\nI'm a bit puzzled by the example. To me apply A with B is a way to help giving a type to A so that it unifies with the goal. It is not a shortcut for apply A; apply B (which here would have worked just fine).\nIs the minimization right?"
696606001,991,mattam82,2020-09-22 09:19:40,maximedenes,To me apply A with B is a way to help giving a type to A so that it unifies with the goal.\n\nI'm not sure exactly what you mean by this. apply foo with (n := bar) instantiates the n-th non-dependent premise in the type of foo by bar. Isn't it the way it is used in the example?
696701762,991,mattam82,2020-09-22 12:54:33,gares,"It is the intent of that line which is weird to me.\nInstantiating the first hyp with H is what triggers an hard problem. Instantiating the first hyp with H is not helping apply. To me you add a with n := t in order to ease the job of apply, it is a sort of extra hint. Sure, nobody prevents you from using with in other occasions, like this one. It just does not seem a common use case for apply with. I mean, one can always ask Coq to solve a unification problem that is hard. Here it seems a bit gr"
696720309,991,mattam82,2020-09-22 13:26:05,silene,"Since I am the author of the line, I feel compelled to reply. This kind of script is certainly a common use case, as far as I am concerned. Whenever apply foo. n: exact bar would succeed, I instead use apply foo with (n := bar)."
696729140,991,mattam82,2020-09-22 13:40:49,gares,"Even if Check (foo (n := bar)) fails? (or works by ""miracle"")?\nMy understanding of the problem minimized here is that, in order to make (foo (n := bar) : goal) typecheck one has to divine that (foo ?n : goal) (n := bar) is actually the right order in which things have to be done.\nOf course a unification problem which is that hard can happen deep and be almost invisible to the user. But in this minimized example it is immediate to see that by passing with (n := bar) you are looking for troubles. "
696742377,991,mattam82,2020-09-22 14:02:21,silene,"Even if Check (foo (n := bar)) fails? (or works by ""miracle"")?\n\nThat is not a good comparison. The correct one would be Check (foo (n := bar) : goal). Also, I would not call it a miracle, since Coq has all the information needed. Sure, I understand that Coq will fail to typecheck this term depending on the order of unification. So, I am perfectly fine with modifying my script. But there is nothing artificial about it."
696866707,991,mattam82,2020-09-22 17:29:03,herbelin,"Coming back to my proposal to add a way to solve equations of the form match ?n with ... end == rigid-term, if someone is interested in contributing, please tell."
696916840,991,mattam82,2020-09-22 18:58:40,maximedenes,"Coming back to my proposal to add a way to solve equations of the form match ?n with ... end == rigid-term, if someone is interested in contributing, please tell.\n\nI personally think it is totally unreasonable to add complexity to unification until the current implementation is documented."
696920062,991,mattam82,2020-09-22 19:04:41,herbelin,"On the other side, working on unification is an incent to document it..."
696923406,991,mattam82,2020-09-22 19:11:08,herbelin,"To continue on the question of documenting unification, I had started a branch with some documention but it requires some long term investment which I have difficulties to find. Working as part of an interaction between several people would be easier for me."
696925594,991,mattam82,2020-09-22 19:15:11,maximedenes,"I had started a branch with some documention but it requires some long term investment\n\nOh, I wasn't aware of that. Do you have a pointer? Given the critical need for documentation of the code, I think we should be very flexible on documentation PRs, i.e. accepting partial documentation, etc.\nSo in a sense, don't hesitate to publish the documentation work even if not finished. An incomplete documentation is always better than no documentation. Also, I'll be happy to give some feedback in some pa"
696947204,991,mattam82,2020-09-22 19:59:23,gares,"In its full generality, inverting a match is very hard, and in not possible since a match does not necessarily describe an injective function (just think at fibonacci 0 and fibonacci 1, the first example that comes to mind).\nIMO, this is where unification hints like mechanisms shine, they let the user add rules to unification which helps her development. If you stay at the purely abstract level of ""inverting a match"" then it has to be an heuristic, it works for you but may not work for me. But i"
696954979,991,mattam82,2020-09-22 20:15:12,herbelin,"Oh, I wasn't aware of that. Do you have a pointer? Given the critical need for documentation of the code, I think we should be very flexible on documentation PRs, i.e. accepting partial documentation, etc.\n\n\nSo in a sense, don't hesitate to publish the documentation work even if not finished. An incomplete documentation is always better than no documentation. Also, I'll be happy to give some feedback in some parts seem unclear to me.\n\nYou can e.g. look at f249320 (in branch trunk+structuration-u"
696958114,991,mattam82,2020-09-22 20:21:40,herbelin,"@gares: yes, ""unification hints"" are very interesting rules to guide unification. Here, however, I was not talking about a heuristic but about reversible progress, collecting the solutions as ""candidates"".\nI don't know what you call ""stock"" unification, but if you mean the reversible part of unification (i.e. the part which does not lose solutions), this is exactly what I'm talking about."
701405394,991,mattam82,2020-09-30 13:53:14,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
701597043,991,mattam82,2020-09-30 19:29:07,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
701996850,991,mattam82,2020-10-01 09:03:24,maximedenes,"@mattam82 quick question: the behavior of eapply seems to have significantly changed w.r.t. typeclasses:\nClass C := {}.\nInstance foo : C := {}.\n\nAxiom bar : forall x : C, x = x -> True.\n\nGoal True.\neapply bar.\nOn master:\n============================\n  foo = foo\nOn this branch:\n============================\n  ?x = ?x\nAre we missing a call to TC resolution somewhere?"
701997949,991,mattam82,2020-10-01 09:05:30,maximedenes,"The behavior on master is strange, though, because apply bar complains that it cannot find an instance for x, but eapply bar finds foo..."
704531728,991,mattam82,2020-10-06 20:22:50,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
704879422,991,mattam82,2020-10-07 11:44:08,maximedenes,"Notes from latest session:\n\ntlc has a strange use of typeclasses on non-implicit lemma arguments, to discuss with Arthur\nbignums now goes through properly\nargosy shows an exact step which has become more powerful in eauto, to investigate more with Matthieu\nbbv should be fixed by mit-plv/bbv#32\nbedrock2 shows an anomaly in flex_kind_of_term (reduced to a call to rewrite_strat)\ncompcert: lots of apply -> eapply, strange error in backend/Unusedglobproof.v"
704889562,991,mattam82,2020-10-07 12:05:15,mattam82,And equations should be fixable except for a remaining bug in auto
707648606,991,mattam82,2020-10-13 10:30:11,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
710099955,991,mattam82,2020-10-16 15:01:04,maximedenes,"Notes, todo:\n\n try to call unify directly from e_give_exact, instead of going through heuristics\n add a flag to disable Miller pattern unification, and use the flag in simple apply (and eauto)\n put with_ho condition outside of second_order_matching\n fix first_order stack construction"
710652936,991,mattam82,2020-10-16 21:23:48,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
850534413,14384,ana-borges,2021-05-28 16:30:07,coqbot-app,"Hey, I have detected that there were CI failures at commit b1022f6 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4cd4a0b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
852789026,14384,ana-borges,2021-06-02 06:54:23,herbelin,@proux01: would you like to have a look at this PR which seems otherwise rather straightforward to the outsider I'am? (cc @maximedenes too)
853506546,14384,ana-borges,2021-06-03 02:12:58,ana-borges,"The changes to Int63.v seem wrong now that Uint63.v exists, don't they?\n\nYeah. I wasn't sure which PR would end up being merged first. I'll update this one as soon as #13895 is merged."
853937756,14384,ana-borges,2021-06-03 15:00:57,ana-borges,"Could you rebase over #13895 so that once it is merged, we can proceed easily with this one?\n\nYep.\n\nI have no strong opinion about the _ <? _ <? _ notations. I would rather not add them since I view primitive integers as a type used for programs rather than proofs and programming languages usually don't provide such notations.\n\nIn principle I agree, but this was specifically requested by a friend who is trying Sint63 out. He wanted it for a tool that solves a goal by computing it for all x bound"
854546382,14384,ana-borges,2021-06-04 09:58:05,silene,"In principle I agree, but this was specifically requested by a friend who is trying Sint63 out. He wanted it for a tool that solves a goal by computing it for all x bounded by some constants. Thus the a <? x <? b notation.\n\nBut is that notation useful in the general case? For example, if I were to write 0 <=? f x <? 10, I would expect the value of f x to be computed only once. I would be annoyed if I had to remember that I need to write let y := f x in 0 <=? y <? 10."
854820824,14384,ana-borges,2021-06-04 15:37:08,ana-borges,"But is that notation useful in the general case? For example, if I were to write 0 <=? f x <? 10, I would expect the value of f x to be computed only once. I would be annoyed if I had to remember that I need to write let y := f x in 0 <=? y <? 10.\n\nFair. So your point is that adding the notation is misleading because it looks like it is doing more work than it is actually doing?"
854833853,14384,ana-borges,2021-06-04 15:56:15,silene,"So your point is that adding the notation is misleading because it looks like it is doing more work than it is actually doing?\n\nRight, as defined, it is misleading. But I have no opinion either way on the notation itself. So, if you feel the notation is worth having, you should back it up with an actual definition to avoid the issue, e.g.,\nDefinition ltltb (m n p : int63) := m <? n && n <? p.\nNotation ""m <? n <? p"" := (ltltb m n p)."
854915958,14384,ana-borges,2021-06-04 18:16:39,ana-borges,"So, if you feel the notation is worth having, you should back it up with an actual definition to avoid the issue\n\nThis is good at solving the problem you identified, but I don't fully like it as a solution either. It would mean that using lemmas about _ && _ could only happen once the definition was unfolded (unless I'm missing something?), which is annoying. Short of reproving all the && lemmas for these notations (which sounds like a bad idea), is there a way to have both features?"
854930979,14384,ana-borges,2021-06-04 18:42:40,silene,"is there a way to have both features?\n\nNone that I know of, unfortunately. Or rather, I know some, but they are so heavy that they are not worth it. For example, you can define a let_in function and prove that it is compatible with pointwise equality (and declare the corresponding Proper instance), so that you can use setoid_rewrite to rewrite && under the binder:\nDefinition let_in {T U} (v:T) (w:T -> U) := w v.\nNotation ""m <? n <? p"" := (let_in n (fun v => m <? v && v <? n))."
854936367,14384,ana-borges,2021-06-04 18:53:30,proux01,Maybe an alternative could be to use ssreflect's rewrite which tends to unfold automatically (haven't tested though).
855227942,14384,ana-borges,2021-06-05 11:44:49,ana-borges,"Maybe an alternative could be to use ssreflect's rewrite which tends to unfold automatically (haven't tested though).\n\nYes, this does work.\nAs someone who mostly uses ssr, I would be fine with this solution. But I just realized that the bool version of this notation is a mathcomp thing, and it doesn't otherwise appear in the stdlib. So I guess it doesn't make sense to add it, as it would be lonely."
855429594,14384,ana-borges,2021-06-06 17:02:50,silene,"Please rebase and squash, so that we have a clearer view of whether this is ready to merge."
855733005,14384,ana-borges,2021-06-07 08:42:42,silene,@coqbot merge now
789912915,13895,ana-borges,2021-03-03 17:32:32,ana-borges,"I tried compiling the stdlib before updating every mention of Int63 to check that the deprecation warnings were working as expected (*), and there's one problem I couldn't solve. It is illustrated by the following error in line 139 of .../Int63/Cyclic63.v:\nLocal Open Scope int63_scope.\n...\nLocal Open Scope Z_scope.\n...\nreplace (φ (i << 1 + 1)) with (φ i * 2 + 1).\n(* The term ""i << 1"" has type ""int"" while it is expected to have type ""Z"". *)\nAnd indeed Locate ""+"" shows that Z.add is the default in"
791638661,13895,ana-borges,2021-03-05 19:41:51,ana-borges,I conclude I definitely don't understand scopes.\n\nI managed to fix this in 895b65f with the help of @pi8027 (see zulip).
792729209,13895,ana-borges,2021-03-08 12:40:10,silene,"I wonder if it is really worth marking everything in Int63 as deprecated. For example, it feels strange to tell users to use Uint63.wB instead of Int63.wB, since the size of 63-bit integers is independent from their signedness. (That does not mean it should not be an only parsing notation, just that it should not be deprecated.)\nAlso, there are a bunch of lemmas that are completely to_Z-free, so it seems a bit counterproductive to move them to Uint63.v. I guess that would be where I draw the lin"
793036298,13895,ana-borges,2021-03-08 20:03:04,ana-borges,"Otherwise, users that need both logical and signed operations will have to import both Uint63 and Sint63\n\nRight now Sint63 exports Uint63, so the user would only need to import Sint63. I was imagining that, after enough time, the Int63.v file would be completely removed, and after even more time Sint63 would be renamed to Int63.\nWhat you have in mind seems to be to split the current Int63.v file in two (along the logical / arithmetical divide), deprecate only the arithmetical part and keep the t"
793450291,13895,ana-borges,2021-03-09 06:24:43,silene,"What you have in mind seems to be to split the current Int63.v file in two (along the logical / arithmetical divide), deprecate only the arithmetical part and keep the three files in perpetuity. Did I understand correctly?\n\nYes. It seems better to have all the sign-agnostic lemmas into their own file.\n\nRight now Sint63 exports Uint63, so the user would only need to import Sint63.\n\nI had missed that part of the patch. This does not feel quite right for the formalization of signed integers to expo"
825149188,13895,ana-borges,2021-04-22 20:05:39,ana-borges,"Hi @silene, sorry for the delay, I didn't have time to work on this for a while.\n\nIt seems better to have all the sign-agnostic lemmas into their own file.\n\nThis idea has grown on me. What do you suggest we do with max_int? It has different values in Uint63 and Sint63 but it is used in some logical operations:\nDefinition set_digit x p (b:bool) :=\n  if if 0 <=? p then p <? digits else false then\n    if b then x lor (1 << p)\n    else x land (max_int lxor (1 << p))\n  else x.\nMaybe define it in Int6"
825150370,13895,ana-borges,2021-04-22 20:07:29,ana-borges,"Some observations / questions:\n\nI can't deprecate modules. For example\n\nModule Int63ring := CyclicRing Int63Cyclic.\nis now\nModule Uint63ring := CyclicRing Uint63Cyclic.\nand anyone referring to the Int63 version will just be received with an ""unable to locate"" error.\n\nI got into this assuming I wouldn't touch the kernel, but there are plenty of things named *int63* there.\nI deprecated everything in ZifyInt63.v, but I understand it's an internal file, so perhaps this isn't necessary?\nIs there a st"
825660552,13895,ana-borges,2021-04-23 13:31:39,ana-borges,"This fails in flocq with\n\nFile ""./src/IEEE754/PrimFloat.v"", line 257, characters 2-12:\nError: The reference Int63.to_Z was not found in the current environment.\n\nIt happens because IEEE754/PrimFloat.v doesn't import Int63, which means that it doesn't get access to the deprecated warning. It imports Float instead, which used to import Int63 and now imports Uint63. So it makes sense that it fails, since there's no reference to Int63 in the chain anymore.\nThe only way I see of avoiding this kind of"
825670774,13895,ana-borges,2021-04-23 13:47:34,ana-borges,"Apparently deprecating everything in ZifyInt63.v is not really helpful. When importing it (instead of the new ZifyUint63), lia just stack overflows. Exporting ZifyUint63 in ZifyInt63 doesn't fix this, so I'm not sure I understand what the problem is. I know nothing about how zify and lia work, so I'm probably missing something obvious."
848743200,13895,ana-borges,2021-05-26 12:52:03,silene,"What do you suggest we do with max_int?\nMaybe define it in Int63 and overload it in Sint63\n\nThat makes sense.\n\nI deprecated everything in ZifyInt63.v, but I understand it's an internal file, so perhaps this isn't necessary?\n\nYes. In fact, I would not even have bothered renaming it.\n@fajb Any opinion?\n\nModule Uint63ring := CyclicRing Uint63Cyclic.\n\nI don't think this is worth renaming.\n\nThe only way I see of avoiding this kind of error is to continue importing Int63 alongside Uint63 in every rele"
848756809,13895,ana-borges,2021-05-26 13:10:23,fajb,"I deprecated everything in ZifyInt63.v, but I understand it's an internal file, so perhaps this isn't necessary?\n\nYes. In fact, I would not even have bothered renaming it.\n@fajb Any opinion?\n\nNo strong opinion. But this is not quite an internal file, users need to Import it to get zify working on int63.\nSo, renaming is probably better.\nEventually, having a ZifySint63.v  for signed int63 would be nice too."
849032362,13895,ana-borges,2021-05-26 18:47:58,coqbot-app,"Hey, I have detected that there were CI failures at commit 4760ede without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ac9a310 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-flocq."
849160302,13895,ana-borges,2021-05-26 22:22:49,coqbot-app,"Hey, I have detected that there were CI failures at commit 98b0dc3 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ac9a310 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-flocq.\nHowever, you may want to wait until the pipeline for the base commit (ac9a310) finishes."
849215368,13895,ana-borges,2021-05-27 00:41:40,ana-borges,"I was trying to write a PR to flocq to fix the error, as explained here, but it appears that I can't fork the flocq project without an account. Is there a kind Inria member who could give me access, or write the PR themselves? It is a simple matter of changing Int63.to_Z to Uint63.to_Z in IEEE754/PrimFloat.v."
849357971,13895,ana-borges,2021-05-27 06:16:47,silene,"It is a simple matter of changing Int63.to_Z to Uint63.to_Z in IEEE754/PrimFloat.v.\n\nNo, it is not, because that would make Flocq unable to compile with any of Coq released versions. That is why I was wondering whether doing Import Int63 and replacing Int63.to_Z with to_Z would fix the issue.\n\nBut this is not quite an internal file, users need to Import it to get zify working on int63.\n\nBut users do not need to access any of its content, do they? So, a middle ground could be to rename the file t"
849421793,13895,ana-borges,2021-05-27 07:56:07,fajb,"But this is not quite an internal file, users need to Import it to get zify working on int63.\n\nBut users do not need to access any of its content, do they? So, a middle ground could be to rename the file to ZifyUint63.v and to just have a dummy file ZifyInt63.v containing a single line Require Export ZifyUint63.v.\n\nSure. That would do the trick. I am not familiar with deprecation but it seems that would not deprecate ZifyInt63.v.\n@ana-borges I am fine with whatever option."
849429956,13895,ana-borges,2021-05-27 08:08:02,silene,"I am not familiar with deprecation but it seems that would not deprecate ZifyInt63.v.\n\nUnfortunately, there is no way to deprecate a file, only definitions. So, if users do not access the content of ZifyInt63.v but just import it, they will not be made aware of the deprecation anyway."
849531720,13895,ana-borges,2021-05-27 10:46:45,ana-borges,"No, it is not, because that would make Flocq unable to compile with any of Coq released versions. That is why I was wondering whether doing Import Int63 and replacing Int63.to_Z with to_Z would fix the issue.\n\nYou are right, I just didn't think to value this. Require Int63 is enough to fix the issue, no need to replace Int63.to_Z with to_Z, if the former is preferred for some reason.\n\nSo, a middle ground could be to rename the file to ZifyUint63.v and to just have a dummy file ZifyInt63.v contai"
849712205,13895,ana-borges,2021-05-27 15:06:30,coqbot-app,"Hey, I have detected that there were CI failures at commit 0361a61 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ac9a310 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-interval."
849730904,13895,ana-borges,2021-05-27 15:31:10,ana-borges,@coqbot ci minimize
849730969,13895,ana-borges,2021-05-27 15:31:16,coqbot-app,I have initiated minimization at commit 0361a61 for the suggested target ci-interval as requested.
849735330,13895,ana-borges,2021-05-27 15:37:09,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/interval/src/Float/Primitive_ops.v (from ci-interval) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 120KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.ZArith.ZArith."
849761228,13895,ana-borges,2021-05-27 16:12:05,JasonGross,Still trying to figure out what's up with the minimize truncating some files in the middle of statements.  I suspect some issue with unicode handling
849797982,13895,ana-borges,2021-05-27 17:08:31,ana-borges,"I don't exactly understand why there is a problem with interval, but the following change at line 2592 of Float/Primitive_ops.v fixes it:\n-  with (Z.eqb (Int63.to_Z (normfr_mantissa f' >> of_Z (FloatOps.prec - e'') land 1)) 0).\n+  with (Z.eqb (Int63.to_Z (normfr_mantissa f' >> of_Z (FloatOps.prec - e'') land 1)) 0)%int63.\n\n@silene would you mind making the change? Thank you for dealing with flocq by the way."
849813372,13895,ana-borges,2021-05-27 17:33:33,coqbot-app,"Hey, I have detected that there were CI failures at commit 0361a61 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ac9a310 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-interval."
849816125,13895,ana-borges,2021-05-27 17:38:08,silene,"would you mind making the change?\n\nUnfortunately, the version of Interval that is tested is not the official one, so my changes have no effect."
849818181,13895,ana-borges,2021-05-27 17:41:33,ana-borges,"Unfortunately, the version of Interval that is tested is not the official one, so my changes have no effect.\n\nAh, I see. Thanks anyway. I guess I should ask someone else, perhaps @ejgallego?"
849968067,13895,ana-borges,2021-05-27 21:56:50,JasonGross,"Oops, there was a typo, trying this again.\n\nStill trying to figure out what's up with the minimize truncating some files in the middle of statements. I suspect some issue with unicode handling\n\nTruncation was about github limits, issue was about how I was processing the error log. Hopefully fixed now, let's try again\n@coqbot ci minimize"
849974998,13895,ana-borges,2021-05-27 22:11:10,JasonGross,"Sorry for the spam, let me try this once more to work around an issue with the native compiler.  @coqbot ci minimize"
849975031,13895,ana-borges,2021-05-27 22:11:13,coqbot-app,I have initiated minimization at commit 0361a61 for the suggested target ci-interval as requested.
849990023,13895,ana-borges,2021-05-27 22:45:37,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/interval/src/Float/Primitive_ops.v (from ci-interval) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/interval/src"" ""Interval"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Bignums"" ""Bignums"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-c"
850325571,13895,ana-borges,2021-05-28 10:37:15,ana-borges,"@silene, going back to the what to place in Int63 vs Uint63:\n\nthere are a bunch of lemmas that are completely to_Z-free, so it seems a bit counterproductive to move them to Uint63.v.\n\nYou are right, but many of these still depend on unsigned operations, most notably comparisons (but arithmetic as well). It's still possible to define <? in Int63, use the same one in Uint63, and then a different one in Sint63... but what's the point? And would we then keep three scopes (int63_scope, uint63_scope a"
850372690,13895,ana-borges,2021-05-28 12:08:30,silene,"You are right, but many of these still depend on unsigned operations, most notably comparisons (but arithmetic as well). It's still possible to define <? in Int63, use the same one in Uint63, and then a different one in Sint63... but what's the point?\n\nWhat I am trying to avoid is the case where a user wants signed integers but is forced to include Uint63 because lots of useful theorems are there. Obviously, theorems about unsigned comparisons have no reason to be in Int63. But the following one"
850402698,13895,ana-borges,2021-05-28 13:01:28,ana-borges,"What I am trying to avoid is the case where a user wants signed integers but is forced to include Uint63 because lots of useful theorems are there.\n\nAgreed that this would be bad. Right now Sint63.v exports Uint63. This is suboptimal but IMO it's orthogonal to this PR. I can try to open another PR where that is changed, although as far as I can tell it would mean a lot of lines of the form Definition of_Z := Uint63.of_Z in the Sint63.v file.\n\n\nadd_assoc\nbit_lsl\n\n\nThese and related ones don't nee"
850436526,13895,ana-borges,2021-05-28 13:54:46,silene,"Right now Sint63.v exports Uint63. This is suboptimal but IMO it's orthogonal to this PR.\n\nNo. Currently Sint63 exports Int63. Your pull request changes it to exporting Uint63, which we want for compatibility reasons right now, but which we do not want in the long run. After one or two releases, we want to remove this dependency of Sint63 over Uint63. At that point, Sint63 would lose theorems such as add_assoc. The only way I can think of not losing such theorems is to put them them into a third"
850452491,13895,ana-borges,2021-05-28 14:19:17,ana-borges,"For now, this is just fine since Int63 depends on Uint63\n\nOk, I had not understood that you wished to maintain this dependency for now.\n\nthe issue will only materialize in a later release of Coq when we remove this dependency.\n\nI don't understand how this will be accomplished. I only mention it because if the conclusion a year from now is that it's impossible, then this discussion is moot.\n\nthe notations in Int63 should not be marked as deprecated, as eventually that is where they will land.\n\nAr"
850479032,13895,ana-borges,2021-05-28 14:58:08,silene,"Are you referring to notations like Notation wB := wB (only parsing), or notations like Infix ""+"" := ..., or both? I assume the former, but if not please let me know.\n\nYes, the former. The latter would only matter for a third scope (see below).\n\nI don't understand how this will be accomplished.\n\nYour pull request makes Int63 depends on Uint63. After a few releases, we will reverse this dependency, that is, Uint63 will depend on Int63 (as will Sint63). At that point, Notation wB will become Defin"
850488342,13895,ana-borges,2021-05-28 15:12:41,silene,"To be clear, I am not asking for a large change with respect to the current pull request. I am just asking that the deprecation warning be removed from notations such as size, add, land, lsl, eqb, get_digit, add_comm, etc. If some things can be moved back from Uint63 to Int63 because they are not needed in Uint63, all the better, but that is on a best effort basis."
850570035,13895,ana-borges,2021-05-28 17:38:30,ana-borges,"To be clear, I am not asking for a large change with respect to the current pull request.\n\nThanks for clarifying, indeed I was missing this before today.\nSince I'm now picking what will and won't be deprecated, I noticed there are some Z lemmas that at first glance should perhaps be relocated to another file. Seems like a good opportunity to do it, but is there some reason for them being here that I might be missing? I'm talking about things like\nLemma Z_lt_div2 x y : x < 2 * y -> x / 2 < y.\nwhi"
850625833,13895,ana-borges,2021-05-28 19:27:37,silene,"I'm talking about things like Z_lt_div2 which I would perhaps place in ZArith/Zdiv.v.\n\nYes and no. I agree that its place is not in Uint63.v. But it is just a trivial corollary of Z.div_lt_upper_bound. So, it should never have existed in the first place.\nPerhaps some other theorems are more interesting and are worth moving under ZArith, though."
850671164,13895,ana-borges,2021-05-28 21:10:09,ana-borges,"So, it should never have existed in the first place.\n\nSo now it will live in Uint63.v in perpetuity?"
850674577,13895,ana-borges,2021-05-28 21:17:52,coqbot-app,"Hey, I have detected that there were CI failures at commit 994ada1 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 467fec9 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-interval."
850678317,13895,ana-borges,2021-05-28 21:25:53,silene,"So now it will live in Uint63.v in perpetuity?\n\nWe have some ways around it. For example, you could create a Deprecated module inside Uint63.v and put lemmas such as Z_lt_div2 inside it. Then, you make the notation in Int63.v points to it, but you change the deprecation notice so that it points to Z.div_lt_upper_bound. And the day we remove the compatibility notation from Int63.v, we kill Deprecated.Z_lt_div2 along the way."
850771146,13895,ana-borges,2021-05-29 05:05:12,coqbot-app,"Hey, I have detected that there were CI failures at commit fc14251 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 367831f succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-interval."
850818049,13895,ana-borges,2021-05-29 11:33:26,coqbot-app,"Hey, I have detected that there were CI failures at commit fc14251 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 367831f succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-interval."
850818977,13895,ana-borges,2021-05-29 11:41:43,ana-borges,"Please add a changelog entry.\n\nDone.\n\nAlso set the milestone and a label or two.\n\nI would, but I don't think I can. EDIT: I can now, thanks @SkySkimmer!\n\nPerhaps you would squash just before merge?\n\nYes."
850845724,13895,ana-borges,2021-05-29 14:49:57,coqbot-app,"Hey, I have detected that there were CI failures at commit b76dbb9 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 367831f succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-interval."
850879151,13895,ana-borges,2021-05-29 18:32:11,coqbot-app,"Hey, I have detected that there were CI failures at commit 7543193 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 367831f succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-interval."
850888457,13895,ana-borges,2021-05-29 19:38:45,coqbot-app,"Hey, I have detected that there were CI failures at commit 7543193 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 367831f succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-interval."
850934699,13895,ana-borges,2021-05-30 03:44:14,coqbot-app,"Hey, I have detected that there were CI failures at commit 1036bf2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 367831f succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-interval."
848877009,14392,mattam82,2021-05-26 15:38:04,RalfJung,"I think this question came up before, about what the ""head"" of a primitive projection is. IMO it would make most sense that this be treated consistently (for mode !, for simpl annotations, and anywhere else the ""head"" of an expression is relevant).\n\nThis reverts a change that made Proj (p, ?X) and match ?X with not be considered as not headed by evars for matching a hint mode.\n\nThis sentence has too many negations for me to be able to parse it.^^"
848998768,14392,mattam82,2021-05-26 18:00:34,coqbot-app,"Hey, I have detected that there were CI failures at commit f4d758f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ac9a310 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-perennial."
849110997,14392,mattam82,2021-05-26 20:54:58,JasonGross,@coqbot ci minimize
849111071,14392,mattam82,2021-05-26 20:55:06,coqbot-app,I have initiated minimization at commit f4d758f for the suggested target ci-perennial as requested.
849112996,14392,mattam82,2021-05-26 20:58:29,coqbot-app,Error: Could not minimize file  (from ci-perennial) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 2.1MiB file on GitHub Actions Artifacts under build.log)\nlogic/crash_adequacy.vos  \n  inflating: _build_ci/perennial/src/program_logic/crash_lang.v  \n  inflating: _build_ci/perennial/src/program_logic/crash_lang.vo  \n  inflating: _build_ci/perennial/src/program_logic/crash_lang.vok  \n  inflating: _build_ci/perennial/src/program_logic/crash_lang.vos  \n  inflating: _build_ci/pe
849165632,14392,mattam82,2021-05-26 22:35:45,JasonGross,Let's try again now that the base check has finished\n@coqbot ci minimize
849165660,14392,mattam82,2021-05-26 22:35:48,coqbot-app,"I have initiated minimization at commit f4d758f for the suggested target ci-perennial as requested.\nHowever, you may want to try again once the pipeline for the base commit (ac9a310) finishes."
849168699,14392,mattam82,2021-05-26 22:44:20,mattam82,"Said otherwise, in mode !, an index term of a constraint matches except if it is of the shape ?X t1 ... tn. Before this PR, ?X.(p) and match ?X with ... would not match ""!"". For simpl, the head would rather be the name of the constant/projection rather than the discriminee, so this PR is more consistent with this view."
849176004,14392,mattam82,2021-05-26 23:04:20,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/src/program_proof/examples/inode_proof.v (from ci-perennial) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 45KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Re"
849447542,14392,mattam82,2021-05-27 08:34:06,mattam82,"@robbertkrebbers the perenial error seems to be related to iris succeding more with this patch. On goal:\nΣ: gFunctors\nheapG0: heapG Σ\nstagedG0: stagedG Σ\nallocG0: allocG Σ\ninodeN, allocN: namespace\nk: nat\nl: loc\nk': nat\nP: inode.t → iProp Σ\naddr, off: u64\nQ: option Block → iPropI Σ\nH: (S k < k')%nat\nΦ: val → iPropI Σ\nΦc: iPropI Σ\nσ: inode.t\nmb: option Block\nHσ: mb = σ.(inode.blocks) !! int.nat off\ns: Slice.t\n1/1\n""HQ"" : Q mb\n""Hblock"" : match mb with\n           | Some b => is_block s 1 b\n         "
849449335,14392,mattam82,2021-05-27 08:36:53,robbertkrebbers,"I think it makes sense that the iFrame works now, so I'm in favor of the new behavior because it's more consistent.\nIf @tchajed and @RalfJung agree, I think they can provide a fix for perenial that's forward compatible with this PR."
849508577,14392,mattam82,2021-05-27 10:07:32,mattam82,"Yep, it's easy to fix perennial in a compatible way."
849511979,14392,mattam82,2021-05-27 10:13:12,RalfJung,"I don't have a strong opinion on whether this works or not, and I find it hard to judge the larger consequences of this change. Seems fine for me otherwise."
849522721,14392,mattam82,2021-05-27 10:30:49,mattam82,"This generally allows to perform dependent resolution with instances of the shape forall a : SomeClass, SomeOtherClass (proj a), while having mode ! for SomeOtherClass. I think that's a net improvement for these situations."
849523860,14392,mattam82,2021-05-27 10:32:47,mattam82,I've started the bench to check this doesn't negatively impact performance.
849627962,14392,mattam82,2021-05-27 13:19:06,coqbot-app,"Hey, I have detected that there were CI failures at commit 3c8378b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ac9a310 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-perennial."
849707867,14392,mattam82,2021-05-27 15:00:42,tchajed,"Perennial should now work, the fixes are now on the coq/tested branch."
849708566,14392,mattam82,2021-05-27 15:01:38,mattam82,"Yep, this one should be all green, I removed the overlay"
849710016,14392,mattam82,2021-05-27 15:03:37,tchajed,"I only pushed the fixes from master to coq/tested a couple minutes ago, so the current ci-perennial job will fail, but if you restart it now it should succeed."
849857617,14392,mattam82,2021-05-27 18:44:35,mattam82,"Good @coq/tactics-maintainers , please review now."
850255894,14392,mattam82,2021-05-28 08:42:06,mattam82,@ppedrot this is a prerequisite for #9711
850257925,14392,mattam82,2021-05-28 08:45:29,mattam82,"I rebased, but did not change anything"
850275037,14392,mattam82,2021-05-28 09:13:12,robbertkrebbers,"To be honest: I think this MR makes the behavior more uniform, hence less of a headless duck."
850368269,14392,mattam82,2021-05-28 11:59:52,coqbot-app,"Hey, I have detected that there were CI failures at commit a30289e without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 92f3b90 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
850377820,14392,mattam82,2021-05-28 12:17:41,ppedrot,"@mattam82 did you run a bench? I can't find it in the (notoriously cumbersome) gitlab UI. Also, if you want this to go into 8.14 it needs to be merged asap."
850394596,14392,mattam82,2021-05-28 12:47:39,coqbot-app,"Hey, I have detected that there were CI failures at commit a30289e without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 92f3b90 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
850410911,14392,mattam82,2021-05-28 13:14:52,mattam82,"I triggered a bench, it's easy: just go to the bench job on the gitlab ci pipeline details link and ""trigger manual action"""
850411713,14392,mattam82,2021-05-28 13:16:12,mattam82,"Also, historical note: @ppedrot you were the one who added the Proj (p, c) -> head_evar c case about 4 years ago out of zeal I think :)"
850824480,14392,mattam82,2021-05-29 12:25:55,SkySkimmer,https://gitlab.com/coq/coq/-/jobs/1301186577\n┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │   mem faults    │\n│                             │                         │                                  
850825965,14392,mattam82,2021-05-29 12:36:43,ppedrot,If nobody complains I will merge this tonight so as to fit into the release schedule.
836586333,14293,MSoegtropIMC,2021-05-10 11:34:51,MSoegtropIMC,"Btw.: wouldn't it be time to do the same name change as done for Z in Q, that is use a Q. prefix? Also one could better align similar lemmas between Z and Q."
838269489,14293,MSoegtropIMC,2021-05-11 10:57:26,koraa,"Thank you for linking the PR in the other issue! I don't really know enough about development in Coq (yet) to be a good judge of how useful/good the code is, but I do think they seem useful, especially the simple ones like Qabs_le/Qabs_gt…\nQabs strikes me as particularly useful as it allows one to reason about positive rationals; putting Zabs into relation to Z.of_N n / p and beyond that similar modules for Zpos z # p, Zneg z # p. Z.of_N n # p, (z % d) # d might be very helpful modeling a variet"
839631543,14293,MSoegtropIMC,2021-05-12 09:41:59,MSoegtropIMC,@koraa : I guess you mean the relation of Qabs with the various forms of rationals you mentioned. I am not sure if a lemma just relating the sign of the numerator with the result of Qabs and chaining such lemmas with e.g. Z.of_N>=0 wouldn't be more useful - it depends on how frequently specific forms are used and also what people search for. A more generic lemma might be harder to find than Search (Qabs (Zpos _ # _)). Probably one should have both - generic and specific forms.\nWhat I am missing 
842421755,14293,MSoegtropIMC,2021-05-17 15:32:18,MSoegtropIMC,"@herbelin, @silene, @thery : can someone please review this?"
842706144,14293,MSoegtropIMC,2021-05-17 23:21:11,herbelin,"Btw.: wouldn't it be time to do the same name change as done for Z in Q, that is use a Q. prefix? Also one could better align similar lemmas between Z and Q.\n\nAbsolutely. I believe a compatibility layer would work."
842898297,14293,MSoegtropIMC,2021-05-18 06:47:39,MSoegtropIMC,@herbelin : thanks for the review! I will do the changes you suggest except:\n\na notation for Qpower_positive: I see this more as an implementation vehicle and don't expect users to see this a lot - and if they see it it is probably more confusing than helpful if it uses the same notation as Qpower.\nI will clean up variable naming for existing lemmas but not parameter order - this should be done in a separate step together with renaming. For the new lemmas I will review parameter order.
843828248,14293,MSoegtropIMC,2021-05-19 07:31:36,MSoegtropIMC,"@herbelin : thinking about this I wonder if I shouldn't go the whole way right away. Doing partial cleanup like parameter naming doesn't seem that sensible. Do you think I should make a complete overhaul of the Q library as part of this PR, including adjusting lemmas names and structure to Z and R and using a Q. prefix? It might get a bit hard to review the changes of the PR as is then, but you already did this. Or would it make more sense to first merge this as is (except for the naming of the "
848070897,14293,MSoegtropIMC,2021-05-25 17:27:27,MSoegtropIMC,"@herbelin : as a preparation for cleanup I wrote a shell script to search for Q lemmas with the same name, and if this does not exists with the same signature in R (modulo some obvious replacements). Not terribly scientific but works reasonably well. In the attached archive you find the results. The .v file produces the list of Q lemmas I search for. The .special file is a hand made selection of Q lemmas which don't make a lot of sense in R (at first glance). The .miss2 file contains those which"
848560018,14293,MSoegtropIMC,2021-05-26 08:06:10,MSoegtropIMC,"@herbelin : I implemented your review comments as follows:\n\nQpower_pos renamed to Qpower_0_le and added a (in 8.14 not yet deprecated) notation\nrenamed the new lemmas to Qpower_0_lt, Qpower_1_lt_pos, Qpower_1_lt, Qpower_1_le_pos, Qpower_1_le. I also changed all lemmas such that the constant in the comparison is consistently on the left side and that the comparison mentioned in the lemmas name matches the resulting direction. Note that for Q gt and ge are just notations for lt and lw with swapped"
849123286,14293,MSoegtropIMC,2021-05-26 21:14:25,herbelin,I think it doesn't make a lot of sense to do further work in a hurry just before the branch of 8.14.\n\nI agree.\nAnd thanks for the detailed analysis Q vs R. That's very interesting. I will comment later.
849748403,14293,MSoegtropIMC,2021-05-27 15:54:46,MSoegtropIMC,"@silene, @herbelin : this should be ready to merge. I just wonder if I should mention in the change log entry, that lemmas have been moved from QExtra and partly renamed. I didn't do so because QExtra is not documented (explicitly excluded from the library documentation) and I guess few people included the constructive real files and found them via Search."
849758690,14293,MSoegtropIMC,2021-05-27 16:08:39,silene,"I guess few people included the constructive real files and found them via Search.\n\nUnfortunately, you do not need to explicitly mention constructive real numbers:\nRequire Import Reals QArith.\nSearch (_ + _ < _ + _)%Q.\n(* QExtra.Qplus_lt_compat: forall x y z t : Q, x < y -> z < t -> x + z < y + t *)"
849768835,14293,MSoegtropIMC,2021-05-27 16:23:27,MSoegtropIMC,"That is true. Still I don't think anybody used this - this was only available in Coq 8.13. None of the developments in Coq CI used any of the renamed lemmas. But if you prefer, I can add compatibility notations for the lemmas for which I changed the name."
849771884,14293,MSoegtropIMC,2021-05-27 16:27:56,silene,"I don't think that the deprecation lemmas are needed. But the changelog entry is worth it, just in case someone did use the lemmas."
849780061,14293,MSoegtropIMC,2021-05-27 16:40:23,MSoegtropIMC,Agreed - I will write a better changelog entry.
850170530,14293,MSoegtropIMC,2021-05-28 06:19:22,MSoegtropIMC,@silene : I added a detailed description of the changes in the change log entry. I didn't do any other changes.
850285686,14293,MSoegtropIMC,2021-05-28 09:29:48,coqbot-app,"Hey, I have detected that there were CI failures at commit 05b6c1f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit b7d10ab succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
850408582,14293,MSoegtropIMC,2021-05-28 13:11:09,MSoegtropIMC,@silene @herbelin : as far as I can tell the CI error is unrelated since:\n\nthe same error happened on master commits 2x today\nCI passed before and I just changed the change log entry and as far as I can tell the failing job does not depend on changelog entries (like a doc task would).\n\nSo I would say this is ready to merge.
850448873,14293,MSoegtropIMC,2021-05-28 14:13:50,coqbot-app,"Hey, I have detected that there were CI failures at commit 05b6c1f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit b7d10ab succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
850951092,14293,MSoegtropIMC,2021-05-30 06:42:01,MSoegtropIMC,"@silene : I did the _r/_l renaming but not the Qmult_power and Qmult_power_positive one, because these are pre-existing lemmas (I just moved the second one around in Qpower.v)."
853125740,14293,MSoegtropIMC,2021-06-02 15:29:29,silene,@coqbot merge now
832601049,14253,ppedrot,2021-05-05 11:03:53,ppedrot,Bench https://gitlab.com/coq/coq/-/jobs/1237769695\n┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │   mem faults    │\n│                             │                         │                            
833844204,14253,ppedrot,2021-05-06 20:37:47,ppedrot,"Funny experiment but not really conclusive. Some single lines show important differences but it doesn't stand out it the whole bench, and they are rather small in absolute values."
862122873,14253,ppedrot,2021-06-16 07:28:33,ppedrot,Reopening because it actually fixes a reported bug.
862241029,14253,ppedrot,2021-06-16 10:25:28,coqbot-app,"Hey, I have detected that there were CI failures at commit ec55829 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a1fac38 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_parsers."
862243610,14253,ppedrot,2021-06-16 10:29:48,coqbot-app,"Hey, I have detected that there were CI failures at commit ec55829 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a1fac38 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_parsers."
862265478,14253,ppedrot,2021-06-16 10:46:38,coqbot-app,"Hey, I have detected that there were CI failures at commit ec55829 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a1fac38 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_parsers."
862285058,14253,ppedrot,2021-06-16 11:02:50,JasonGross,@coqbot ci minimize
862285138,14253,ppedrot,2021-06-16 11:02:56,coqbot-app,I have initiated minimization at commit ec55829 for the suggested target ci-fiat_parsers as requested.
862295727,14253,ppedrot,2021-06-16 11:19:58,coqbot-app,"Hey, I have detected that there were CI failures at commit ec55829 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a1fac38 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_parsers."
862519605,14253,ppedrot,2021-06-16 16:20:30,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 60KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fi"
862596460,14253,ppedrot,2021-06-16 18:04:33,ppedrot,"@JasonGross minimization is incomplete, is there an easy way to relaunch it?"
862621055,14253,ppedrot,2021-06-16 18:41:00,JasonGross,"Not yet.  I'm hopeful @Zimmi48 will manage to implement the coqbot side of relaunching as per coq/bot#143 (comment) within the next couple of days, and then minimization will automatically be relaunched when interrupted by timeout.  @Zimmi48, if you don't have time, I can try to implement it.  Alternatively, @ppedrot , if you want to do it manually, there's a printout of a curl request in the log that contains the relevant information for making a new branch on the minimizer as per the instructi"
862987169,14253,ppedrot,2021-06-17 07:05:44,Zimmi48,"@JasonGross Unfortunately, I've underestimated the time that some other tasks would take and now I need to delay work on the bot to after the Coq workshop 😖 So if you do have time to implement this feature in the next couple of days, feel free to go ahead."
863493252,14253,ppedrot,2021-06-17 19:06:11,JasonGross,"Resumption should now work, I'm testing it at #14328 (comment)"
864661430,14253,ppedrot,2021-06-21 01:32:33,JasonGross,"Now that resumption works and I've adjusted fiat to be a bit more minimizable and with some help from manual minimization to work around #14529, minimization has finished!  I'll post the full bug file in the next comment.\nMinimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 45KiB file on GitHub Actions Artifacts under bug.v)\n(* "
864661895,14253,ppedrot,2021-06-21 01:34:11,JasonGross,"Minimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/Bedrock"" ""Bedrock"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-I"" ""/github/workspace/builds/coq/coq-"
864661958,14253,ppedrot,2021-06-21 01:34:25,JasonGross,"@ppedrot, I hope this is helpful!"
864799708,14253,ppedrot,2021-06-21 07:31:53,ppedrot,"@JasonGross yes, thanks a lot. I'll try to understand what's going on now."
865090744,14253,ppedrot,2021-06-21 14:44:41,ppedrot,"Here is a much smaller test:\nFrom Coq Require Import Setoid Morphisms.\n\nAxiom lattice_for : Type -> Type.\nAxiom constant : forall {T : Type}, T -> lattice_for T.\n\nAxiom lattice_for_rect :\nforall [T : Type] (P : Type), (forall t : T, P) -> forall l : lattice_for T, P.\n\n#[local]\nDeclare Instance lattice_for_rect_Proper_85 : forall {A},\n  Proper (forall_relation (fun _ => eq) ==> eq ==> Basics.flip Basics.impl)\n           (@lattice_for_rect A Prop) | 3.\n\nAxiom lattice_rewrite :\n  forall (A T T' : T"
865124755,14253,ppedrot,2021-06-21 15:25:54,ppedrot,"OK, this should be working now. I stupidly forgot to accumulate the highest free variable in the branches of a case. I added the minimized test for good measure."
865259885,14253,ppedrot,2021-06-21 18:41:32,coqbot-app,"Hey, I have detected that there were CI failures at commit 74b37f2 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 6025946 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
865276341,14253,ppedrot,2021-06-21 19:07:54,JasonGross,@coqbot CI minimize
865276377,14253,ppedrot,2021-06-21 19:07:57,coqbot-app,I have initiated minimization at commit 74b37f2 for the suggested target ci-metacoq as requested.
865278296,14253,ppedrot,2021-06-21 19:10:47,coqbot-app,Error: Could not minimize file  (from ci-metacoq) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.8MiB file on GitHub Actions Artifacts under build.log)\nlating: _build_ci/metacoq/template-coq/theories/.Reflect.aux  \n  inflating: _build_ci/metacoq/template-coq/theories/.TemplateMonad.aux  \n  inflating: _build_ci/metacoq/template-coq/theories/.TermEquality.aux  \n  inflating: _build_ci/metacoq/template-coq/theories/.Typing.aux  \n  inflating: _build_ci/metacoq/template-coq/th
865279950,14253,ppedrot,2021-06-21 19:13:26,JasonGross,"Hmmm, seems like the version of master this is based on is too old.  (Maybe we should make artifacts persist for longer @Zimmi48 ?). @ppedrot , mind rebasing this on latest master (perhaps on top of the recent fix for the build:base job)?"
865321414,14253,ppedrot,2021-06-21 20:25:09,ppedrot,@JasonGross done. This is what I call bleeding edge...
865324011,14253,ppedrot,2021-06-21 20:29:42,ppedrot,"@JasonGross looks like metacoq is broken on master, this is unrelated to this PR."
865412423,14253,ppedrot,2021-06-21 23:35:17,coqbot-app,"Hey, I have detected that there were CI failures at commit cafc76b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 76e20b5 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
865956527,14253,ppedrot,2021-06-22 12:53:08,Zimmi48,"Hmmm, seems like the version of master this is based on is too old.\n\nThe reason for the failure was that the base:build job was cancelled (and thus ci-metacoq was skipped). We should probably find a way of improving the reports for cancelled and skipped jobs."
865958031,14253,ppedrot,2021-06-22 12:55:20,Zimmi48,"I checked that the corresponding jobs for the base commit 76e20b5 succeeded.\n\nHum, that's weird because the corresponding job for the base commit failed in this case: https://gitlab.com/coq/coq/-/jobs/1364637965"
867068232,14253,ppedrot,2021-06-23 18:34:06,ppedrot,This is ready and needs an assignee. @SkySkimmer ?
867463528,14253,ppedrot,2021-06-24 08:54:56,SkySkimmer,@coqbot: merge now
792277502,13909,pi8027,2021-03-07 13:15:08,pi8027,"BTW, I still do not understand the following things in coercionops.ml:\n\nBijint and cl_index are really needed? Replacing them with ClTypMap and cl_typ would work and simplify the implementation. (I believe there is no performance issue here. Another potential issue would be that the printing order of Print Graph will change.)\nA circular inheritance path of C >-> C can be registered to inheritance_graph only if different_class_params holds for C. What are the use cases of this?"
792336138,13909,pi8027,2021-03-07 19:17:29,gares,"Bijint and cl_index are really needed? Replacing them with ClTypMap and cl_typ would work and simplify the implementation. (I believe there is no performance issue here. Another potential issue would be that the printing order of Print Graph will change.)\n\nI'm OK with that. BTW, if you are going to refactor the code, in spite of #13902 being merged, I still don't have an API that given a GlobRef.t tells me the number of parameters and the src/tgt classes. Would you mind making it possible? (addi"
792564609,13909,pi8027,2021-03-08 08:14:22,pi8027,"Bijint and cl_index are really needed? Replacing them with ClTypMap and cl_typ would work and simplify the implementation. (I believe there is no performance issue here. Another potential issue would be that the printing order of Print Graph will change.)\n\nI'm OK with that. BTW, if you are going to refactor the code, in spite of #13902 being merged, I still don't have an API that given a GlobRef.t tells me the number of parameters and the src/tgt classes. Would you mind making it possible? (addi"
795279291,13909,pi8027,2021-03-10 11:26:45,gares,I think you can nor rebase on top of the refactoring PR which was merged
802741395,13909,pi8027,2021-03-19 10:58:55,pi8027,I don't think I have to update the reference manual in accordance with this change. So this PR is ready for review.
806462196,13909,pi8027,2021-03-25 08:28:15,gares,@pi8027 can you take of the request by @SkySkimmer ? Otherwise this seems ready to me.
806477385,13909,pi8027,2021-03-25 08:54:42,pi8027,Yes. I will do that by the end of this week.
807257795,13909,pi8027,2021-03-25 18:39:15,gares,@coqbot merge now
807257829,13909,pi8027,2021-03-25 18:39:16,coqbot-app,@gares: You can't merge the PR because you're not among the assignees and no milestone is set.
807259861,13909,pi8027,2021-03-25 18:40:28,gares,@coqbot merge now
869032441,14558,Columbus240,2021-06-26 17:19:56,jfehrle,"PS We generally don't create changelog entries for documentation-only changes.\nAlso, thanks for submitting the PR."
869544246,14558,Columbus240,2021-06-28 09:52:33,Columbus240,"Thanks a lot for the comments.\nI wrote the doc more to enable developers to discuss how coq_makefile could be improved and less with the intention of writing to users. It was also for me to wrap my head around the technical details.\nThanks for the reminder, that I shouldn’t forget the main audience and the style that requires."
869660724,14558,Columbus240,2021-06-28 12:57:08,Columbus240,"I’m a bit torn between ""this is the way coq_makefile behaves"" and ""write this into _CoqProject, to get this result"".\nSome more notes:\nCurrently, we can’t encode the following kinds of strings in _CoqProject:\n\nStrings starting with double quotes\nStrings starting with # and containing a double quote\nStrings containing both whitespace and a double quote\n\nbecause it lacks escape sequences or something similar. So options to coqc and filenames of this kind are currently a no-go.\nThe options -custom, "
869683608,14558,Columbus240,2021-06-28 13:26:06,Columbus240,"Note: the options -no-opt, -byte, -full and -opt can be used to set the internal value of use_ocamlopt to true or false (see coqProject_file.ml) but its value is ignored in coq_makefile.ml. These options are accepted without warning or error.\nThe option -install _ is described by the help-text of coq_makefile as defining the installation directory of the generated makefile, but it actually is ignored and irrelevant. But specifying it gives no warning or error."
869731187,14558,Columbus240,2021-06-28 14:25:15,Columbus240,"This is now written with the hypothetical behaviour of -arg ""Some 'Really Weird' Thing"" passing [""Some"", ""Really Weird"", ""Thing""] to coqc. Will write adapt the code to actually do this."
869732000,14558,Columbus240,2021-06-28 14:26:17,Columbus240,"I moved the branch of the equals-sign around, to make the behaviour a little simpler. Don’t know why it wasn’t like this already. But it might be a pretty useless change."
869847840,14558,Columbus240,2021-06-28 16:56:06,jfehrle,"You have a sphinx error.  Click on ""Details"" to see it.  Use ""make sphinx"" to run sphinx on your system.  (Sphinx builds the reference manual.)\nWarning, treated as error:\n/builds/coq/coq/doc/sphinx/practical-tools/utilities.rst:62:Unexpected indentation."
870564069,14558,Columbus240,2021-06-29 12:39:31,Columbus240,Test and document -docroot option. Answering the question: “In which cases is it necessary?”
871301581,14558,Columbus240,2021-06-30 10:57:26,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
871354191,14558,Columbus240,2021-06-30 12:19:17,Columbus240,I’m sorry for causing unnecessary pings. Removing _ = _ notation in _CoqProject broke a lot of CI projects. (Didn’t expect it to be used that much.)
871392700,14558,Columbus240,2021-06-30 13:12:33,Columbus240,"I haven’t yet written tests, but I can document the behaviour of this branch here. First giving the content of _CoqProject, then giving the list of arguments of coqc.\n\n-arg ""-set 'Default Goal Selector=!'"" -> [""-set"", ""Default Goal Selector=!""]\n-arg ""-w default"" -> [""-w"", ""default""]\n-arg -w -arg default-> [""-w"", ""default""]\n\nLimitations:\n\nThe overall grammar of _CoqProject hasn’t been changed, there are still strings which can’t be encoded.\nIt is impossible to have ' occur in the list of argument"
871416507,14558,Columbus240,2021-06-30 13:43:25,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
871449752,14558,Columbus240,2021-06-30 14:22:19,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
871474038,14558,Columbus240,2021-06-30 14:52:07,coqbot-app,"Hey, I have detected that there were CI failures at commit 8a713b0 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit b69b918 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
871476708,14558,Columbus240,2021-06-30 14:55:14,Zimmi48,"PS We generally don't create changelog entries for documentation-only changes.\n\nBut if this PR is not only about documentation anymore, then a changelog entry is required."
871502721,14558,Columbus240,2021-06-30 15:27:43,coqbot-app,"Hey, I have detected that there were CI failures at commit 8a713b0 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit b69b918 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-coq_tools."
874363863,14558,Columbus240,2021-07-05 23:14:36,jfehrle,"@Columbus240, you need to create an overlay file for ci-bignums in this PR.  See dev/ci/user-overlays/README.md for an explanation of how to do that.\nWhen you're ready for a code review, you may want to state that in a comment here.  Sometimes it takes a while to identify the appropriate reviewer and get the review done (though this is fairly simple PR).  @gares might be appropriate.  If no one responds within a couple days, @Zimmi48 usually knows who to ask."
876493468,14558,Columbus240,2021-07-08 14:36:28,Columbus240,"I have some questions & need some help:\n\nI added a changelog entry, where I put everything into a single changelog-item. Is this correct? I think it’d make sense to split it apart into multiple items, since some changes of this PR are additions, some are removals, breaking changes etc.\nI tried to add unit tests for coqProject_file.ml, trying to mirror the style of proof_diffs_test.ml and pp_big_vect.ml, but somehow the library won’t get found. I don’t know where the relevant difference lies and "
876498439,14558,Columbus240,2021-07-08 14:42:02,gares,I'm looking at the code right now. May I ask why 3 tests were removed? Is it intentional?
876508603,14558,Columbus240,2021-07-08 14:55:17,Columbus240,"You mean the ""compat-subdirs"" test? Removing it is intentional. It belongs to the ""subdirs"" feature, which I removed. So testing it didn’t make sense.\nThe feature goes like this: Write the path to a directory inside your _CoqProject, then the generated Makefile will try to execute makefiles in this directory. It has been deprecated since v8.7."
876522192,14558,Columbus240,2021-07-08 15:12:07,gares,"It looks good to me, modulo CI and doc review"
876524381,14558,Columbus240,2021-07-08 15:14:57,gares,"bignums' _CoqProject has\n-extra ""BigN/NMake_gen.v"" ""BigN/gen/NMake_gen.ml"" ""ocaml $< > $@ || (RV=$$?; rm -f $@; exit $${RV})""\n\nwhich needs to be moved to Makefile.coq.local.\nYou can use dev/tools/create_overlays.sh to prepare it."
876527970,14558,Columbus240,2021-07-08 15:19:37,gares,"You have to rename the unit test I believe, since you gave it the very same name of the module it should use. According to the makefile in test-suite, that module should be linked in."
876531901,14558,Columbus240,2021-07-08 15:24:46,Zimmi48,"bignums' _CoqProject has\n-extra ""BigN/NMake_gen.v"" ""BigN/gen/NMake_gen.ml"" ""ocaml $< > $@ || (RV=$$?; rm -f $@; exit $${RV})""\n\nwhich needs to be moved to Makefile.coq.local.\nYou can use dev/tools/create_overlays.sh to prepare it.\n\n@Columbus240 already opened a PR but didn't add the corresponding overlay: coq/bignums#60"
876558552,14558,Columbus240,2021-07-08 16:00:25,gares,"The overlay should be backward compatible, so it could be merged now, but for some reason bignum's CI did not run on the PR..."
876616300,14558,Columbus240,2021-07-08 17:28:55,Columbus240,"You have to rename the unit test I believe, since you gave it the very same name of the module it should use. According to the makefile in test-suite, that module should be linked in.\n\nThanks for the hint. It works now."
876628000,14558,Columbus240,2021-07-08 17:47:29,Zimmi48,"The overlay should be backward compatible, so it could be merged now, but for some reason bignum's CI did not run on the PR...\n\nYes, for some reason none of the recent PRs / commit triggered CI."
877232567,14558,Columbus240,2021-07-09 14:32:07,Columbus240,I think this PR is ready for final comments.
877611109,14558,Columbus240,2021-07-10 10:07:55,Columbus240,"@jfehrle, thanks for your comments."
877690655,14558,Columbus240,2021-07-10 19:20:19,jfehrle,I think you planned to make a few wording tweaks?  I'll await those.
878004948,14558,Columbus240,2021-07-12 06:19:37,gares,@jfehrle are you ok with the current status?
878481166,14558,Columbus240,2021-07-12 18:02:25,Columbus240,"To simplify squashing, I moved most changes to the refman into a single commit.\nEdit: Didn't see your written-out request. Will squash again. Though I think the functional changes should be in separate commits, for making them easier to understand.\nI'll remove the change about =."
878501091,14558,Columbus240,2021-07-12 18:32:40,Zimmi48,No need to squash down to a single commit. Feel free to select the level of granularity that you prefer. The only thing that we really try to avoid in finished PRs are commits that are amending previous commits in the same PR.
878519490,14558,Columbus240,2021-07-12 19:02:32,Columbus240,"I reworded the part about quoting in the string after -arg, though I'm not happy with it. It confuses how coqc is called on the command-line (coqc -set 'Foo Bar') and the resulting list of arguments argv ([""coqc"", ""-set"", ""Foo Bar""]).\nFor understanding properly what is going on, it is crucial to be able to tell these apart, since the all the programs calling coqc (coqIDE, coq_makefile via make, ProofGeneral, find-bugs.py, VScode, etc etc) only deal with the latter, but most users only interact w"
878572005,14558,Columbus240,2021-07-12 20:26:44,jfehrle,Something that might be addressed when this section is revised.\n@gares LGTM
878823726,14558,Columbus240,2021-07-13 06:45:09,gares,Shall we merge as is and eventually improve further in another pr?
878831776,14558,Columbus240,2021-07-13 07:01:16,Zimmi48,@gares I believe that's precisely what Jim is recommending
878842973,14558,Columbus240,2021-07-13 07:20:01,Columbus240,I agree with that as well.
879007111,14558,Columbus240,2021-07-13 11:27:03,gares,@coqbot merge now
879007116,14558,Columbus240,2021-07-13 11:27:04,coqbot-app,@gares: You can't merge the PR because there is still a needs: squashing label.
879007391,14558,Columbus240,2021-07-13 11:27:33,gares,@coqbot merge now
879007417,14558,Columbus240,2021-07-13 11:27:35,coqbot-app,@gares: Please take care of the following overlays:\n\n14558-Columbus240-coq_makefile_doc.sh
879198211,14558,Columbus240,2021-07-13 15:43:11,jfehrle,"@Columbus240 thanks for the PR.\nIf you don't mind my asking, I was curious about your affiliation and interests--always nice to know a little about others."
879249062,14558,Columbus240,2021-07-13 16:56:56,Columbus240,I'll answer later on Zulip.
832844038,14174,JasonGross,2021-05-05 16:43:30,herbelin,"@jfehrle: I assume you're ok with the PR as it is,right?\n@JasonGross: For the test-suite, I suspect that it would be easy to add at least an example in test-suite/success/InversionSigma.v as a regression test?"
832913660,14174,JasonGross,2021-05-05 18:29:34,Zimmi48,"@jfehrle: I assume you're ok with the PR as it is,right?\n\nHis approval dates from after the interaction with Jason, so that's the right way to interpret it."
832920827,14174,JasonGross,2021-05-05 18:40:09,JasonGross,"For the test-suite, I suspect that it would be easy to add at least an example in test-suite/success/InversionSigma.v as a regression test?\n\nI've done one better.  inversion_sigma now supports intropatterns in addition to hypotheses (though it uses simple_intropattern rather than or_and_intropattern_loc, because the latter is not accessible to Tactic Notation; can someone explain to me what the significance is of this distinction, and whether inversion_sigma should be made to support or_and_intr"
833189521,14174,JasonGross,2021-05-06 03:03:02,JasonGross,"Very confused by the metacoq failure\nFile ""./theories/Extraction.v"", line 31, characters 0-41:\nError:\nThe informative inductive type sig2 has a Prop instance\nin eq_sig2_rec_uncurried (or in its mutual block).\nThis happens when a sort-polymorphic singleton inductive type\nhas logical parameters, such as (I,I) : (True * True) : Prop.\nThe Ocaml extraction cannot handle this situation yet.\nInstead, use a sort-monomorphic type such as (True /\ True)\nor extract to Haskell.\n\nAFAIK, this definition exist"
833361646,14174,JasonGross,2021-05-06 09:02:59,herbelin,"Extraction does not like in the uncurried versions that exist or exist2 are applied on equalities, since equalities are in Prop, lowering sig and sig2 to Prop."
833603516,14174,JasonGross,2021-05-06 15:13:35,JasonGross,"Ah, I see, thanks, I'll fix.\n@Zimmi48 is the new coqbot deployed so that I can ask @coqbot ci minimize\n?"
833759764,14174,JasonGross,2021-05-06 18:29:04,JasonGross,"Okay, I've fixed the extraction bug and added a test-case to the test-suite.  However, the performance is getting truly atrocious here, so I don't think this is ready for merge."
833764738,14174,JasonGross,2021-05-06 18:36:42,Zimmi48,"No sorry, not yet."
836870827,14174,JasonGross,2021-05-10 15:51:52,JasonGross,"I've added a large number of special-cases to reduce the load on unification/induction, massively speeding it up.  This also eliminates the need for the simplification tactics (should I remove them entirely?).  @herbelin I think this is ready for re-review and merging."
839706320,14174,JasonGross,2021-05-12 11:47:07,Zimmi48,"Some squashing is in order. At the very least, the DO NOT MERGE commit and its revert."
839719526,14174,JasonGross,2021-05-12 12:10:18,JasonGross,"I think the do not merge commits might be useful to keep in history?  (I can amend them to remove the do not merge if desired).  I'm happy to do a bit more squashing, though I think it might be useful to keep around the various versions so I can go find them later if, for example, I recall that I had a slow version of this tactic and want to see what version of it was slow.  (I could instead create a branch on my fork that I keep around forever and fully squash all the commits here, if that's pr"
839726355,14174,JasonGross,2021-05-12 12:21:59,Zimmi48,"Yeah, it's usually preferred that the version that is merged has a clean history (no commit amending previous ones in the same PR)."
839835141,14174,JasonGross,2021-05-12 14:49:28,JasonGross,Rebased and squashed
846575576,14174,JasonGross,2021-05-23 14:53:04,JasonGross,"bump @herbelin is there anything else to be done here?\n(@Zimmi48 , you said you'd rebase?)"
846576770,14174,JasonGross,2021-05-23 15:00:53,Zimmi48,"Indeed, I'll take care of it."
846580603,14174,JasonGross,2021-05-23 15:26:20,Zimmi48,Done.
848211337,14174,JasonGross,2021-05-25 19:44:35,herbelin,"The PR looks ok to me.\n\n(though it uses simple_intropattern rather than or_and_intropattern_loc, because the latter is not accessible to Tactic Notation; can someone explain to me what the significance is of this distinction\n\nThe syntax of or_and_intropattern is more specific. We could eventually make it available for tactic notations also. So, simple_intropattern is too general for inversion_sigma but not bad either afaicj.\nMerging tomorrow."
848552839,14174,JasonGross,2021-05-26 07:55:06,herbelin,@coqbot: merge now
823637338,14140,jhjourdan,2021-04-20 22:22:55,SkySkimmer,Bench https://gitlab.com/coq/coq/-/jobs/1197291464
823854144,14140,jhjourdan,2021-04-21 07:47:06,mattam82,"I was worried this would interact badly with constraint declarations Lemma foo@{i j | i < j} : bar but as hott passes unmodified, I am not worried anymore :)"
823882835,14140,jhjourdan,2021-04-21 08:30:08,jhjourdan,"There are two failures in the test suite. Interestingly, these failures were not present when I was testing on the 8.13 branch..."
823884859,14140,jhjourdan,2021-04-21 08:33:11,mattam82,"I expect this will change what minimization performs: in the previous situation, Coq could minimize x <= y <= z by assigning z := y, but now if we have also the constraint x <= z present it will not. We could ""canonicalize"" the contraints to ensure a (more) deterministic result of minimization."
823897753,14140,jhjourdan,2021-04-21 08:53:50,ppedrot,I am happy to see a revival of #10927 :)
823999715,14140,jhjourdan,2021-04-21 11:50:35,SkySkimmer,If we remove the short path at \n  \n    \n      coq/kernel/univ.ml\n    \n    \n        Lines 696 to 698\n      in\n      3645c06\n    \n    \n    \n    \n\n        \n          \n           let enforce_leq u v c = \n        \n\n        \n          \n             if check_univ_leq u v then c \n        \n\n        \n          \n             else enforce_leq u v c \n        \n    \n  \n\n both failing tests work again.
824011499,14140,jhjourdan,2021-04-21 12:11:31,jhjourdan,This does not make any sense for me. Do you have an explanation ?
824015673,14140,jhjourdan,2021-04-21 12:18:57,SkySkimmer,"enforce_leq drops trivial constraints like Prop <= u, but they're used by minimisation."
824037472,14140,jhjourdan,2021-04-21 12:55:47,ppedrot,May I suggest to try to sketch an (even partial) specification of minimization and then try to enforce some good properties about it like invariance by sufficiently equivalent graphs?
824038433,14140,jhjourdan,2021-04-21 12:57:16,ppedrot,"(Last time the same change was abandoned precisely because of unexplained differences in minimization, so it'd be good to rule out this source of fragility for good.)"
824065119,14140,jhjourdan,2021-04-21 13:33:53,jhjourdan,"Alright, I pushed a code which is closer to the previous implementation, but which still perform the optimization I proposed.\nNamely, this version inserts the constraint unconditionally if the LHS is a level, but use the short path otherwise. This seems to fix the test suite.\nThe new code seems really weird (we insert the edge or not depending on whether the LHS is a level), but this is what make this change compatible. But frankly, minimization needs serious fixing if it depends on whether or n"
824372803,14140,jhjourdan,2021-04-21 21:36:02,jhjourdan,"I have some trouble with the CI : the failures seems unrelated, but I am not used to Coq CI enough to be sure. Can someone confirm?"
824413474,14140,jhjourdan,2021-04-21 22:47:32,mattam82,"Oops, looks like I broke Coq's CI in equations master, my bad :)"
824693386,14140,jhjourdan,2021-04-22 09:38:24,mattam82,"equations and metacoq should now be fixed. We'll still have a problem with the test-suite in MetaCoq, no?"
824733911,14140,jhjourdan,2021-04-22 10:45:21,mattam82,With MetaCoq/metacoq#553 it will hopefully go through
824742532,14140,jhjourdan,2021-04-22 11:01:02,SkySkimmer,I don't think Require is affected by type-in-type
824760115,14140,jhjourdan,2021-04-22 11:31:24,mattam82,"I think Jacques-Henri told me that doing this change resulted in the code passing, so..."
824799990,14140,jhjourdan,2021-04-22 12:33:47,mattam82,The highest times for metacoq with this pr are:\n-------------------------------------------------------------\n42m05.07s | 3711816 ko | Total Time / Peak Mem               \n-------------------------------------------------------------\n 8m04.44s | 3711816 ko | bugkncst.vo                         \n 2m56.89s | 1113068 ko | PCUICSafeReduce.vo                  \n 2m56.04s | 1014152 ko | PCUICSafeConversion.vo              \n 2m15.62s |  798312 ko | PCUICInductiveInversion.vo          \n 1m18.65s |  80676
824802156,14140,jhjourdan,2021-04-22 12:36:58,mattam82,"bugkncst is a test that takes a while because it reifies a huge term, it should be unrelated to this (the reified syntax itself contains no universes)."
824806016,14140,jhjourdan,2021-04-22 12:41:29,mattam82,Let's see what the bench says now: https://gitlab.com/coq/coq/-/jobs/1199569240
824837436,14140,jhjourdan,2021-04-22 13:22:45,jhjourdan,"I think Jacques-Henri told me that doing this change resulted in the code passing, so...\n\nIndeed, Require enforces the universe constraint sets of the definitions of the required files, which may cause universe inconsistencies. If Type-in-type is activated, then this does not happen.\nNow, the fact that this causes a universe inconsistency in MetaCoq might be a bug in Coq, but I don't think this comes from the change I made"
824838852,14140,jhjourdan,2021-04-22 13:24:36,SkySkimmer,"Right, I forgot about 316592a before which Require didn't check type-in-type when adding the constraints."
826049925,14140,jhjourdan,2021-04-24 07:28:46,mattam82,┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬─────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │   mem faults    │\n│                             │                         │                                       │                                       
827015650,14140,jhjourdan,2021-04-26 17:25:49,ppedrot,"FTR, even if this alleviates the slowness of metacoq, this development is still taking ages computing universe constraints (now it's in the 25% range). I begin to suspect there is something wrong with this development because even universe-heavy developments do not reach this ratio."
827171600,14140,jhjourdan,2021-04-26 21:58:35,mattam82,"I don't think it's wrong. But metacoq is unusual in that it constantly manipulates inductives in Type (derivations and All/All2/Alli liftings of it) rather than Prop. It's also using Equations dependent pattern-matching simplification, which involves a lot of applications of constants taking Type as arguments, that might be a source of issues with universes. Could you make a bench-like output showing where metacoq precisely spends all this time in universes?"
827172454,14140,jhjourdan,2021-04-26 22:00:35,mattam82,"In any case, do you have anything against merging?"
827173025,14140,jhjourdan,2021-04-26 22:01:53,mattam82,"Oh and the safechecker stuff uses the obligation mechanism on top of all that, it might be an inefficient handling of universes to pass from one obligation to the next as well."
827435621,14140,jhjourdan,2021-04-27 08:49:40,ppedrot,"No, go ahead, I actually very much support this PR."
827478120,14140,jhjourdan,2021-04-27 09:55:00,mattam82,@coqbot merge now
811131395,14037,mrhaandi,2021-03-31 14:54:00,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
811190640,14037,mrhaandi,2021-03-31 16:13:24,JasonGross,"Does anyone know how to fix the failing third Goal?\n\nnia is not complete, and this goal already fails in Z.  In general I've found that I have to cut with an equation about the quotient in order to handle goals involving the remainder:\nRequire Import Lia ZArith.\nLtac Zify.zify_post_hook ::= Z.to_euclidean_division_equations.\nLocal Open Scope Z_scope.\nGoal forall (m n:Z), 0 <= n -> 0 < m -> (n * m) mod m = 0.\nProof.\n  intros.\n  Fail nia.\n  cut ((n * m) / m = n); nia.\nQed."
811208189,14037,mrhaandi,2021-03-31 16:26:21,mrhaandi,"CI shows the following regression.\nPreviously the following works, whereas now it breaks:\nGoal forall n, n mod 2 < 2 -> n mod 2 = 0 \/ n mod 2 = 1.\nProof. lia. Qed.\n\nIt can be again made working adding Ltac Zify.zify_post_hook ::= Z.to_euclidean_division_equations..\nThen, the assumption n mod 2 < 2 is not even needed. However, the regression breaks existing code that does not (possibly on purpose) add the hook.\nmod is translated to Z and then lia gets stuck without the hook. Suggestions?"
811248564,14037,mrhaandi,2021-03-31 16:52:59,JasonGross,"Suggestions?\n\nI think this is an incompleteness in the part of zify written in OCaml.  In particular, the following instances should be enough, but they are not:\nRequire Import Lia ZArith Zify ZifyInst ZifyClasses.\nLemma Z_div_pos_full a b : (0 <= a -> 0 <= b -> 0 <= a / b)%Z.\nProof. destruct b; intros; now (rewrite Zdiv_0_r + apply Z.div_pos). Qed.\nInstance SatDiv : Saturate Z.div :=\n  {|\n  PArg1 := fun x => 0 <= x;\n  PArg2 := fun y => 0 <= y;\n  PRes  := fun r => 0 <= r;\n  SatOk := Z_div_pos_fu"
811249343,14037,mrhaandi,2021-03-31 16:54:04,JasonGross,"CI shows the following regression.\nPreviously the following works, whereas now it breaks:\n\n@mrhaandi Please add this test-case to the test-suite; I think ideally anytime a CI failure reveals something not caught by the test-suite, we should update the test-suite to cover that case, if it's not too hard."
811260439,14037,mrhaandi,2021-03-31 17:10:18,fajb,"@mrhaandi @JasonGross Thanks for the PR and the investigation.\nThe Saturate thingy   has indeed limitations: it performs a syntactic matching in the context.\nI'll look into it - it looks feasible to ""invent"" positivity proofs for positive constants.\nIn the meantime, this is unfortunately blocking this PR...\nA quick workaround would be to place the Nat.div and Nat.modulo in a separate file.\nNot quite satisfactory but at least this would not break existing code."
811372725,14037,mrhaandi,2021-03-31 19:25:04,mrhaandi,"I looked at all the CI problems.\nAll (except for iris) are exactly due to the regression out earlier.\nHowever, they are easy to fix locally by simply generalize (x mod y) the particular expressions that would be decomposed by lia.\nOf course, fixing the actual regression would be better.\n\nA quick workaround would be to place the Nat.div and Nat.modulo in a separate file.\n\nThis is also a quick (but less preferable) option.\niris breaks for a different reason and is easy to fix by better code (I'll "
811403072,14037,mrhaandi,2021-03-31 19:55:56,RalfJung,"Edit: @RalfJung Hmmm, I have hard on gitlab trying to fork iris_examples.\n\nYeah, see our docs for that.\nBut I also just submitted your change to the repo, so no need to go through that process. :)"
811435968,14037,mrhaandi,2021-03-31 20:21:18,JasonGross,"I think it would be better to find a way to maintain backwards compatibility than to make lia weaker.  My preference would indeed be to stick the Add Zify BinOp declarations in a separate file (maybe also put the ones about Saturate that I suggested there), and then we can have a future PR that merges them back into the main file, which is to be merged only after the saturation code is improved."
811447955,14037,mrhaandi,2021-03-31 20:35:54,fajb,"I have a quick fix (see https://github.com/fajb/coq/tree/N-Z-div-mod).\nBut it is not sufficient and uncovers another weakness of the saturation code:  it is not recursively closed.\nFor instance, the following fails:\nProof.\n  intros.\n  Fail lia.\n  zify; lia.\nQed.\n\nI am hopeful it is not too difficult to fix..."
811755508,14037,mrhaandi,2021-04-01 08:47:08,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
811786064,14037,mrhaandi,2021-04-01 09:36:31,mrhaandi,"I think it would be better to find a way to maintain backwards compatibility than to make lia weaker. My preference would indeed be to stick the Add Zify BinOp declarations in a separate file (maybe also put the ones about Saturate that I suggested there), and then we can have a future PR that merges them back into the main file, which is to be merged only after the saturation code is improved.\n\nI now added suggested Saturate instances, and test cases to test-suite containing regressions (which "
811799147,14037,mrhaandi,2021-04-01 10:00:13,fajb,@mrhaandi PR #14045 may solve the regression.\nI made a quick test on top of your PR. I am hopeful that the regressions will be due to zify/lia being stronger.
811803464,14037,mrhaandi,2021-04-01 10:07:28,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
811804327,14037,mrhaandi,2021-04-01 10:08:55,mrhaandi,"@mrhaandi PR #14045 may solve the regression.\nI made a quick test on top of your PR. I am hopeful that the regressions will be due to zify/lia being stronger.\n\n@fajb I noticed that you removed Saturate Z.mul. Are the newly added Saturate Z.div, Saturate Z.modulo still ok?"
811811665,14037,mrhaandi,2021-04-01 10:23:09,fajb,"@mrhaandi Saturate Z.div, Saturate Z.modulo should be ok."
811842729,14037,mrhaandi,2021-04-01 11:27:43,mrhaandi,"@mrhaandi PR #14045 may solve the regression.\nI made a quick test on top of your PR. I am hopeful that the regressions will be due to zify/lia being stronger.\n\nYes, it seems that any issues in ci due to the previous regression are gone in the PR combination.\nThere are several new errors, all of which because of zify/lia being stronger."
811867726,14037,mrhaandi,2021-04-01 12:19:42,mrhaandi,@fajb I conservatively updated Int63.v which previously broke upon rebase of #14045 upon this.\nNow the combination of both PRs builds and passes regressions tests.
811876491,14037,mrhaandi,2021-04-01 12:35:11,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
812052554,14037,mrhaandi,2021-04-01 17:17:38,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
816559373,14037,mrhaandi,2021-04-09 09:39:35,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
819699217,14037,mrhaandi,2021-04-14 17:42:43,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
821005823,14037,mrhaandi,2021-04-16 08:17:27,mrhaandi,"@fajb after #14045, what is the status of options such as\nLtac Zify.zify_post_hook ::= Z.to_euclidean_division_equations. needs to be replaced by\nLtac zify_convert_to_euclidean_division_equations_flag ::= constr:(true)."
821693958,14037,mrhaandi,2021-04-16 22:57:08,fajb,"If you wish to totally eliminate divisions, you need to set one or the other.\nThe Saturate rules are applied after the potential elimination of division."
843280299,14037,mrhaandi,2021-05-18 15:41:11,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
843924013,14037,mrhaandi,2021-05-19 09:30:10,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
843993343,14037,mrhaandi,2021-05-19 11:02:38,JasonGross,@coqbot CI minimize
845729016,14037,mrhaandi,2021-05-21 07:33:00,mrhaandi,"@fajb As #14086 is now merged, zify can be simplified.\nFor example, consider Goal forall (n:Z), (n mod n = 0)%Z.. zify creates the assumption n <> 0%Z -> n = (n * q + r)%Z, where n <> 0 is because of the old mod definition. Now, one can use the new Z_div_mod_eq_full to directly have n = (n * q + r)%Z, which could improve performance."
845811313,14037,mrhaandi,2021-05-21 09:17:04,fajb,"@fajb As #14086 is now merged, zify can be simplified.\nFor example, consider Goal forall (n:Z), (n mod n = 0)%Z.. zify creates the assumption n <> 0%Z -> n = (n * q + r)%Z, where n <> 0 is because of the old mod definition. Now, one can use the new Z_div_mod_eq_full to directly have n = (n * q + r)%Z, which could improve performance.\n\nSure. If @JasonGross agrees, go ahead! The culprit is div_mod_to_equations_generalize from PreOmega.v."
845819233,14037,mrhaandi,2021-05-21 09:29:48,mrhaandi,"Is there a reason for not including ZifyN.v and ZifyNat.v in ZifyInst.v?\n(without setting zify_convert_to_euclidean_division_equations_flag)\nIs it for backward compatibility?\n\nAs you can imagine, lia becomes very powerful. I did not notice major performance regressions, but ci breaks too heavily. There is a lot of code that uses lia in a non-monotone way (i.e. if lia gets stronger, it breaks). So yes, backwards compatibility with anti-patterns."
845824909,14037,mrhaandi,2021-05-21 09:39:27,mrhaandi,"Since the new code is opt-in, for the current ci only minimal adjustments are required.\n@silene could you take care of the required flocq adjustments (3 lines) for this (see https://github.com/mrhaandi/flocq/tree/N-Z-div-mod)?\n@spitters could you look at coq-community/math-classes#98 ?"
845847192,14037,mrhaandi,2021-05-21 10:18:16,mrhaandi,@fajb would you care to review the proposed additions? It would be great to have this until the deadline to be part of 8.14.\nI also updated zify documentation to mention the new modules.
846134669,14037,mrhaandi,2021-05-21 17:52:44,jfehrle,"As you can imagine, lia becomes very powerful. I did not notice major performance regressions, but ci breaks too heavily. There is a lot of code that uses lia in a non-monotone way (i.e. if lia gets stronger, it breaks). So yes, backwards compatibility with anti-patterns.\n\nHow hard would it be to fix the CI jobs that break (difficult or just tedious)?  The idea of keeping lia weaker than it could be seems unfortunate."
846144166,14037,mrhaandi,2021-05-21 18:10:25,mrhaandi,"As you can imagine, lia becomes very powerful. I did not notice major performance regressions, but ci breaks too heavily. There is a lot of code that uses lia in a non-monotone way (i.e. if lia gets stronger, it breaks). So yes, backwards compatibility with anti-patterns.\n\nHow hard would it be to fix the CI jobs that break (difficult or just tedious)? The idea of keeping lia weaker than it could be seems unfortunate.\n\nFrom what I have looked at so far, quite tedious. However, I'm not sure whethe"
846150846,14037,mrhaandi,2021-05-21 18:24:17,jfehrle,"Makes sense.  Perhaps you would tweak the documentation for lia to make the zify improvements easier to discover, perhaps something like\nPlease see the description of :tacn:`zify` for information on extending `lia` to handle certain more general goals."
846160977,14037,mrhaandi,2021-05-21 18:44:00,RalfJung,"It might also be a good idea to have another tactic that has the full preprocessing always enabled, so one doesn't have to wrangle with setting global hooks to get the more powerful behavior."
846166340,14037,mrhaandi,2021-05-21 18:47:44,mrhaandi,"It might also be a good idea to have another tactic that has the full preprocessing always enabled, so one doesn't have to wrangle with setting global hooks to get the more powerful behavior.\n\n@fajb wasn't nia supposed to be exactly this, i.e. goal massage + lia?"
846185614,14037,mrhaandi,2021-05-21 19:08:02,fajb,"@fajb wasn't nia supposed to be exactly this, i.e. goal massage + lia?\n\nNope. nia is more powerful for non-linear multiplications. It is using the same zify.\nI support @RalfJung proposal of making easily available the best tactic.\nMaybe, a LiaExt.v (or whatever name) doing all the required import?\nPS: I do not think this is a blocking issue for the PR."
846198035,14037,mrhaandi,2021-05-21 19:27:30,RalfJung,"Maybe, a LiaExt.v (or whatever name) doing all the required import?\n\nI was imagining literally a separate tactic so that I could use better_lia and lia in the same proof. Or is there no reason to do that?"
846209038,14037,mrhaandi,2021-05-21 19:46:17,fajb,"Maybe, a LiaExt.v (or whatever name) doing all the required import?\n\nI was imagining literally a separate tactic so that I could use better_lia and lia in the same proof. Or is there no reason to do that?\n\nCurrently, I would not know how to do it. zify is using all the instances in the context. There is no notion of scope."
846358584,14037,mrhaandi,2021-05-22 06:21:15,mrhaandi,"Currently, I would not know how to do it. zify is using all the instances in the context. There is no notion of scope.\n\nMaybe it is unwise to put all instances into typeclass_instances. What about instead having individual hint databases for optional instances? This would allow for a natural notation lia with hint_db where hint_db is a (collection of) corresponding instance databases. Such an approach, as @RalfJung suggests, would allow for multiple lia variations to be uses side by side. Curren"
847675298,14037,mrhaandi,2021-05-25 08:40:52,mrhaandi,"For your convenience (and for the deadline) I squashed the commits and rebased the PR on the current master.\nUnfortunately the CI is stalled (and I have not enough rights to restart).\nAlso, there is still one minor overlay for flocq, could anyone besides @silene review and potentially merge it (3 line diff in the PR description) into flocq?\nOtherwise, I'd consider this as good to go (further considerations should be considered in future PRs)."
848731689,14037,mrhaandi,2021-05-26 12:34:21,silene,there is still one minor overlay for flocq\n\nIt has been merged.
848789719,14037,mrhaandi,2021-05-26 13:54:19,mrhaandi,"there is still one minor overlay for flocq\n\nIt has been merged.\n\nVery nice. Now there are no more overlays. If ci agrees, this can go upstream cleanly."
849500711,14037,mrhaandi,2021-05-27 09:55:10,mrhaandi,"@fajb as everything seems in order, would you suggest a merge date?"
849792517,14037,mrhaandi,2021-05-27 16:59:58,fajb,Well done @mrhaandi !
639392478,12449,SkySkimmer,2020-06-05 10:24:13,Janno,The two failures in Mtac2 are actually just commands that no longer fail because this patch apparently solves other long-standing universe-related issues which we never managed to narrow down sufficiently for a bug report.
639418662,12449,SkySkimmer,2020-06-05 11:15:39,Janno,I deleted a previous comment that turned out to not make any sense.\nI am looking at the stdpp failure (in ci-lambda_rust) and it seems like this patch somehow ignores the annotation in (unit : Type) when checking\nRecord mapset (M : Type -> Type) : Type :=\n  Mapset { mapset_car: M (unit : Type) }.\nThis will definitely be very problematic since this kind of annotation is the only way to make certain definitions work when using them on Sets.\nEDIT: my coq/master accepts the record without the Type a
643153380,12449,SkySkimmer,2020-06-12 08:44:58,SkySkimmer,"This is because of lbound somehow, inductives are checked with lbound=Set unless template universe polymorphic, in which case lbound=Prop. mapset is template poly, but if you set universe polymorphism you can see that it's accepted again."
643155128,12449,SkySkimmer,2020-06-12 08:48:40,SkySkimmer,Let's see with this change
643168270,12449,SkySkimmer,2020-06-12 09:15:06,SkySkimmer,"build:quick failure is probably #12503, ie this PR is revealing the bug."
643170854,12449,SkySkimmer,2020-06-12 09:20:34,SkySkimmer,"Not sure what's going on with equations\n File ""./tabareau_vec.v"", line 28, characters 0-212:\nWarning: Solve Obligations tactic returned error: Abstracting over the terms\n""S n"", ""cons a v"" and ""X"" leads to a term\nfun (n0 : ℕ E) (v0 : Vec E A n0) (X0 : vector_param E A n0 v0) =>\nlet H := CoreTactics.block in\nlet H0 := CoreTactics.block in\nparam_vector_vcons_graph E A a n v X0 (param_vector_vcons E A a n v X0)\nwhich is ill-typed.\nReason is: Illegal application: \nThe term ""param_vector_vcons"" of typ"
644112907,12449,SkySkimmer,2020-06-15 12:45:58,SkySkimmer,@Janno can you get to the Coq call this week to talk about this stuff?
644114014,12449,SkySkimmer,2020-06-15 12:48:27,Janno,"Yes, I'll make time!"
644268225,12449,SkySkimmer,2020-06-15 17:29:08,mattam82,I will try and give a look to the equations problem before the call.
646651349,12449,SkySkimmer,2020-06-19 13:57:54,Janno,"It seems to me that this branch actually minimizes fewer things to Set than master. I know this came up in Wednesday's weekly call but I didn't realize how little it minimizes. In particular, the example I used in #12414 is no longer minimized even when map is instantiated with actual Sets:\nSet Universe Polymorphism.\nSet Printing Universes.\nInductive list {T} : Type := | cons (t : T) : list -> list. (* who needs nil anyway? *)\nArguments list : clear implicits.\n\nFixpoint map {A B} (f: A -> B) (l "
646709159,12449,SkySkimmer,2020-06-19 15:53:14,Janno,"Your latest changes are certainly much better than the state I tested when I wrote the comment above: 2000 versus 700 universe constraints from three tiny Mtac2 tactics dealing with Prop.\nI don't yet have the numbers for master (I need to create yet another new opam switch) but I already see Set in quite a few places where I know it didn't show up before.\nEDIT: I should mention that it does break (as in actually breaking, not fixing Fails) Mtac2 in some places but I don't have any idea yet what'"
646726291,12449,SkySkimmer,2020-06-19 16:17:32,Janno,"tests/dummylang.v can be ""fixed"" by making stepNdo, stepNdo, and stepIfTrue universe polymorphic. This problem also came up in a previous attempt at improving minimzation.\nThere is an additional failure in tests/bugs.v which is also something that came up before, namely failing typeclass search for an instance of Seq. This time though I can't solve it with Hint Extern 0 (Seq _ _) => apply _ : typeclass_instances which did work last time.\nI would consider both of them real bugs for now. I'll have"
646727731,12449,SkySkimmer,2020-06-19 16:20:57,Janno,"Actually, I was wrong about bugs.v. I simply misremembered the workaround. Adding\nHint Extern 0 (Seq _ _ _) => apply seq_one : typeclass_instances.\nbefore the failing line in bugs.v does ""solve"" the problem.."
646850926,12449,SkySkimmer,2020-06-19 20:35:02,SkySkimmer,"Metacoq error looks like a classic ""we minimised too much""\n File ""./demo.v"", line 234, characters 0-8:\nError: Universe inconsistency. Cannot enforce MetaCoq.Examples.demo.138 =\nSet because Set < MetaCoq.Examples.demo.138."
646875283,12449,SkySkimmer,2020-06-19 22:01:25,Janno,"Metacoq error looks like a classic ""we minimised too much""\n\nMaybe. But it's suspicious that the failure goes away when you hoist out the preceding  argument to MetaCoq Run into a definition.\nDefinition bla :=\nt <- tmLemma ""foo4"" nat;;\n                     tmDefinition ""foo5"" (t + t + 2).\n\nMetaCoq Run (bla).\nNext Obligation.\n  exact 3.\nDefined.\nBoth Mtac2 failures happen in our MProof environment and Mtac2 also has a Mtac Do command which is very similar in spirit to Metacoq Run. I've observed ma"
647500515,12449,SkySkimmer,2020-06-22 12:54:06,SkySkimmer,Bench results (had to split up due to bignum issues):\nhttps://ci.inria.fr/coq/view/benchmarking/job/benchmark-part-of-the-branch/958/console\nhttps://ci.inria.fr/coq/view/benchmarking/job/benchmark-part-of-the-branch/959/console\nhttps://ci.inria.fr/coq/view/benchmarking/job/benchmark-part-of-the-branch/961/console\n|-----------------------------+-------------------------+------------------------------------------+------------------------------------------+-----------------------------+------------
647530349,12449,SkySkimmer,2020-06-22 13:47:07,Janno,"Is there nothing that won't slow down coq-engine-bench? Also, how does its time go up that much when its instruction count goes down by a statically significant percentage (0.19% outside of the usual noise range for CPU instructions, in my experience). If that trend continues then eventually it will execute 0 instructions but require infinite time for that.. I am really beginning to dislike that particular benchmark. :D\nMost other projects seem to benefit from this change. It does make me think "
647534758,12449,SkySkimmer,2020-06-22 13:54:43,ppedrot,"@Janno coq-engine-bench has quite a high variance compared to other devs in the bench, it might just be noise."
647546771,12449,SkySkimmer,2020-06-22 14:14:49,JasonGross,"I suspect that either this change results in more universes, or else it's just noise (I don't believe there's any code in coq-engine-bench that stresses universes).  Could we get a breakdown by file in coq-engine-bench?"
647549184,12449,SkySkimmer,2020-06-22 14:18:58,ppedrot,The bench has already garbage-collected the metadata
647549614,12449,SkySkimmer,2020-06-22 14:19:42,ejgallego,"The bench has already garbage-collected the metadata\n\nSeems too aggressive to me, can we tweak this on coq-bench?"
647551733,12449,SkySkimmer,2020-06-22 14:23:32,ppedrot,"@ejgallego I cannot agree more, but unfortunately I have no idea of the process responsible for the cleanup. It doesn't seem to appear in the crontab..."
647556501,12449,SkySkimmer,2020-06-22 14:31:43,ejgallego,"@ejgallego I cannot agree more, but unfortunately I have no idea of the process responsible for the cleanup. It doesn't seem to appear in the crontab...\n\nLet's open an issue in coq-bench and hope we can figure out."
647628293,12449,SkySkimmer,2020-06-22 16:24:02,gares,"IIRC it is a Jenkins job, not a Cron one"
652302359,12449,SkySkimmer,2020-07-01 09:21:53,Janno,"@SkySkimmer I can't stop wondering about the failures in Mtac2 and MetaCoq. Assuming the PR actually minimizes too much, how likely is it that the only failures in all of Coq's CI and in the benchmark suite are plugins that a) define their own vernacular commands/proof environments, b) do their own typechecking for these commands/proof environments, and c) (at least in the case of Mtac2) only fail in those custom commands/proof environments? My gut feeling is that we'd see other failures in othe"
652437867,12449,SkySkimmer,2020-07-01 14:03:20,SkySkimmer,"You're right, there's something wrong. I can't figure it out though."
652474298,12449,SkySkimmer,2020-07-01 15:05:51,Janno,"My comment was not entirely correct: the failure in bugs.v in Mtac2 does not disappear outside of the MProof environment. However, since it can be worked around with\nHint Extern 0 (Seq _ _ _) => apply seq_one : typeclass_instances.\nI am inclined to think that it's a problem with typeclass search maybe?"
652534944,12449,SkySkimmer,2020-07-01 16:55:26,Janno,"EDIT: ignore content of this comment. It's not the same root cause.\nI think I have a minimal example of the typeclass search failure in bugs.v:\nSet Universe Polymorphism.\nAxiom M : Type -> Prop.\nAxiom raise : forall {T}, M T.\n\nClass Seq (B C : Type) :=\n  seq : M B.\nArguments seq B C _ : clear implicits.\n\nInstance seq_one {B} : Seq B (M B) := raise.\n\n(* explicit instance *)\nPolymorphic Definition aux@{u u0 +} : M unit := seq@{u u0} _ unit seq_one.\n\n(* implicit instance *)\nFail Polymorphic Definit"
652887734,12449,SkySkimmer,2020-07-02 09:08:48,Janno,"Okay, I finally managed to actually, really, definitely isolate the specific failure in bugs.v: #12623. I hope.."
653010333,12449,SkySkimmer,2020-07-02 13:37:06,Janno,"The remaining Mtac2 failure in dummylang.v is because monomorphic universes are always larger than Set (at least I remember that being true). Mtac2's T.apply tactic has no special case for applying lemmas whose conclusion is a proposition. The case for Type was general enough, even in monomorphic settings, because Props never had their universes minimized to Set.\nIt's possible that this needs to be fixed by adding a new pattern (make some sort of sense) or by manually unifying some universes tha"
661707654,12449,SkySkimmer,2020-07-21 08:14:24,mattam82,I'm trying to figure out where the MetaCoq failure comes from
661746549,12449,SkySkimmer,2020-07-21 09:30:33,mattam82,"I think my fix will be entirely backwards compatible, let's wait for MetaCoq's CI."
661765315,12449,SkySkimmer,2020-07-21 10:08:21,mattam82,"Indeed, this fixes the problem in MetaCoq. @SkySkimmer you might want to rebase and relaunch the CI now :)"
661765888,12449,SkySkimmer,2020-07-21 10:09:35,SkySkimmer,rebased\nI still feel it's strange that it failed at Qed and not earlier.
661801005,12449,SkySkimmer,2020-07-21 11:31:22,SkySkimmer,"New error:\nFile ""./theories/PCUICSafeChecker.v"", line 642, characters 9-21:\nError: Cannot infer the implicit parameter T of check_eq_nat whose type is\n""Set -> Type""\n\n(the monomorphic case in https://github.com/MetaCoq/metacoq/blob/1b602b229d116a8e93b8de66a3477cc4e551ee82/safechecker/theories/PCUICSafeChecker.v#L638-L658)"
661814158,12449,SkySkimmer,2020-07-21 12:03:01,mattam82,Fixed now!
661819062,12449,SkySkimmer,2020-07-21 12:14:04,Janno,I know I am the one pushing for this but these annotations worry me. Is there anything general that could be documented to make sure other people running into this in the future know what to do?\nI am preparing the fix for Mtac2's dummylang.v. What shall we do with the other failure that's blocked on #12623?
661855257,12449,SkySkimmer,2020-07-21 13:16:50,mattam82,"rebased\nI still feel it's strange that it failed at Qed and not earlier.\n\nThat's because it's only when we minimize the tmDefinition that we find that @Bind had a constraint that was too strict, I think."
661859541,12449,SkySkimmer,2020-07-21 13:24:51,mattam82,"It is clearly a more agressive ""Mininization ToSet"", which loses solutions. The rule of thumb is: if you start instantiating some type arguments of a universe polymorphic definition with Prop's, it will instantiate the related universe binders with Set (same as instantiating @id@{?i} nat turn ?i := Set), so you should be explicit if you want to maintain polymorphism, and then there will remain Prop, Set <= i constraints."
661862303,12449,SkySkimmer,2020-07-21 13:29:33,gares,"This looks more and more like having a real binder for poly unis, which is good I believe."
661869579,12449,SkySkimmer,2020-07-21 13:43:12,SkySkimmer,This looks more and more like having a real binder for poly unis\n\nWhat does that mean?
662004013,12449,SkySkimmer,2020-07-21 17:36:32,gares,"My reading of the proposed patches (to repair CI) is to use an explicit binder, and it seems to play two roles:\n\nbe sure about the arity\nforce the explicitly quantified universes to stay quantified (not ""optimized"" away)\n\nThis is what any other binder does, btw, hence my comment.\nMy impression is that the more the minimization heuristic gets aggressive, the more it looks like ""if you bind by hand it is quantified, otherwise it is not"". I believe this is good, since it can actually be explained. "
696059670,12449,SkySkimmer,2020-09-21 11:37:12,SkySkimmer,"We talked and had a new idea for solving #12623, let's see how it goes on the real deal."
696579583,12449,SkySkimmer,2020-09-22 08:24:02,SkySkimmer,Looks like we depend on presplit defining applied evars to be lambdas due to some heuristic caring about the difference between arguments vs evar instance. ie the difference in\nCheck fun n m => eq_refl : (m + n) = (fun a b => _) n m.\nFail Check fun n m => eq_refl : (m + n) = _ n m.\n(real failure eg https://gitlab.com/coq/coq/-/jobs/748414809)
696579963,12449,SkySkimmer,2020-09-22 08:24:54,SkySkimmer,@Janno do you have the dummylang fix?
696590272,12449,SkySkimmer,2020-09-22 08:47:05,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
696590753,12449,SkySkimmer,2020-09-22 08:48:07,SkySkimmer,In the test suite only failure/subterm2 is a real failure. Something to do with not propagating enough information in the known impredicative case with the new patch.
696618571,12449,SkySkimmer,2020-09-22 09:47:13,Janno,"@Janno do you have the dummylang fix?\n\nI pushed it to https://github.com/Mtac2/Mtac2/tree/janno/coq-12449\nI don't have the right opam toolchain for coq/master on my machine right now so I can't say for sure that this branch compiles. It should be the right fix, though."
696665773,12449,SkySkimmer,2020-09-22 11:37:31,SkySkimmer,dummylang still failing (https://gitlab.com/coq/coq/-/jobs/750548907)
696667464,12449,SkySkimmer,2020-09-22 11:41:25,SkySkimmer,And we also get a new metacoq failure https://gitlab.com/coq/coq/-/jobs/750548923 https://github.com/MetaCoq/metacoq/blob/86bbd900711a5e752a60950b1001ddd5a910b912/translations/param_original.v#L444
846595878,14179,jfehrle,2021-05-23 17:16:07,Zimmi48,Rebased.
846597676,14179,jfehrle,2021-05-23 17:30:34,jfehrle,"I fetched it, thanks!"
848571734,14179,jfehrle,2021-05-26 08:22:18,Zimmi48,Heads-up: a new rebase is needed now that the inversion_sigma PR is merged. This one should be relatively easy but let me know if you encounter any difficulty.
848845160,14179,jfehrle,2021-05-26 15:02:06,jfehrle,It was very simple.  Only the 2 lines with the .. tacn:: for inversion_sigma were in conflict.
850870907,14179,jfehrle,2021-05-29 17:40:29,jfehrle,"Repeating #13892 (comment):\n\nWe need a different name for writing_proofs/inductive.rst because there is already a core/inductive.rst, giving potential for confusion.  I can rename the file when I submit it. (I've already spent an hour or two pulling in changes from tactics.rst in another branch, I don't want to repeat that.)\n\nCan I rename it now?  Suggestions welcome."
850875299,14179,jfehrle,2021-05-29 18:09:36,jfehrle,"From #13892 (comment)\n\n@Zimmi48 The ""detailed example of tactics"" chapter contains a section on dependent destruction and dependent induction that would make sense to move to this new page. I didn't do it, leaving it to you to decide whether to do it now or later. (The rest of this chapter is an example of autorewrite that could also be moved close to the documentation of this tactic, and then we would get rid of this strange chapter.)\n\nThat example section is almost 9 screenfuls of text.  Dropp"
850933325,14179,jfehrle,2021-05-30 03:23:33,Zimmi48,"Can I rename it now? Suggestions welcome.\n\nYes, as long as this is done in a separate PR (which also fixes doc/sphinx/user-extensions/proof-schemes.rst) and the PR is included into 8.14.0.\nThat being said, I didn't do this renaming myself because:\n\nI didn't get any good suggestion.\nI'm a bit reluctant to introduce a change that will be visible to the users (in the chapter's URL) because of the shortcomings of a development tool. In particular, I would avoid making the URL too long because of thi"
850935566,14179,jfehrle,2021-05-30 03:57:10,Zimmi48,"That example section is almost 9 screenfuls of text. Dropping that in the middle of the inductives chapter will break the flow for anyone who's reading/skimming the chapter. I think this should go into an appendix, perhaps with some other long examples, with appropriate hyperlinks. That also (helps) get rid of ""Detailed examples"" in the TOC, which seems out of place. The autorewrite example is much shorter at only about 2 pages. We could drop that in with the tactic description.\n\nSounds good. To"
850937567,14179,jfehrle,2021-05-30 04:23:36,Zimmi48,"By needs to be merged today, I meant Sunday (I realize it's still Saturday for you)."
855309695,14179,jfehrle,2021-06-05 23:25:58,jfehrle,"@JasonGross I only got up to casetype and did not read below there, except where there were already discussions\n\nI'm in the midst of a good bit of rewording (mainly driven by consolidating the tactic variant information into the main tactic description) before this is really ready for a close review, so you may want to wait a bit before continuing.  I will review all your comments and apply/respond to them shortly."
860269756,14179,jfehrle,2021-06-13 21:03:20,jfehrle,"Updated.  I suggest doing a close review only on of the first ~250 lines of reasoning-inductives.rst (up to ""Induction"") in this PR to keep the length of the PR conversation manageable.  Then, for merging, I'll create a separate PR that masks out the changes after line 250 for merging and we can take on the next chunk in yet another PR.  And so forth.\nI suggest reviewing the changes in other files with the initial tranche."
860619862,14179,jfehrle,2021-06-14 11:45:01,Zimmi48,Sounds like a good plan.
862030895,14179,jfehrle,2021-06-16 04:32:32,jfehrle,Updated.
862776789,14179,jfehrle,2021-06-16 22:39:05,jfehrle,"Updated (only changed a few lines).  @Zimmi48, not sure what you want for split/exists."
863605440,14179,jfehrle,2021-06-17 22:34:45,jfehrle,Updated.
864185717,14179,jfehrle,2021-06-18 17:38:48,Zimmi48,"I will review the ""Induction"" section soon (sorry for misunderstanding where to stop)."
864348221,14179,jfehrle,2021-06-19 03:26:00,jfehrle,"I will review the ""Induction"" section soon (sorry for misunderstanding where to stop).\n\nNo, you understood correctly.  If I update things after line 250 you're not obligated to review them now.  We're already up to ~250 comments, that's a lot.  But I think we're converging pretty quickly and will be able to merge the first 250 lines soon."
864453352,14179,jfehrle,2021-06-19 19:28:46,jfehrle,Updated.  I included an extra commit with a couple spelling corrections.
865340981,14179,jfehrle,2021-06-21 21:01:49,jfehrle,"Updated.  Perhaps just injection_intropattern to figure out.\nFor some words like ""nontrivial"", there is generally no dash after ""non"" according to the dictionary.  I suppose it's just that over time, writers drop the hyphen from the most common ""non-*"" words.  I fixed these.\nAlso, FWIW I earlier created two ""Review #4"" commits.  Not sure if that confused your review process."
865425307,14179,jfehrle,2021-06-22 00:04:28,coqbot-app,"Hey, I have detected that there were CI failures at commit 9bf3aa0 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 147f4da succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
865977252,14179,jfehrle,2021-06-22 13:19:17,Zimmi48,Not sure if that confused your review process.\n\nIt didn't.
866165353,14179,jfehrle,2021-06-22 17:00:54,jfehrle,"Updated.  If the first part is ready to merge, I'll create a separate PR that masks out changes after line 250."
867036818,14179,jfehrle,2021-06-23 17:45:56,jfehrle,Updated.
867060856,14179,jfehrle,2021-06-23 18:22:51,Zimmi48,Cool! Can you prepare the PR restricted to the first 250 lines?
867150723,14179,jfehrle,2021-06-23 20:54:10,jfehrle,"Updated.  If you have no objections to the last commit, I will squash once more.  I'll open a new PR for the next chunk shortly."
867154487,14179,jfehrle,2021-06-23 20:59:37,jfehrle,"Actually, just look at the overall changes to reasoning-inductives.rst after line 250 and the change to doc_grammar.ml in the last commit.  If anyone runs make doc_gram_rsts it will update the syntax for some tactics after line 250.  So let's hope no one does that..."
867637330,14179,jfehrle,2021-06-24 13:28:48,Zimmi48,"You probably didn't intend to leave two sections with almost the same name: ""Equality of inductive types"" and ""Equality and inductive sets""."
867821017,14179,jfehrle,2021-06-24 17:28:47,jfehrle,"You probably didn't intend to leave two sections with almost the same name: ""Equality of inductive types"" and ""Equality and inductive sets"".\n\nIntend?  No--didn't even think about it.  Since more-distinct titles don't come to mind immediately, I just removed the added title.  We can address that in the next PR."
867822334,14179,jfehrle,2021-06-24 17:30:55,jfehrle,Updated.
868691402,14179,jfehrle,2021-06-25 16:39:21,jfehrle,Updated and squashed.
869014931,14179,jfehrle,2021-06-26 14:59:06,Zimmi48,@coqbot merge now
869022021,14179,jfehrle,2021-06-26 15:57:08,jfehrle,Hurray!
677748973,12867,ppedrot,2020-08-20 15:52:13,coqbot,"For your complete information, the job test-suite:4.11+trunk+dune in allow failure mode has failed for commit a69c41c: Migrate bench to gitlab CI"
678328873,12867,ppedrot,2020-08-21 14:46:10,ppedrot,Bench:\n┌─────────────────────────────┬─────────────────────────┬─────────────────────────────────────────────┬─────────────────────────────────────────────┬────────────────────────────────┬───────────────────┐\n│                             │      user time [s]      │                 CPU cycles                  │              CPU instructions               │     max resident mem [KB]      │    mem faults     │\n│                             │                         │                              
678336698,12867,ppedrot,2020-08-21 14:59:03,coqbot,"For your complete information, the job test-suite:4.11+trunk+dune in allow failure mode has failed for commit 72500ec: Use a map function instead of a fold when freezing summaries."
678350590,12867,ppedrot,2020-08-21 15:26:50,ppedrot,This is even more ironic given that most calls come from Vernacinterp.interp_gen and that literally all callers of that function immediately drop the frozen summary that it returns...
678354944,12867,ppedrot,2020-08-21 15:36:08,coqbot,"For your complete information, the job test-suite:base+async in allow failure mode has failed for commit 72500ec: Use a map function instead of a fold when freezing summaries."
678355141,12867,ppedrot,2020-08-21 15:36:36,coqbot,"For your complete information, the job build:base+async in allow failure mode has failed for commit 72500ec: Use a map function instead of a fold when freezing summaries."
678975699,12867,ppedrot,2020-08-24 08:06:22,ejgallego,This is even more ironic given that most calls come from Vernacinterp.interp_gen and that literally all callers of that function immediately drop the frozen summary that it returns...\n\nThe API is used by a couple of document servers but they are not in-tree yet. Do you know which summary is the heavy one? We could actually handle it functionally thus avoiding the freeze overhead entirely.
679933114,12867,ppedrot,2020-08-25 10:07:49,SkySkimmer,The API is used by a couple of document servers but they are not in-tree yet.\n\nCan't they call freeze on their side?
679947727,12867,ppedrot,2020-08-25 10:41:11,ejgallego,"Can't they call freeze on their side?\n\nThat would require exposing quite a bit of internals; you cannot make the API lazy either due to the imperative nature. Also, the STM has to call freeze anyways later, there is a reason both the newer doc managers do use the provided state.\nIMHO we should minimize the amount of stuff stored in the summary."
680018862,12867,ppedrot,2020-08-25 13:17:05,gares,IMHO we should minimize the amount of stuff stored in the summary.\n\nHow? What can be removed in your opinion?
680034185,12867,ppedrot,2020-08-25 13:44:30,ppedrot,"The problem here is not so much the raw volume of stuff stored, because entry-wise most freezes are a literal pointer dereferenciation. Rather, the number of summary entries is the cause of the problem. But once again, this is the tip of the iceberg, as observed in related bugs the STM introduces a non-trivial overhead in batch mode that should be removed."
680122648,12867,ppedrot,2020-08-25 16:11:19,ejgallego,"Indeed I agree with @ppedrot , the way things are handled in the stm seem suspicious.\nRegarding reducing the number of summary entries, for example:\n\nthe nametab could be passed functionally\nditto for options, or at least the could be made into a single map\nsome misc stuff really don't need to be stored globally\n\njust consolidating the options would reduce the number of summary objects quite a lot."
680886240,12867,ppedrot,2020-08-26 13:39:57,ppedrot,In any case this very PR is quite trivial and needs an assignee.
681890065,12867,ppedrot,2020-08-27 11:28:14,SkySkimmer,@coqbot: merge now
716485062,12984,herbelin,2020-10-26 11:22:57,RalfJung,"Importation of notations is made more inline with the expected behavior of Import\n\nFWIW, given the consequences for Iris, I disagree that this is expected behavior. This change makes specializing notation essentially impossible: for example, for a project using Utf8 notation, there is no good way to have any notation with a top-level forall:\n\nAs that Iris change shows, for that notation to work, the specialized notation needs to be imported last. This means every client, transitively throughout "
716489341,12984,herbelin,2020-10-26 11:31:50,RalfJung,"To take a step back: currently, notation printing feels very fragile. Some Iris notation sometimes fails to print, and I have spent some hours and then given up figuring out where that comes from and instead just randomly reordered imports until it works. (I also entirely failed to minimize this problem or even reproduce it properly without a crazy dependency chain, which is why I never got around to make a bugreport.) The current conclusion is that we give very specific import order advice to o"
716501460,12984,herbelin,2020-10-26 11:59:39,herbelin,"Am I right that with this PR, that will print # True instead? That seems to be what happens on the Iris side.\n\nI did not double-checked by testing but this is what should happen yes.\nI'm otherwise mostly agreeing with your analysis.\nActually, after having fallen on this problem, I made #12986 which orders notation by precision. I'll try to experiment it on Iris to see what it gives. One the problem is that to experiment, it is not only about compiling but also about interactively using the featu"
716532072,12984,herbelin,2020-10-26 13:04:22,RalfJung,"Actually, after having fallen on this problem, I made #12986 which orders notation by precision. I'll try to experiment it on Iris to see what it gives.\n\nThat sounds great!\n\nActually, after having fallen on this problem, I made #12986 which orders notation by precision. I'll try to experiment it on Iris to see what it gives. One the problem is that to experiment, it is not only about compiling but also about interactively using the feature. So would you eventually be ok to work with a version of"
717418024,12984,herbelin,2020-10-27 17:54:02,herbelin,"Actually, after having fallen on this problem, I made #12986 which orders notation by precision. I'll try to experiment it on Iris to see what it gives. One the problem is that to experiment, it is not only about compiling but also about interactively using the feature. So would you eventually be ok to work with a version of Coq providing #12986 and give feedback on whether this is a good strategy or not?\n\nI can offer to look through some of our files with that patch -- but I think our printing "
717421475,12984,herbelin,2020-10-27 17:59:50,herbelin,"For canonical structures at least, import order does not matter, so Export of just those is never a problem. The same might be true with notation once we have something like #12986 (and maybe a way to give notation a ""printing priority"" to break ties?). But for names the ""last import wins"". I think I'd be fine having to directly Import every library that provides a name that I use in the current .v file (i.e., work as if there was no Export anywhere), but doing that for notation and canonical st"
717440601,12984,herbelin,2020-10-27 18:26:49,RalfJung,"So, would you be courageous and try to beta-test the #12986 branch on a daily basis?\n\nChanging over all my switches would take a bit, but I can go through some of our developments and see if printing seems to still work. Cc @robbertkrebbers  -- we talked about this just earlier today.\n\nSo, you suggesting a variant of @SkySkimmer's #11820 but exporting instead only side effects?\n\nEssentially. Or rather, exporting only exporting things that (with some reasonable discipline) can be made independent"
718697997,12984,herbelin,2020-10-29 11:40:18,RalfJung,(wrong thread)
718798989,12984,herbelin,2020-10-29 14:42:08,herbelin,"@herbelin could you add the testcase I proposed on the other PR?\n\nDone\n\nI have used this (specifically, commit f995f87) yesterday for work on a large Iris-based project and so far I have not noticed anything strange.\n\nOK, then I rebased #12984 on top of this one. The guess is that Iris does not need a change then.\nIf someone from MathComp could give a feedback on whether they think that giving priority to finer notations (rather than order of declaration) may break some use cases, that would be "
727216573,12984,herbelin,2020-11-14 14:39:31,Zimmi48,"It's hard reviewing the doc for this PR independently of the one of #12986. If, as I understood, this PR needs #12986 to work, what about actually rebasing this PR on top of the other like you said you did?"
727217544,12984,herbelin,2020-11-14 14:46:38,herbelin,"If, as I understood, this PR needs #12986 to work\n\nStrictly speaking they are independent, but the success of Iris CI with this PR is permitted by #12986.\n\nwhat about actually rebasing this PR on top of the other like you said you did?\n\nOK, done."
727916432,12984,herbelin,2020-11-16 11:20:34,gares,@herbelin I agree with @Zimmi48 and this should be merged together with #12986 so I'm assigning to both.\nPlease try to address the last concern by @RalfJung
728091100,12984,herbelin,2020-11-16 14:19:14,gares,Can we do a last round of chagelog cleanup? Then we merge these two PRs!
728167837,12984,herbelin,2020-11-16 16:21:32,gares,"I'd like to merge this one and to pull the other one in as a side effect, please put here the most up to date commits of both"
728172879,12984,herbelin,2020-11-16 16:29:38,herbelin,"I'd like to merge this one and to pull the other one in as a side effect, please put here the most up to date commits of both\n\nOnly one change log for both?"
728173777,12984,herbelin,2020-11-16 16:31:03,gares,"As you prefer, the two PR work in tandem (and the changelog messages as well).\nI was just warning that I won't merge the other one, so if it contains a better message, it will be lost."
728181784,12984,herbelin,2020-11-16 16:43:57,herbelin,"As you prefer, the two PR work in tandem (and the changelog messages as well).\n\nI kept two change logs (and removed ""experimental"")."
728182643,12984,herbelin,2020-11-16 16:45:26,gares,"Great, I'll wait for CI to check the rst syntax and merge"
728214363,12984,herbelin,2020-11-16 17:36:07,gares,"Iris has an error which apparently was not there before:\ntests/heap_lang2.vo (real: 4.41, user: 1.87, sys: 0.29, mem: 608336 ko)\n--- tests/heap_lang2.ref	2020-11-13 08:41:12.000000000 +0000\n+++ /tmp/tmp.bmeNJgaBVi	2020-11-16 17:31:19.000000000 +0000\n@@ -23,8 +23,11 @@\n   heapG0 : heapG Σ\n   fun1, fun2, fun3 : expr\n   ============================\n-  {{{ True }}}\n-    let: ""val1"" := fun1 #() in\n-    let: ""val2"" := fun2 ""val1"" in\n-    let: ""val3"" := fun3 ""val2"" in if: ""val1"" = ""val2"" then ""val"" els"
728217700,12984,herbelin,2020-11-16 17:41:52,herbelin,That's strange. I'm investigating.
728734324,12984,herbelin,2020-11-17 07:09:38,herbelin,"I thought I had checked the Iris printing test suite with both #12984 and #12986 together and that it worked. I mixed up the tests apparently.\nI improved the inclusion test in case of two notations with binders, one binder being bound in the notation but not the other.\nI also fixed a sordid bug in the function computing the ordering (the variable name used in the iterator of recursive notations is a name local to the recursive binder subterm; it must be registered dynamically as a notation varia"
728739741,12984,herbelin,2020-11-17 07:23:36,gares,"Iris is now passing but if you want that we take more time we can also postpone to 8.14 (giving time for more documentation and so on).\n\nFine with me, but this would mean to also postpone #12986 . Are you OK with that?"
728771348,12984,herbelin,2020-11-17 08:29:13,herbelin,"Fine with me, but this would mean to also postpone #12986 . Are you OK with that?\n\nThis would also mean postponing #12324 (which anyway did not attract enough feedback on the syntax yet).\nI'm personally ok with it. It is more to users to tell."
729164670,12984,herbelin,2020-11-17 19:53:27,herbelin,... giving time for more documentation and so on ...\n\nI made a new pass on the notation comparison function which I'm reasonably satisfied of.\nCurrent failures are apparently related to overlays waiting to be merged for #12653.
730390471,12984,herbelin,2020-11-19 13:53:17,gares,@coqbot merge now
730397498,12984,herbelin,2020-11-19 14:05:09,gares,"FTR these 2 PRs were discussed in a Coq Call, CI failure on elpi is spurious (a rebase would fix it)"
696669458,12449,SkySkimmer,2020-09-22 11:46:24,Janno,dummylang still failing (https://gitlab.com/coq/coq/-/jobs/750548907)\n\nI'll try to set up the right opam switches later today.
696980477,12449,SkySkimmer,2020-09-22 21:04:42,Janno,"I forgot to make the tactics in dummylang universe polymorphic. That failure was expected and is fixed now.\nThere is a new failure, though, which I do not have time to fully understand. The fix is simple (pose in proof script needs to be moved into a top-level definition) but I have no idea what is wrong there. Still, Mtac2/janno/coq-12449 now builds against this your branch."
698895564,12449,SkySkimmer,2020-09-25 12:16:43,SkySkimmer,"The current metacoq error (https://gitlab.com/coq/coq/-/jobs/755393312#L5480 https://github.com/MetaCoq/metacoq/blob/d26e1c2048f3c62d60ceaa5025eeb14d9f23b0fa/translations/param_generous_packed.v#L167) is a universe inconsistency after unsetting univ checking, so seems due to incomplete type_in_type."
698897570,12449,SkySkimmer,2020-09-25 12:22:02,SkySkimmer,See eg #13086
698931942,12449,SkySkimmer,2020-09-25 13:34:56,SkySkimmer,Needs some cleanup but the usual suspects are passing.
699992384,12449,SkySkimmer,2020-09-28 13:03:11,SkySkimmer,I'm putting the type-in-type stuff in a separate PR #13087
706085143,12449,SkySkimmer,2020-10-09 09:50:03,SkySkimmer,Benching https://gitlab.com/coq/coq/-/jobs/782155231
706515675,12449,SkySkimmer,2020-10-10 09:00:50,SkySkimmer,┌─────────────────────────────┬─────────────────────────┬─────────────────────────────────────────────┬─────────────────────────────────────────────┬────────────────────────────────┬───────────────────┐\n│                             │      user time [s]      │                 CPU cycles                  │              CPU instructions               │     max resident mem [KB]      │    mem faults     │\n│                             │                         │                                     
707111433,12449,SkySkimmer,2020-10-12 13:11:53,mattam82,@coqbot merge now
707111442,12449,SkySkimmer,2020-10-12 13:11:54,coqbot-app,@mattam82: You can't merge the PR because there is no kind: label.
707112152,12449,SkySkimmer,2020-10-12 13:13:14,mattam82,"@coqbot merge now\nThis fixes a bug, test-suite and changelog are updated."
707112190,12449,SkySkimmer,2020-10-12 13:13:17,coqbot-app,@mattam82: Please take care of the following overlays:\n\n12449-SkySkimmer-minim-prop-toset.sh
707114973,12449,SkySkimmer,2020-10-12 13:18:24,mattam82,@Janno can you please merge your 12449 branch? I don't see an attached PR
707159843,12449,SkySkimmer,2020-10-12 14:36:41,SkySkimmer,I made Mtac2/Mtac2#309
852130608,13895,ana-borges,2021-06-01 13:36:30,coqbot-app,"Hey, I have detected that there were CI failures at commit c5053d5 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 05b67c9 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-interval."
852798034,13895,ana-borges,2021-06-02 07:09:34,Zimmi48,@silene We have changed the location of gappa-coq and interval to allow merging the Dune PR when you were not available. But feel free to make the switch back to the official version as soon as they are compatible.
852830085,13895,ana-borges,2021-06-02 08:02:37,silene,"Yes, I know, but I have yet to write the fix (and test it, which is the time consuming part). Anyway, I am currently considering removing Interval from the bench, since its master branch will soon require features from Flocq 4."
853098719,13895,ana-borges,2021-06-02 14:55:50,Zimmi48,"Anyway, I am currently considering removing Interval from the bench, since its master branch will soon require features from Flocq 4.\n\nIt's also fine to build Flocq twice in CI, one for VST & CompCert and one for Interval.\nHowever, what will be more problematic is for the platform if it suddenly cannot ship anymore CompCert and Interval because they are not compatible with each other. I hope that Xavier will be OK to produce a release compatible with Flocq 4 soon then."
853104522,13895,ana-borges,2021-06-02 15:02:55,silene,what will be more problematic is for the platform if it suddenly cannot ship anymore CompCert and Interval because they are not compatible with each other\n\nThis is not really an issue. The platform is not supposed to ship snapshots of master branches. It is supposed to ship properly released versions of the libraries. And those are perfectly compatible. It is just the various master branches which are incompatible.
853122951,13895,ana-borges,2021-06-02 15:25:53,silene,"As soon as #14437 is merged, we can rebase and merge this one."
853263919,13895,ana-borges,2021-06-02 17:58:52,coqbot-app,"Hey, I have detected that there were CI failures at commit 407371b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 3ace672 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-interval."
855429306,13895,ana-borges,2021-06-06 17:00:40,silene,@coqbot merge now
874818785,991,mattam82,2021-07-06 14:38:29,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
894134546,991,mattam82,2021-08-06 09:31:48,coqbot-app,"This PR was not rebased after 30 days despite the warning, it is now closed."
864473334,12493,ppedrot,2021-06-19 22:55:09,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864474744,12493,ppedrot,2021-06-19 23:14:50,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864475985,12493,ppedrot,2021-06-19 23:34:16,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864477346,12493,ppedrot,2021-06-19 23:54:02,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864479481,12493,ppedrot,2021-06-20 00:13:45,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864481087,12493,ppedrot,2021-06-20 00:32:35,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864482539,12493,ppedrot,2021-06-20 00:52:14,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864483938,12493,ppedrot,2021-06-20 01:12:33,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
864484083,12493,ppedrot,2021-06-20 01:14:43,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscv.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor"" ""pro"
864506167,12493,ppedrot,2021-06-20 06:21:04,coqbot-app,"Hey, I have detected that there were CI failures at commit 01ae7bf without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 533596b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
883383579,12493,ppedrot,2021-07-20 13:14:52,coqbot-app,"Hey, I have detected that there were CI failures at commit 8b0be54 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 5b63cf5 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color."
883774401,12493,ppedrot,2021-07-20 23:39:01,JasonGross,Hopefully things work better this time @coqbot ci minimize
883774436,12493,ppedrot,2021-07-20 23:39:10,coqbot-app,"I have initiated minimization at commit 8b0be54 for the suggested targets ci-bedrock2, ci-color as requested."
883776198,12493,ppedrot,2021-07-20 23:44:43,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/color/Util/Relation/RelExtras.v (from ci-color) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(**\nCoLoR, a Coq library on rewriting and termination.\nSee the COPYRIGHTS and LICENSE files.\n\n- Adam Koprowski, 2004-09-06\n- William Delobel, 2005-10-07\n\nThis file provides some basic results concerning relations that were\nmissing in the standard library.\n*)\n\nDeclare ML Module ""ltac_plugin""."
883777163,12493,ppedrot,2021-07-20 23:47:38,JasonGross,"Ah, I see, the issue with minimizing ci-color is that the generated name for the proxy constant is sufficiently sensitive to things like ordering of Requires that minimization cannot even get started without changing the error message."
883873890,12493,ppedrot,2021-07-21 04:16:27,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/Consistency.v (from ci-bedrock2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor"" ""processor"" ""-Q"" ""/github/workspace/builds/coq/coq-failing"
909202872,12493,ppedrot,2021-08-31 12:45:09,ppedrot,"I'm closing this for now, but keeping the code under my sleeve for some future time."
917449534,13448,ybertot,2021-09-11 18:13:18,Blaisorblade,"@gares’ theory make sense to me, also because the solve_proper* stdpp tactics use simpl in the solve_proper_unfold step (which is pretty heuristic and demands a certain coding discipline).*\n*stdpp’s solve_proper and f_equiv are not to be confused with Coq’s ones."
943293099,13448,ybertot,2021-10-14 12:06:59,gares,"Given the deadline for 8.15 approaches, I see 2 ways to proceed.\nIf the loss of perf in tolerable, we can merge now and see later if we can gain back what we lost (the changes would not be in Coq, but in the user projects).\nOr we can investigate now, and merge once things are sorted out.\nDear @RalfJung what is your opinion on the perf loss? Is it critical? (Could you ask others involved in lambda-rust?)\nPlan to validate my thesis up there:\n\ncompile the project twice, before and after this patch\n"
943614196,13448,ybertot,2021-10-14 18:30:42,RalfJung,"@robbertkrebbers is our main performance expert, but 5% slowdown on the whole development is a lot. We recently managed to get a 3% speedup through some optimizations in Iris and were quite happy about that result.\n\nI suspect that the performance problem in lambda rust comes from an interactively Defined constant/instance which is less simplified than before and hence requires Coq's conversion check to run longer\n\nWhat do you mean by 'interactively Defined'? We barely ever use Defined., in lambd"
943629328,13448,ybertot,2021-10-14 18:50:22,RalfJung,"The only use of simpl inside a Defined. that I could find is here.\nAlso FWIW, we were anyway considering adding an Arguments bool_decide : simpl never.; no idea if that would make a difference here."
943709900,13448,ybertot,2021-10-14 20:34:32,Blaisorblade,"Do we have a per-line timing diff with any outlier line? At least some of the hypotheses would not give a flat diff, but they'd slow down specific lines by a large margin.\n\nsolve_proper is never used with Defined (to my knowledge) so I don't see how that could be the problem here.\n\nThat theory doesn't rely on Defined (unlike I was implying); you just need a definition foo using bar and a Proper instance for foo without one for bar. That's questionable code, given how stdpp's solve_proper works, "
943740990,13448,ybertot,2021-10-14 21:17:34,RalfJung,"That theory doesn't rely on Defined (unlike I was implying); you just need a definition foo using bar and a Proper instance for foo without one for bar. That's questionable code, given how stdpp's solve_proper works, but it might go unnoticed today if simpl hides the problem.\n\nI can't quite see how that would lead to a slowdown (as opposed to a broken proof)."
944032679,13448,ybertot,2021-10-15 06:19:37,gares,"we have a per line diff, it is quite evenly spread iirc. I will check again, but I could find TC instances built with tactics and Defined, somewhre in the software stack."
944035463,13448,ybertot,2021-10-15 06:26:41,ppedrot,"There are very violent diffs in perennial, even more so than in lambda-rust. Notably, there is this one line\nhtml/coq-perennial/src/goose_lang/metatheory.v.html:148 3.28 3.46 6.74 (95%)\n\nwhich corresponds to\n  rewrite /bin_op_eval /bin_op_eval_bool /bin_op_eval_shift /bin_op_eval_word /bin_op_eval_string;\n    repeat case_match; try by naive_solver.</pre>\n\nand has a doubled runtime."
944050560,13448,ybertot,2021-10-15 07:02:34,gares,"Thanks @ppedrot for the analysis. I'm off today, but if @ybertot pushes a fix for the last comment we can rerun the benches and see where we are next week."
944051198,13448,ybertot,2021-10-15 07:03:42,gares,"And sorry for the bogus analysis, I must have misused the tool for comparing the timings"
944058800,13448,ybertot,2021-10-15 07:17:28,ppedrot,"I am wondering about the semantics of those flags for simpl-like functions not accessed by the end-user. This is untouched by this PR but the performance issues highlights the fact that tweaking the simpl implementation has at-a-distance effects on callers of the dreaded whd_simpl_orelse_delta_but_fix reduction. In addition to being accessible via hnf it's also used a lot by some critical tactics, notably the auto-like ones to normalize the type of hypotheses. Do we expect these functions to res"
944338935,13448,ybertot,2021-10-15 14:17:14,gares,"Hum, simpl never != opaque. Imo the former should be just for simpl, while opaque more global. But I don't have much experience with the other tactics you mentioned, in MC we only use simpl in the middle of proofs."
946369673,13448,ybertot,2021-10-19 05:04:45,silene,"Said otherwise, this pull request transitively modifies hnf, which is used all over the place. Keeping the behavior of simpl and hnf as close as possible is presumably a good idea, but it should at least be mentioned in the change log."
946414719,13448,ybertot,2021-10-19 06:48:02,ppedrot,"@silene I think we should differentiate between hnf the user-facing tactic, which is AFAIK very rarely used, and hnf_constr the OCaml tactic which is used in many pieces of internal code. The latter seems to be a remnant of history used in places where we should often haved used weak-head reduction instead (but can't because backwards compatibility, yadda yadda). For the latter, I think we simply shouldn't pass the simpl user flags which are only there for convenience of the simpl reduction and "
946419486,13448,ybertot,2021-10-19 06:56:59,silene,"we should differentiate between hnf the user-facing tactic, which is AFAIK very rarely used, and hnf_constr the OCaml tactic which is used in many pieces of internal code.\n\nBe careful not to differentiate them too much, because various places in the documentation say ""behaves like the hnf tactic."""
946777738,13448,ybertot,2021-10-19 14:23:57,gares,"I should have fixed the two issues, but the bench job seems broken somehow :-/"
946782471,13448,ybertot,2021-10-19 14:28:37,SkySkimmer,"Seems like a pendulum problem, I paused it to get another machine and https://gitlab.com/coq/coq/-/jobs/1693585298 got past opam init (although CI says it will fail while building coq)\nEDIT it keeps running because the bench runs the un-merged commit but CI runs after merging with master."
946784173,13448,ybertot,2021-10-19 14:30:24,gares,"damn, I must have screwed up something."
946808955,13448,ybertot,2021-10-19 14:55:50,gares,So the problem is not in my two new commits. Apparently this PR plus the recent commits in master break simpl. There is an Option.bind ... Some ... which does not reduce anymore.\nAny clues? Otherwise I'll bisect.
946866661,13448,ybertot,2021-10-19 15:57:34,SkySkimmer,"No clue, bisect away"
947619924,13448,ybertot,2021-10-20 12:33:02,gares,"For some reasons the code turned out to be broken, no_reds means all_opaque and somehow nobody was setting the current transparent state. So I did fix it, but I've no clue how it worked before. Possibly a silly rebase on my side dropping one line. I rewrote the code in a more readable way, I hope."
947687637,13448,ybertot,2021-10-20 13:50:27,ppedrot,@gares probably a side-effect of #14810.
947689483,13448,ybertot,2021-10-20 13:52:38,ppedrot,"Bench: https://gitlab.com/coq/coq/-/jobs/1697735165.\n(@gares please put a link in the PR discussion when launching a bench, it's hellish to find them back otherwise when the PR is updated.)"
947708545,13448,ybertot,2021-10-20 14:13:19,gares,@gares probably a side-effect of #14810.\n\n😡
948119376,13448,ybertot,2021-10-20 23:52:46,coqbot-app,"Hey, I have detected that there were CI failures at commit 27271b7 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a14a8e2 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-vst."
948387757,13448,ybertot,2021-10-21 08:38:57,gares,┌─────────────────────────────┬─────────────────────────┬───────────────────────────────────────┬───────────────────────────────────────┬─────────────────────────┬───────────────────┐\n│                             │      user time [s]      │              CPU cycles               │           CPU instructions            │  max resident mem [KB]  │    mem faults     │\n│                             │                         │                                       │                                   
948388845,13448,ybertot,2021-10-21 08:40:23,SkySkimmer,#15026 for iris/lambda rust\nopam dev packages for compcert and vst have the wrong flocq dependency and nobody can be bothered to fix them
948416571,13448,ybertot,2021-10-21 09:14:15,gares,"OK, then perennial is probably fixed while iris is still affected. @ppedrot would you help me again to pinpoint the problem in there?"
912074523,14819,proux01,2021-09-02 21:34:34,coqbot-app,"Hey, I have detected that there were CI failures at commit bd6bd0d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit dbe6d3c succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-fiat_crypto, ci-fiat_crypto_legacy, ci-fiat_parsers, ci-metacoq.\nIf you tag me saying @coqbot ci minimize all, I w"
912154575,14819,proux01,2021-09-03 00:23:55,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/metacoq/safechecker/theories/PCUICWfReduction.v (from ci-metacoq) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 88KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/metacoq/template-coq/theories"" ""MetaCoq"
912271404,14819,proux01,2021-09-03 05:41:11,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/metacoq/safechecker/theories/PCUICWfReduction.v (from ci-metacoq) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 115KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/metacoq/template-coq/theories"" ""MetaCo"
912347068,14819,proux01,2021-09-03 08:09:03,Alizter,@Zimmi48 Can you tell coqbot to stop minimizing? Also it might be good to include the command in coqbots message so that it can be done easier.
912348357,14819,proux01,2021-09-03 08:10:58,Zimmi48,Done. And agreed.
912404935,14819,proux01,2021-09-03 09:39:08,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
914211374,14819,proux01,2021-09-07 11:06:54,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
914357996,14819,proux01,2021-09-07 14:33:38,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
914472585,14819,proux01,2021-09-07 17:01:13,coqbot-app,"Hey, I have detected that there were CI failures at commit 136bd93 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 873de82 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_crypto_legacy.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do "
915035058,14819,proux01,2021-09-08 08:36:10,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
915052000,14819,proux01,2021-09-08 09:01:10,Alizter,@coqbot merge now
915052035,14819,proux01,2021-09-08 09:01:12,coqbot-app,@Alizter: Please take care of the following overlays:\n\n14819-proux01-rm_deprecated_813.sh
915122201,14819,proux01,2021-09-08 10:38:08,Zimmi48,@JasonGross I think this PR was merged before fcl was fixed. I'll disable the comments when fcl fails to avoid spamming every PR.
915125510,14819,proux01,2021-09-08 10:43:42,proux01,"@Alizter this was ready, but ideally we should have waited for all the overlays to be merged before merging the PR itself, since all overlays are backward compatible."
915127575,14819,proux01,2021-09-08 10:47:14,Alizter,"@proux01 Yes, sorry about that, I should have waited. @Zimmi48 already knows, and is helping me sort it out."
915128580,14819,proux01,2021-09-08 10:49:00,proux01,"No worries, there were only two overlays left, so this should be easily fixed."
915732208,14819,proux01,2021-09-09 03:26:12,JasonGross,"@Zimmi48 I don't see a fcl overlay, only one for fiat-crypto (non-legacy)..."
915780417,14819,proux01,2021-09-09 05:43:05,Zimmi48,"Right, it looks like it was not prepared. Can you merge the fiat-crypto one and see whether you can adapt FCL?"
915846762,14819,proux01,2021-09-09 07:47:41,proux01,"@JasonGross indeed, I didn't had time to prepare it before the PR got merged. I guess it amounts to replacing Grab Existential Variables by Unshelve (and reverting the order of the resulting subgoals if there are more than one)."
916275808,14819,proux01,2021-09-09 17:01:08,JasonGross,"fcl should be fixed now, so the notifications can be re enabled"
916878486,14819,proux01,2021-09-10 12:48:00,Zimmi48,Done.
846171137,14328,JasonGross,2021-05-21 18:53:08,JasonGross,@coqbot ci minimize
846171145,14328,JasonGross,2021-05-21 18:53:09,coqbot-app,Error while attempting to find job minimization information:\nCould not find pipeline check for base commit b2431b3.  (Found checks: GitLab CI job pkg:nix:deploy:channel (branch))
846253622,14328,JasonGross,2021-05-21 20:52:24,JasonGross,@coqbot ci minimize
846253699,14328,JasonGross,2021-05-21 20:52:33,coqbot-app,"I have initiated minimization at commit af028cf for the suggested targets ci-elpi, ci-mathcomp, ci-cross_crypto as requested."
846254996,14328,JasonGross,2021-05-21 20:55:31,coqbot-app,Error: Could not minimize file  (from ci-cross_crypto) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.5MiB file on GitHub Actions Artifacts under build.log)\nefinition_C.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_D.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_E.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_F.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_
846255179,14328,JasonGross,2021-05-21 20:55:56,coqbot-app,Error: Could not minimize file  (from ci-elpi) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 2.9MiB file on GitHub Actions Artifacts under build.log)\nTALL theories/derive/projK.glob /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL theories/derive/param1.glob /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL theories/derive/param1_functor.glob /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL th
846255427,14328,JasonGross,2021-05-21 20:56:31,coqbot-app,Error: Could not minimize file  (from ci-mathcomp) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 3.3MiB file on GitHub Actions Artifacts under build.log)\nthcomp//ssreflect/.coq-native\nINSTALL ssreflect/.coq-native/Nmathcomp_ssreflect_generic_quotient.cmx /github/workspace/builds/coq/coq-passing/_install_ci/lib/coq//user-contrib/mathcomp//ssreflect/.coq-native\nINSTALL ssreflect/.coq-native/Nmathcomp_ssreflect_order.cmx /github/workspace/builds/coq/coq-passing/_install_ci/l
846275562,14328,JasonGross,2021-05-21 21:36:44,JasonGross,@coqbot ci minimize
846275597,14328,JasonGross,2021-05-21 21:36:50,coqbot-app,"I have initiated minimization at commit af028cf for the suggested targets ci-elpi, ci-mathcomp, ci-cross_crypto as requested."
846276827,14328,JasonGross,2021-05-21 21:40:04,coqbot-app,Error: Could not minimize file  (from ci-cross_crypto) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.5MiB file on GitHub Actions Artifacts under build.log)\nefinition_C.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_D.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_E.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_F.html  \n  inflating: _install_ci/share/doc/coq/html/stdlib/index_definition_
846276859,14328,JasonGross,2021-05-21 21:40:09,coqbot-app,Error: Could not minimize file  (from ci-elpi) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 2.9MiB file on GitHub Actions Artifacts under build.log)\nTALL theories/derive/projK.glob /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL theories/derive/param1.glob /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL theories/derive/param1_functor.glob /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL th
846289071,14328,JasonGross,2021-05-21 22:15:03,coqbot-app,"Minimized File  (from ci-mathcomp) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp"" ""mathcomp"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-I"" ""/github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp"" ""-top"" ""seq"") -*- *)\n(* File reduced by coq-bug-finder from original input, then "
846294609,14328,JasonGross,2021-05-21 22:34:28,JasonGross,@coqbot ci minimize
846294629,14328,JasonGross,2021-05-21 22:34:33,coqbot-app,"I have initiated minimization at commit af028cf for the suggested targets ci-elpi, ci-mathcomp as requested."
846295461,14328,JasonGross,2021-05-21 22:37:35,coqbot-app,Error: Could not minimize file  (from ci-elpi) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 2.9MiB file on GitHub Actions Artifacts under build.log)\nds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL theories/derive/param1_trivial.glob /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL theories/derive/param2.glob /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL theories/derive/induction.glob /builds/
846304837,14328,JasonGross,2021-05-21 23:13:59,coqbot-app,"Minimized File  (from ci-mathcomp) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp"" ""mathcomp"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-I"" ""/github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp"" ""-top"" ""seq"") -*- *)\n(* File reduced by coq-bug-finder from original input, then "
846554979,14328,JasonGross,2021-05-23 12:25:06,JasonGross,@coqbot ci minimize ci-elpi
846554988,14328,JasonGross,2021-05-23 12:25:11,coqbot-app,I am now running minimization at commit af028cf on requested target ci-elpi. I'll come back to you with the results once it's done.
846555467,14328,JasonGross,2021-05-23 12:29:01,coqbot-app,Error: Could not minimize file /github/workspace/builds/coq/coq-failing/_build_ci/hierarchy_builder/examples/demo2/stage10.v (from ci-elpi) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 2.9MiB file on GitHub Actions Artifacts under build.log)\nnstall_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL theories/derive/param1_trivial.glob /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL theories/derive/param2.glob /builds/coq/coq/_install_ci/lib/coq
846563725,14328,JasonGross,2021-05-23 13:30:16,JasonGross,@coqbot ci minimize ci-elpi
846563735,14328,JasonGross,2021-05-23 13:30:19,coqbot-app,I am now running minimization at commit af028cf on requested target ci-elpi. I'll come back to you with the results once it's done.
846564193,14328,JasonGross,2021-05-23 13:33:48,coqbot-app,Error: Could not minimize file /github/workspace/builds/coq/coq-failing/_build_ci/hierarchy_builder/examples/demo2/stage10.v (from ci-elpi) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 2.9MiB file on GitHub Actions Artifacts under build.log)\nnstall_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL theories/derive/param1_trivial.glob /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL theories/derive/param2.glob /builds/coq/coq/_install_ci/lib/coq
846564614,14328,JasonGross,2021-05-23 13:37:09,JasonGross,@coqbot ci minimize ci-elpi
846564623,14328,JasonGross,2021-05-23 13:37:12,coqbot-app,I am now running minimization at commit af028cf on requested target ci-elpi. I'll come back to you with the results once it's done.
846565132,14328,JasonGross,2021-05-23 13:40:58,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hierarchy_builder/examples/demo2/stage10.v (from ci-elpi) (full log on GitHub Actions)\nMinimized Coq File\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.ssr.ssreflect.\nRequire Coq.ssr.ssrfun.\nRequire Coq.ssr.ssrbool.\nRequire Coq.ZArith.ZArith"
846566920,14328,JasonGross,2021-05-23 13:54:05,JasonGross,@coqbot ci minimize ci-elpi
846566928,14328,JasonGross,2021-05-23 13:54:08,coqbot-app,I am now running minimization at commit af028cf on requested target ci-elpi. I'll come back to you with the results once it's done.
846567484,14328,JasonGross,2021-05-23 13:57:55,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hierarchy_builder/examples/demo2/stage10.v (from ci-elpi) (full log on GitHub Actions)\nMinimized Coq File\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.ssr.ssreflect.\nRequire Coq.ssr.ssrfun.\nRequire Coq.ssr.ssrbool.\nRequire Coq.ZArith.ZArith"
846568467,14328,JasonGross,2021-05-23 14:03:52,JasonGross,@coqbot ci minimize ci-elpi
846568470,14328,JasonGross,2021-05-23 14:03:54,coqbot-app,I am now running minimization at commit af028cf on requested target ci-elpi. I'll come back to you with the results once it's done.
846569033,14328,JasonGross,2021-05-23 14:07:13,coqbot-app,Error: Could not minimize file /github/workspace/builds/coq/coq-failing/_build_ci/hierarchy_builder/examples/demo2/stage10.v (from ci-elpi) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 2.9MiB file on GitHub Actions Artifacts under build.log)\nnstall_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL theories/derive/param1_trivial.glob /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL theories/derive/param2.glob /builds/coq/coq/_install_ci/lib/coq
846569654,14328,JasonGross,2021-05-23 14:11:13,JasonGross,@coqbot ci minimize ci-elpi
846569659,14328,JasonGross,2021-05-23 14:11:16,coqbot-app,I am now running minimization at commit af028cf on requested target ci-elpi. I'll come back to you with the results once it's done.
846570114,14328,JasonGross,2021-05-23 14:14:43,coqbot-app,Error: Could not minimize file /github/workspace/builds/coq/coq-failing/_build_ci/hierarchy_builder/examples/demo2/stage10.v (from ci-elpi) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 2.9MiB file on GitHub Actions Artifacts under build.log)\nnstall_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL theories/derive/param1_trivial.glob /builds/coq/coq/_install_ci/lib/coq//user-contrib/elpi/apps//derive\nINSTALL theories/derive/param2.glob /builds/coq/coq/_install_ci/lib/coq
846572119,14328,JasonGross,2021-05-23 14:29:18,JasonGross,@coqbot ci minimize ci-elpi
846572124,14328,JasonGross,2021-05-23 14:29:21,coqbot-app,I am now running minimization at commit af028cf on requested target ci-elpi. I'll come back to you with the results once it's done.
846572612,14328,JasonGross,2021-05-23 14:33:01,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hierarchy_builder/examples/demo2/stage10.v (from ci-elpi) (full log on GitHub Actions)\nMinimized Coq File\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.ssr.ssreflect.\nRequire Coq.ssr.ssrfun.\nRequire Coq.ssr.ssrbool.\nRequire Coq.ZArith.ZArith"
847010610,14328,JasonGross,2021-05-24 12:31:13,JasonGross,"Now that JasonGross/coq-tools#57 is fixed, let's try again\n@coqbot ci minimize"
847010669,14328,JasonGross,2021-05-24 12:31:20,coqbot-app,"I have initiated minimization at commit af028cf for the suggested targets ci-elpi, ci-mathcomp as requested."
847012562,14328,JasonGross,2021-05-24 12:35:09,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hierarchy_builder/examples/demo2/stage10.v (from ci-elpi) (full log on GitHub Actions)\nMinimized Coq File\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.ssr.ssreflect.\nRequire Coq.ssr.ssrfun.\nRequire Coq.ssr.ssrbool.\nRequire Coq.ZArith.ZArith"
847020501,14328,JasonGross,2021-05-24 12:50:22,JasonGross,@coqbot ci minimize ci-elpi
847020531,14328,JasonGross,2021-05-24 12:50:25,coqbot-app,I am now running minimization at commit af028cf on requested target ci-elpi. I'll come back to you with the results once it's done.
847024862,14328,JasonGross,2021-05-24 12:58:59,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hierarchy_builder/examples/demo2/stage10.v (from ci-elpi) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hierarchy_builder/tests"" ""HB.tests"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/hierarchy_builder/examples"" ""HB.examples"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/h"
847034373,14328,JasonGross,2021-05-24 13:14:15,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/ssreflect/seq.v (from ci-mathcomp) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp"" ""mathcomp"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-I"" ""/github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcom"
847257774,14328,JasonGross,2021-05-24 18:49:38,JasonGross,For historical purposes: Note that the ci-elpi example is blocked on https://coq.zulipchat.com/#narrow/stream/253928-Elpi-users.20.26.20devs/topic/Inlining.20files.20containing.20.60Elpi.20Accumulate.20File.60/near/240082812
848816788,14328,JasonGross,2021-05-26 14:28:17,coqbot-app,"Hey, I have detected that there were CI failures at commit d3cb230 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ac9a310 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-equations, ci-fourcolor, ci-iris, ci-perennial, ci-quickchick."
849067267,14328,JasonGross,2021-05-26 19:42:17,JasonGross,@coqbot ci minimize ci-iris
849067271,14328,JasonGross,2021-05-26 19:42:17,coqbot-app,I was unable to minimize any of the CI targets that you requested.\nGitLab CI job library:ci-iris (pull request) could not be minimized (Job GitLab CI job library:ci-iris (pull request) is still in progress.)
849114739,14328,JasonGross,2021-05-26 21:01:33,JasonGross,@coqbot ci minimize
849114843,14328,JasonGross,2021-05-26 21:01:44,coqbot-app,"I have initiated minimization at commit d3cb230 for the suggested targets ci-equations, ci-fourcolor, ci-iris, ci-perennial, ci-quickchick as requested.\nHowever, you may want to try again once the pipeline for the head commit (d3cb230) finishes."
849116380,14328,JasonGross,2021-05-26 21:04:31,coqbot-app,Error: Could not minimize file  (from ci-fourcolor) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.7MiB file on GitHub Actions Artifacts under build.log)\nll_ci/lib/coq/theories/setoid_ring/RealField.vos  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.glob  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.v  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.vo  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.vos  \n  inflating:
849116448,14328,JasonGross,2021-05-26 21:04:38,coqbot-app,Error: Could not minimize file  (from ci-equations) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.6MiB file on GitHub Actions Artifacts under build.log)\nting: _build_ci/equations/test-suite/issues/issue91.vos  \n  inflating: _build_ci/equations/test-suite/issues/issue93.v  \n  inflating: _build_ci/equations/test-suite/issues/issue95_1.glob  \n  inflating: _build_ci/equations/test-suite/issues/issue95_1.v  \n  inflating: _build_ci/equations/test-suite/issues/issue95_1.vo  \n 
849116518,14328,JasonGross,2021-05-26 21:04:47,coqbot-app,Error: Could not minimize file  (from ci-perennial) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.9MiB file on GitHub Actions Artifacts under build.log)\n\n  inflating: _build_ci/perennial/src/algebra/na_heap.v  \n  inflating: _build_ci/perennial/src/algebra/own_discrete.v  \n  inflating: _build_ci/perennial/src/algebra/partition.v  \n  inflating: _build_ci/perennial/src/algebra/proph_map.v  \n   creating: _build_ci/perennial/src/base_logic/\n  inflating: _build_ci/perennial/s
849116535,14328,JasonGross,2021-05-26 21:04:48,coqbot-app,Error: Could not minimize file  (from ci-iris) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.8MiB file on GitHub Actions Artifacts under build.log)\n/theories/.coq-native/Nstdpp_fin_sets.cmi  \n  inflating: _build_ci/stdpp/theories/.coq-native/Nstdpp_fin_sets.cmx  \n  inflating: _build_ci/stdpp/theories/.coq-native/Nstdpp_fin_sets.cmxs  \n  inflating: _build_ci/stdpp/theories/.coq-native/Nstdpp_fin_sets.o  \n  inflating: _build_ci/stdpp/theories/.coq-native/Nstdpp_finite.cmi
849116724,14328,JasonGross,2021-05-26 21:05:08,coqbot-app,Error: Could not minimize file  (from ci-quickchick) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.7MiB file on GitHub Actions Artifacts under build.log)\nll_ci/lib/coq/theories/setoid_ring/RealField.vos  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.glob  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.v  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.vo  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.vos  \n  inflating
849165822,14328,JasonGross,2021-05-26 22:36:13,JasonGross,@coqbot ci minimize
849165884,14328,JasonGross,2021-05-26 22:36:23,coqbot-app,"I have initiated minimization at commit d3cb230 for the suggested targets ci-equations, ci-fourcolor, ci-iris, ci-perennial, ci-quickchick as requested.\nHowever, you may want to try again once the pipelines for the base commit (ac9a310) and head commit (d3cb230) finish."
849166872,14328,JasonGross,2021-05-26 22:39:09,coqbot-app,Error: Could not minimize file  (from ci-quickchick) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.7MiB file on GitHub Actions Artifacts under build.log)\nll_ci/lib/coq/theories/setoid_ring/RealField.vos  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.glob  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.v  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.vo  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.vos  \n  inflating
849166977,14328,JasonGross,2021-05-26 22:39:30,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/equations/examples/AlmostFull.v (from ci-equations) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 58KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.extraction.Extrac"
849167007,14328,JasonGross,2021-05-26 22:39:35,coqbot-app,Error: Could not minimize file  (from ci-fourcolor) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.7MiB file on GitHub Actions Artifacts under build.log)\nll_ci/lib/coq/theories/setoid_ring/RealField.vos  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.glob  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.v  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.vo  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.vos  \n  inflating:
849167381,14328,JasonGross,2021-05-26 22:40:42,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/external/iris/iris/algebra/ofe.v (from ci-perennial) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 69KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.ssr.ss"
849167797,14328,JasonGross,2021-05-26 22:41:47,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/iris/iris/algebra/ofe.v (from ci-iris) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 69KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.ssr.ssreflect.\nRequire Coq.Cla"
849174265,14328,JasonGross,2021-05-26 22:59:53,JasonGross,"@coqbot ci minimize ci-equations, ci-fourcolor, ci-iris, ci-perennial"
849174317,14328,JasonGross,2021-05-26 23:00:01,coqbot-app,"I am now running minimization at commit d3cb230 on requested targets ci-equations, ci-fourcolor, ci-iris, ci-perennial. I'll come back to you with the results once it's done.\nHowever, minimization may fail because the pipeline for the base commit (ac9a310) has not yet finished."
849175325,14328,JasonGross,2021-05-26 23:02:47,coqbot-app,Error: Could not minimize file  (from ci-fourcolor) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 1.7MiB file on GitHub Actions Artifacts under build.log)\nll_ci/lib/coq/theories/setoid_ring/RealField.vos  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.glob  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.v  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.vo  \n  inflating: _install_ci/lib/coq/theories/setoid_ring/Ring.vos  \n  inflating:
849175708,14328,JasonGross,2021-05-26 23:03:37,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/equations/examples/AlmostFull.v (from ci-equations) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 58KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.extraction.Extrac"
849176065,14328,JasonGross,2021-05-26 23:04:31,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/external/iris/iris/algebra/ofe.v (from ci-perennial) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 69KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.ssr.ss"
849181425,14328,JasonGross,2021-05-26 23:17:26,coqbot-app,"Hey, I have detected that there were CI failures at commit d3cb230 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ac9a310 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-equations, ci-fourcolor, ci-iris, ci-perennial, ci-quickchick.\nHowever, you may want to wait until the pipeline for the base co"
849182402,14328,JasonGross,2021-05-26 23:19:43,JasonGross,@coqbot ci minimize ci-fourcolor
849182417,14328,JasonGross,2021-05-26 23:19:46,coqbot-app,"I am now running minimization at commit d3cb230 on requested target ci-fourcolor. I'll come back to you with the results once it's done.\nHowever, minimization may fail because the pipeline for the base commit (ac9a310) has not yet finished."
849184302,14328,JasonGross,2021-05-26 23:24:20,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fourcolor/theories/realcategorical.v (from ci-fourcolor) (full log on GitHub Actions)\nMinimized Coq File\n(* (c) Copyright 2006-2018 Microsoft Corporation and Inria.                  *)\n(* Distributed under the terms of CeCILL-B.                                  *)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation "
849188646,14328,JasonGross,2021-05-26 23:34:50,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/iris/iris/algebra/ofe.v (from ci-iris) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/iris/iris/prelude"" ""iris.prelude"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/iris/iris/algebra"" ""iris.algebra"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/iris/iris/si_logic"" ""iris.si_l"
849745974,14328,JasonGross,2021-05-27 15:51:25,JasonGross,"@coqbot ci minimize ci-equations, ci-fourcolor, ci-perennial"
849746054,14328,JasonGross,2021-05-27 15:51:32,coqbot-app,"I am now running minimization at commit d3cb230 on requested targets ci-equations, ci-fourcolor, ci-perennial. I'll come back to you with the results once it's done."
849749586,14328,JasonGross,2021-05-27 15:56:21,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fourcolor/theories/realcategorical.v (from ci-fourcolor) (full log on GitHub Actions)\nMinimized Coq File\n(* (c) Copyright 2006-2018 Microsoft Corporation and Inria.                  *)\n(* Distributed under the terms of CeCILL-B.                                  *)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation "
849749883,14328,JasonGross,2021-05-27 15:56:45,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/external/iris/iris/algebra/ofe.v (from ci-perennial) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 69KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.ssr.ss"
849756792,14328,JasonGross,2021-05-27 16:06:04,JasonGross,"@coqbot ci minimize ci-fourcolor, ci-perennial"
849756874,14328,JasonGross,2021-05-27 16:06:10,coqbot-app,"I am now running minimization at commit d3cb230 on requested targets ci-fourcolor, ci-perennial. I'll come back to you with the results once it's done."
849760452,14328,JasonGross,2021-05-27 16:10:54,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fourcolor/theories/realcategorical.v (from ci-fourcolor) (full log on GitHub Actions)\nMinimized Coq File\n(* (c) Copyright 2006-2018 Microsoft Corporation and Inria.                  *)\n(* Distributed under the terms of CeCILL-B.                                  *)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation "
849760558,14328,JasonGross,2021-05-27 16:11:03,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/external/iris/iris/algebra/ofe.v (from ci-perennial) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 69KiB file on GitHub Actions Artifacts under bug.v)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.ssr.ss"
849763529,14328,JasonGross,2021-05-27 16:15:22,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/equations/examples/AlmostFull.v (from ci-equations) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/equations/theories"" ""Equations"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/equations/examples"" ""Examples"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib"
849952995,14328,JasonGross,2021-05-27 21:25:59,JasonGross,For the historical record: perennial issue could be fixed by mit-pdos/perennial#35; fourcolor issue recorded at JasonGross/coq-tools#60 to be fixed eventually
850448951,14328,JasonGross,2021-05-28 14:13:58,coqbot-app,"Hey, I have detected that there were CI failures at commit d3cb230 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit ac9a310 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-equations, ci-fourcolor, ci-iris, ci-perennial, ci-quickchick."
850457256,14328,JasonGross,2021-05-28 14:26:40,JasonGross,@coqbot ci minimize ci-perennial
850457312,14328,JasonGross,2021-05-28 14:26:46,coqbot-app,I am now running minimization at commit d3cb230 on requested target ci-perennial. I'll come back to you with the results once it's done.
850479116,14328,JasonGross,2021-05-28 14:58:16,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/external/iris/iris/algebra/ofe.v (from ci-perennial) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/perennial/src"" ""Perennial"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/perennial/external/stdpp/theories"" ""stdpp"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/pere"
850650065,14328,JasonGross,2021-05-28 20:18:30,JasonGross,@coqbot ci minimize ci-fourcolor
850650089,14328,JasonGross,2021-05-28 20:18:34,coqbot-app,I am now running minimization at commit d3cb230 on requested target ci-fourcolor. I'll come back to you with the results once it's done.
850666555,14328,JasonGross,2021-05-28 20:58:21,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fourcolor/theories/realcategorical.v (from ci-fourcolor) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fourcolor/theories"" ""fourcolor"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/"
854050872,14328,JasonGross,2021-06-03 17:30:12,coqbot-app,"Hey, I have detected that there were CI failures at commit a706e26 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 6030bdc succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
854053539,14328,JasonGross,2021-06-03 17:34:30,JasonGross,@coqbot ci minimize
854053567,14328,JasonGross,2021-06-03 17:34:33,coqbot-app,I have initiated minimization at commit a706e26 for the suggested target ci-metacoq as requested.
854060903,14328,JasonGross,2021-06-03 17:46:15,coqbot-app,Error: Could not minimize file  (from ci-metacoq) (full log on GitHub Actions)\nbuild log\n++ set -e\n++++ dirname /github/workspace/coqbot-ci.sh\n+++ cd /github/workspace\n+++ pwd\n++ DIR=/github/workspace\n++ echo '::group::install dependencies'\n::group::install dependencies\n++ sudo apt-get update -y\nHit:1 http://security.ubuntu.com/ubuntu bionic-security InRelease\nHit:2 http://archive.ubuntu.com/ubuntu bionic InRelease\nHit:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease\nHit:4 http://arch
854072974,14328,JasonGross,2021-06-03 18:05:12,JasonGross,@coqbot ci minimize
854073007,14328,JasonGross,2021-06-03 18:05:16,coqbot-app,I have initiated minimization at commit a706e26 for the suggested target ci-metacoq as requested.
854079065,14328,JasonGross,2021-06-03 18:15:54,coqbot-app,Error: Could not minimize file  (from ci-metacoq) (full log on GitHub Actions)\nbuild log\n++ set -e\n++++ dirname /github/workspace/coqbot-ci.sh\n+++ cd /github/workspace\n+++ pwd\n++ DIR=/github/workspace\n++ echo '::group::install dependencies'\n::group::install dependencies\n++ sudo apt-get update -y\nHit:1 http://security.ubuntu.com/ubuntu bionic-security InRelease\nHit:2 http://archive.ubuntu.com/ubuntu bionic InRelease\nHit:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease\nHit:4 http://arch
860860157,14328,JasonGross,2021-06-14 17:27:50,JasonGross,Let's see if we can get ci-metacoq minimized for #14137 here
860922687,14328,JasonGross,2021-06-14 19:04:47,coqbot-app,"Hey, I have detected that there were CI failures at commit aa22999 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4e41c83 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
860935383,14328,JasonGross,2021-06-14 19:27:02,JasonGross,@coqbot ci minimize
860935414,14328,JasonGross,2021-06-14 19:27:05,coqbot-app,"I have initiated minimization at commit aa22999 for the suggested target ci-metacoq as requested.\nHowever, you may want to try again once the pipeline for the head commit (aa22999) finishes."
860976451,14328,JasonGross,2021-06-14 20:39:13,coqbot-app,"Hey, I have detected that there were CI failures at commit aa22999 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 4e41c83 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-metacoq."
861009728,14328,JasonGross,2021-06-14 21:30:31,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/metacoq/pcuic/theories/PCUICSigmaCalculus.v (from ci-metacoq) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/metacoq/template-coq/theories"" ""MetaCoq.Template"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/metacoq/pcuic/theories"" "
862622831,14328,JasonGross,2021-06-16 18:43:57,JasonGross,Now building for #14253
862749422,14328,JasonGross,2021-06-16 21:47:01,coqbot-app,"Hey, I have detected that there were CI failures at commit 910ea1f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 147f4da succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_parsers."
863490194,14328,JasonGross,2021-06-17 19:01:23,JasonGross,@coqbot ci minimize
863490227,14328,JasonGross,2021-06-17 19:01:26,coqbot-app,I have initiated minimization at commit 910ea1f for the suggested target ci-fiat_parsers as requested.
863641419,14328,JasonGross,2021-06-18 00:18:24,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 63KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fi"
863769538,14328,JasonGross,2021-06-18 05:35:14,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 49KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fi"
863949744,14328,JasonGross,2021-06-18 10:51:58,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 61KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
864129727,14328,JasonGross,2021-06-18 15:48:32,JasonGross,"Testing:\n@coqbot resume CI minimize ci-fiat_parsers\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/Bedrock"" ""Bedrock"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-I"" """
864129759,14328,JasonGross,2021-06-18 15:48:36,coqbot-app,I am now running minimization at commit 910ea1f on requested target ci-fiat_parsers. I'll come back to you with the results once it's done.
864132200,14328,JasonGross,2021-06-18 15:53:11,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\n\nIntermediate Coq File (useful"
864141641,14328,JasonGross,2021-06-18 16:08:54,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 66KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
864158013,14328,JasonGross,2021-06-18 16:40:39,JasonGross,Testing:\n@coqbot resume CI minimize ci-fiat_parsers\ntest.
864158043,14328,JasonGross,2021-06-18 16:40:42,coqbot-app,I am now running minimization at commit 910ea1f on requested target ci-fiat_parsers. I'll come back to you with the results once it's done.
864160035,14328,JasonGross,2021-06-18 16:44:56,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\ntest.\n\nIntermediate Coq File ("
864282881,14328,JasonGross,2021-06-18 21:25:47,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 70KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
864344445,14328,JasonGross,2021-06-19 02:42:48,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 81KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
864372629,14328,JasonGross,2021-06-19 07:59:45,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 74KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
864405153,14328,JasonGross,2021-06-19 13:16:28,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 72KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
864447036,14328,JasonGross,2021-06-19 18:33:18,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 72KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
864477058,14328,JasonGross,2021-06-19 23:50:17,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 75KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
864500396,14328,JasonGross,2021-06-20 05:07:13,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 73KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
864507581,14328,JasonGross,2021-06-20 06:39:36,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 73KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-"
864573984,14328,JasonGross,2021-06-20 15:49:43,coqbot-app,"Hey, I have detected that there were CI failures at commit 910ea1f without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 147f4da succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_parsers."
864576144,14328,JasonGross,2021-06-20 16:05:24,JasonGross,@coqbot ci minimize
864576169,14328,JasonGross,2021-06-20 16:05:29,coqbot-app,I have initiated minimization at commit 910ea1f for the suggested target ci-fiat_parsers as requested.
864594582,14328,JasonGross,2021-06-20 18:34:23,JasonGross,"@coqbot resume ci minimize ci-fiat_parsers\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-q"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/Bedrock"" ""Bedrock"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-I"" ""/github/w"
864594587,14328,JasonGross,2021-06-20 18:34:27,coqbot-app,I am now resuming minimization at commit 910ea1f on requested target ci-fiat_parsers. I'll come back to you with the results once it's done.
864595094,14328,JasonGross,2021-06-20 18:39:30,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-q"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq"
864595481,14328,JasonGross,2021-06-20 18:42:43,JasonGross,"@coqbot resume ci minimize ci-fiat_parsers\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-q"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/Bedrock"" ""Bedrock"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-I"" ""/github/w"
864595486,14328,JasonGross,2021-06-20 18:42:47,coqbot-app,I am now resuming minimization at commit 910ea1f on requested target ci-fiat_parsers. I'll come back to you with the results once it's done.
864595818,14328,JasonGross,2021-06-20 18:45:49,JasonGross,"@coqbot resume ci minimize ci-fiat_parsers\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-q"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/Bedrock"" ""Bedrock"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-I"" ""/github/w"
864595827,14328,JasonGross,2021-06-20 18:45:52,coqbot-app,I am now resuming minimization at commit 910ea1f on requested target ci-fiat_parsers. I'll come back to you with the results once it's done.
864596061,14328,JasonGross,2021-06-20 18:47:42,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-q"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq"
864596461,14328,JasonGross,2021-06-20 18:51:04,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-q"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq"
864597533,14328,JasonGross,2021-06-20 19:00:21,JasonGross,"@coqbot resume ci minimize ci-fiat_parsers\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-q"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/Bedrock"" ""Bedrock"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-I"" ""/github/w"
864597539,14328,JasonGross,2021-06-20 19:00:25,coqbot-app,I am now resuming minimization at commit 910ea1f on requested target ci-fiat_parsers. I'll come back to you with the results once it's done.
864598057,14328,JasonGross,2021-06-20 19:04:42,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-q"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq"
864599266,14328,JasonGross,2021-06-20 19:14:20,JasonGross,"@coqbot resume ci minimize ci-fiat_parsers\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-q"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/Bedrock"" ""Bedrock"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-I"" ""/github/w"
864599450,14328,JasonGross,2021-06-20 19:15:54,JasonGross,"@coqbot resume ci minimize ci-fiat_parsers\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-q"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/Bedrock"" ""Bedrock"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-I"" ""/github/w"
864602242,14328,JasonGross,2021-06-20 19:40:15,JasonGross,"@coqbot resume ci minimize ci-fiat_parsers\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-q"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/Bedrock"" ""Bedrock"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-I"" ""/github/w"
864603781,14328,JasonGross,2021-06-20 19:53:31,coqbot-app,I am now resuming minimization at commit 910ea1f on requested target ci-fiat_parsers. I'll come back to you with the results once it's done.
864604281,14328,JasonGross,2021-06-20 19:58:34,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 47KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-q"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-"
864605559,14328,JasonGross,2021-06-20 20:10:37,coqbot-app,I am now resuming minimization at commit 910ea1f on requested target ci-fiat_parsers. I'll come back to you with the results once it's done.
864606185,14328,JasonGross,2021-06-20 20:16:10,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 47KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-q"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-"
864609312,14328,JasonGross,2021-06-20 20:42:28,JasonGross,"@coqbot resume ci minimize ci-fiat_parsers\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option,-deprecated-appcontext,-notation-overridden"" ""-R"" ""../../coq-failing/_build_ci/fiat_parsers/src/"" ""Fiat"" ""-Q"" ""."" ""Top"" ""-top"" ""bug_06"" ""-native-compiler"" ""no"" ""-require-import"" ""Coq.Compat.AdmitAxiom"") -*- *)\n(* File reduced by coq-bug-finder from original input, then from 916 lines to 386 lines, then from 507 lines to 948 lines, then from 951 lines to 417 lines, then f"
864609317,14328,JasonGross,2021-06-20 20:42:31,coqbot-app,I am now resuming minimization at commit 910ea1f on requested target ci-fiat_parsers. I'll come back to you with the results once it's done.
864613462,14328,JasonGross,2021-06-20 21:21:42,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 44KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-"
864613584,14328,JasonGross,2021-06-20 21:22:42,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 74KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
864616082,14328,JasonGross,2021-06-20 21:48:39,JasonGross,"@coqbot resume ci minimize ci-fiat_parsers\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option,-deprecated-appcontext,-notation-overridden"" ""-R"" ""../../coq-failing/_build_ci/fiat_parsers/src/"" ""Fiat"" ""-Q"" ""."" ""Top"" ""-top"" ""bug_08"" ""-native-compiler"" ""no"" ""-require-import"" ""Coq.Compat.AdmitAxiom"") -*- *)\n(* File reduced by coq-bug-finder from original input, then from 916 lines to 386 lines, then from 507 lines to 948 lines, then from 951 lines to 417 lines, then f"
864616088,14328,JasonGross,2021-06-20 21:48:43,coqbot-app,I am now resuming minimization at commit 910ea1f on requested target ci-fiat_parsers. I'll come back to you with the results once it's done.
864621999,14328,JasonGross,2021-06-20 22:48:51,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 45KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-"
864681371,14328,JasonGross,2021-06-21 02:39:33,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 48KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
864813848,14328,JasonGross,2021-06-21 07:56:33,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 53KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
865023715,14328,JasonGross,2021-06-21 13:15:02,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 57KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
865254401,14328,JasonGross,2021-06-21 18:31:59,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 61KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
865420067,14328,JasonGross,2021-06-21 23:48:43,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 77KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/buil"
865503926,14328,JasonGross,2021-06-22 03:41:51,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/Parsers/Refinement/PossibleTerminalsSets.v (from ci-fiat_parsers) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 71KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-appcontext -notation-overridden"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src"" ""Fiat"" ""-"
866108371,14328,JasonGross,2021-06-22 15:51:20,coqbot-app,"Hey, I have detected that there were CI failures at commit 9e9a763 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 451967a succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_parsers.\nIf you tag me and say ci minimize all, I will additionally minimize the following target (which I do not suggest m"
866154556,14328,JasonGross,2021-06-22 16:46:18,coqbot-app,"Hey, I have detected that there were CI failures at commit 9e9a763 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 451967a succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-fiat_parsers.\nIf you tag me saying @coqbot ci minimize all, I will additionally minimize the following target (which I do not su"
870668945,14328,JasonGross,2021-06-29 14:50:38,JasonGross,Closing PR because GitHub is bad at long threads
870723551,14328,JasonGross,2021-06-29 16:00:11,coqbot-app,"Hey, I have detected that there were CI failures at commit c6473ba without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit f0570d9 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bbv, ci-bedrock2, ci-bignums, ci-compcert, ci-coq_performance_tests, ci-coq_tools, ci-cross_crypto, ci-elpi, ci-equations, ci-f"
943834812,14718,herbelin,2021-10-14 23:22:03,jfehrle,"I'm now also leaning in the direction to fail if a Require is ambiguous.\n\nIn coqdep would be great, also at startup time for coqc, coqtop and coqidetop.  For extra credit, also warn about the presence of .vo files that lack a corresponding .v file.\n\nSorting with Unicode was discussed above. One would have to rely on a unicode library, and it'd be a bit of work to implement, but why not.\n\nI couldn't tell what that Unicode discussion concluded.  As long as it's not locale-dependent.\n\nI was suggest"
943939782,14718,herbelin,2021-10-15 02:40:53,jfehrle,"OTOH, it occurs to me that if the Coq strongly discourages having ambiguous files, then maybe Unicode sorting isn't really necessary."
946610603,14718,herbelin,2021-10-19 11:00:21,herbelin,"Option -Q does not require From, if this is what you mean.\n\nI mean for instance I cannot do Require Ltac2 I need to do Require Ltac2.Ltac2 or From Ltac2 Require Ltac2, so even if someone installs user-contrib/foo/Ltac2.vo there is no confusion.\n\nMy own confusion, you're right.\n\n\nI was suggesting a From, because it would then be robust to addition of new possibly-newly-conflicting libraries in user-contrib.\n\nUp to you. That might break some user code, so it would have to be a warning for at least"
946624626,14718,herbelin,2021-10-19 11:20:25,herbelin,"Another issue with Unicode is that the loadpath is built by looking at directory names as they are in the file system (that is Unicode-normalized if on a file system that normalizes), but the correspondence with the logical path is done without normalization. Either a normalization function should be used (with applicability to all file systems) or the normalization function of the underlying file system (if any) is used to normalize (e.g. by creating a tmp file and reading its normalized name b"
946971528,14718,herbelin,2021-10-19 18:05:01,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
947036684,14718,herbelin,2021-10-19 19:23:33,coqbot-app,"Hey, I have detected that there were CI failures at commit 72f5e4d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a14a8e2 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-aac_tactics, ci-argosy, ci-coq_dpdgraph, ci-coq_tools, ci-cross_crypto, ci-elpi, ci-equations, ci-mtac2, ci-paramcoq, ci-relati"
947038697,14718,herbelin,2021-10-19 19:26:44,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
947086236,14718,herbelin,2021-10-19 20:37:25,coqbot-app,The job library:ci-fiat_crypto_legacy has failed in allow failure mode\nping @JasonGross
947444565,14718,herbelin,2021-10-20 08:29:38,coqbot-app,"Hey, I have detected that there were CI failures at commit 4c26599 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a14a8e2 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
947524963,14718,herbelin,2021-10-20 10:12:36,herbelin,"Sorry for yet an iteration on the PR. I modified the following behaviors:\n\ncoqc/coqtop now fail if a logical path partially matches two files in the same -R/-Q root; on its side, coqdep warns that Require will fail (maybe coqdep should already fail as it currently produces dependency files which are file system and that's a bit strange)\ncoqc/coqtop do not any longer warn when two exact matches exist; instead, they take the latest; coqdep warns that the latest will be used\nalso refined Load: Load"
947545179,14718,herbelin,2021-10-20 10:43:09,coqbot-app,"Hey, I have detected that there were CI failures at commit 4c26599 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a14a8e2 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
947553034,14718,herbelin,2021-10-20 10:55:27,Alizter,Any clue what the issue with equations is?
947554650,14718,herbelin,2021-10-20 10:58:08,herbelin,"Any clue what the issue with equations is?\n\nIt is an ambiguous Require, see mattam82/Coq-Equations#435."
947556061,14718,herbelin,2021-10-20 11:00:20,Alizter,"OK overall looks good to me. Since the CI is happy with this change, and we have resolved various ambiguities with the loadpaths, I am happy to merge this soon."
947558089,14718,herbelin,2021-10-20 11:03:10,Alizter,"Since the call is today, let's advertise it quickly to some other eyes. If all is good I will merge by the end of the week."
947688876,14718,herbelin,2021-10-20 13:51:54,coqbot-app,"Hey, I have detected that there were CI failures at commit 9c75e34 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 69fdf76 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
947690459,14718,herbelin,2021-10-20 13:53:42,Alizter,@herbelin Do you need to add the overlay?
947693968,14718,herbelin,2021-10-20 13:57:29,coqbot-app,"Hey, I have detected that there were CI failures at commit 9c75e34 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 69fdf76 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
947717911,14718,herbelin,2021-10-20 14:22:48,herbelin,"@herbelin Do you need to add the overlay?\n\nIdeally, the Equations PR would be first merged without requiring an overlay here. It is a backwards-compatible trivial PR."
947750426,14718,herbelin,2021-10-20 14:56:15,coqbot-app,"Hey, I have detected that there were CI failures at commit 9c75e34 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 69fdf76 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
947862065,14718,herbelin,2021-10-20 17:05:55,herbelin,"I squashed, making the different parts of the PR more visible:\n\nFix of #11631 (initial report) and #14539 (initial report)\nMisc internal cleaning/renaming in coqdep_common.ml\nAdopting same order for browsing directories in coqc and coqdep (fixing 2nd part of #14539)\nA mini-fix in an error message introduced in #14827\nRemoving an outdated comment in the refman\nAn update of coqdep's man page and refman\nThe new exact-match priority, order on -R/-Q, failure on ambiguity rules"
947864666,14718,herbelin,2021-10-20 17:09:12,herbelin,Yet another valuable thing to do I think would be to merge the doc of Require and From Require.
947878442,14718,herbelin,2021-10-20 17:23:05,Alizter,Yet another valuable thing to do I think would be to merge the doc of Require and From Require.\n\nCreated an issue for this #15053
947885530,14718,herbelin,2021-10-20 17:30:34,ejgallego,"This seems good to go, great effort by @herbelin !\nWe have many options on how to merge the two codepaths, there is not a canonical strategy IMHO, as of today, I think that just make coqdep directly depend on Loadpath, even if Loadpathstill depends on coq-core.library is the best way to go.\nFor that you need a small commit, see: ejgallego@495795f"
947929887,14718,herbelin,2021-10-20 18:29:57,herbelin,"This seems good to go, great effort by @herbelin !\n\nThanks!\n\nWe have many options on how to merge the two codepaths, there is not a canonical strategy IMHO, as of today, I think that just make coqdep directly depend on Loadpath, even if Loadpathstill depends on coq-core.library is the best way to go.\nFor that you need a small commit, see: ejgallego@495795f\n\nAs said somewhere above, the approach is a bit different in coqc and coqdep. The former builds a map from dirpath (i.e. w/o the basename) to"
947975983,14718,herbelin,2021-10-20 19:34:52,ejgallego,"As said somewhere above, the approach is a bit different in coqc and coqdep. The former builds a map from dirpath (i.e. w/o the basename) to physical directory, then, when requested, look physically for a file in the physical directories that match the dirpath of the required module. The latter builds a map from full logical paths (i.e with the basename) to physical files.\nThe second is necessary for efficiency I would say. The former is better for lazy requiring (otherwise, one would freeze the"
947997968,14718,herbelin,2021-10-20 20:08:17,coqbot-app,"Hey, I have detected that there were CI failures at commit 2bad0f3 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1343a93 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
947999870,14718,herbelin,2021-10-20 20:11:03,coqbot-app,"Hey, I have detected that there were CI failures at commit 2bad0f3 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1343a93 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
948017284,14718,herbelin,2021-10-20 20:36:30,herbelin,"Caching is IMHO an orthogonal issue, tries could support both [and I was under the impression we already do caching in the coqc case, don't we @herbelin] ?\n\nThere is (or at least there was at some time) a caching of loaded vo files, but looking for an existing vo files was only at the time of requiring.\nI don't have a strong opinion on the data structures to use, otherwise. Feel free to experiment what you think is good."
948593243,14718,herbelin,2021-10-21 13:02:14,coqbot-app,"Hey, I have detected that there were CI failures at commit a9abb4d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 37d25fa succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
948601248,14718,herbelin,2021-10-21 13:10:27,coqbot-app,"Hey, I have detected that there were CI failures at commit a9abb4d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 37d25fa succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
948687439,14718,herbelin,2021-10-21 14:41:24,coqbot-app,"Hey, I have detected that there were CI failures at commit a9abb4d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 37d25fa succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-equations."
948697428,14718,herbelin,2021-10-21 14:52:14,herbelin,"Thanks for all your comments!\n\nSince you are already changing many things in this part of the documentation, it could make sense to also do the move as part of this PR. But that's entirely up to you.\n\nI could. Let's already stabilize the description of Require.\nAdded: would that come inbetween ""Libraries and filesystem"" and ""Controlling the scope of commands with locality attributes""?"
948860394,14718,herbelin,2021-10-21 17:45:50,coqbot-app,"Hey, I have detected that there were CI failures at commit cb2f2f7 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 37d25fa succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-equations, ci-fcsl_pcm."
948870016,14718,herbelin,2021-10-21 17:58:17,coqbot-app,"Hey, I have detected that there were CI failures at commit cb2f2f7 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 37d25fa succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-equations, ci-fcsl_pcm."
948871882,14718,herbelin,2021-10-21 18:00:58,Zimmi48,"Added: would that come inbetween ""Libraries and filesystem"" and ""Controlling the scope of commands with locality attributes""?\n\nYeah, that was my idea (though it would probably be part of the former)."
949913399,14718,herbelin,2021-10-22 19:39:40,herbelin,@ejgallego (or whoever knows about it): something strange happens with test-suite:edge:dune:dev. It seems to add two different directories for the Coq root:\nError: Required library Coq.Init.Logic matches several files in path (found\n/builds/coq/coq/_build/default/theories/Init/Logic.vo and\n/builds/coq/coq/_build/install/default/lib/coq/theories/Init/Logic.vo).
949952031,14718,herbelin,2021-10-22 20:51:28,ejgallego,@ejgallego (or whoever knows about it): something strange happens with test-suite:edge:dune:dev. It seems to add two different directories for the Coq root:\n\n@herbelin looking into it.
949952835,14718,herbelin,2021-10-22 20:53:10,herbelin,@herbelin looking into it.\n\nNo urgency and not a problem though for this PR. I added a List.uniquize.
949967364,14718,herbelin,2021-10-22 21:23:26,ejgallego,"No urgency and not a problem though for this PR. I added a List.uniquize.\n\nOk, thanks Hugo; I tried to reproduce the problem, but I could not; however, I found a file-system sensitive issue in the test suite, in my computer test-suite fails for the error messages:\n Theory3/Subtheory2/File1.vio: Theory3/Subtheory2/File1.v \n *** Warning: in file Theory3/File2.v, \n     required library File1 matches several files in path\n-    (found File1.v in Theory3/Subtheory2, Theory3/Subtheory1/Subsubtheory1, T"
949969961,14718,herbelin,2021-10-22 21:29:11,herbelin,"No urgency and not a problem though for this PR. I added a List.uniquize.\n\nOk, thanks Hugo; I tried to reproduce the problem, but I could not; however, I found a file-system sensitive issue in the test suite, in my computer test-suite fails for the error messages:\n Theory3/Subtheory2/File1.vio: Theory3/Subtheory2/File1.v \n *** Warning: in file Theory3/File2.v, \n     required library File1 matches several files in path\n-    (found File1.v in Theory3/Subtheory2, Theory3/Subtheory1/Subsubtheory1, T"
949984561,14718,herbelin,2021-10-22 22:04:39,ejgallego,Maybe we could normalize the files in the error messages?
949991026,14718,herbelin,2021-10-22 22:20:36,ejgallego,"The errors in the test suite are interesting, the file does (* -*- mode: coq; coq-prog-args: (""-nois"" ""-R"" ""../theories"" ""Coq"") -*- *) , however indeed Dune uses an explicit -nois -R dir Coq to actually have more control about the location of the library, if I recall correctly. So in this case, the argument gets duplicated.\nI think the fix is to remove this setting, at least for the test I looked at."
949991509,14718,herbelin,2021-10-22 22:21:48,ejgallego,The other errors are interesting as well.
949995568,14718,herbelin,2021-10-22 22:33:30,herbelin,"I think the fix is to remove this setting, at least for the test I looked at.\n\n\nThe other errors are interesting as well.\n\nYes. I'll try (again) to remove duplicates, but I can wait if you think the examples are worth being first addressed first."
950376748,14718,herbelin,2021-10-24 19:02:02,ejgallego,"Yes. I'll try (again) to remove duplicates, but I can wait if you think the examples are worth being first addressed first.\n\nI'm unsure what the best path is, but I'd advocate for going ahead now, I just tested and I don't get the test-suite errors anymore."
950379606,14718,herbelin,2021-10-24 19:19:23,herbelin,"@Zimmi48, I'm renouncing to move the doc of Require in another chapter. It will be better done by someone with a good overview of the manual.\nLooks otherwise good. I hope I forgot no important comments and that we can indeed go ahead.\nIt will need a last (short) smashing before merging though."
950484542,14718,herbelin,2021-10-25 03:05:48,jfehrle,"@herbelin If I'm not mistaken, it's possible for files loaded with -I to alias files loaded with -R or -Q (i.e. get the same dirpath).  IIUC this PR does not address that case.  (Loadpath.find_load_path can return anomaly_too_many_paths.)  It would be great if another PR could address that if my impression is correct.  If you wish."
950651570,14718,herbelin,2021-10-25 08:18:56,herbelin,"@herbelin If I'm not mistaken, it's possible for files loaded with -I to alias files loaded with -R or -Q (i.e. get the same dirpath). IIUC this PR does not address that case.\n\nHum, I'm not so familiar with the -I part of the code. It seems to me that -I is only for the OCaml files and that there are no interferences with -R/-Q but I may have missed a case where they interact.\n\n(Loadpath.find_load_path can return anomaly_too_many_paths.)\n\nLooking at Loadpath.find_load_path, it seems to be used t"
950866949,14718,herbelin,2021-10-25 12:18:08,Alizter,"Alright, will merge tonight if nobody objects"
950987414,14718,herbelin,2021-10-25 14:28:33,herbelin,"Alright, will merge tonight if nobody objects\n\nPlease wait for a last small smashing of commits (which I'll do tonight hopefully)."
952210006,14718,herbelin,2021-10-26 18:40:59,herbelin,Squashing done.
952391601,14718,herbelin,2021-10-26 23:00:08,Alizter,@coqbot merge now
884330753,12512,ppedrot,2021-07-21 16:38:32,coqbot-app,"Hey, I have detected that there were CI failures at commit 78002f5 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1e4f6b4 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-rewriter.\nHowever, you may want to wait until the pipeline for the base commit (1e4f6b4) finishes."
889314797,12512,ppedrot,2021-07-29 17:06:40,coqbot-app,"Hey, I have detected that there were CI failures at commit f3e416a without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit be32447 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-rewriter.\nHowever, you may want to wait until the pipeline for the base commit (be32447) finishes."
909311501,12512,ppedrot,2021-08-31 14:52:00,coqbot-app,"Hey, I have detected that there were CI failures at commit fa93758 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a4f3b64 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-category_theory, ci-rewriter."
909638687,12512,ppedrot,2021-08-31 21:07:07,ppedrot,@coqbot ci minimize
909638721,12512,ppedrot,2021-08-31 21:07:09,coqbot-app,"I have initiated minimization at commit fa93758 for the suggested targets ci-category_theory, ci-rewriter as requested."
909643095,12512,ppedrot,2021-08-31 21:12:31,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Lib/TList.v (from ci-category_theory) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.Bool.Bool.\nRequire Coq.Classes.CEquivalence.\nRe"
909815627,12512,ppedrot,2021-09-01 02:24:11,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/rewriter/src/Rewriter/Language/UnderLetsProofs.v (from ci-rewriter) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 65KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-patt"
909877021,12512,ppedrot,2021-09-01 04:37:28,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/rewriter/src/Rewriter/Language/UnderLetsProofs.v (from ci-rewriter) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 69KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+deprecated-hint-constr,+fragile-hint-constr,+variab"
870953512,13107,SkySkimmer,2021-06-29 22:12:09,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/external/stdpp/theories/vector.v (from ci-perennial) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-ssr-search-moved"" ""-w"" ""-deprecated-hint-without-locality"" ""-w"" ""-deprecated-instance-without-locality"" ""-w"" ""-deprecated-hint-rewrite-without-locality"" ""-w"" ""+deprecated-tactic-notation"" ""-w"" ""-notation-overridden,-redundant-c"
872406346,13107,SkySkimmer,2021-07-01 16:59:03,JasonGross,"COQPATH handling should be fixed in the minimizer, @coqbot ci minimize ci-cross_crypto"
872406443,13107,SkySkimmer,2021-07-01 16:59:09,coqbot-app,I am now running minimization at commit 7c15938 on requested target ci-cross_crypto. I'll come back to you with the results once it's done.
872424689,13107,SkySkimmer,2021-07-01 17:27:36,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/cross_crypto/src/Minimalistic.v (from ci-cross_crypto) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/cross_crypto/src"" ""CrossCrypto"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/cross_crypto/f"
872606675,13107,SkySkimmer,2021-07-01 23:17:40,JasonGross,"ci-tlc was an issue with mismatched absolute paths, should be fixed by coq-community/run-coq-bug-minimizer@c5073ca, so let's try again, @coqbot ci minimize ci-tlc"
872606710,13107,SkySkimmer,2021-07-01 23:17:44,coqbot-app,I am now running minimization at commit 7c15938 on requested target ci-tlc. I'll come back to you with the results once it's done.
872607681,13107,SkySkimmer,2021-07-01 23:20:18,JasonGross,"I bet the bedrock2 minimization issue is actually the same thing, so let's optimistically try @coqbot ci minimize ci-bedrock2"
872607702,13107,SkySkimmer,2021-07-01 23:20:22,coqbot-app,I am now running minimization at commit 7c15938 on requested target ci-bedrock2. I'll come back to you with the results once it's done.
872608253,13107,SkySkimmer,2021-07-01 23:22:00,coqbot-app,Error: Could not minimize file  (from ci-tlc) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 2.7MiB file on GitHub Actions Artifacts under build.log)\n inflating: _build_ci/tlc/src/LibWf.vos  \n  inflating: _build_ci/tlc/src/Makefile  \n  inflating: _build_ci/tlc/src/Makefile.coq  \n  inflating: _build_ci/tlc/src/open.sh  \n++ popd\n/github/workspace/builds/coq /github/workspace\n++ echo ::endgroup::\n::endgroup::\n++ echo '::group::wrap binaries'\n::group::wrap binaries\n++ for dir 
872609062,13107,SkySkimmer,2021-07-01 23:24:16,coqbot-app,Error: Could not minimize file  (from ci-bedrock2) (full log on GitHub Actions)\nbuild log (truncated to last 26KiB; full 3.4MiB file on GitHub Actions Artifacts under build.log)\nq_makefile != *.orig ]]\n++ [[ coq_makefile != *coqdep* ]]\n++ [[ coq_makefile != *coq_makefile* ]]\n++ for i in $(ls)\n++ wrap_file coqc\n++ local file=coqc\n++ [[ coqc != *.orig ]]\n++ [[ coqc != *coqdep* ]]\n++ [[ coqc != *coq_makefile* ]]\n++ [[ coqc != *coqchk* ]]\n++ '[' '!' -f coqc.orig ']'\n++ mv coqc coqc.orig\n++ cat\n++ ch
872629206,13107,SkySkimmer,2021-07-02 00:26:24,JasonGross,"Sorry, I missed some things in fixing minimization, but this should now work: @coqbot CI minimize ci-bedrock2 ci-tlc"
872629235,13107,SkySkimmer,2021-07-02 00:26:29,coqbot-app,"I am now running minimization at commit 7c15938 on requested targets ci-bedrock2, ci-tlc. I'll come back to you with the results once it's done."
872633626,13107,SkySkimmer,2021-07-02 00:39:37,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil/Map/Properties.v (from ci-bedrock2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil"" ""coqutil"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-fail"
872648442,13107,SkySkimmer,2021-07-02 01:28:51,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/tlc/src/LibFix.v (from ci-tlc) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-implicit-core-hint-db,-omega-is-deprecated"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/tlc/src"" ""TLC"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq"
872659908,13107,SkySkimmer,2021-07-02 02:07:40,JasonGross,"ci-bedrock2 was failing to fully minimize due to JasonGross/coq-tools#67, should be fixed by JasonGross/coq-tools@74f06c5, so let's try ci-bedrock2 one (hopefully) last time.  (Sorry again for all the noise.  Hopefully the test-cases that are successfully minimizing are worth it.)  @coqbot ci minimize ci-bedrock2"
872659927,13107,SkySkimmer,2021-07-02 02:07:44,coqbot-app,I am now running minimization at commit 7c15938 on requested target ci-bedrock2. I'll come back to you with the results once it's done.
872665027,13107,SkySkimmer,2021-07-02 02:22:08,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil/Map/Properties.v (from ci-bedrock2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil"" ""coqutil"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-fail"
873275203,13107,SkySkimmer,2021-07-02 21:57:21,JasonGross,"With a bit of manual help to work around #14587, ci-bedrock2 now minimizes!\nMinimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil/Map/Properties.v (from ci-bedrock2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/deps/coqutil/src/coqutil"" ""coqutil"" ""-"
873329661,13107,SkySkimmer,2021-07-03 02:20:01,JasonGross,"Finally tracked down the native compiler issue; it was me forgetting to run eval $(opam env) in the actual script invoking the bug minimizer.   Fixed by coq-community/run-coq-bug-minimizer@8244ace, so now we can have @coqbot ci minimize ci-coq_performance_tests"
873329671,13107,SkySkimmer,2021-07-03 02:20:06,coqbot-app,I am now running minimization at commit 7c15938 on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
873330611,13107,SkySkimmer,2021-07-03 02:28:22,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-notation-overridden,-undeclared-scope"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments"" "
848807189,13969,mattam82,2021-05-26 14:16:08,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/external/iris/iris/algebra/ofe.v (from ci-perennial) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/perennial/src"" ""Perennial"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/perennial/external/stdpp/theories"" ""stdpp"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/pere"
848808304,13969,mattam82,2021-05-26 14:17:33,robbertkrebbers,"I think ! should only disallow ?X t1 ... tn, up to casts. But that change might have quite some impact, I'll make a PR to test.\n\nThat seems reasonable. The current approach where projections are treated specially is kind of odd.\nI have no intuition about the impact of this change."
848809847,13969,mattam82,2021-05-26 14:19:23,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/quickchick/src/Sets.v (from ci-quickchick) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/quickchick/src"" ""QuickChick"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/ExtLib"" ""ExtLib"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Lt"
848815266,13969,mattam82,2021-05-26 14:26:22,JasonGross,"quick chick minimization seems to have worked, I'll have to debug what's up with the other ones"
848849003,13969,mattam82,2021-05-26 15:06:33,mattam82,"@robbertkrebbers it was special for projections and cases (the scrutinees were used in both cases). PR #14392 fixes that, let's see how it fares on the CI."
849608013,13969,mattam82,2021-05-27 12:51:53,JasonGross,"Iris minimization now works:\nMinimized File /github/workspace/builds/coq/coq-failing/_build_ci/iris/iris/algebra/ofe.v (from ci-iris) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/iris/iris/prelude"" ""iris.prelude"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/iris/iris/algebra"" ""iris.algebra"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/i"
849842962,13969,mattam82,2021-05-27 18:19:51,JasonGross,"Equations minimization now works (after fixing a mismatch between byte locations and character locations):\nMinimized File /github/workspace/builds/coq/coq-failing/_build_ci/equations/examples/AlmostFull.v (from ci-equations) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/equations/theories"" ""Equations"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/equ"
850539570,13969,mattam82,2021-05-28 16:39:55,JasonGross,"Perennial minimization now works.  fourcolor minimization is blocked on my figuring out how to handle Windows line endings on Linux (there are files checked in with \r\n line endings, coq reports locations in bytes, which means that reading the files in as text won't work).\nMinimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/external/iris/iris/algebra/ofe.v (from ci-perennial) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-Q"" "
850667040,13969,mattam82,2021-05-28 20:59:37,JasonGross,"And now fourcolor is minimizable too:\nMinimized File /github/workspace/builds/coq/coq-failing/_build_ci/fourcolor/theories/realcategorical.v (from ci-fourcolor) (full log on GitHub Actions)\nMinimized Coq File\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/fourcolor/theories"" ""fourcolor"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-Q"" ""/github/workspace/build"
853937582,13969,mattam82,2021-06-03 15:00:44,mattam82,"@JasonGross Again, really helpful job from the minimizer, thanks!"
854038337,13969,mattam82,2021-06-03 17:11:10,JasonGross,Glad it's useful!  Are any of the reduced files good candidates for the test-suite?
854082591,13969,mattam82,2021-06-03 18:22:16,coqbot-app,"Hey, I have detected that there were CI failures at commit f0d4b0d without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 9eb622b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following target: ci-perennial."
854919137,13969,mattam82,2021-06-04 18:23:04,mattam82,"Glad it's useful! Are any of the reduced files good candidates for the test-suite?\n\nI integrated some already, indeed they're great for that as well."
873319549,14579,JasonGross,2021-07-03 01:00:10,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
873320508,14579,JasonGross,2021-07-03 01:05:58,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq."
873320743,14579,JasonGross,2021-07-03 01:07:39,JasonGross,@coqbot ci minimize ci-coq_performance_tests
873320754,14579,JasonGross,2021-07-03 01:07:42,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
873321484,14579,JasonGross,2021-07-03 01:13:29,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq."
873325839,14579,JasonGross,2021-07-03 01:48:40,JasonGross,@coqbot ci minimize ci-coq_performance_tests
873325841,14579,JasonGross,2021-07-03 01:48:43,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
873326424,14579,JasonGross,2021-07-03 01:54:03,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq."
873328550,14579,JasonGross,2021-07-03 02:11:02,JasonGross,@coqbot ci minimize ci-coq_performance_tests
873328559,14579,JasonGross,2021-07-03 02:11:05,coqbot-app,I am now running minimization at commit c6473ba on requested target ci-coq_performance_tests. I'll come back to you with the results once it's done.
873329472,14579,JasonGross,2021-07-03 02:18:25,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments/rewrite_lift_lets_map.v (from ci-coq_performance_tests) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-notation-overridden,-undeclared-scope"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/coq_performance_tests/PerformanceExperiments"" "
874409406,14579,JasonGross,2021-07-06 02:11:03,coqbot-app,"Hey, I have detected that there were CI failures at commit d46ec0b without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 8560c27 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-argosy, ci-compcert."
874963082,14579,JasonGross,2021-07-06 17:51:38,JasonGross,@coqbot ci minimize ci-compcert
874963146,14579,JasonGross,2021-07-06 17:51:44,coqbot-app,I am now running minimization at commit d46ec0b on requested target ci-compcert. I'll come back to you with the results once it's done.
874992113,14579,JasonGross,2021-07-06 18:36:12,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/compcert/common/Unityping.v (from ci-compcert) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-undeclared-scope"" ""-w"" ""-omega-is-deprecated"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/lib"" ""compcert.lib"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/common"" ""compcert.common"" ""-R"" ""/github/"
875015310,14579,JasonGross,2021-07-06 19:12:12,JasonGross,"@coqbot resume ci minimize ci-compcert\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-undeclared-scope"" ""-w"" ""-omega-is-deprecated"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/lib"" ""compcert.lib"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/common"" ""compcert.common"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/x86_32"" ""compcert.x86_32"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/x86"" ""compcert.x86"" ""-R"""
875015356,14579,JasonGross,2021-07-06 19:12:16,coqbot-app,I am now resuming minimization at commit d46ec0b on requested target ci-compcert. I'll come back to you with the results once it's done.
875029519,14579,JasonGross,2021-07-06 19:36:35,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/compcert/common/Unityping.v (from ci-compcert) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-undeclared-scope"" ""-w"" ""-omega-is-deprecated"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/lib"" ""compcert.lib"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/compcert/common"" ""compcert.common"" ""-R"" ""/github/"
891252639,14579,JasonGross,2021-08-02 18:50:42,JasonGross,Now targeting #14722
891367805,14579,JasonGross,2021-08-02 22:11:00,JasonGross,@coqbot ci minimize ci-fiat_crypto
891367875,14579,JasonGross,2021-08-02 22:11:07,coqbot-app,I am now running minimization at commit 6bb57d8 on requested target ci-fiat_crypto. I'll come back to you with the results once it's done.
891490623,14579,JasonGross,2021-08-03 03:27:59,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Curves/Weierstrass/Projective.v (from ci-fiat_crypto) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 44KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pa"
891528663,14579,JasonGross,2021-08-03 05:04:14,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Curves/Weierstrass/Projective.v (from ci-fiat_crypto) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 38KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+variable-collision,+omega-is-deprecated,+deprecat"
891853958,14579,JasonGross,2021-08-03 13:37:28,coqbot-app,"Hey, I have detected that there were CI failures at commit 0e84f00 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 7c3f597 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-color, ci-coq_tools, ci-fiat_crypto, ci-fiat_parsers, ci-math_classes, ci-perennial."
892170908,14579,JasonGross,2021-08-03 21:14:19,JasonGross,@coqbot ci-minimize ci-color ci-perennial ci-fiat_crypto
892170946,14579,JasonGross,2021-08-03 21:14:23,coqbot-app,"I am now running minimization at commit 0e84f00 on requested targets ci-color, ci-perennial, ci-fiat_crypto. I'll come back to you with the results once it's done."
892174014,14579,JasonGross,2021-08-03 21:20:06,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/perennial/src/goose_lang/lib/persistent_readonly.v (from ci-perennial) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\nDeclare ML Module ""ltac_plugin"".\nModule Export AdmitTactic.\nModule Import LocalFalse.\nInductive False := .\nEnd LocalFalse.\nAxiom proof_admitted : False.\nTactic Notation ""admit"" := abstract case proof_admitted.\nEnd AdmitTactic.\nRequire Coq.QArith.Qcanon.\nRequire Coq.ssr"
892270989,14579,JasonGross,2021-08-04 00:49:59,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/color/Term/Lambda/LComp.v (from ci-color) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/color"" ""CoLoR"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Bignums"" ""Bignums"" ""-"
892311624,14579,JasonGross,2021-08-04 02:31:13,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Curves/Weierstrass/Projective.v (from ci-fiat_crypto) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 36KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pa"
892338308,14579,JasonGross,2021-08-04 03:45:33,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Curves/Weierstrass/Projective.v (from ci-fiat_crypto) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 34KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+variable-collision,+omega-is-deprecated,+deprecat"
898915039,14579,JasonGross,2021-08-14 16:26:51,coqbot-app,"Hey, I have detected that there were CI failures at commit 559eb8c without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit 1a0460b succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-bedrock2, ci-fiat_crypto."
898929356,14579,JasonGross,2021-08-14 16:52:55,JasonGross,@coqbot ci minimize
898929363,14579,JasonGross,2021-08-14 16:52:57,coqbot-app,"I have initiated minimization at commit 559eb8c for the suggested targets ci-bedrock2, ci-fiat_crypto as requested."
898964193,14579,JasonGross,2021-08-14 22:09:47,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Curves/Weierstrass/Projective.v (from ci-fiat_crypto) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 46KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pa"
898964195,14579,JasonGross,2021-08-14 22:09:47,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscv.v (from ci-bedrock2) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor"" ""pro"
898971348,14579,JasonGross,2021-08-14 23:40:50,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_crypto/src/Curves/Weierstrass/Projective.v (from ci-fiat_crypto) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 38KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+implicit-core-hint-db,+implicits-in-term,+non-reversible-notation,+deprecated-intros-until-0,+deprecated-focus,+unused-intro-pattern,+variable-collision,+omega-is-deprecated,+deprecat"
898982259,14579,JasonGross,2021-08-15 01:47:43,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor/KamiRiscv.v (from ci-bedrock2) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_build_ci/bedrock2/processor/src/processor"" ""processor"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_"
920521322,14579,JasonGross,2021-09-16 02:16:01,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
945307909,14579,JasonGross,2021-10-18 02:18:33,coqbot-app,"The ""needs: rebase"" label was set more than 30 days ago. If the PR is not rebased in 30 days, it will be automatically closed."
947014756,14579,JasonGross,2021-10-19 18:53:45,JasonGross,Now testing #14798
947134983,14579,JasonGross,2021-10-19 21:54:24,coqbot-app,"Hey, I have detected that there were CI failures at commit 7a735a4 without any failure in the test-suite.\nI checked that the corresponding jobs for the base commit a14a8e2 succeeded. You can ask me to try to extract a minimal test case from this so that it can be added to the test-suite.\nIf you tag me saying @coqbot ci minimize, I will minimize the following targets: ci-argosy, ci-elpi, ci-fiat_parsers, ci-hott, ci-verdi_raft, ci-vst."
947222470,14579,JasonGross,2021-10-20 01:06:05,JasonGross,@coqbot ci minimize
947222520,14579,JasonGross,2021-10-20 01:06:12,coqbot-app,"I have initiated minimization at commit 7a735a4 for the suggested targets ci-argosy, ci-elpi, ci-fiat_parsers, ci-hott, ci-verdi_raft, ci-vst as requested."
947224975,14579,JasonGross,2021-10-20 01:12:47,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/elpi/tests/test_quotation.v (from ci-elpi) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""+elpi.deprecated"" ""-bt"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/wor"
947237739,14579,JasonGross,2021-10-20 01:40:27,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/fiat_parsers/src/ADTRefinement/SetoidMorphisms.v (from ci-fiat_parsers) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-w"" ""-deprecated-"
947239403,14579,JasonGross,2021-10-20 01:45:39,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/hott/theories/Colimits/Sequential.v (from ci-hott) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-noinit"" ""-indices-matter"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/gith"
947261717,14579,JasonGross,2021-10-20 02:25:34,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/verdi_raft/raft-proofs/RaftRefinementProof.v (from ci-verdi_raft) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 44KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-"
947274621,14579,JasonGross,2021-10-20 02:51:21,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/argosy/src/Examples/Logging/HoareProof.v (from ci-argosy) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/co"
947345026,14579,JasonGross,2021-10-20 05:39:18,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/vst/veric/juicy_extspec.v (from ci-vst) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-w"" ""-deprecated-native-compiler-option"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/worksp"
953745431,14748,JasonGross,2021-10-28 11:12:42,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-"
953745550,14748,JasonGross,2021-10-28 11:12:53,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 78KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog"
954008511,14748,JasonGross,2021-10-28 16:29:41,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-"
954008739,14748,JasonGross,2021-10-28 16:30:04,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 106KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-pro"
954247309,14748,JasonGross,2021-10-28 21:46:46,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-"
954247428,14748,JasonGross,2021-10-28 21:46:59,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 50KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog"
954378090,14748,JasonGross,2021-10-29 03:03:44,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 149KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-pro"
954378209,14748,JasonGross,2021-10-29 03:03:48,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-"
954546977,14748,JasonGross,2021-10-29 08:20:42,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 64KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-ambi"
954547078,14748,JasonGross,2021-10-29 08:20:53,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/category_theory"" ""Category"" ""-Q"" ""/github/workspace/cwd"" ""Top"" "
954751404,14748,JasonGross,2021-10-29 13:37:38,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 140KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-amb"
954751718,14748,JasonGross,2021-10-29 13:38:03,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/category_theory"" ""Category"" ""-Q"" ""/github/workspace/cwd"" ""Top"" "
954974971,14748,JasonGross,2021-10-29 18:54:42,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 107KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-amb"
954975247,14748,JasonGross,2021-10-29 18:55:11,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/category_theory"" ""Category"" ""-Q"" ""/github/workspace/cwd"" ""Top"" "
955109445,14748,JasonGross,2021-10-30 00:11:43,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 159KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-amb"
955109561,14748,JasonGross,2021-10-30 00:12:09,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/category_theory"" ""Category"" ""-Q"" ""/github/workspace/cwd"" ""Top"" "
955151676,14748,JasonGross,2021-10-30 05:28:38,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 96KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-ambi"
955151762,14748,JasonGross,2021-10-30 05:29:22,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/category_theory"" ""Category"" ""-Q"" ""/github/workspace/cwd"" ""Top"" "
955189062,14748,JasonGross,2021-10-30 10:45:50,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (truncated to 32KiB; full 104KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constant"" ""-w"" ""-redundant-canonical-projection"" ""-w"" ""-notation-overridden"" ""-w"" ""+duplicate-clear"" ""-w"" ""-amb"
955189115,14748,JasonGross,2021-10-30 10:46:23,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (interrupted by timeout, being automatically continued) (full log on GitHub Actions)\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/category_theory"" ""Category"" ""-Q"" ""/github/workspace/cwd"" ""Top"" "
955362956,14748,JasonGross,2021-10-30 15:48:01,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/mathcomp/mathcomp/character/mxrepresentation.v (from ci-mathcomp) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (truncated to 32KiB; full 103KiB file on GitHub Actions Artifacts under bug.v)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-projection-no-head-constan"
955371910,14748,JasonGross,2021-10-30 15:53:18,Zimmi48,"@JasonGross I've stopped the minimization of category-theory, because it looks like we're in an infinite loop (where each new run produces the same file again and again)."
955624497,14748,JasonGross,2021-10-31 02:14:17,JasonGross,"@coqbot resume ci minimize ci-category_theory\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/category_theory"" ""Category"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Equations"" ""Equations"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Ltac2"" ""Ltac2"" ""-top"" ""bug_01"" ""-native-compiler"" ""no"") -*- *"
955624500,14748,JasonGross,2021-10-31 02:14:19,coqbot-app,I am now resuming minimization at commit ef16241 on requested target ci-category_theory. I'll come back to you with the results once it's done.
955624673,14748,JasonGross,2021-10-31 02:16:28,JasonGross,(resumed minimization on a slightly smaller file to see if it can make progress when I strip out some of the code)
955624904,14748,JasonGross,2021-10-31 02:19:14,coqbot-app,"Minimized File /github/workspace/builds/coq/coq-failing/_build_ci/category_theory/Instance/Cat/Cartesian/Closed.v (from ci-category_theory) (full log on GitHub Actions)\nWe are collecting data on the user experience of the Coq Bug Minimizer.\nIf you haven't already filled the survey for this PR, please fill out our short survey!\nMinimized Coq File (consider adding this file to the test-suite)\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/wo"
955625528,14748,JasonGross,2021-10-31 02:27:41,JasonGross,"@coqbot minimize\ngit clone https://github.com/jwiegley/category-theory\nexport COQEXTRAFLAGS='-native-compiler no'\n( cd ""category-theory""\n  make\n  make install\n)\ncat > bug.v <<'_EOF'\n(* -*- mode: coq; coq-prog-args: (""-emacs"" ""-q"" ""-w"" ""-deprecated-native-compiler-option"" ""-R"" ""/github/workspace/builds/coq/coq-failing/_build_ci/category_theory"" ""Category"" ""-Q"" ""/github/workspace/cwd"" ""Top"" ""-Q"" ""/github/workspace/builds/coq/coq-failing/_install_ci/lib/coq/user-contrib/Equations"" ""Equations"" ""-Q"" "
955625532,14748,JasonGross,2021-10-31 02:27:42,coqbot-app,"Hey @JasonGross, the coq bug minimizer is running your script, I'll come back to you with the results once it's done."
